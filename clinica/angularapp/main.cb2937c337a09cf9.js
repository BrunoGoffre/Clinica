var m2=Object.defineProperty,y2=Object.defineProperties,_2=Object.getOwnPropertyDescriptors,KO=Object.getOwnPropertySymbols,v2=Object.prototype.hasOwnProperty,w2=Object.prototype.propertyIsEnumerable,YO=(Ye,we,R)=>we in Ye?m2(Ye,we,{enumerable:!0,configurable:!0,writable:!0,value:R}):Ye[we]=R,QO=(Ye,we)=>{for(var R in we||(we={}))v2.call(we,R)&&YO(Ye,R,we[R]);if(KO)for(var R of KO(we))w2.call(we,R)&&YO(Ye,R,we[R]);return Ye},JO=(Ye,we)=>y2(Ye,_2(we));(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{2011:(Ye,we,R)=>{"use strict";R.d(we,{Dh:()=>ae,GT:()=>he,cc:()=>be,hO:()=>Re,on:()=>U,pX:()=>ne,xv:()=>le});var d=R(5e3),Z=R(127),N=R(5813);Ye=R.hmd(Ye);const se=["ngOnDestroy"],ne=(Ie,$e,qe,Ae={})=>new Proxy(Ie,{get:(Ce,Te)=>qe.runOutsideAngular(()=>{var je;if(Ie[Te])return(null===(je=null==Ae?void 0:Ae.spy)||void 0===je?void 0:je.get)&&Ae.spy.get(Te,Ie[Te]),Ie[Te];if(se.indexOf(Te)>-1)return()=>{};const Be=$e.toPromise().then(H=>{const Ee=H&&H[Te];return"function"==typeof Ee?Ee.bind(H):Ee&&Ee.then?Ee.then(Y=>qe.run(()=>Y)):qe.run(()=>Ee)});return new Proxy(()=>{},{get:(H,Ee)=>Be[Ee],apply:(H,Ee,Y)=>Be.then(ie=>{var te;const _e=ie&&ie(...Y);return(null===(te=null==Ae?void 0:Ae.spy)||void 0===te?void 0:te.apply)&&Ae.spy.apply(Te,Y,_e),_e})})})}),he=(Ie,$e)=>{$e.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(Ae=>{Object.defineProperty(Ie.prototype,Ae,Object.getOwnPropertyDescriptor(qe.prototype||qe,Ae))})})};class oe{constructor($e){return $e}}const ae=new d.OlP("angularfire2.app.options"),le=new d.OlP("angularfire2.app.name");function U(Ie,$e,qe){const Ce="object"==typeof qe&&qe||{};Ce.name=Ce.name||"string"==typeof qe&&qe||"[DEFAULT]";const je=Z.Z.apps.filter(Be=>Be&&Be.name===Ce.name)[0]||$e.runOutsideAngular(()=>Z.Z.initializeApp(Ie,Ce));try{JSON.stringify(Ie)!==JSON.stringify(je.options)&&V("error",`${je.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new oe(je)}const V=(Ie,...$e)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ie](...$e)},X={provide:oe,useFactory:U,deps:[ae,d.R0b,[new d.FiY,le]]};let Re=(()=>{class Ie{constructor(qe){Z.Z.registerVersion("angularfire",N.q4.full,"core"),Z.Z.registerVersion("angularfire",N.q4.full,"app-compat"),Z.Z.registerVersion("angular",d.q4F.full,qe.toString())}static initializeApp(qe,Ae){return{ngModule:Ie,providers:[{provide:ae,useValue:qe},{provide:le,useValue:Ae}]}}}return Ie.\u0275fac=function(qe){return new(qe||Ie)(d.LFG(d.Lbi))},Ie.\u0275mod=d.oAB({type:Ie}),Ie.\u0275inj=d.cJS({providers:[X]}),Ie})();function be(Ie,$e,qe,Ae,Ce){const[,Te,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ie)||[];if(Te)return function Ne(Ie,$e){try{return Ie.toString()===$e.toString()}catch(qe){return Ie===$e}}(Ce,je)||(de("error",`${$e} was already initialized on the ${qe} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:Ce,was:je})),Te;{const Be=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Be,Ce]),Be}}const Ue=!!Ye.hot,de=(Ie,...$e)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ie](...$e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ye,we,R)=>{"use strict";R.d(we,{q4:()=>Za,iC:()=>Cf,fc:()=>hr,HU:()=>Ld,vb:()=>Ng,JM:()=>da});var d=R(5e3),Z=R(5867),N=R(5861),se=R(9681),ne=R(2090),he=R(4859),oe=R(1877),ae=R(8766);const le="@firebase/installations",U="0.5.9",X=`w:${U}`,Re="FIS_v2",$e=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qe(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ce(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function Te(I,T){return je.apply(this,arguments)}function je(){return(je=(0,N.Z)(function*(I,T){const L=(yield T.json()).error;return $e.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Be({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function H(I,{refreshToken:T}){const P=Be(I);return P.append("Authorization",function te(I){return`${Re} ${I}`}(T)),P}function Ee(I){return Y.apply(this,arguments)}function Y(){return(Y=(0,N.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function _e(I,T){return ue.apply(this,arguments)}function ue(){return(ue=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:P}){const L=Ae(I),Q=Be(I),re=T.getImmediate({optional:!0});if(re){const ht=yield re.getHeartbeatsHeader();ht&&Q.append("x-firebase-client",ht)}const Qe={method:"POST",headers:Q,body:JSON.stringify({fid:P,authVersion:Re,appId:I.appId,sdkVersion:X})},it=yield Ee(()=>fetch(L,Qe));if(it.ok){const ht=yield it.json();return{fid:ht.fid||P,registrationStatus:2,refreshToken:ht.refreshToken,authToken:Ce(ht.authToken)}}throw yield Te("Create Installation",it)})).apply(this,arguments)}function ke(I){return new Promise(T=>{setTimeout(T,I)})}const $t=/^[cdef][\w-]{21}$/;function We(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const P=function Xt(I){return function dt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return $t.test(P)?P:""}catch(I){return""}}function En(I){return`${I.appName}!${I.appId}`}const nn=new Map;function Kt(I,T){const P=En(I);Lt(P,T),function os(I,T){const P=function wr(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=I=>{Lt(I.data.key,I.data.fid)}),ci}();P&&P.postMessage({key:I,fid:T}),function Nr(){0===nn.size&&ci&&(ci.close(),ci=null)}()}(P,T)}function Lt(I,T){const P=nn.get(I);if(P)for(const L of P)L(T)}let ci=null;const di="firebase-installations-store";let Ai=null;function yt(){return Ai||(Ai=(0,ae.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(di)}})),Ai}function hi(I,T){return vn.apply(this,arguments)}function vn(){return(vn=(0,N.Z)(function*(I,T){const P=En(I),Q=(yield yt()).transaction(di,"readwrite"),re=Q.objectStore(di),me=yield re.get(P);return yield re.put(T,P),yield Q.done,(!me||me.fid!==T.fid)&&Kt(I,T.fid),T})).apply(this,arguments)}function bn(I){return oo.apply(this,arguments)}function oo(){return(oo=(0,N.Z)(function*(I){const T=En(I),L=(yield yt()).transaction(di,"readwrite");yield L.objectStore(di).delete(T),yield L.done})).apply(this,arguments)}function fi(I,T){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,N.Z)(function*(I,T){const P=En(I),Q=(yield yt()).transaction(di,"readwrite"),re=Q.objectStore(di),me=yield re.get(P),Qe=T(me);return void 0===Qe?yield re.delete(P):yield re.put(Qe,P),yield Q.done,Qe&&(!me||me.fid!==Qe.fid)&&Kt(I,Qe.fid),Qe})).apply(this,arguments)}function Sn(I){return Si.apply(this,arguments)}function Si(){return(Si=(0,N.Z)(function*(I){let T;const P=yield fi(I.appConfig,L=>{const Q=Go(L),re=Ht(I,Q);return T=re.registrationPromise,re.installationEntry});return""===P.fid?{installationEntry:yield T}:{installationEntry:P,registrationPromise:T}})).apply(this,arguments)}function Go(I){return ao(I||{fid:We(),registrationStatus:0})}function Ht(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject($e.create("app-offline"))};const P={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function ut(I,T){return vt.apply(this,arguments)}(I,P);return{installationEntry:P,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Er(I)}:{installationEntry:T}}function vt(){return(vt=(0,N.Z)(function*(I,T){try{const P=yield _e(I,T);return hi(I.appConfig,P)}catch(P){throw qe(P)&&409===P.customData.serverCode?yield bn(I.appConfig):yield hi(I.appConfig,{fid:T.fid,registrationStatus:0}),P}})).apply(this,arguments)}function Er(I){return pi.apply(this,arguments)}function pi(){return(pi=(0,N.Z)(function*(I){let T=yield Bt(I.appConfig);for(;1===T.registrationStatus;)yield ke(100),T=yield Bt(I.appConfig);if(0===T.registrationStatus){const{installationEntry:P,registrationPromise:L}=yield Sn(I);return L||P}return T})).apply(this,arguments)}function Bt(I){return fi(I,T=>{if(!T)throw $e.create("installation-not-found");return ao(T)})}function ao(I){return function br(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Cr(I,T){return B.apply(this,arguments)}function B(){return(B=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:T},P){const L=q(I,P),Q=H(I,P),re=T.getImmediate({optional:!0});if(re){const ht=yield re.getHeartbeatsHeader();ht&&Q.append("x-firebase-client",ht)}const Qe={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:X,appId:I.appId}})},it=yield Ee(()=>fetch(L,Qe));if(it.ok)return Ce(yield it.json());throw yield Te("Generate Auth Token",it)})).apply(this,arguments)}function q(I,{fid:T}){return`${Ae(I)}/${T}/authTokens:generate`}function W(I){return De.apply(this,arguments)}function De(){return(De=(0,N.Z)(function*(I,T=!1){let P;const L=yield fi(I.appConfig,re=>{if(!It(re))throw $e.create("not-registered");const me=re.authToken;if(!T&&cn(me))return re;if(1===me.requestStatus)return P=G(I,T),re;{if(!navigator.onLine)throw $e.create("app-offline");const Qe=Vn(re);return P=Je(I,Qe),Qe}});return P?yield P:L.authToken})).apply(this,arguments)}function G(I,T){return ee.apply(this,arguments)}function ee(){return(ee=(0,N.Z)(function*(I,T){let P=yield Oe(I.appConfig);for(;1===P.authToken.requestStatus;)yield ke(100),P=yield Oe(I.appConfig);const L=P.authToken;return 0===L.requestStatus?W(I,T):L})).apply(this,arguments)}function Oe(I){return fi(I,T=>{if(!It(T))throw $e.create("not-registered");return function kr(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Je(I,T){return gt.apply(this,arguments)}function gt(){return(gt=(0,N.Z)(function*(I,T){try{const P=yield Cr(I,T),L=Object.assign(Object.assign({},T),{authToken:P});return yield hi(I.appConfig,L),P}catch(P){if(!qe(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield hi(I.appConfig,L)}else yield bn(I.appConfig);throw P}})).apply(this,arguments)}function It(I){return void 0!==I&&2===I.registrationStatus}function cn(I){return 2===I.requestStatus&&!function Et(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function Vn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Oa(){return(Oa=(0,N.Z)(function*(I){const T=I,{installationEntry:P,registrationPromise:L}=yield Sn(T);return L?L.catch(console.error):W(T).catch(console.error),P.fid})).apply(this,arguments)}function Ra(){return(Ra=(0,N.Z)(function*(I,T=!1){const P=I;return yield Un(P),(yield W(P,T)).token})).apply(this,arguments)}function Un(I){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,N.Z)(function*(I){const{registrationPromise:T}=yield Sn(I);T&&(yield T)})).apply(this,arguments)}function qo(I){return $e.create("missing-app-config-values",{valueName:I})}const Zr="installations",ct=I=>{const T=I.getProvider("app").getImmediate(),P=function ar(I){if(!I||!I.options)throw qo("App Configuration");if(!I.name)throw qo("App Name");const T=["projectId","apiKey","appId"];for(const P of T)if(!I.options[P])throw qo(P);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:P,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},en=I=>{const T=I.getProvider("app").getImmediate(),P=(0,se._getProvider)(T,Zr).getImmediate();return{getId:()=>function wu(I){return Oa.apply(this,arguments)}(P),getToken:Q=>function Eu(I){return Ra.apply(this,arguments)}(P,Q)}};(function Wr(){(0,se._registerComponent)(new he.wA(Zr,ct,"PUBLIC")),(0,se._registerComponent)(new he.wA("installations-internal",en,"PRIVATE"))})(),(0,se.registerVersion)(le,U),(0,se.registerVersion)(le,U,"esm2017");const Vi="@firebase/remote-config",Cn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cg{constructor(T,P,L,Q){this.client=T,this.storage=P,this.storageCache=L,this.logger=Q}isCachedDataFresh(T,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-P,Q=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var P=this;return(0,N.Z)(function*(){const[L,Q]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(Q&&P.isCachedDataFresh(T.cacheMaxAgeMillis,L))return Q;T.eTag=Q&&Q.eTag;const re=yield P.client.fetch(T),me=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&me.push(P.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(me),re})()}}function fd(I=navigator){return I.languages&&I.languages[0]||I.language}class Ir{constructor(T,P,L,Q,re,me){this.firebaseInstallations=T,this.sdkVersion=P,this.namespace=L,this.projectId=Q,this.apiKey=re,this.appId=me}fetch(T){var P=this;return(0,N.Z)(function*(){const[L,Q]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},it={sdk_version:P.sdkVersion,app_instance_id:L,app_instance_id_token:Q,app_id:P.appId,language_code:fd()},ht={method:"POST",headers:Qe,body:JSON.stringify(it)},Gt=fetch(me,ht),Dt=new Promise((Mr,ws)=>{T.signal.addEventListener(()=>{const Js=new Error("The operation was aborted.");Js.name="AbortError",ws(Js)})});let Nn;try{yield Promise.race([Gt,Dt]),Nn=yield Gt}catch(Mr){let ws="fetch-client-network";throw"AbortError"===Mr.name&&(ws="fetch-timeout"),Cn.create(ws,{originalErrorMessage:Mr.message})}let er=Nn.status;const vs=Nn.headers.get("ETag")||void 0;let Qi,Ni;if(200===Nn.status){let Mr;try{Mr=yield Nn.json()}catch(ws){throw Cn.create("fetch-client-parse",{originalErrorMessage:ws.message})}Qi=Mr.entries,Ni=Mr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ni?er=500:"NO_CHANGE"===Ni?er=304:("NO_TEMPLATE"===Ni||"EMPTY_CONFIG"===Ni)&&(Qi={}),304!==er&&200!==er)throw Cn.create("fetch-status",{httpStatus:er});return{status:er,eTag:vs,config:Qi}})()}}class Ig{constructor(T,P){this.client=T,this.storage=P}fetch(T){var P=this;return(0,N.Z)(function*(){const L=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:P,backoffCount:L}){var Q=this;return(0,N.Z)(function*(){yield function Vs(I,T){return new Promise((P,L)=>{const Q=Math.max(T-Date.now(),0),re=setTimeout(P,Q);I.addEventListener(()=>{clearTimeout(re),L(Cn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,P);try{const re=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),re}catch(re){if(!function pd(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const me={throttleEndTimeMillis:Date.now()+(0,ne.$s)(L),backoffCount:L+1};return yield Q.storage.setThrottleMetadata(me),Q.attemptFetch(T,me)}})()}}class gd{constructor(T,P,L,Q,re){this.app=T,this._client=P,this._storageCache=L,this._storage=Q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kl(I,T){const P=I.target.error||void 0;return Cn.create(T,{originalErrorMessage:P&&P.message})}const Us="app_namespace_store";class Sg{constructor(T,P,L,Q=function Ag(){return new Promise((I,T)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=L=>{T(kl(L,"storage-open"))},P.onsuccess=L=>{I(L.target.result)},P.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Us,{keyPath:"compositeKey"})}}catch(P){T(Cn.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=T,this.appName=P,this.namespace=L,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var P=this;return(0,N.Z)(function*(){const L=yield P.openDbPromise;return new Promise((Q,re)=>{const Qe=L.transaction([Us],"readonly").objectStore(Us),it=P.createCompositeKey(T);try{const ht=Qe.get(it);ht.onerror=Gt=>{re(kl(Gt,"storage-get"))},ht.onsuccess=Gt=>{const Dt=Gt.target.result;Q(Dt?Dt.value:void 0)}}catch(ht){re(Cn.create("storage-get",{originalErrorMessage:ht&&ht.message}))}})})()}set(T,P){var L=this;return(0,N.Z)(function*(){const Q=yield L.openDbPromise;return new Promise((re,me)=>{const it=Q.transaction([Us],"readwrite").objectStore(Us),ht=L.createCompositeKey(T);try{const Gt=it.put({compositeKey:ht,value:P});Gt.onerror=Dt=>{me(kl(Dt,"storage-set"))},Gt.onsuccess=()=>{re()}}catch(Gt){me(Cn.create("storage-set",{originalErrorMessage:Gt&&Gt.message}))}})})()}delete(T){var P=this;return(0,N.Z)(function*(){const L=yield P.openDbPromise;return new Promise((Q,re)=>{const Qe=L.transaction([Us],"readwrite").objectStore(Us),it=P.createCompositeKey(T);try{const ht=Qe.delete(it);ht.onerror=Gt=>{re(kl(Gt,"storage-delete"))},ht.onsuccess=()=>{Q()}}catch(ht){re(Cn.create("storage-delete",{originalErrorMessage:ht&&ht.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class yd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const P=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),re=yield P;re&&(T.lastFetchStatus=re);const me=yield L;me&&(T.lastSuccessfulFetchTimestampMillis=me);const Qe=yield Q;Qe&&(T.activeConfig=Qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Tu(){return _d.apply(this,arguments)}function _d(){return(_d=(0,N.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}!function zo(){(0,se._registerComponent)(new he.wA("remote-config",function I(T,{instanceIdentifier:P}){const L=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Cn.create("registration-window");if(!(0,ne.hl)())throw Cn.create("indexed-db-unavailable");const{projectId:re,apiKey:me,appId:Qe}=L.options;if(!re)throw Cn.create("registration-project-id");if(!me)throw Cn.create("registration-api-key");if(!Qe)throw Cn.create("registration-app-id");const it=new Sg(Qe,L.name,P=P||"firebase"),ht=new yd(it),Gt=new oe.Yd(Vi);Gt.logLevel=oe.in.ERROR;const Dt=new Ir(Q,se.SDK_VERSION,P,re,me,Qe),Nn=new Ig(Dt,it),er=new Cg(Nn,it,ht,Gt),vs=new gd(L,er,ht,it,Gt);return function rn(I){const T=(0,ne.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(vs),vs},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Vi,"0.3.8"),(0,se.registerVersion)(Vi,"0.3.8","esm2017")}();const vd="/firebase-messaging-sw.js",Tr="/firebase-cloud-messaging-push-scope",co="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zo="google.c.a.c_id",wd="google.c.a.c_l",yf="google.c.a.ts",Ed="google.c.a.e";var Wo=(()=>{return(I=Wo||(Wo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Wo;var I})();function Lr(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bd(I){const P=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(P),Q=new Uint8Array(L.length);for(let re=0;re<L.length;++re)Q[re]=L.charCodeAt(re);return Q}const Vr="fcm_token_details_db",gi="fcm_token_object_Store";function Fl(I){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Vr))return null;let T=null;return(yield(0,ae.X3)(Vr,5,{upgrade:(L=(0,N.Z)(function*(Q,re,me,Qe){var it;if(re<2||!Q.objectStoreNames.contains(gi))return;const ht=Qe.objectStore(gi),Gt=yield ht.index("fcmSenderId").get(I);if(yield ht.clear(),Gt)if(2===re){const Dt=Gt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;T={token:Dt.fcmToken,createTime:null!==(it=Dt.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:Lr(Dt.vapidKey)}}}else if(3===re){const Dt=Gt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Lr(Dt.auth),p256dh:Lr(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Lr(Dt.vapidKey)}}}else if(4===re){const Dt=Gt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Lr(Dt.auth),p256dh:Lr(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Lr(Dt.vapidKey)}}}}),function(re,me,Qe,it){return L.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Vr),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Ll(T)?T:null;var L}),Cd.apply(this,arguments)}function Ll(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Gi="firebase-messaging-store";let _f=null;function sn(){return _f||(_f=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Gi)}})),_f}function Va(I){return fo.apply(this,arguments)}function fo(){return(fo=(0,N.Z)(function*(I){const T=ur(I),L=yield(yield sn()).transaction(Gi).objectStore(Gi).get(T);if(L)return L;{const Q=yield Fl(I.appConfig.senderId);if(Q)return yield Yt(I,Q),Q}})).apply(this,arguments)}function Yt(I,T){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,N.Z)(function*(I,T){const P=ur(I),Q=(yield sn()).transaction(Gi,"readwrite");return yield Q.objectStore(Gi).put(T,P),yield Q.done,T})).apply(this,arguments)}function Du(I){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,N.Z)(function*(I){const T=ur(I),L=(yield sn()).transaction(Gi,"readwrite");yield L.objectStore(Gi).delete(T),yield L.done})).apply(this,arguments)}function ur({appConfig:I}){return I.appId}const mn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qi(I,T){return lr.apply(this,arguments)}function lr(){return(lr=(0,N.Z)(function*(I,T){const P=yield Qo(I),L=js(T),Q={method:"POST",headers:P,body:JSON.stringify(L)};let re;try{re=yield(yield fetch(zi(I.appConfig),Q)).json()}catch(me){throw mn.create("token-subscribe-failed",{errorInfo:me})}if(re.error)throw mn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw mn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function po(I,T){return ls.apply(this,arguments)}function ls(){return(ls=(0,N.Z)(function*(I,T){const P=yield Qo(I),L=js(T.subscriptionOptions),Q={method:"PATCH",headers:P,body:JSON.stringify(L)};let re;try{re=yield(yield fetch(`${zi(I.appConfig)}/${T.token}`,Q)).json()}catch(me){throw mn.create("token-update-failed",{errorInfo:me})}if(re.error)throw mn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw mn.create("token-update-no-token");return re.token})).apply(this,arguments)}function Ba(I,T){return xi.apply(this,arguments)}function xi(){return(xi=(0,N.Z)(function*(I,T){const L={method:"DELETE",headers:yield Qo(I)};try{const re=yield(yield fetch(`${zi(I.appConfig)}/${T}`,L)).json();if(re.error)throw mn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Q){throw mn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function zi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Qo(I){return _t.apply(this,arguments)}function _t(){return(_t=(0,N.Z)(function*({appConfig:I,installations:T}){const P=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function js({p256dh:I,auth:T,endpoint:P,vapidKey:L}){const Q={web:{endpoint:P,auth:T,p256dh:I}};return L!==co&&(Q.web.applicationPubKey=L),Q}const Bl=6048e5;function ja(I){return jl.apply(this,arguments)}function jl(){return(jl=(0,N.Z)(function*(I){const T=yield go(I.swRegistration,I.vapidKey),P={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Lr(T.getKey("auth")),p256dh:Lr(T.getKey("p256dh"))},L=yield Va(I.firebaseDependencies);if(L){if(Mu(L.subscriptionOptions,P))return Date.now()>=L.createTime+Bl?$l(I,{token:L.token,createTime:Date.now(),subscriptionOptions:P}):L.token;try{yield Ba(I.firebaseDependencies,L.token)}catch(Q){console.warn(Q)}return Me(I.firebaseDependencies,P)}return Me(I.firebaseDependencies,P)})).apply(this,arguments)}function Au(I){return Su.apply(this,arguments)}function Su(){return(Su=(0,N.Z)(function*(I){const T=yield Va(I.firebaseDependencies);T&&(yield Ba(I.firebaseDependencies,T.token),yield Du(I.firebaseDependencies));const P=yield I.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function $l(I,T){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,N.Z)(function*(I,T){try{const P=yield po(I.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:P,createTime:Date.now()});return yield Yt(I.firebaseDependencies,L),P}catch(P){throw yield Au(I),P}})).apply(this,arguments)}function Me(I,T){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,N.Z)(function*(I,T){const L={token:yield qi(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Yt(I,L),L.token})).apply(this,arguments)}function go(I,T){return pn.apply(this,arguments)}function pn(){return(pn=(0,N.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bd(T)})})).apply(this,arguments)}function Mu(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function mo(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function mi(I,T){if(!T.notification)return;I.notification={};const P=T.notification.title;P&&(I.notification.title=P);const L=T.notification.body;L&&(I.notification.body=L);const Q=T.notification.image;Q&&(I.notification.image=Q)}(T,I),function Hl(I,T){!T.data||(I.data=T.data)}(T,I),function Gl(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const P=T.fcmOptions.link;P&&(I.fcmOptions.link=P);const L=T.fcmOptions.analytics_label;L&&(I.fcmOptions.analyticsLabel=L)}(T,I),T}function ql(I){return"object"==typeof I&&!!I&&Zo in I}function Id(I,T){const P=[];for(let L=0;L<I.length;L++)P.push(I.charAt(L)),L<T.length&&P.push(T.charAt(L));return P.join("")}function cs(I){return mn.create("missing-app-config-values",{valueName:I})}Id("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Id("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Dr{constructor(T,P,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Mg(I){if(!I||!I.options)throw cs("App Configuration Object");if(!I.name)throw cs("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:P}=I;for(const L of T)if(!P[L])throw cs(L);return{appName:I.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:P,analyticsProvider:L}}_delete(){return Promise.resolve()}}function yi(I){return xu.apply(this,arguments)}function xu(){return(xu=(0,N.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(vd,{scope:Tr}),I.swRegistration.update().catch(()=>{})}catch(T){throw mn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function $s(I,T){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,N.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield yi(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function zl(I,T){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,N.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=co)})).apply(this,arguments)}function Zl(){return(Zl=(0,N.Z)(function*(I,T){if(!navigator)throw mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mn.create("permission-blocked");return yield zl(I,null==T?void 0:T.vapidKey),yield $s(I,null==T?void 0:T.serviceWorkerRegistration),ja(I)})).apply(this,arguments)}function Xo(I,T,P){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,N.Z)(function*(I,T,P){const L=Nu(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:P[Zo],message_name:P[wd],message_time:P[yf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Nu(I){switch(I){case Wo.NOTIFICATION_CLICKED:return"notification_open";case Wo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Dd(){return(Dd=(0,N.Z)(function*(I,T){const P=T.data;if(!P.isFirebaseMessaging)return;I.onMessageHandler&&P.messageType===Wo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(mo(P)):I.onMessageHandler.next(mo(P)));const L=P.data;ql(L)&&"1"===L[Ed]&&(yield Xo(I,P.messageType,L))})).apply(this,arguments)}const ku="@firebase/messaging",Ad=I=>{const T=new Dr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function Td(I,T){return Dd.apply(this,arguments)}(T,P)),T},ea=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:L=>function Ou(I,T){return Zl.apply(this,arguments)}(T,L)}};function Fu(){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,N.Z)(function*(){try{yield(0,ne.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Sd(){(0,se._registerComponent)(new he.wA("messaging",Ad,"PUBLIC")),(0,se._registerComponent)(new he.wA("messaging-internal",ea,"PRIVATE")),(0,se.registerVersion)(ku,"0.9.13"),(0,se.registerVersion)(ku,"0.9.13","esm2017")}();const Md="analytics",xg="firebase_id",ds="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vo="https://www.googletagmanager.com/gtag/js",jn=new oe.Yd("@firebase/analytics");function xd(I){return Promise.all(I.map(T=>T.catch(P=>P)))}function Pg(I,T){const P=document.createElement("script");P.src=`${vo}?l=${I}&id=${T}`,P.async=!0,document.head.appendChild(P)}function ta(I,T,P,L,Q,re){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,N.Z)(function*(I,T,P,L,Q,re){const me=L[Q];try{if(me)yield T[me];else{const it=(yield xd(P)).find(ht=>ht.measurementId===Q);it&&(yield T[it.appId])}}catch(Qe){jn.error(Qe)}I("config",Q,re)})).apply(this,arguments)}function Og(I,T,P,L,Q){return hs.apply(this,arguments)}function hs(){return(hs=(0,N.Z)(function*(I,T,P,L,Q){try{let re=[];if(Q&&Q.send_to){let me=Q.send_to;Array.isArray(me)||(me=[me]);const Qe=yield xd(P);for(const it of me){const ht=Qe.find(Dt=>Dt.measurementId===it),Gt=ht&&T[ht.appId];if(!Gt){re=[];break}re.push(Gt)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),I("event",L,Q||{})}catch(re){jn.error(re)}})).apply(this,arguments)}function on(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(vo))return T;return null}const at=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ga=new class On{constructor(T={},P=1e3){this.throttleMetadata=T,this.intervalMillis=P}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,P){this.throttleMetadata[T]=P}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Pd(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function na(I){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,N.Z)(function*(I){var T;const{appId:P,apiKey:L}=I,Q={method:"GET",headers:Pd(L)},re=ds.replace("{app-id}",P),me=yield fetch(re,Q);if(200!==me.status&&304!==me.status){let Qe="";try{const it=yield me.json();(null===(T=it.error)||void 0===T?void 0:T.message)&&(Qe=it.error.message)}catch(it){}throw at.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Qe})}return me.json()})).apply(this,arguments)}function In(I){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,N.Z)(function*(I,T=Ga,P){const{appId:L,apiKey:Q,measurementId:re}=I.options;if(!L)throw at.create("no-app-id");if(!Q){if(re)return{measurementId:re,appId:L};throw at.create("no-api-key")}const me=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Kl;return setTimeout((0,N.Z)(function*(){Qe.abort()}),void 0!==P?P:6e4),Zi({appId:L,apiKey:Q,measurementId:re},me,Qe,T)})).apply(this,arguments)}function Zi(I,T,P){return St.apply(this,arguments)}function St(){return(St=(0,N.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:P},L,Q=Ga){const{appId:re,measurementId:me}=I;try{yield Od(L,T)}catch(Qe){if(me)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:re,measurementId:me};throw Qe}try{const Qe=yield na(I);return Q.deleteThrottleMetadata(re),Qe}catch(Qe){if(!Rd(Qe)){if(Q.deleteThrottleMetadata(re),me)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:re,measurementId:me};throw Qe}const it=503===Number(Qe.customData.httpStatus)?(0,ne.$s)(P,Q.intervalMillis,30):(0,ne.$s)(P,Q.intervalMillis),ht={throttleEndTimeMillis:Date.now()+it,backoffCount:P+1};return Q.setThrottleMetadata(re,ht),jn.debug(`Calling attemptFetch again in ${it} millis`),Zi(I,ht,L,Q)}})).apply(this,arguments)}function Od(I,T){return new Promise((P,L)=>{const Q=Math.max(T-Date.now(),0),re=setTimeout(P,Q);I.addEventListener(()=>{clearTimeout(re),L(at.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Rd(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Kl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Yl(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,N.Z)(function*(){if(!(0,ne.hl)())return jn.warn(at.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return jn.warn(at.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ra(){return(ra=(0,N.Z)(function*(I,T,P,L,Q,re,me){var Qe;const it=In(I);it.then(er=>{P[er.measurementId]=er.appId,I.options.measurementId&&er.measurementId!==I.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${er.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(er=>jn.error(er)),T.push(it);const ht=Yl().then(er=>{if(er)return L.getId()}),[Gt,Dt]=yield Promise.all([it,ht]);on()||Pg(re,Gt.measurementId),Q("js",new Date);const Nn=null!==(Qe=null==me?void 0:me.config)&&void 0!==Qe?Qe:{};return Nn.origin="firebase",Nn.update=!0,null!=Dt&&(Nn[xg]=Dt),Q("config",Gt.measurementId,Nn),Gt.measurementId})).apply(this,arguments)}class Eo{constructor(T){this.app=T}_delete(){return delete cr[this.app.options.appId],Promise.resolve()}}let cr={},bo=[];const Co={};let sa,Zs,ia="dataLayer",oa=!1;function fs(I,T,P){!function qa(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((L,Q)=>`(${Q+1}) ${L}`).join(" "),P=at.create("invalid-analytics-context",{errorInfo:T});jn.warn(P.message)}}();const L=I.options.appId;if(!L)throw at.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw at.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=cr[L])throw at.create("already-exists",{id:L});if(!oa){!function wo(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(ia);const{wrappedGtag:re,gtagCore:me}=function Rg(I,T,P,L,Q){let re=function(...me){window[L].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(re=window[Q]),window[Q]=function Vu(I,T,P,L){function re(){return(re=(0,N.Z)(function*(me,Qe,it){try{"event"===me?yield Og(I,T,P,Qe,it):"config"===me?yield ta(I,T,P,L,Qe,it):I("set",Qe)}catch(ht){jn.error(ht)}})).apply(this,arguments)}return function Q(me,Qe,it){return re.apply(this,arguments)}}(re,I,T,P),{gtagCore:re,wrappedGtag:window[Q]}}(cr,bo,Co,ia,"gtag");Zs=re,sa=me,oa=!0}return cr[L]=function qs(I,T,P,L,Q,re,me){return ra.apply(this,arguments)}(I,bo,Co,T,sa,ia,P),new Eo(I)}function Xn(){return(Xn=(0,N.Z)(function*(I,T,P,L,Q){if(Q&&Q.global)I("event",P,L);else{const re=yield T;I("event",P,Object.assign(Object.assign({},L),{send_to:re}))}})).apply(this,arguments)}function Ki(){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,N.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}const Qr="@firebase/analytics";!function Ks(){(0,se._registerComponent)(new he.wA(Md,(T,{options:P})=>fs(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,se._registerComponent)(new he.wA("analytics-internal",function I(T){try{const P=T.getProvider(Md).getImmediate();return{logEvent:(L,Q,re)=>function aa(I,T,P,L){I=(0,ne.m9)(I),function Io(I,T,P,L,Q){return Xn.apply(this,arguments)}(Zs,cr[I.app.options.appId],T,P,L).catch(Q=>jn.error(Q))}(P,L,Q,re)}}catch(P){throw at.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,se.registerVersion)(Qr,"0.7.9"),(0,se.registerVersion)(Qr,"0.7.9","esm2017")}();var ec=R(4408),tc=R(7565);const za=new class Rn extends tc.v{}(class gs extends ec.o{constructor(T,P){super(T,P),this.scheduler=T,this.work=P}schedule(T,P=0){return P>0?super.schedule(T,P):(this.delay=P,this.state=T,this.scheduler.flush(this),this)}execute(T,P){return P>0||this.closed?super.execute(T,P):this._execute(T,P)}requestAsyncId(T,P,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,P,L):T.flush(this)}});var kd=R(4986),bf=R(8505),Ar=R(5363),Br=R(9468);const Za=new d.GfV("7.3.0"),ua="__angularfire_symbol__analyticsIsSupportedValue",ms="__angularfire_symbol__analyticsIsSupported",Ys="__angularfire_symbol__remoteConfigIsSupportedValue",ys="__angularfire_symbol__remoteConfigIsSupported",la="__angularfire_symbol__messagingIsSupportedValue",kt="__angularfire_symbol__messagingIsSupported";function da(I,T,P){if(T){if(1===T.length)return T[0];const re=T.filter(me=>me.app===P);if(1===re.length)return re[0]}return P.container.getProvider(I).getImmediate({optional:!0})}globalThis[ms]||(globalThis[ms]=Ki().then(I=>globalThis[ua]=I).catch(()=>globalThis[ua]=!1)),globalThis[kt]||(globalThis[kt]=Fu().then(I=>globalThis[la]=I).catch(()=>globalThis[la]=!1)),globalThis[ys]||(globalThis[ys]=Tu().then(I=>globalThis[Ys]=I).catch(()=>globalThis[Ys]=!1));const Ng=(I,T)=>{const P=T?[T]:(0,Z.C6)(),L=[];return P.forEach(Q=>{Q.container.getProvider(I).instances.forEach(me=>{L.includes(me)||L.push(me)})}),L};function _s(){}class Ri{constructor(T,P=za){this.zone=T,this.delegate=P}now(){return this.delegate.now()}schedule(T,P,L){const Q=this.zone;return this.delegate.schedule(function(me){Q.runGuarded(()=>{T.apply(this,[me])})},P,L)}}class ju{constructor(T){this.zone=T,this.task=null}call(T,P){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_s,{},_s,_s)),P.pipe((0,bf.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ld=(()=>{class I{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Ri(Zone.current)),this.insideAngular=P.run(()=>new Ri(Zone.current,kd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(P){return new(P||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Yi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function hr(I){return I.pipe((0,Ar.Q)(Yi().outsideAngular))}function Cf(I){return Yi(),function Qs(I){return function(P){return(P=P.lift(new ju(I.ngZone))).pipe((0,Br.R)(I.outsideAngular),(0,Ar.Q)(I.insideAngular))}}(Yi())(I)}},2090:(Ye,we,R)=>{"use strict";R.d(we,{$s:()=>Bt,BH:()=>Re,G6:()=>Be,L:()=>ae,LL:()=>ue,Mn:()=>Te,Sg:()=>be,UG:()=>de,US:()=>he,ZB:()=>V,ZR:()=>_e,b$:()=>qe,d:()=>Ae,eu:()=>Ee,hl:()=>H,jU:()=>Ie,m9:()=>Cr,ne:()=>Ai,pd:()=>Rs,r3:()=>Rr,ru:()=>$e,tV:()=>le,uI:()=>Ue,vZ:()=>ci,w1:()=>Ce,xO:()=>Nr,xb:()=>Lt,z$:()=>Ne,zI:()=>Y,zd:()=>Li});const se=function(B){const q=[];let W=0;for(let De=0;De<B.length;De++){let G=B.charCodeAt(De);G<128?q[W++]=G:G<2048?(q[W++]=G>>6|192,q[W++]=63&G|128):55296==(64512&G)&&De+1<B.length&&56320==(64512&B.charCodeAt(De+1))?(G=65536+((1023&G)<<10)+(1023&B.charCodeAt(++De)),q[W++]=G>>18|240,q[W++]=G>>12&63|128,q[W++]=G>>6&63|128,q[W++]=63&G|128):(q[W++]=G>>12|224,q[W++]=G>>6&63|128,q[W++]=63&G|128)}return q},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,q){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let G=0;G<B.length;G+=3){const ee=B[G],Oe=G+1<B.length,Je=Oe?B[G+1]:0,gt=G+2<B.length,It=gt?B[G+2]:0;let Vn=(15&Je)<<2|It>>6,kr=63&It;gt||(kr=64,Oe||(Vn=64)),De.push(W[ee>>2],W[(3&ee)<<4|Je>>4],W[Vn],W[kr])}return De.join("")},encodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(B):this.encodeByteArray(se(B),q)},decodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(B):function(B){const q=[];let W=0,De=0;for(;W<B.length;){const G=B[W++];if(G<128)q[De++]=String.fromCharCode(G);else if(G>191&&G<224){const ee=B[W++];q[De++]=String.fromCharCode((31&G)<<6|63&ee)}else if(G>239&&G<365){const gt=((7&G)<<18|(63&B[W++])<<12|(63&B[W++])<<6|63&B[W++])-65536;q[De++]=String.fromCharCode(55296+(gt>>10)),q[De++]=String.fromCharCode(56320+(1023&gt))}else{const ee=B[W++],Oe=B[W++];q[De++]=String.fromCharCode((15&G)<<12|(63&ee)<<6|63&Oe)}}return q.join("")}(this.decodeStringToByteArray(B,q))},decodeStringToByteArray(B,q){this.init_();const W=q?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let G=0;G<B.length;){const ee=W[B.charAt(G++)],Je=G<B.length?W[B.charAt(G)]:0;++G;const It=G<B.length?W[B.charAt(G)]:64;++G;const Et=G<B.length?W[B.charAt(G)]:64;if(++G,null==ee||null==Je||null==It||null==Et)throw Error();De.push(ee<<2|Je>>4),64!==It&&(De.push(Je<<4&240|It>>2),64!==Et&&De.push(It<<6&192|Et))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ae=function(B){return function(B){const q=se(B);return he.encodeByteArray(q,!0)}(B).replace(/\./g,"")},le=function(B){try{return he.decodeString(B,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function V(B,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return q}for(const W in q)!q.hasOwnProperty(W)||!X(W)||(B[W]=V(B[W],q[W]));return B}function X(B){return"__proto__"!==B}class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,W)=>{this.resolve=q,this.reject=W})}wrapCallback(q){return(W,De)=>{W?this.reject(W):this.resolve(De),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(W):q(W,De))}}}function be(B,q){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=q||"demo-project",G=B.iat||0,ee=B.sub||B.user_id;if(!ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:G,exp:G+3600,auth_time:G,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Oe)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function de(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function $e(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Ne().indexOf("Electron/")>=0}function Ce(){const B=Ne();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Te(){return Ne().indexOf("MSAppHost/")>=0}function Be(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){return"object"==typeof indexedDB}function Ee(){return new Promise((B,q)=>{try{let W=!0;const De="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(De);G.onsuccess=()=>{G.result.close(),W||self.indexedDB.deleteDatabase(De),B(!0)},G.onupgradeneeded=()=>{W=!1},G.onerror=()=>{var ee;q((null===(ee=G.error)||void 0===ee?void 0:ee.message)||"")}}catch(W){q(W)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class _e extends Error{constructor(q,W,De){super(W),this.code=q,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(q,W,De){this.service=q,this.serviceName=W,this.errors=De}create(q,...W){const De=W[0]||{},G=`${this.service}/${q}`,ee=this.errors[q],Oe=ee?function ke(B,q){return B.replace(dt,(W,De)=>{const G=q[De];return null!=G?String(G):`<${De}?>`})}(ee,De):"Error";return new _e(G,`${this.serviceName}: ${Oe} (${G}).`,De)}}const dt=/\{\$([^}]+)}/g;function Rr(B,q){return Object.prototype.hasOwnProperty.call(B,q)}function Lt(B){for(const q in B)if(Object.prototype.hasOwnProperty.call(B,q))return!1;return!0}function ci(B,q){if(B===q)return!0;const W=Object.keys(B),De=Object.keys(q);for(const G of W){if(!De.includes(G))return!1;const ee=B[G],Oe=q[G];if(wr(ee)&&wr(Oe)){if(!ci(ee,Oe))return!1}else if(ee!==Oe)return!1}for(const G of De)if(!W.includes(G))return!1;return!0}function wr(B){return null!==B&&"object"==typeof B}function Nr(B){const q=[];for(const[W,De]of Object.entries(B))Array.isArray(De)?De.forEach(G=>{q.push(encodeURIComponent(W)+"="+encodeURIComponent(G))}):q.push(encodeURIComponent(W)+"="+encodeURIComponent(De));return q.length?"&"+q.join("&"):""}function Li(B){const q={};return B.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[G,ee]=De.split("=");q[decodeURIComponent(G)]=decodeURIComponent(ee)}}),q}function Rs(B){const q=B.indexOf("?");if(!q)return"";const W=B.indexOf("#",q);return B.substring(q,W>0?W:void 0)}function Ai(B,q){const W=new yt(B,q);return W.subscribe.bind(W)}class yt{constructor(q,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{q(this)}).catch(De=>{this.error(De)})}next(q){this.forEachObserver(W=>{W.next(q)})}error(q){this.forEachObserver(W=>{W.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,W,De){let G;if(void 0===q&&void 0===W&&void 0===De)throw new Error("Missing Observer.");G=function vn(B,q){if("object"!=typeof B||null===B)return!1;for(const W of q)if(W in B&&"function"==typeof B[W])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:W,complete:De},void 0===G.next&&(G.next=bn),void 0===G.error&&(G.error=bn),void 0===G.complete&&(G.complete=bn);const ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(Oe){}}),this.observers.push(G),ee}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,q)}sendOne(q,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{W(this.observers[q])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bn(){}function Bt(B,q=1e3,W=2){const De=q*Math.pow(W,B),G=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+G)}function Cr(B){return B&&B._delegate?B._delegate:B}},3535:(Ye,we,R)=>{"use strict";var d=R(5e3);let Z=null;function N(){return Z}const oe=new d.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function le(){return(0,d.LFG)(V)}()},providedIn:"platform"}),n})();const U=new d.OlP("Location Initialized");let V=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Re(){return new V((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,d.LFG)(oe).location;return new qe((0,d.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const $e=new d.OlP("appBaseHref");let qe=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae),d.LFG($e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae),d.LFG($e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Be(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=be,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(d.LFG(de),d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new Ce((0,d.LFG)(de),(0,d.LFG)(ae))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class Fs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Fs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),lo(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{lo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function lo(n,e){n.context.$implicit=e.item}let fn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Cu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Cu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class rn{constructor(){this.$implicit=null,this.ngIf=null}}function Cu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ed=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Ko(n){return"server"===n}let Ll=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Yo((0,d.LFG)(oe),window)}),n})();class Yo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Gi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Vl(this.window.history)||Vl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Vl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fo extends class Va extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){Z||(Z=n)}(new fo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ua(){return Yt=Yt||document.querySelector("base"),Yt?Yt.getAttribute("href"):null}();return null==t?null:function Bs(n){Du=Du||document.createElement("a"),Du.setAttribute("href",n);const e=Du.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ka(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Du,Yt=null;const ur=new d.OlP("TRANSITION_ID"),mn=[{provide:d.ip1,useFactory:function Ul(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[ur,oe,d.zs3],multi:!0}];class qi{static init(){(0,d.VLi)(new qi)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let lr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const po=new d.OlP("EventManagerPlugins");let ls=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(po),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ba{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let xi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),zi=(()=>{class n extends xi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Qo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Qo))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Qo(n){N().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},js=/%COMP%/g;function Jo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Jo(n,i,t):(i=i.replace(js,n),t.push(i))}return t}function Me(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let go=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new pn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new mi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Hl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Jo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ls),d.LFG(zi),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class pn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_t[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=_t[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_t[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Me(r)):this.eventManager.addEventListener(e,t,Me(r))}}class mi extends pn{constructor(e,t,r,i){super(e),this.component=r;const u=Jo(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Su(n){return"_ngcontent-%COMP%".replace(js,n)}(i+"-"+r.id),this.hostAttr=function $l(n){return"_nghost-%COMP%".replace(js,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hl extends pn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Jo(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Gl=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ql=["alt","control","meta","shift"],Mg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Dr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yi=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(ql.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function xu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&cs.hasOwnProperty(e)&&(e=cs[e]))}return Mg[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ql.forEach(u=>{u!=i&&Dr[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ou=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function $s(){fo.makeCurrent(),qi.init()},multi:!0},{provide:oe,useFactory:function zl(){return(0,d.RDi)(document),document},deps:[]}]),Zl=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Pi(){return new d.qLn},deps:[]},{provide:po,useClass:Gl,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:po,useClass:yi,multi:!0,deps:[oe]},{provide:go,useClass:go,deps:[ls,zi,d.AFp]},{provide:d.FYo,useExisting:go},{provide:xi,useExisting:zi},{provide:zi,useClass:zi,deps:[oe]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:ls,useClass:ls,deps:[po,d.R0b]},{provide:class sn{},useClass:lr,deps:[]}];let Xo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:ur,useExisting:d.AFp},mn]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Zl,imports:[Ed,d.hGG]}),n})();"undefined"!=typeof window&&window;var on=R(8996),Ha=R(7669);function at(...n){const e=(0,Ha.yG)(n);return(0,on.D)(n,e)}var Ur=R(7579);class _i extends Ur.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var On=R(8306);const{isArray:Ga}=Array,{getPrototypeOf:Pd,prototype:na,keys:Hs}=Object;function In(n){if(1===n.length){const e=n[0];if(Ga(e))return{args:e,keys:null};if(function Gs(n){return n&&"object"==typeof n&&Pd(n)===na}(e)){const t=Hs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zi=R(4671),St=R(4004);const{isArray:Od}=Array;function Kl(n){return(0,St.U)(e=>function Rd(n,e){return Od(e)?n(...e):n(e)}(n,e))}function Yl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Jn=R(5403),qs=R(9672);function cr(n,e,t){n?(0,qs.f)(t,n,e):e()}var bo=R(576);function Co(n,e){const t=(0,bo.m)(n)?n:()=>n,r=i=>i.error(t());return new On.y(e?i=>e.schedule(r,0,i):r)}const zs=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var sa=R(8189);function oa(...n){return function Zs(){return(0,sa.J)(1)}()((0,on.D)(n,(0,Ha.yG)(n)))}var Ql=R(8421);function qa(n){return new On.y(e=>{(0,Ql.Xf)(n()).subscribe(e)})}var fs=R(515),Io=R(727),Xn=R(4482);function Jl(){return(0,Xn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Jn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ws extends On.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Io.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Jn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Io.w0.EMPTY)}return e}refCount(){return Jl()(this)}}function Tn(n,e){return(0,Xn.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,Jn.x)(r,_=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,Ql.Xf)(n(_,S)).subscribe(i=(0,Jn.x)(r,M=>r.next(e?e(_,M,S,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var To=R(5698);function Do(...n){const e=(0,Ha.yG)(n);return(0,Xn.e)((t,r)=>{(e?oa(n,t,e):oa(n,t)).subscribe(r)})}function ps(n,e,t,r,i){return(u,c)=>{let p=t,_=e,b=0;u.subscribe((0,Jn.x)(c,S=>{const M=b++;_=p?n(_,S,M):(p=!0,S),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function Wi(n,e){return(0,Xn.e)(ps(n,e,arguments.length>=2,!0))}function dr(n,e){return(0,Xn.e)((t,r)=>{let i=0;t.subscribe((0,Jn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Oi(n){return(0,Xn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Jn.x)(t,void 0,void 0,c=>{u=(0,Ql.Xf)(n(c,Oi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var $n=R(5577);function Ki(n,e){return(0,bo.m)(e)?(0,$n.z)(n,e,1):(0,$n.z)(n,1)}function Uu(n){return n<=0?()=>fs.E:(0,Xn.e)((e,t)=>{let r=[];e.subscribe((0,Jn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Xl(n=wn){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wn(){return new zs}function Ef(n){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dr((i,u)=>n(i,u,r)):Zi.y,(0,To.q)(1),t?Ef(e):Xl(()=>new zs))}var Qr=R(8505);class Ks{constructor(e,t){this.id=e,this.url=t}}class ec extends Ks{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gs extends Ks{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tc extends Ks{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rn extends Ks{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class za extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bu extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kd extends Ks{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bf extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Br{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Za{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ua{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ms{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ys{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ys{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class Fd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ca(n){return new Fd(n)}const Sr="ngNavigationCancelingError";function Wa(n){const e=Error("NavigationCancelingError: "+n);return e[Sr]=!0,e}function Ng(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ri(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!ju(n[i],e[i]))return!1;return!0}function ju(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Ld(n){return Array.prototype.concat.apply([],n)}function Yi(n){return n.length>0?n[n.length-1]:null}function hn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hr(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,on.D)(Promise.resolve(n)):at(n)}const Cf={exact:function I(n,e,t){if(!ht(n.segments,e.segments)||!Q(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:P},Qs={exact:function Ka(n,e){return Ri(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ju(n[t],e[t]))},ignored:()=>!0};function ha(n,e,t){return Cf[t.paths](n.root,e.root,t.matrixParams)&&Qs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function P(n,e,t){return L(n,e,e.segments,t)}function L(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ht(i,t)||e.hasChildren()||!Q(i,t,r))}if(n.segments.length===t.length){if(!ht(n.segments,t)||!Q(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!P(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ht(n.segments,i)&&Q(n.segments,i,r)&&n.children[kt])&&L(n.children[kt],e,u,r)}}function Q(n,e,t){return e.every((r,i)=>Qs[t](n[i].parameters,r.parameters))}class re{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){return er.serialize(this)}}class me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vs(this)}}class Qe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ca(this.parameters)),this._parameterMap}toString(){return ic(this)}}function ht(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Dt{}class Nn{parse(e){const t=new kg(e);return new re(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Qi(e.root,!0)}`,r=function If(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Mr(t)}=${Mr(i)}`).join("&"):`${Mr(t)}=${Mr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ws(n){return encodeURI(n)}(e.fragment)}`:""}`}}const er=new Nn;function vs(n){return n.segments.map(e=>ic(e)).join("/")}function Qi(n,e){if(!n.hasChildren())return vs(n);if(e){const t=n.children[kt]?Qi(n.children[kt],!1):"",r=[];return hn(n.children,(i,u)=>{u!==kt&&r.push(`${u}:${Qi(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Gt(n,e){let t=[];return hn(n.children,(r,i)=>{i===kt&&(t=t.concat(e(r,i)))}),hn(n.children,(r,i)=>{i!==kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===kt?[Qi(n.children[kt],!1)]:[`${i}:${Qi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${vs(n)}/${t[0]}`:`${vs(n)}/(${t.join("//")})`}}function Ni(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mr(n){return Ni(n).replace(/%3B/gi,";")}function Js(n){return Ni(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rc(n){return decodeURIComponent(n)}function Ud(n){return rc(n.replace(/\+/g,"%20"))}function ic(n){return`${Js(n.path)}${function Bd(n){return Object.keys(n).map(e=>`;${Js(e)}=${Js(n[e])}`).join("")}(n.parameters)}`}const Tf=/^[^\/()?;=#]+/;function jd(n){const e=n.match(Tf);return e?e[0]:""}const $u=/^[^=?&#]+/,Df=/^[^&#]+/;class kg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new me(e,t)),r}parseSegment(){const e=jd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Qe(rc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=jd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=jd(this.remaining);i&&(r=i,this.capture(r))}e[rc(t)]=rc(r)}parseQueryParam(e){const t=function sc(n){const e=n.match($u);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function q0(n){const e=n.match(Df);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Ud(t),u=Ud(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[kt]:new me([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Af{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Fg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Fg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Hu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hu(e,this._root).map(t=>t.value)}}function Fg(n,e){if(n===e.value)return e;for(const t of e.children){const r=Fg(n,t);if(r)return r}return null}function Hu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Hu(n,t);if(r.length)return r.unshift(e),r}return[]}class Ao{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class oc extends Af{constructor(e,t){super(e),this.snapshot=t,Gd(this,e)}toString(){return this.snapshot.toString()}}function $d(n,e){const t=function qu(n,e){const c=new So([],{},{},"",{},kt,e,null,n.root,-1,{});return new Hd("",new Ao(c,[]))}(n,e),r=new _i([new Qe("",{})]),i=new _i({}),u=new _i({}),c=new _i({}),p=new _i(""),_=new zu(r,i,c,p,u,kt,e,t.root);return _.snapshot=t.root,new oc(new Ao(_,[]),t)}class zu{constructor(e,t,r,i,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>ca(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>ca(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Lg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function z0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class So{constructor(e,t,r,i,u,c,p,_,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ca(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hd extends Af{constructor(e,t){super(t),this.url=e,Gd(this,t)}toString(){return Sf(this._root)}}function Gd(n,e){e.value._routerState=n,e.children.forEach(t=>Gd(n,t))}function Sf(n){const e=n.children.length>0?` { ${n.children.map(Sf).join(", ")} } `:"";return`${n.value}${e}`}function qd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ri(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ri(e.params,t.params)||n.params.next(t.params),function _s(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ri(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ri(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zd(n,e){const t=Ri(n.params,e.params)&&function it(n,e){return ht(n,e)&&n.every((t,r)=>Ri(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zd(n.parent,e.parent))}function ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Xy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ac(n,r,i);return ac(n,r)})}(n,e,t);return new Ao(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>ac(n,p)),c}}const r=function e_(n){return new zu(new _i(n.url),new _i(n.params),new _i(n.queryParams),new _i(n.fragment),new _i(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>ac(n,u));return new Ao(r,i)}}function ki(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Mo(n){return"object"==typeof n&&null!=n&&n.outlets}function uc(n,e,t,r,i){let u={};if(r&&hn(r,(p,_)=>{u[_]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new re(t,u,i);const c=n_(n,e,t);return new re(c,u,i)}function n_(n,e,t){const r={};return hn(n.children,(i,u)=>{r[u]=i===e?t:n_(i,e,t)}),new me(n.segments,r)}class Ug{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ki(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Mo);if(i&&i!==Yi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jg(n,e,t){if(n||(n=new me([],{})),0===n.segments.length&&n.hasChildren())return Wd(n,e,t);const r=function r_(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Mo(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!xf(_,b,c))return u;r+=2}else{if(!xf(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new me(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new me(n.segments.slice(r.pathIndex),n.children),Wd(u,0,i)}return r.match&&0===i.length?new me(n.segments,{}):r.match&&!n.hasChildren()?i_(n,e,t):r.match?Wd(n,0,i):i_(n,e,t)}function Wd(n,e,t){if(0===t.length)return new me(n.segments,{});{const r=function Bg(n){return Mo(n[0])?n[0].outlets:{[kt]:n}}(t),i={};return hn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=jg(n.children[c],e,u))}),hn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new me(n.segments,i)}}function i_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Mo(u)){const _=Ya(u.outlets);return new me(r,_)}if(0===i&&ki(t[0])){r.push(new Qe(n.segments[e].path,lc(t[0]))),i++;continue}const c=Mo(u)?u.outlets[kt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&ki(p)?(r.push(new Qe(c,lc(p))),i+=2):(r.push(new Qe(c,{})),i++)}return new me(r,{})}function Ya(n){const e={};return hn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=i_(new me([],{}),0,t))}),e}function lc(n){const e={};return hn(n,(t,r)=>e[r]=`${t}`),e}function xf(n,e,t){return n==t.path&&Ri(e,t.parameters)}class cc{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Gu(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),hn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Gu(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Gu(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Gu(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new ys(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ms(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(qd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),qd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function Kd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Yd{constructor(e,t){this.routes=e,this.module=t}}function xo(n){return"function"==typeof n}function Zu(n){return n instanceof re}const Qd=Symbol("INITIAL_VALUE");function Jd(){return Tn(n=>function ra(...n){const e=(0,Ha.yG)(n),t=(0,Ha.jO)(n),{args:r,keys:i}=In(n);if(0===r.length)return(0,on.D)([],e);const u=new On.y(function Eo(n,e,t=Zi.y){return r=>{cr(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)cr(e,()=>{const b=(0,on.D)(n[_],e);let S=!1;b.subscribe((0,Jn.x)(r,M=>{u[_]=M,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Yl(i,c):Zi.y));return t?u.pipe(Kl(t)):u}(n.map(e=>e.pipe((0,To.q)(1),Do(Qd)))).pipe(Wi((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Qd?i:(u===Qd&&(r=!0),r||!1!==u&&c!==t.length-1&&!Zu(u)?i:u),e)},Qd),dr(e=>e!==Qd),(0,St.U)(e=>Zu(e)?e:!0===e),(0,To.q)(1)))}class Hg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Qa,this.attachRef=null}}class Qa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Hg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Wu=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new s_(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qa),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class s_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zu?this.route:e===Qa?this.childContexts:this.parent.get(e,t)}}let Gg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Wu],encapsulation:2}),n})();function hc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ku(r,o_(e,r))}}function Ku(n,e){n.children&&hc(n.children,e)}function o_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function fc(n){const e=n.children&&n.children.map(fc),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=Gg),t}function Jr(n){return n.outlet||kt}function kn(n,e){const t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}const qg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},qg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Ng)(t,n,e);if(!u)return Object.assign({},qg);const c={};hn(u.posParams,(_,b)=>{c[b]=_.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ja(n,e,t,r,i="corrected"){if(t.length>0&&function u_(n,e,t){return t.some(r=>fa(n,e,r)&&Jr(r)!==kt)}(n,t,r)){const c=new me(e,function a_(n,e,t,r){const i={};i[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Jr(u)!==kt){const c=new me([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Jr(u)]=c}return i}(n,e,r,new me(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function l_(n,e,t){return t.some(r=>fa(n,e,r))}(n,t,r)){const c=new me(n.segments,function zg(n,e,t,r,i,u){const c={};for(const p of r)if(fa(n,t,p)&&!i[Jr(p)]){const _=new me([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Jr(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new me(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function fa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Zg(n,e,t,r){return!!(Jr(n)===r||r!==kt&&fa(e,t,n))&&("**"===n.path||Xd(e,n,t).matched)}function Wg(n,e,t){return 0===e.length&&!n.children[t]}class Rf{constructor(e){this.segmentGroup=e||null}}class Yu{constructor(e){this.urlTree=e}}function tr(n){return Co(new Rf(n))}function eh(n){return Co(new Yu(n))}class Qu{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Ja(this.urlTree.root,[],[],this.config).segmentGroup,t=new me(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,kt).pipe((0,St.U)(u=>this.createUrlTree(pc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oi(u=>{if(u instanceof Yu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Rf?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,kt).pipe((0,St.U)(i=>this.createUrlTree(pc(i),e.queryParams,e.fragment))).pipe(Oi(i=>{throw i instanceof Rf?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new me([],{[kt]:e}):e;return new re(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(u=>new me([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,on.D)(i).pipe(Ki(u=>{const c=r.children[u],p=kn(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,St.U)(_=>({segment:_,outlet:u})))}),Wi((u,c)=>(u[c.outlet]=c.segment,u),{}),function Jy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dr((i,u)=>n(i,u,r)):Zi.y,Uu(1),t?Ef(e):Xl(()=>new zs))}())}expandSegment(e,t,r,i,u,c){return(0,on.D)(r).pipe(Ki(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(Oi(b=>{if(b instanceof Rf)return at(null);throw b}))),aa(p=>!!p),Oi((p,_)=>{if(p instanceof zs||"EmptyError"===p.name)return Wg(t,i,u)?at(new me([],{})):tr(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return Zg(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):tr(t):tr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eh(u):this.lineralizeSegments(r,u).pipe((0,$n.z)(c=>{const p=new me(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=Xd(t,i,u);if(!p)return tr(t);const M=this.applyRedirectCommands(_,i.redirectTo,S);return i.redirectTo.startsWith("/")?eh(M):this.lineralizeSegments(i,M).pipe((0,$n.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?at(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,St.U)(M=>(r._loadedConfig=M,new me(i,{})))):at(new me(i,{}));const{matched:c,consumedSegments:p,remainingSegments:_}=Xd(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,$n.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:$,slicedSegments:z}=Ja(t,p,_,F),ce=new me($.segments,$.children);if(0===z.length&&ce.hasChildren())return this.expandChildren(M,F,ce).pipe((0,St.U)(et=>new me(p,et)));if(0===F.length&&0===z.length)return at(new me(p,{}));const Se=Jr(r)===u;return this.expandSegment(M,ce,F,z,Se?kt:u,!0).pipe((0,St.U)(ot=>new me(p.concat(ot.segments),ot.children)))})):tr(t)}getChildConfig(e,t,r){return t.children?at(new Yd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?at(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,$n.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,St.U)(u=>(t._loadedConfig=u,u))):function th(n){return Co(Wa(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):at(new Yd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?at(i.map(c=>{const p=e.get(c);let _;if(function K0(n){return n&&xo(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!xo(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return hr(_)})).pipe(Jd(),(0,Qr.b)(c=>{if(!Zu(c))return;const p=Wa(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,St.U)(c=>!0===c)):at(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[kt])return Co(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new re(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return hn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return hn(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new me(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function pc(n){const e={};for(const r of Object.keys(n.children)){const u=pc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function kf(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new me(n.segments.concat(e.segments),e.children)}return n}(new me(n.segments,e))}class Xr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pa{constructor(e,t){this.component=e,this.route=t}}function Ff(n,e,t){const r=n._root;return gc(r,e?e._root:null,t,[r.value])}function Xa(n,e,t){const r=function Lf(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function gc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Gu(e);return n.children.forEach(c=>{(function nh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function h_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ht(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ht(n.url,e.url)||!Ri(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zd(n,e)||!Ri(n.queryParams,e.queryParams);default:return!zd(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Xr(r)):(u.data=c.data,u._resolvedData=c._resolvedData),gc(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new pa(p.outlet.component,c))}else c&&Xi(e,p,i),i.canActivateChecks.push(new Xr(r)),gc(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),hn(u,(c,p)=>Xi(c,t.getContext(p),i)),i}function Xi(n,e,t){const r=Gu(n),i=n.value;hn(r,(u,c)=>{Xi(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new pa(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class g_{}function Es(n){return new On.y(e=>e.error(n))}class Yg{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Ja(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new So([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ao(r,t),u=new Hd(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Lg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=kn(e,u),_=this.processSegmentGroup(p,c,u);if(null===_)return null;r.push(..._)}const i=Jg(r);return function Qg(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return Wg(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Zg(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const $=r.length>0?Yi(r).parameters:{};u=new So(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Jr(e),e.component,e,Xg(t),eu(t)+r.length,f(e))}else{const $=Xd(t,e,r);if(!$.matched)return null;c=$.consumedSegments,p=$.remainingSegments,u=new So(c,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Jr(e),e.component,e,Xg(t),eu(t)+c.length,f(e))}const _=function m_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=Ja(t,c,p,_.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const $=this.processChildren(_,b);return null===$?null:[new Ao(u,$)]}if(0===_.length&&0===S.length)return[new Ao(u,[])];const M=Jr(e)===i,F=this.processSegment(_,b,S,M?kt:i);return null===F?null:[new Ao(u,F)]}}function Bf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jg(n){const e=[],t=new Set;for(const r of n){if(!Bf(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Jg(r.children);e.push(new Ao(r.value,i))}return e.filter(r=>!t.has(r))}function Xg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eu(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function K(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ve(n){return Tn(e=>{const t=n(e);return t?(0,on.D)(t).pipe((0,St.U)(()=>e)):at(e)})}class ft extends class pt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Dn=new d.OlP("ROUTES");class wi{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,St.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Yd(Ld(c.injector.get(Dn,void 0,d.XFs.Self|d.XFs.Optional)).map(fc),c)}),Oi(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ws(i,()=>new Ur.x).pipe(Jl()),t._loader$}loadModuleFactory(e){return hr(e()).pipe((0,$n.z)(t=>t instanceof d.YKP?at(t):(0,on.D)(this.compiler.compileModuleAsync(t))))}}class jf{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function em(n){throw n}function tu(n,e,t){return e.parse("/")}function yc(n,e){return at(null)}const sh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hn=(()=>{class n{constructor(t,r,i,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ur.x,this.errorHandler=em,this.malformedUriErrorHandler=tu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:yc,afterPreactivation:yc},this.urlHandlingStrategy=new jf,this.routeReuseStrategy=new ft,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const M=c.get(d.R0b);this.isNgZoneEnabled=M instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function nc(){return new re(new me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wi(c,p,F=>this.triggerEvent(new Br(F)),F=>this.triggerEvent(new Za(F))),this.routerState=$d(this.currentUrlTree,this.rootComponentType),this.transitions=new _i({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(dr(i=>0!==i.id),(0,St.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Tn(i=>{let u=!1,c=!1;return at(i).pipe((0,Qr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tn(p=>{const _=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Hf(p.source)&&(this.browserUrlTree=p.extractedUrl),at(p).pipe(Tn(M=>{const F=this.transitions.getValue();return r.next(new ec(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?fs.E:Promise.resolve(M)}),function c_(n,e,t,r){return Tn(i=>function fr(n,e,t,r,i){return new Qu(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,St.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function m(n,e,t,r,i){return(0,$n.z)(u=>function mc(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new Yg(n,e,t,r,i,u).recognize();return null===c?Es(new g_):at(c)}catch(c){return Es(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,St.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl($,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new za(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:$,source:z,restoredState:ce,extras:Se}=p,rt=new ec(F,this.serializeUrl($),z,ce);r.next(rt);const ot=$d($,this.rootComponentType).snapshot;return at(Object.assign(Object.assign({},p),{targetSnapshot:ot,urlAfterRedirects:$,extras:Object.assign(Object.assign({},Se),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),fs.E}),Ve(p=>{const{targetSnapshot:_,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:$}}=p;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!$})}),(0,Qr.b)(p=>{const _=new Bu(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,St.U)(p=>Object.assign(Object.assign({},p),{guards:Ff(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function rh(n,e){return(0,$n.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?at(Object.assign(Object.assign({},t),{guardsResult:!0})):function f_(n,e,t,r){return(0,on.D)(n).pipe((0,$n.z)(i=>function Uf(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(p=>{const _=Xa(p,e,i);let b;if(function Of(n){return n&&xo(n.canDeactivate)}(_))b=hr(_.canDeactivate(n,e,t,r));else{if(!xo(_))throw new Error("Invalid CanDeactivate guard");b=hr(_(n,e,t,r))}return b.pipe(aa())})).pipe(Jd()):at(!0)}(i.component,i.route,t,e,r)),aa(i=>!0!==i,!0))}(c,r,i,n).pipe((0,$n.z)(p=>p&&function $g(n){return"boolean"==typeof n}(p)?function p_(n,e,t,r){return(0,on.D)(e).pipe(Ki(i=>oa(function Kg(n,e){return null!==n&&e&&e(new ua(n)),at(!0)}(i.route.parent,r),function ih(n,e){return null!==n&&e&&e(new Ys(n)),at(!0)}(i.route,r),function Vf(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function d_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>qa(()=>at(c.guards.map(_=>{const b=Xa(_,c.node,t);let S;if(function Pf(n){return n&&xo(n.canActivateChild)}(b))S=hr(b.canActivateChild(r,n));else{if(!xo(b))throw new Error("Invalid CanActivateChild guard");S=hr(b(r,n))}return S.pipe(aa())})).pipe(Jd())));return at(u).pipe(Jd())}(n,i.path,t),function vi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(u=>qa(()=>{const c=Xa(u,e,t);let p;if(function dc(n){return n&&xo(n.canActivate)}(c))p=hr(c.canActivate(e,n));else{if(!xo(c))throw new Error("Invalid CanActivate guard");p=hr(c(e,n))}return p.pipe(aa())}));return at(i).pipe(Jd())}(n,i.route,t))),aa(i=>!0!==i,!0))}(r,u,n,e):at(p)),(0,St.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Qr.b)(p=>{if(Zu(p.guardsResult)){const b=Wa(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const _=new kd(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),dr(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Ve(p=>{if(p.guards.canActivateChecks.length)return at(p).pipe((0,Qr.b)(_=>{const b=new bf(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),Tn(_=>{let b=!1;return at(_).pipe(function w(n,e){return(0,$n.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let u=0;return(0,on.D)(i).pipe(Ki(c=>function D(n,e,t,r){return function O(n,e,t,r){const i=K(n);if(0===i.length)return at({});const u={};return(0,on.D)(i).pipe((0,$n.z)(c=>function pe(n,e,t,r){const i=Xa(n,e,r);return hr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Qr.b)(p=>{u[c]=p}))),Uu(1),(0,$n.z)(()=>K(u).length===i.length?at(u):fs.E))}(n._resolve,n,e,r).pipe((0,St.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Lg(n,t).resolve),null)))}(c.route,r,n,e)),(0,Qr.b)(()=>u++),Uu(1),(0,$n.z)(c=>u===i.length?at(t):fs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Qr.b)(_=>{const b=new Ar(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),Ve(p=>{const{targetSnapshot:_,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:$}}=p;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!$})}),(0,St.U)(p=>{const _=function Vg(n,e,t){const r=ac(n,e._root,t?t._root:void 0);return new oc(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,Qr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new cc(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Qr.b)({next(){u=!0},complete(){u=!0}}),function Nd(n){return(0,Xn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Oi(p=>{if(c=!0,function da(n){return n&&n[Sr]}(p)){const _=Zu(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const b=new tc(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),_?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hf(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Rn(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return fs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){hc(t),this.config=t.map(fc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,b=i||this.routerState.root,S=_?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function t_(n,e,t,r,i){if(0===t.length)return uc(e.root,e.root,e.root,r,i);const u=function Z0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ug(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return hn(u.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Ug(t,e,r)}(t);if(u.toRoot())return uc(e.root,e.root,new me([],{}),r,i);const c=function W0(n,e,t){if(n.isAbsolute)return new Zd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Zd(u,u===e.root,0)}const r=ki(n.commands[0])?0:1;return function Mf(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Zd(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?Wd(c.segmentGroup,c.index,u.commands):jg(c.segmentGroup,c.index,u.commands);return uc(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function $f(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},sh):!1===r?Object.assign({},tm):r,Zu(t))return ha(this.currentUrlTree,t,i);const u=this.parseUrl(t);return ha(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new gs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,_;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((z,ce)=>{b=z,S=ce});const F=++this.navigationId;let $;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),$=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):$=0,this.setTransition({id:F,targetPageId:$,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new tc(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Hf(n){return"imperative"!==n}let Xu=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new Ur.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:el(this.skipLocationChange),replaceUrl:el(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:el(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Hn),d.Y36(zu),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),Po=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ur.x,this.subscription=t.events.subscribe(u=>{u instanceof gs&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:el(this.skipLocationChange),replaceUrl:el(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:el(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Hn),d.Y36(zu),d.Y36(de))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function el(n){return""===n||!!n}class nm{}class rm{preload(e,t){return at(null)}}let X0=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new wi(i,r,_=>t.triggerEvent(new Br(_)),_=>t.triggerEvent(new Za(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(dr(t=>t instanceof gs),Ki(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,on.D)(i).pipe((0,sa.J)(),(0,St.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?at(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,$n.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hn),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(nm))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),y_=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ec?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof la&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new la(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const tl=new d.OlP("ROUTER_CONFIGURATION"),nl=new d.OlP("ROUTER_FORROOT_GUARD"),ew=[Ce,{provide:Dt,useClass:Nn},{provide:Hn,useFactory:function iw(n,e,t,r,i,u,c={},p,_){const b=new Hn(null,n,e,t,r,i,Ld(u));return p&&(b.urlHandlingStrategy=p),_&&(b.routeReuseStrategy=_),function v_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[Dt,Qa,Ce,d.zs3,d.Sil,Dn,tl,[class Ju{},new d.FiY],[class Xe{},new d.FiY]]},Qa,{provide:zu,useFactory:function sw(n){return n.routerState.root},deps:[Hn]},X0,rm,class J0{preload(e,t){return t().pipe(Oi(()=>at(null)))}},{provide:tl,useValue:{enableTracing:!1}}];function tw(){return new d.PXZ("Router",Hn)}let nw=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[ew,__(t),{provide:nl,useFactory:rw,deps:[[Hn,new d.FiY,new d.tp0]]},{provide:tl,useValue:r||{}},{provide:de,useFactory:SI,deps:[ae,[new d.tBr($e),new d.FiY],tl]},{provide:y_,useFactory:im,deps:[Hn,Ll,tl]},{provide:nm,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:rm},{provide:d.PXZ,multi:!0,useFactory:tw},[oh,{provide:d.ip1,multi:!0,useFactory:sm,deps:[oh]},{provide:om,useFactory:ow,deps:[oh]},{provide:d.tb,multi:!0,useExisting:om}]]}}static forChild(t){return{ngModule:n,providers:[__(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nl,8),d.LFG(Hn,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function im(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new y_(n,e,t)}function SI(n,e,t={}){return t.useHash?new Ae(n,e):new qe(n,e)}function rw(n){return"guarded"}function __(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:Dn,multi:!0,useValue:n}]}let oh=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ur.x}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(Hn),c=this.injector.get(tl);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?at(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(tl),i=this.injector.get(X0),u=this.injector.get(y_),c=this.injector.get(Hn),p=this.injector.get(d.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function sm(n){return n.appInitializer.bind(n)}function ow(n){return n.bootstrapListener.bind(n)}const om=new d.OlP("Router Initializer");class ah{}const ga="*";function xI(n,e){return{type:7,name:n,definitions:e,options:{}}}function w_(n,e=null){return{type:4,styles:e,timings:n}}function lw(n,e=null){return{type:3,steps:n,options:e}}function am(n,e=null){return{type:2,steps:n,options:e}}function ma(n){return{type:6,styles:n,offset:null}}function cw(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function RI(n=null){return{type:9,options:n}}function ei(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function E_(n){Promise.resolve(null).then(n)}class Gf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){E_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dw{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?E_(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var ye=R(5861),es=R(9681),At=R(2090),uh=R(4859);const hw="firebasestorage.googleapis.com",Rt="storageBucket";class Fn extends At.ZR{constructor(e,t){super(lh(e),`Firebase Storage: ${t} (${lh(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fn.prototype)}_codeEquals(e){return lh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function lh(n){return"storage/"+n}function bs(){return new Fn("unknown","An unknown error occurred, please check the error payload for server response.")}function um(){return new Fn("canceled","User canceled the upload/download.")}function qf(){return new Fn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rl(n){return new Fn("invalid-argument",n)}function cm(){return new Fn("app-deleted","The Firebase app was deleted.")}function kI(n){return new Fn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zf(n,e){return new Fn("invalid-format","String does not match format '"+n+"': "+e)}function Zf(n){throw new Fn("internal-error","Internal error: "+n)}class Ei{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ei.makeFromUrl(e,t)}catch(i){return new Ei(e,"")}if(""===r.path)return r;throw function yw(n){return new Fn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(ze){ze.path_=decodeURIComponent(ze.path)}const M=t.replace(/[.]/g,"\\."),et=[{regex:p,indices:{bucket:1,path:3},postModify:function u(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===hw?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let ze=0;ze<et.length;ze++){const Tt=et[ze],xt=Tt.regex.exec(e);if(xt){let Or=xt[Tt.indices.path];Or||(Or=""),r=new Ei(xt[Tt.indices.bucket],Or),Tt.postModify(r);break}}if(null==r)throw function pM(n){return new Fn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class FI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Wf(n){return"string"==typeof n||n instanceof String}function ww(n){return Kf()&&n instanceof Blob}function Kf(){return"undefined"!=typeof Blob}function Ew(n,e,t,r){if(r<e)throw rl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw rl(`Invalid value for '${n}'. Expected ${t} or less.`)}function il(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function VI(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var _c=(()=>{return(n=_c||(_c={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",_c;var n})();class _M{constructor(e,t,r,i,u,c,p,_,b,S,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=b,this.progressCallback_=S,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,$)=>{this.resolve_=F,this.reject_=$,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function LI(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==p){const _=bs();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(i.canceled?this.appDelete_?cm():um():function mw(){return new Fn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new D_(!1,null,!0)):this.backoffId_=function _w(n,e,t){let r=1,i=null,u=null,c=!1,p=0;function _(){return 2===p}let b=!1;function S(...Se){b||(b=!0,e.apply(null,Se))}function M(Se){i=setTimeout(()=>{i=null,n($,_())},Se)}function F(){u&&clearTimeout(u)}function $(Se,...rt){if(b)return void F();if(Se)return F(),void S.call(null,Se,...rt);if(_()||c)return F(),void S.call(null,Se,...rt);let et;r<64&&(r*=2),1===p?(p=2,et=0):et=1e3*(r+Math.random()),M(et)}let z=!1;function ce(Se){z||(z=!0,F(),!b&&(null!==i?(Se||(p=2),clearTimeout(i),M(0)):Se||(p=1)))}return M(0),u=setTimeout(()=>{c=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new D_(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===_c.NO_ERROR,_=u.getStatus();if(!p||this.isRetryStatusCode_(_)){const S=u.getErrorCode()===_c.ABORT;return void r(!1,new D_(!1,null,S))}const b=-1!==this.successCodes_.indexOf(_);r(!0,new D_(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mM(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||u}}class D_{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function UI(...n){const e=function A_(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Kf())return new Blob(n);throw new Fn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yf{constructor(e,t){this.data=e,this.contentType=t||null}}function M_(n,e){switch(n){case ts.RAW:return new Yf(ru(e));case ts.BASE64:case ts.BASE64URL:return new Yf(Iw(n,e));case ts.DATA_URL:return new Yf(function BI(n){const e=new dm(n);return e.base64?Iw(ts.BASE64,e.rest):function Cw(n){let e;try{e=decodeURIComponent(n)}catch(t){throw zf(ts.DATA_URL,"Malformed data URL.")}return ru(e)}(e.rest)}(e),function Tw(n){return new dm(n).contentType}(e))}throw bs()}function ru(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Iw(n,e){switch(n){case ts.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw zf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw zf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function S_(n){return atob(n)}(e)}catch(i){throw zf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class dm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw zf(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function jI(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ya{constructor(e,t){let r=0,i="";ww(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ww(this.data_)){const i=function bw(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ya(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ya(r,!0)}}static getBlob(...e){if(Kf()){const t=e.map(r=>r instanceof ya?r.data_:r);return new ya(UI.apply(null,t))}{const t=e.map(c=>Wf(c)?M_(ts.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[u++]=c[p]}),new ya(i,!0)}}uploadData(){return this.data_}}function vc(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function vw(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function wc(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Qf(n,e){return e}class pr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Qf}}let hm=null;function dh(){if(hm)return hm;const n=[];n.push(new pr("bucket")),n.push(new pr("generation")),n.push(new pr("metageneration")),n.push(new pr("name","fullPath",!0));const t=new pr("name");t.xform=function e(u,c){return function Dw(n){return!Wf(n)||n.length<2?n:wc(n)}(c)},n.push(t);const i=new pr("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new pr("timeCreated")),n.push(new pr("updated")),n.push(new pr("md5Hash",null,!0)),n.push(new pr("cacheControl",null,!0)),n.push(new pr("contentDisposition",null,!0)),n.push(new pr("contentEncoding",null,!0)),n.push(new pr("contentLanguage",null,!0)),n.push(new pr("contentType",null,!0)),n.push(new pr("metadata","customMetadata",!0)),hm=n,hm}function R_(n,e,t){const r=vc(e);return null===r?null:function O_(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function P_(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Ei(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function N_(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const k_="prefixes";class _a{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Oo(n){if(!n)throw bs()}function pm(n,e){return function t(r,i){const u=R_(n,i,e);return Oo(null!==u),u}}function hh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function nu(){return new Fn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function C_(){return new Fn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function NI(n){return new Fn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function I_(n){return new Fn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Jf(n){const e=hh(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function gw(n){return new Fn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function GI(n,e,t){const i=il(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new _a(i,"GET",pm(n,t),c);return p.errorHandler=Jf(e),p}function CM(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const p=il(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,S=new _a(p,"GET",function HI(n,e){return function t(r,i){const u=function Sw(n,e,t){const r=vc(t);return null===r?null:function Aw(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[k_])for(const i of t[k_]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new Ei(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new Ei(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Oo(null!==u),u}}(n,e.bucket),b);return S.urlParams=u,S.errorHandler=hh(e),S}function xw(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Mw(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class gm{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function mm(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Oo(!1)}return Oo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Nw={STATE_CHANGED:"state_changed"},bi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function V_(n){switch(n){case"running":case"pausing":case"canceling":return bi.RUNNING;case"paused":return bi.PAUSED;case"success":return bi.SUCCESS;case"canceled":return bi.CANCELED;default:return bi.ERROR}}class va{constructor(e,t,r){if(function yM(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function ol(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class TM extends class WI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_c.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_c.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_c.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Zf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zf("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Zf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Xs(){return new TM}class Fw{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=dh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function zI(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=xw(e,r,i),p={name:c.fullPath},_=il(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=N_(c,t),z=new _a(_,"POST",function $(ce){let Se;mm(ce);try{Se=ce.getResponseHeader("X-Goog-Upload-URL")}catch(rt){Oo(!1)}return Oo(Wf(Se)),Se},n.maxUploadRetryTime);return z.urlParams=p,z.headers=S,z.body=M,z.errorHandler=hh(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xs,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Ow(n,e,t,r){const _=new _a(t,"POST",function u(b){const S=mm(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){Oo(!1)}M||Oo(!1);const F=Number(M);return Oo(!isNaN(F)),new gm(F,r.size(),"final"===S)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=hh(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Xs,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new gm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function ZI(n,e,t,r,i,u,c,p){const _=new gm(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function lm(){return new Fn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=_.total-_.current;let S=b;i>0&&(S=Math.min(S,i));const M=_.current,z={"X-Goog-Upload-Command":S===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ce=r.slice(M,M+S);if(null===ce)throw qf();const et=new _a(t,"POST",function Se(ze,Tt){const xt=mm(ze,["active","final"]),Wt=_.current+S,Or=r.size();let $o;return $o="final"===xt?pm(e,u)(ze,Tt):null,new gm(Wt,Or,"final"===xt,$o)},e.maxUploadRetryTime);return et.headers=z,et.body=ce.uploadData(),et.progressCallback=p||null,et.errorHandler=hh(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,Xs,i,u);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=GI(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xs,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Pw(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let et="";for(let ze=0;ze<2;ze++)et+=Math.random().toString().slice(2);return et}();c["Content-Type"]="multipart/related; boundary="+_;const b=xw(e,r,i),S=N_(b,t),$=ya.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+_+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===$)throw qf();const z={name:b.fullPath},ce=il(u,n.host,n._protocol),rt=n.maxUploadRetryTime,ot=new _a(ce,"POST",pm(n,t),rt);return ot.urlParams=z,ot.headers=c,ot.body=$.uploadData(),ot.errorHandler=hh(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xs,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=um(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=V_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new va(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(V_(this._state)){case bi.SUCCESS:ol(this._resolve.bind(null,this.snapshot))();break;case bi.CANCELED:case bi.ERROR:ol(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(V_(this._state)){case bi.RUNNING:case bi.PAUSED:e.next&&ol(e.next.bind(e,this.snapshot))();break;case bi.SUCCESS:e.complete&&ol(e.complete.bind(e))();break;default:e.error&&ol(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ec{constructor(e,t){this._service=e,this._location=t instanceof Ei?t:Ei.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ec(e,t)}get root(){const e=new Ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wc(this._location.path)}get storage(){return this._service}get parent(){const e=function ch(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ei(this._location.bucket,e);return new Ec(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw kI(e)}}function JI(n,e,t){return Uw.apply(this,arguments)}function Uw(){return(Uw=(0,ye.Z)(function*(n,e,t){const i=yield _m(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield JI(n,e,i.nextPageToken))})).apply(this,arguments)}function _m(n,e){null!=e&&"number"==typeof e.maxResults&&Ew("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=CM(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Xs)}function Bw(n){n._throwIfRoot("getDownloadURL");const e=function IM(n,e,t){const i=il(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new _a(i,"GET",function Cs(n,e){return function t(r,i){const u=R_(n,i,e);return Oo(null!==u),function fm(n,e,t,r){const i=vc(e);if(null===i||!Wf(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return il("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+VI({alt:"media",token:b})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=Jf(e),p}(n.storage,n._location,dh());return n.storage.makeRequestWithTokens(e,Xs).then(t=>{if(null===t)throw function T_(){return new Fn("no-download-url","The given file does not have any download URLs.")}();return t})}function H_(n,e){const t=function x_(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ei(n._location.bucket,t);return new Ec(n.storage,r)}function wa(n,e){if(n instanceof qw){const t=n;if(null==t._bucket)throw function gM(){return new Fn("no-default-bucket","No default bucket found. Did you set the '"+Rt+"' property when initializing the app?")}();const r=new Ec(t,t._bucket);return null!=e?wa(r,e):r}return void 0!==e?H_(n,e):n}function vm(n,e){if(e&&function $w(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof qw)return function Hw(n,e){return new Ec(n,e)}(n,e);throw rl("To use ref(service, url), the first argument must be a Storage instance.")}return wa(n,e)}function Gw(n,e){const t=null==e?void 0:e[Rt];return null==t?null:Ei.makeFromBucketSpec(t,n)}class qw{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=hw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ei.makeFromBucketSpec(i,this._host):Gw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ei.makeFromBucketSpec(this._url,e):Gw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ew("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ew("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ec(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new FI(cm());{const u=function sl(n,e,t,r,i,u){const c=VI(n.urlParams),p=n.url+c,_=Object.assign({},n.headers);return function EM(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function vM(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function wM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,u),function bM(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new _M(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const wm="@firebase/storage",Em="storage";function z_(n,e){return vm(n=(0,At.m9)(n),e)}function sT(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new qw(t,r,i,e,es.SDK_VERSION)}!function oT(){(0,es._registerComponent)(new uh.wA(Em,sT,"PUBLIC").setMultipleInstances(!0)),(0,es.registerVersion)(wm,"0.9.6",""),(0,es.registerVersion)(wm,"0.9.6","esm2017")}();var Qw=R(4986),nr=R(5813);function eo(){return(0,Xn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Jn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Jw(n,e){return n===e}var tt,ti=R(2011),W_=(R(8775),R(3942)),al=R(1877),uT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},iu={},Cm=Cm||{},Nt=uT||self;function ep(){}function K_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function tp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xw="closure_uid_"+(1e9*Math.random()>>>0),Y_=0;function lT(n,e,t){return n.call.apply(n.bind,arguments)}function eE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function jr(n,e,t){return(jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lT:eE).apply(null,arguments)}function Q_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function gn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function bc(){this.s=this.s,this.o=this.o}var tE={};bc.prototype.s=!1,bc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function MM(n){return Object.prototype.hasOwnProperty.call(n,Xw)&&n[Xw]||(n[Xw]=++Y_)}(this);delete tE[n]}},bc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const J_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},X_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function dT(n){return Array.prototype.concat.apply([],arguments)}function Im(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ph(n){return/^[\s\xa0]*$/.test(n)}var Fi,nE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ni(n,e){return-1!=n.indexOf(e)}function ev(n,e){return n<e?-1:n>e?1:0}e:{var rE=Nt.navigator;if(rE){var iE=rE.userAgent;if(iE){Fi=iE;break e}}Fi=""}function tv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sE(n){const e={};for(const t in n)e[t]=n[t];return e}var np="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cc(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<np.length;u++)t=np[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function nv(n){return nv[" "](n),n}nv[" "]=ep;var Ic,n,hT=ni(Fi,"Opera"),gh=ni(Fi,"Trident")||ni(Fi,"MSIE"),Tm=ni(Fi,"Edge"),to=Tm||gh,mh=ni(Fi,"Gecko")&&!(ni(Fi.toLowerCase(),"webkit")&&!ni(Fi,"Edge"))&&!(ni(Fi,"Trident")||ni(Fi,"MSIE"))&&!ni(Fi,"Edge"),Ci=ni(Fi.toLowerCase(),"webkit")&&!ni(Fi,"Edge");function ul(){var n=Nt.document;return n?n.documentMode:void 0}e:{var ns="",ip=(n=Fi,mh?/rv:([^\);]+)(\)|;)/.exec(n):Tm?/Edge\/([\d\.]+)/.exec(n):gh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ci?/WebKit\/(\S+)/.exec(n):hT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ip&&(ns=ip?ip[1]:""),gh){var ll=ul();if(null!=ll&&ll>parseFloat(ns)){Ic=String(ll);break e}}Ic=ns}var yh={};var vh=Nt.document&&gh&&(ul()||parseInt(Ic,10))||void 0,wh=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",ep,e),Nt.removeEventListener("test",ep,e)}catch(t){}return n}();function rr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ea(n,e){if(rr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(mh){e:{try{nv(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ea.Z.h.call(this)}}rr.prototype.h=function(){this.defaultPrevented=!0},gn(Ea,rr);var oE={2:"touch",3:"pen",4:"mouse"};Ea.prototype.h=function(){Ea.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Eh="closure_listenable_"+(1e6*Math.random()|0),aE=0;function uE(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++aE,this.ca=this.fa=!1}function sp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function op(n){this.src=n,this.g={},this.h=0}function Dm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=J_(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(sp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Am(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}op.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Am(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new uE(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var Sm="closure_lm_"+(1e6*Math.random()|0),rv={};function iv(n,e,t,r,i){if(r&&r.once)return sv(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)iv(n,e[u],t,r,i);return null}return t=lv(t),n&&n[Eh]?n.N(e,t,tp(r)?!!r.capture:!!r,i):lE(n,e,t,!1,r,i)}function lE(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=tp(i)?!!i.capture:!!i,p=Mm(n);if(p||(n[Sm]=p=new op(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function fT(){var e=pT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wh||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(av(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function sv(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)sv(n,e[u],t,r,i);return null}return t=lv(t),n&&n[Eh]?n.O(e,t,tp(r)?!!r.capture:!!r,i):lE(n,e,t,!0,r,i)}function cE(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)cE(n,e[u],t,r,i);else r=tp(r)?!!r.capture:!!r,t=lv(t),n&&n[Eh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Am(u=n.g[e],t,r,i))&&(sp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Mm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Am(e,t,r,i)),(t=-1<n?e[n]:null)&&ov(t))}function ov(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Eh])Dm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(av(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Mm(e))?(Dm(t,n),0==t.h&&(t.src=null,e[Sm]=null)):sp(n)}}}function av(n){return n in rv?rv[n]:rv[n]="on"+n}function pT(n,e){if(n.ca)n=!0;else{e=new Ea(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ov(n),n=t.call(r,e)}return n}function Mm(n){return(n=n[Sm])instanceof op?n:null}var uv="__closure_events_fn_"+(1e9*Math.random()>>>0);function lv(n){return"function"==typeof n?n:(n[uv]||(n[uv]=function(e){return n.handleEvent(e)}),n[uv])}function ri(){bc.call(this),this.i=new op(this),this.P=this,this.I=null}function ii(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new rr(e,n);else if(e instanceof rr)e.target=e.target||n;else{var i=e;Cc(e=new rr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=bh(c,r,!0,e)&&i}if(i=bh(c=e.g=n,r,!0,e)&&i,i=bh(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=bh(c=e.g=t[u],r,!1,e)&&i}function bh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&Dm(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}gn(ri,bc),ri.prototype[Eh]=!0,ri.prototype.removeEventListener=function(n,e,t,r){cE(this,n,e,t,r)},ri.prototype.M=function(){if(ri.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sp(t[r]);delete n.g[e],n.h--}}this.I=null},ri.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ri.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ap=Nt.JSON.stringify;function gT(){var n=hE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var dE,mT=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new OM,n=>n.reset());class OM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yT(n){Nt.setTimeout(()=>{throw n},0)}function xm(n,e){dE||function _T(){var n=Nt.Promise.resolve(void 0);dE=function(){n.then(fE)}}(),dl||(dE(),dl=!0),hE.add(n,e)}var dl=!1,hE=new class PM{constructor(){this.h=this.g=null}add(e,t){const r=mT.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fE(){for(var n;n=gT();){try{n.h.call(n.g)}catch(t){yT(t)}var e=mT;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}dl=!1}function Pm(n,e){ri.call(this),this.h=n||1,this.g=e||Nt,this.j=jr(this.kb,this),this.l=Date.now()}function Om(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ch(n,e,t){if("function"==typeof n)t&&(n=jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function pE(n){n.g=Ch(()=>{n.g=null,n.i&&(n.i=!1,pE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}gn(Pm,ri),(tt=Pm.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ii(this,"tick"),this.da&&(Om(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Pm.Z.M.call(this),Om(this),delete this.g};class gE extends bc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pE(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function up(n){bc.call(this),this.h=n,this.g={}}gn(up,bc);var mE=[];function yE(n,e,t,r){Array.isArray(t)||(t&&(mE[0]=t.toString()),t=mE);for(var i=0;i<t.length;i++){var u=iv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function _E(n){tv(n.g,function(e,t){this.g.hasOwnProperty(t)&&ov(e)},n),n.g={}}function Rm(){this.g=!0}function Dc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return ap(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}up.prototype.M=function(){up.Z.M.call(this),_E(this)},up.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rm.prototype.Aa=function(){this.g=!1},Rm.prototype.info=function(){};var Ih={},Nm=null;function km(){return Nm=Nm||new ri}function wT(n){rr.call(this,Ih.Ma,n)}function su(n){const e=km();ii(e,new wT(e,n))}function dv(n,e){rr.call(this,Ih.STAT_EVENT,n),this.stat=e}function si(n){const e=km();ii(e,new dv(e,n))}function Fm(n,e){rr.call(this,Ih.Na,n),this.size=e}function lp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}Ih.Ma="serverreachability",gn(wT,rr),Ih.STAT_EVENT="statevent",gn(dv,rr),Ih.Na="timingevent",gn(Fm,rr);var Ac={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},cp={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function dp(){}function EE(){}dp.prototype.h=null;var Vm,Sc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hp(){rr.call(this,"d")}function Lm(){rr.call(this,"c")}function Th(){}function Dh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new up(this),this.P=fv,this.W=new Pm(n=to?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hv}function hv(){this.i=null,this.g="",this.h=!1}gn(hp,rr),gn(Lm,rr),gn(Th,dp),Th.prototype.g=function(){return new XMLHttpRequest},Th.prototype.i=function(){return{}},Vm=new Th;var fv=45e3,Um={},Bm={};function jm(n,e,t){n.K=1,n.v=Zm(ou(e)),n.s=t,n.U=!0,pv(n,null)}function pv(n,e){n.F=Date.now(),fp(n),n.A=ou(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),SE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new hv,n.g=kv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new gE(jr(n.Ia,n,n.g),n.O)),yE(n.V,n.g,"readystatechange",n.gb),e=n.H?sE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),su(1),function vE(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function $m(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function gv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bT(n,t),i==Bm){4==e&&(n.o=4,si(14),r=!1),Dc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Um){n.o=4,si(15),Dc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dc(n.j,n.m,i,null),Hm(n,i)}$m(n)&&i!=Bm&&i!=Um&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,si(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ny(e),e.L=!0,si(11))):(Dc(n.j,n.m,t,"[Invalid Chunked Response]"),hl(n),Mc(n))}function bT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Bm:(t=Number(e.substring(t,r)),isNaN(t)?Um:(r+=1)+t>e.length?Bm:(e=e.substr(r,t),n.C=r+t,e))}function fp(n){n.Y=Date.now()+n.P,bE(n,n.P)}function bE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lp(jr(n.eb,n),e)}function Ah(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Mc(n){0==n.l.G||n.I||Pv(n.l,n)}function hl(n){Ah(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Om(n.W),_E(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Hm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||vv(t.i,n)))if(t.I=n.N,!n.J&&vv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=lp(jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;_p(t),Xm(t)}ty(t),si(18)}if(1>=xE(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else pl(t,11)}else if((n.J||t.g==n)&&_p(t),!ph(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const z=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(ni(z,"spdy")||ni(z,"quic")||ni(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(wv(u,u.h),u.h=null))}if(r.D){const ce=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.sa=ce,An(r.F,r.D,ce))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Nv(r,r.H?r.la:null,r.W),c.J){PE(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(Ah(p),fp(p)),r.g=c}else Mv(r);0<t.l.length&&ey(t)}else"stop"!=b[0]&&"close"!=b[0]||pl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?pl(t,7):Av(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}su(4)}catch(b){}}function Gm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(K_(n)||"string"==typeof n)X_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(K_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function CE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(K_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function xc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof xc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function qm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];fl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)fl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function fl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Dh.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==uu(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const S=uu(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||to||this.g&&(this.h.h||this.g.ga()||UE(this.g)))){this.I||4!=S||7==e||su(8==e||0>=M?3:2),Ah(this);var t=this.g.ba();this.N=t;t:if($m(this)){var r=UE(this.g);n="";var i=r.length,u=4==uu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hl(this),Mc(this);var c="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function vT(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ph(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,si(12),hl(this),Mc(this);break e}Dc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Hm(this,t)}this.U?(gv(this,S,c),to&&this.i&&3==S&&(yE(this.V,this.W,"tick",this.fb),this.W.start())):(Dc(this.j,this.m,c,null),Hm(this,c)),4==S&&hl(this),this.i&&!this.I&&(4==S?Pv(this.l,this):(this.i=!1,fp(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,si(12)):(this.o=0,si(13)),hl(this),Mc(this)}}}catch(S){}},tt.fb=function(){if(this.g){var n=uu(this.g),e=this.g.ga();this.C<e.length&&(Ah(this),gv(this,n,e),this.i&&4!=n&&fp(this))}},tt.cancel=function(){this.I=!0,hl(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function wE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(su(3),si(17)),hl(this),this.o=2,Mc(this)):bE(this,this.Y-n)},(tt=xc.prototype).R=function(){qm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return qm(this),this.g.concat()},tt.get=function(n,e){return fl(this.h,n)?this.h[n]:e},tt.set=function(n,e){fl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var mv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Pc){this.g=void 0!==e?e:n.g,pp(this,n.j),this.s=n.s,zm(this,n.i),Gn(this,n.m),this.l=n.l,e=n.h;var t=new Wm;t.i=e.i,e.g&&(t.g=new xc(e.g),t.h=e.h),yv(this,t),this.o=n.o}else n&&(t=String(n).match(mv))?(this.g=!!e,pp(this,t[1]||"",!0),this.s=Sh(t[2]||""),zm(this,t[3]||"",!0),Gn(this,t[4]),this.l=Sh(t[5]||"",!0),yv(this,t[6]||"",!0),this.o=Sh(t[7]||"")):(this.g=!!e,this.h=new Wm(null,this.g))}function ou(n){return new Pc(n)}function pp(n,e,t){n.j=t?Sh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zm(n,e,t){n.i=t?Sh(e,!0):e}function Gn(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function yv(n,e,t){e instanceof Wm?(n.h=e,function ba(n,e){e&&!n.j&&(au(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Km(this,r),SE(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Mh(e,TT)),n.h=new Wm(e,n.g))}function An(n,e,t){n.h.set(e,t)}function Zm(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mh(e,TE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mh(e,TE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mh(t,"/"==t.charAt(0)?DE:IT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mh(t,AE)),n.join("")};var TE=/[#\/\?@]/g,IT=/[#\?:]/g,DE=/[#\?]/g,TT=/[#\?@]/g,AE=/#/g;function Wm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function au(n){n.g||(n.g=new xc,n.h=0,n.i&&function RM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Km(n,e){au(n),e=Ph(n,e),fl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,fl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&qm(n)))}function Ro(n,e){return au(n),e=Ph(n,e),fl(n.g.h,e)}function SE(n,e,t){Km(n,e),0<t.length&&(n.i=null,n.g.set(Ph(n,e),Im(t)),n.h+=t.length)}function Ph(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function no(n){this.l=n||ME,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=Wm.prototype).add=function(n,e){au(this),this.i=null,n=Ph(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){au(this),this.g.forEach(function(t,r){X_(t,function(i){n.call(e,i,r,this)},this)},this)},tt.T=function(){au(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},tt.R=function(n){au(this);var e=[];if("string"==typeof n)Ro(this,n)&&(e=dT(e,this.g.get(Ph(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=dT(e,n[t])}return e},tt.set=function(n,e){return au(this),this.i=null,Ro(this,n=Ph(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var ME=10;function _v(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xE(n){return n.h?1:n.g?n.g.size:0}function vv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function wv(n,e){n.g?n.g.add(e):n.h=e}function PE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ym(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Im(n.i)}function Oc(){}function DT(){this.g=new Oc}function OE(n,e,t){const r=t||"";try{Gm(n,function(i,u){let c=i;tp(i)&&(c=ap(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function Oh(n){this.l=n.$b||null,this.j=n.ib||!1}function Rc(n,e){ri.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ev,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}no.prototype.cancel=function(){if(this.i=Ym(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Oc.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},Oc.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},gn(Oh,dp),Oh.prototype.g=function(){return new Rc(this.l,this.j)},Oh.prototype.i=function(n){return function(){return n}}({}),gn(Rc,ri);var Ev=0;function bv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Rh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nc(n)}function Nc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Rc.prototype).open=function(n,e){if(this.readyState!=Ev)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nc(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rh(this)),this.readyState=Ev},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nc(this)),this.g&&(this.readyState=3,Nc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rh(this):Nc(this),3==this.readyState&&bv(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Rh(this))},tt.Ta=function(n){this.g&&(this.response=n,Rh(this))},tt.ha=function(){this.g&&Rh(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Qm=Nt.JSON.parse;function qn(n){ri.call(this),this.headers=new xc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cv,this.K=this.L=!1}gn(qn,ri);var Cv="",RE=/^https?$/i,NE=["POST","PUT"];function FE(n){return"content-type"==n.toLowerCase()}function Iv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Tv(n),Jm(n)}function Tv(n){n.D||(n.D=!0,ii(n,"complete"),ii(n,"error"))}function LE(n){if(n.h&&void 0!==Cm&&(!n.C[1]||4!=uu(n)||2!=n.ba()))if(n.v&&4==uu(n))Ch(n.Fa,0,n);else if(ii(n,"readystatechange"),4==uu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(mv)[1]||null;if(!i&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;i=u.substr(0,u.length-1)}r=!RE.test(i?i.toLowerCase():"")}t=r}if(t)ii(n,"complete"),ii(n,"success");else{n.m=6;try{var c=2<uu(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",Tv(n)}}finally{Jm(n)}}}function Jm(n,e){if(n.g){VE(n);const t=n.g,r=n.C[0]?ep:null;n.g=null,n.C=null,e||ii(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function VE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function uu(n){return n.g?n.g.readyState:0}function UE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Cv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Dv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function ST(n){let e="";return tv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function mp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function BE(n){this.za=0,this.l=[],this.h=new Rm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mp("baseRetryDelayMs",5e3,n),this.$a=mp("retryDelaySeedMs",1e4,n),this.Ya=mp("forwardChannelMaxRetries",2,n),this.ra=mp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new no(n&&n.concurrentRequestLimit),this.Ca=new DT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Av(n){if(jE(n),3==n.G){var e=n.V++,t=ou(n.F);An(t,"SID",n.J),An(t,"RID",e),An(t,"TYPE","terminate"),yp(n,t),(e=new Dh(n,n.h,e,void 0)).K=2,e.v=Zm(ou(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=kv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fp(e)}Rv(n)}function Xm(n){n.g&&(ny(n),n.g.cancel(),n.g=null)}function jE(n){Xm(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),_p(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Sv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ey(n)}function ey(n){_v(n.i)||n.m||(n.m=!0,xm(n.Ha,n),n.C=0)}function $E(n,e){var t;t=e?e.m:n.V++;const r=ou(n.F);An(r,"SID",n.J),An(r,"RID",t),An(r,"AID",n.U),yp(n,r),n.o&&n.s&&Dv(r,n.o,n.s),t=new Dh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=HE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),wv(n.i,t),jm(t,r,e)}function yp(n,e){n.j&&Gm({},function(t,r){An(e,r,t)})}function HE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?jr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let b=i[_].h;const S=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),p=!1;else try{OE(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Mv(n){n.g||n.u||(n.Y=1,xm(n.Ga,n),n.A=0)}function ty(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=lp(jr(n.Ga,n),Ov(n,n.A)),n.A++,0))}function ny(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function xv(n){n.g=new Dh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ou(n.oa);An(e,"RID","rpc"),An(e,"SID",n.J),An(e,"CI",n.N?"0":"1"),An(e,"AID",n.U),yp(n,e),An(e,"TYPE","xmlhttp"),n.o&&n.s&&Dv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Zm(ou(e)),t.s=null,t.U=!0,pv(t,n)}function _p(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function Pv(n,e){var t=null;if(n.g==e){_p(n),ny(n),n.g=null;var r=2}else{if(!vv(n.i,e))return;t=e.D,PE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ii(r=km(),new Fm(r,t,e,i)),ey(n)}else Mv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function MT(n,e){return!(xE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=lp(jr(n.Ha,n,e),Ov(n,n.C)),n.C++,0)))}(n,e)||2==r&&ty(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:pl(n,5);break;case 4:pl(n,10);break;case 3:pl(n,6);break;default:pl(n,2)}}function Ov(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function pl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=jr(n.jb,n);t||(t=new Pc("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||pp(t,"https"),Zm(t)),function AT(n,e){const t=new Rm;if(Nt.Image){const r=new Image;r.onload=Q_(gp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Q_(gp,t,r,"TestLoadImage: error",!1,e),r.onabort=Q_(gp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Q_(gp,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else si(2);n.G=0,n.j&&n.j.va(e),Rv(n),jE(n)}function Rv(n){n.G=0,n.I=-1,n.j&&((0!=Ym(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Im(n.l),n.l.length=0),n.j.ua())}function Nv(n,e,t){let r=function IE(n){return n instanceof Pc?ou(n):new Pc(n,void 0)}(t);if(""!=r.i)e&&zm(r,e+"."+r.i),Gn(r,r.m);else{const i=Nt.location;r=function CT(n,e,t,r){var i=new Pc(null,void 0);return n&&pp(i,n),e&&zm(i,e),t&&Gn(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&tv(n.aa,function(i,u){An(r,u,i)}),t=n.sa,(e=n.D)&&t&&An(r,e,t),An(r,"VER",n.ma),yp(n,r),r}function kv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Ba&&!n.qa?new Oh({ib:!0}):n.qa)).L=n.H,e}function gl(){}function ry(){if(gh&&!(10<=Number(vh)))throw Error("Environmental error: no available transport.")}function Is(n,e){ri.call(this),this.g=new BE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ph(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ph(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ml(this)}function kc(n){hp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function xT(){Lm.call(this),this.status=1}function ml(n){this.g=n}(tt=qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Vm.g(),this.C=function ET(n){return n.h||(n.h=n.i())}(this.u?this.u:Vm),this.g.onreadystatechange=jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Iv(this,u)}n=t||"";const i=new xc(this.headers);r&&Gm(r,function(u,c){i.set(c,u)}),r=function cT(n){e:{var e=FE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=J_(NE,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{VE(this),0<this.B&&((this.K=function kE(n){return gh&&function _h(){return function rp(n){var e=yh;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=nE(String(Ic)).split("."),t=nE("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=ev(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||ev(0==i[2].length,0==u[2].length)||ev(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jr(this.pa,this)):this.A=Ch(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Iv(this,u)}},tt.pa=function(){void 0!==Cm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ii(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ii(this,"complete"),ii(this,"abort"),Jm(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jm(this,!0)),qn.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?LE(this):this.cb())},tt.cb=function(){LE(this)},tt.ba=function(){try{return 2<uu(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Qm(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=BE.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Dh(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=sE(u),Cc(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=HE(this,i,e),An(t=ou(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),yp(this,t),this.o&&u&&Dv(t,this.o,u),wv(this.i,i),this.Ra&&An(t,"TYPE","init"),this.ja?(An(t,"$req",e),An(t,"SID","null"),i.$=!0,jm(i,t,null)):jm(i,t,e),this.G=2}}else 3==this.G&&(n?$E(this,n):0==this.l.length||_v(this.i)||$E(this))},tt.Ga=function(){if(this.u=null,xv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=lp(jr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,si(10),Xm(this),xv(this))},tt.ab=function(){null!=this.v&&(this.v=null,Xm(this),ty(this),si(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),si(2)):(this.h.info("Failed to ping google.com"),si(1))},(tt=gl.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},ry.prototype.g=function(n,e){return new Is(n,e)},gn(Is,ri),Is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xm(jr(n.hb,n,e))),si(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Nv(n,null,n.W),ey(n)},Is.prototype.close=function(){Av(this.g)},Is.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Sv(this.g,e)}else this.v?((e={}).__data__=ap(n),Sv(this.g,e)):Sv(this.g,n)},Is.prototype.M=function(){this.g.j=null,delete this.j,Av(this.g),delete this.g,Is.Z.M.call(this)},gn(kc,hp),gn(xT,Lm),gn(ml,gl),ml.prototype.xa=function(){ii(this.g,"a")},ml.prototype.wa=function(n){ii(this.g,new kc(n))},ml.prototype.va=function(n){ii(this.g,new xT(n))},ml.prototype.ua=function(){ii(this.g,"b")},ry.prototype.createWebChannel=ry.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,Ac.NO_ERROR=0,Ac.TIMEOUT=8,Ac.HTTP_ERROR=6,cp.COMPLETE="complete",EE.EventType=Sc,Sc.OPEN="a",Sc.CLOSE="b",Sc.ERROR="c",Sc.MESSAGE="d",ri.prototype.listen=ri.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var NM=iu.createWebChannelTransport=function(){return new ry},GE=iu.getStatEventTarget=function(){return km()},iy=iu.ErrorCode=Ac,kM=iu.EventType=cp,wt=iu.Event=Ih,qE=iu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},PT=iu.FetchXmlHttpFactory=Oh,sy=iu.WebChannel=EE,oy=iu.XhrIo=qn;const zE="@firebase/firestore";class gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");let lu="9.8.0";const ln=new al.Yd("@firebase/firestore");function ZE(){return ln.logLevel}function Le(n,...e){if(ln.logLevel<=al.in.DEBUG){const t=e.map(ay);ln.debug(`Firestore (${lu}): ${n}`,...t)}}function mr(n,...e){if(ln.logLevel<=al.in.ERROR){const t=e.map(ay);ln.error(`Firestore (${lu}): ${n}`,...t)}}function Nh(n,...e){if(ln.logLevel<=al.in.WARN){const t=e.map(ay);ln.warn(`Firestore (${lu}): ${n}`,...t)}}function ay(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function Mt(n,e){n||st()}function Ke(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends At.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class KE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gr.UNAUTHENTICATED))}shutdown(){}}class uy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YE{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $r,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $r)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new KE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new gr(e)}}class QE{constructor(e,t,r){this.type="FirstParty",this.user=gr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class JE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new QE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vp{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.p=t.token,new XE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ts{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function NT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ts.A=-1;class eb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=NT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function Fc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Fv(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new ir(0,0))}static max(){return new bt(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function tb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class cy{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===cy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends cy{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const FM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends cy{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return FM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class cu{constructor(e){this.fields=e,e.sort(yr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new xr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xr.EMPTY_BYTE_STRING=new xr("");const nb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=nb.exec(n);if(Mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vc(n){return"string"==typeof n?xr.fromBase64String(n):xr.fromUint8Array(n)}function Lv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rb(n){const e=n.mapValue.fields.__previous_value__;return Lv(e)?rb(e):e}function wp(n){const e=ro(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class ib{constructor(e,t,r,i,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class du{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new du("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}function Ep(n){return null==n}function Ca(n){return 0===n&&1/n==-1/0}function sb(n){return"number"==typeof n&&Number.isInteger(n)&&!Ca(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Qt.fromString(e))}static fromName(e){return new Ge(Qt.fromString(e).popFirst(5))}static empty(){return new Ge(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Qt(e.slice()))}}const yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bp={nullValue:"NULL_VALUE"};function Uc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lv(n)?4:ub(n)?9007199254740991:10:st()}function ko(n,e){if(n===e)return!0;const t=Uc(n);if(t!==Uc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wp(n).isEqual(wp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=ro(r.timestampValue),c=ro(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Vc(n.bytesValue).isEqual(Vc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return zn(r.geoPointValue.latitude)===zn(i.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return zn(r.integerValue)===zn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=zn(r.doubleValue),c=zn(i.doubleValue);return u===c?Ca(u)===Ca(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Fc(n.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(tb(u)!==tb(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!ko(u[p],c[p])))return!1;return!0}(n,e);default:return st()}var i}function Cp(n,e){return void 0!==(n.values||[]).find(t=>ko(t,e))}function Ia(n,e){if(n===e)return 0;const t=Uc(n),r=Uc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=zn(i.integerValue||i.doubleValue),p=zn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return ob(n.timestampValue,e.timestampValue);case 4:return ob(wp(n),wp(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Vc(i),p=Vc(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const b=Ft(c[_],p[_]);if(0!==b)return b}return Ft(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Ft(zn(i.latitude),zn(u.latitude));return 0!==c?c:Ft(zn(i.longitude),zn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const b=Ia(c[_],p[_]);if(b)return b}return Ft(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===yl.mapValue&&u===yl.mapValue)return 0;if(i===yl.mapValue)return 1;if(u===yl.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=u.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const M=Ft(p[S],b[S]);if(0!==M)return M;const F=Ia(c[p[S]],_[b[S]]);if(0!==F)return F}return Ft(p.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function ob(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=ro(n),r=ro(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function Bc(n){return dy(n)}function dy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ro(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=dy(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${dy(r.fields[p])}`;return u+"}"}(n.mapValue):st();var e}function jc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vv(n){return!!n&&"integerValue"in n}function Ip(n){return!!n&&"arrayValue"in n}function hy(n){return!!n&&"nullValue"in n}function ab(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tp(n){return!!n&&"mapValue"in n}function Dp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Lc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ub(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function LT(n){return"nullValue"in n?bp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jc(du.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function VT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jc(du.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yl:st()}function lb(n,e){const t=Ia(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cb(n,e){const t=Ia(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dp(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Dp(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Tp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Tp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Ii(Dp(this.value))}}function db(n){const e=[];return Lc(n.fields,(t,r)=>{const i=new yr([t]);if(Tp(r)){const u=db(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new cu(e)}class yn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new yn(e,0,bt.min(),bt.min(),Ii.empty(),0)}static newFoundDocument(e,t,r){return new yn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new yn(e,2,t,bt.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,bt.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ap{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Uv(n){return n.fields.find(e=>2===e.kind)}function $c(n){return n.fields.filter(e=>2!==e.kind)}Ap.UNKNOWN_ID=-1;class Sp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mp(0,Ds.min())}}function hb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new Ds(i,Ge.empty(),e)}function UT(n){return new Ds(n.readTime,n.key,-1)}class Ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ds(bt.min(),Ge.empty(),-1)}static max(){return new Ds(bt.max(),Ge.empty(),-1)}}function fy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class Zn{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oi{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:oi.RED,this.left=null!=i?i:oi.EMPTY,this.right=null!=u?u:oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new oi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return oi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1,oi.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new oi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fh(n){return n.hasNext()?n.getNext():void 0}class fb{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function pb(n,e=null,t=[],r=[],i=null,u=null,c=null){return new fb(n,e,t,r,i,u,c)}function _l(n){const e=Ke(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Bc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ep(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bc(r)).join(",")),e.P=t}return e.P}function Lh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!$v(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ko(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Vh(n.startAt,e.startAt)&&Vh(n.endAt,e.endAt)}function Bv(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gy(n,e){return n.filters.filter(t=>t instanceof Wn&&t.field.isEqual(e))}function xp(n,e,t){let r=bp,i=!0;for(const u of gy(n,e)){let c=bp,p=!0;switch(u.op){case"<":case"<=":c=LT(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=bp}lb({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];lb({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function gb(n,e,t){let r=yl,i=!0;for(const u of gy(n,e)){let c=yl,p=!0;switch(u.op){case">=":case">":c=VT(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=yl}cb({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];cb({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Wn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Pp(e,t,r):"array-contains"===t?new $T(e,r):"in"===t?new HT(e,r):"not-in"===t?new GT(e,r):"array-contains-any"===t?new qT(e,r):new Wn(e,t,r)}static V(e,t,r){return"in"===t?new jT(e,r):new LM(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ia(t,this.value)):null!==t&&Uc(this.value)===Uc(t)&&this.v(Ia(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Pp extends Wn{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class jT extends Wn{constructor(e,t){super(e,"in",t),this.keys=jv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class LM extends Wn{constructor(e,t){super(e,"not-in",t),this.keys=jv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class $T extends Wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ip(t)&&Cp(t.arrayValue,this.value)}}class HT extends Wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cp(this.value.arrayValue,t)}}class GT extends Wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cp(this.value.arrayValue,t)}}class qT extends Wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cp(this.value.arrayValue,r))}}class hu{constructor(e,t){this.position=e,this.inclusive=t}}class Hc{constructor(e,t="asc"){this.field=e,this.dir=t}}function $v(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Op(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):Ia(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Vh(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ko(n.position[t],e.position[t]))return!1;return!0}class fu{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function Hv(n,e,t,r,i,u,c,p){return new fu(n,e,t,r,i,u,c,p)}function Gc(n){return new fu(n)}function Gv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Rp(n){for(const e of n.filters)if(e.S())return e.field;return null}function qv(n){return null!==n.collectionGroup}function Np(n){const e=Ke(n);if(null===e.D){e.D=[];const t=Rp(e),r=Gv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Hc(t)),e.D.push(new Hc(yr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Hc(yr.keyField(),u))}}}return e.D}function io(n){const e=Ke(n);if(!e.C)if("F"===e.limitType)e.C=pb(e.path,e.collectionGroup,Np(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Np(e))t.push(new Hc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new hu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hu(e.startAt.position,e.startAt.inclusive):null;e.C=pb(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function mb(n,e,t){return new fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ta(n,e){return Lh(io(n),io(e))&&n.limitType===e.limitType}function zv(n){return`${_l(io(n))}|lt:${n.limitType}`}function vl(n){return`Query(target=${function BT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bc(r.value)}`;var r}).join(", ")}]`),Ep(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bc(t)).join(",")),`Target(${e})`}(io(n))}; limitType=${n.limitType})`}function yb(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=Op(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Np(t),r)||t.endAt&&!function(i,u,c){const p=Op(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Np(t),r)));var t,r}function Zv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _b(n){return(e,t)=>{let r=!1;for(const i of Np(n)){const u=VM(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function VM(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),_=c.data.field(i);return null!==p&&null!==_?Ia(p,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Wv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ca(e)?"-0":e}}function ZT(n){return{integerValue:""+n}}function Kv(n,e){return sb(e)?ZT(e):Wv(n,e)}class Uh{constructor(){this._=void 0}}function WT(n,e,t){return n instanceof Bh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof qc?wb(n,e):n instanceof zc?Eb(n,e):function(r,i){const u=vb(r,i),c=bb(u)+bb(r.k);return Vv(u)&&Vv(r.k)?ZT(c):Wv(r.M,c)}(n,e)}function KT(n,e,t){return n instanceof qc?wb(n,e):n instanceof zc?Eb(n,e):t}function vb(n,e){return n instanceof jh?Vv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bh extends Uh{}class qc extends Uh{constructor(e){super(),this.elements=e}}function wb(n,e){const t=$h(e);for(const r of n.elements)t.some(i=>ko(i,r))||t.push(r);return{arrayValue:{values:t}}}class zc extends Uh{constructor(e){super(),this.elements=e}}function Eb(n,e){let t=$h(e);for(const r of n.elements)t=t.filter(i=>!ko(i,r));return{arrayValue:{values:t}}}class jh extends Uh{constructor(e,t){super(),this.M=e,this.k=t}}function bb(n){return zn(n.integerValue||n.doubleValue)}function $h(n){return Ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hh{constructor(e,t){this.field=e,this.transform=t}}class Ib{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class my{}function YT(n,e,t){n instanceof Fp?function(r,i,u){const c=r.value.clone(),p=yy(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Fo?function(r,i,u){if(!kp(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=yy(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(Ab(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yv(n,e,t){var i;n instanceof Fp?function(r,i,u){if(!kp(r.precondition,i))return;const c=r.value.clone(),p=Lo(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(Db(i),c).setHasLocalMutations()}(n,e,t):n instanceof Fo?function(r,i,u){if(!kp(r.precondition,i))return;const c=Lo(r.fieldTransforms,u,i),p=i.data;p.setAll(Ab(r)),p.setAll(c),i.convertToFoundDocument(Db(i),p).setHasLocalMutations()}(n,e,t):kp(n.precondition,i=e)&&i.convertToNoDocument(bt.min())}function QT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=vb(r.transform,i||null);null!=u&&(null==t&&(t=Ii.empty()),t.set(r.field,u))}return t||null}function Tb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Fc(t,r,(i,u)=>function Cb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof qc&&r instanceof qc||t instanceof zc&&r instanceof zc?Fc(t.elements,r.elements,ko):t instanceof jh&&r instanceof jh?ko(t.k,r.k):t instanceof Bh&&r instanceof Bh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Db(n){return n.isFoundDocument()?n.version:bt.min()}class Fp extends my{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Fo extends my{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function Ab(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yy(n,e,t){const r=new Map;Mt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,KT(c,p,t[i]))}return r}function Lo(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,WT(u,c,e))}return r}class Lp extends my{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Vp extends my{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Up{constructor(e){this.count=e}}var _r,zt;function Sb(n){switch(n){default:return st();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function Bp(n){if(void 0===n)return mr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case _r.OK:return fe.OK;case _r.CANCELLED:return fe.CANCELLED;case _r.UNKNOWN:return fe.UNKNOWN;case _r.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case _r.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case _r.INTERNAL:return fe.INTERNAL;case _r.UNAVAILABLE:return fe.UNAVAILABLE;case _r.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case _r.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case _r.NOT_FOUND:return fe.NOT_FOUND;case _r.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case _r.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case _r.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case _r.ABORTED:return fe.ABORTED;case _r.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case _r.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case _r.DATA_LOSS:return fe.DATA_LOSS;default:return st()}}(zt=_r||(_r={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return kT(this.inner)}size(){return this.innerSize}}const JT=new Zn(Ge.comparator);function so(){return JT}const Mb=new Zn(Ge.comparator);function _y(...n){let e=Mb;for(const t of n)e=e.insert(t.key,t);return e}function Zc(){return new Vo(n=>n.toString(),(n,e)=>n.isEqual(e))}const xb=new Zn(Ge.comparator),XT=new _n(Ge.comparator);function an(...n){let e=XT;for(const t of n)e=e.add(t);return e}const UM=new _n(Ft);function Gh(){return UM}class Wc{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,qh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Wc(bt.min(),r,Gh(),so(),an())}}class qh{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qh(xr.EMPTY_BYTE_STRING,t,an(),an(),an())}}class zh{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class vy{constructor(e,t){this.targetId=e,this.$=t}}class Pb{constructor(e,t,r=xr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ob{constructor(){this.B=0,this.L=Qv(),this.U=xr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=an(),t=an(),r=an();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new qh(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Qv()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class eD{constructor(e){this.nt=e,this.st=new Map,this.it=so(),this.rt=Rb(),this.ot=new _n(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(Bv(u))if(0===r){const c=new Ge(u.path);this.ct(t,c,yn.newNoDocument(c,bt.min()))}else Mt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&Bv(p.target)){const _=new Ge(p.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,yn.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=an();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new Wc(e,t,this.ot,this.it,r);return this.it=so(),this.rt=Rb(),this.ot=new _n(Ft),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ob,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new _n(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ob),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Rb(){return new Zn(Ge.comparator)}function Qv(){return new Zn(Ge.comparator)}const Jv={asc:"ASCENDING",desc:"DESCENDING"},Nb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class kb{constructor(e,t){this.databaseId=e,this.N=t}}function Zh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xv(n,e){return n.N?e.toBase64():e.toUint8Array()}function tD(n,e){return Zh(n,e.toTimestamp())}function Pr(n){return Mt(!!n),bt.fromTimestamp(function(e){const t=ro(e);return new ir(t.seconds,t.nanos)}(n))}function wy(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Fb(n){const e=Qt.fromString(n);return Mt($b(e)),e}function Wh(n,e){return wy(n.databaseId,e.path)}function Da(n,e){const t=Fb(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(Lb(t))}function ai(n,e){return wy(n.databaseId,e)}function Kc(n){const e=Fb(n);return 4===e.length?Qt.emptyPath():Lb(e)}function jp(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Lb(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function nD(n,e,t){return{name:Wh(n,e),fields:t.value.mapValue.fields}}function Kh(n,e,t){const r=Da(n,e.name),i=Pr(e.updateTime),u=new Ii({mapValue:{fields:e.fields}}),c=yn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function $p(n,e){let t;if(e instanceof Fp)t={update:nD(n,e.key,e.value)};else if(e instanceof Lp)t={delete:Wh(n,e.key)};else if(e instanceof Fo)t={update:nD(n,e.key,e.data),updateMask:jb(e.fieldMask)};else{if(!(e instanceof Vp))return st();t={verify:Wh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Bh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof qc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof zc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof jh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:tD(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function Ey(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?sr.updateTime(Pr(i.updateTime)):void 0!==i.exists?sr.exists(i.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Mt("REQUEST_TIME"===c.setToServerValue),p=new Bh):"appendMissingElements"in c?p=new qc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new zc(c.removeAllFromArray.values||[]):"increment"in c?p=new jh(u,c.increment):st();const _=yr.fromServerFormat(c.fieldPath);return new Hh(_,p)}(n,i)):[];var i;if(e.update){const i=Da(n,e.update.name),u=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new cu((e.updateMask.fieldPaths||[]).map(b=>yr.fromServerFormat(b)));return new Fo(i,u,c,t,r)}return new Fp(i,u,t,r)}if(e.delete){const i=Da(n,e.delete);return new Lp(i,t)}if(e.verify){const i=Da(n,e.verify);return new Vp(i,t)}return st()}function Vb(n,e){return{documents:[ai(n,e.path)]}}function by(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ai(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ai(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(S=>function(M){if("=="===M.op){if(ab(M.value))return{unaryFilter:{field:Yc(M.field),op:"IS_NAN"}};if(hy(M.value))return{unaryFilter:{field:Yc(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(ab(M.value))return{unaryFilter:{field:Yc(M.field),op:"IS_NOT_NAN"}};if(hy(M.value))return{unaryFilter:{field:Yc(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yc(M.field),op:BM(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Yc((S=b).field),direction:n0(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Ep(b)?b:{value:b});var b,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function t0(n){let e=Kc(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Hp(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Hc(Yh((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(S){let M;return M="object"==typeof S?S.value:S,Ep(M)?null:M}(t.limit));let _=null;var S;t.startAt&&(_=new hu((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new hu(S.values||[],!S.before)}(t.endAt)),Hv(e,i,c,u,p,"F",_,b)}function Hp(n){return n?void 0!==n.unaryFilter?[Cy(n)]:void 0!==n.fieldFilter?[Bb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Hp(e)).reduce((e,t)=>e.concat(t)):st():[]}function n0(n){return Jv[n]}function BM(n){return Nb[n]}function Yc(n){return{fieldPath:n.canonicalString()}}function Yh(n){return yr.fromServerFormat(n.fieldPath)}function Bb(n){return Wn.create(Yh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function Cy(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Yh(n.unaryFilter.field);return Wn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Yh(n.unaryFilter.field);return Wn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yh(n.unaryFilter.field);return Wn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yh(n.unaryFilter.field);return Wn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function jb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $b(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ui(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sD(e)),e=r0(n.get(t),e);return sD(e)}function r0(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function sD(n){return n+"\x01\x01"}function Aa(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:st()}u=c+2}return new Qt(r)}const Hb=["userId","batchId"];function Gp(n,e){return[n,ui(e)]}function s0(n,e,t){return[n,ui(e),t]}const oD={},Gb=["prefixPath","collectionGroup","readTime","documentId"],qb=["prefixPath","collectionGroup","documentId"],aD=["collectionGroup","readTime","prefixPath","documentId"],uD=["canonicalId","targetId"],zb=["targetId","path"],lD=["path","targetId"],Zb=["collectionId","parent"],Wb=["indexId","uid"],Kb=["uid","sequenceNumber"],Yb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cD=["indexId","uid","orderedDocumentKey"],dD=["userId","collectionPath","documentId"],jM=["userId","collectionPath","largestBatchId"],Qb=["userId","collectionGroup","largestBatchId"],hD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$M=[...hD,"documentOverlays"],fD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HM=[...fD,"indexConfiguration","indexState","indexEntries"],pD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class o0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $r,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Qh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=qp(r.target.error);this.At.reject(new Qh(e,i))}}static open(e,t,r,i){try{return new o0(t,e.transaction(i,r))}catch(u){throw new Qh(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jb(t)}}class rs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===rs.Vt((0,At.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),wl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,At.hl)())return!1;if(rs.St())return!0;const e=(0,At.z$)(),t=rs.Vt(e),r=0<t&&t<10,i=rs.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Qh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Pe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Pe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Qh(e,p))},u.onupgradeneeded=c=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ye.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const _=o0.open(u.db,e,c?"readonly":"readwrite",r),b=i(_).next(S=>(_.bt(),S)).catch(S=>(_.abort(S),ge.reject(S))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&p<3;if(Le("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),u.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class GM{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return wl(this.Ft.delete())}}class Qh extends Pe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pu(n){return"IndexedDbTransactionError"===n.name}class Jb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wl(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),wl(this.store.add(e))}get(e){return wl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),wl(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),wl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ge((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=u=>{const c=qp(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new ge((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new GM(p),b=t(p.primaryKey,p.value,_);if(b instanceof ge){const S=b.catch(M=>(_.done(),ge.reject(M)));r.push(S)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wl(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=qp(r.target.error);t(i)}})}let mD=!1;function qp(n){const e=rs.Vt((0,At.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mD||(mD=!0,setTimeout(()=>{throw r},0)),r}}return n}class a0 extends gD{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=Ke(n);return rs.xt(t.Ht,e)}class Iy{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&YT(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Yv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Yv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&Fc(this.mutations,e.mutations,(t,r)=>Tb(t,r))&&Fc(this.baseMutations,e.baseMutations,(t,r)=>Tb(t,r))}}class Xb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mt(e.mutations.length===r.length);let i=xb;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new Xb(e,t,r,i)}}class u0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(e,t,r,i,u=bt.min(),c=bt.min(),p=xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new El(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ty{constructor(e){this.Jt=e}}function _D(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:l0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Wh(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Zh(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jh(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Jh(e.version)}}var i,u;return r}function l0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qc(n){const e=new ir(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Xh(n,e){const t=(e.baseMutations||[]).map(u=>Ey(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Ey(n.Jt,u)),i=ir.fromMillis(e.localWriteTimeMs);return new Iy(e.batchId,i,t,r)}function zp(n){const e=Qc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qc(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(Mt(1===(i=n.query).documents.length),r=io(Gc(Kc(i.documents[0])))):r=io(t0(n.query)),new El(r,n.targetId,0,n.lastListenSequenceNumber,e,t,xr.fromBase64String(n.resumeToken))}function vD(n,e){const t=Jh(e.snapshotVersion),r=Jh(e.lastLimboFreeSnapshotVersion);let i;i=Bv(e.target)?Vb(n.Jt,e.target):by(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_l(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function c0(n){const e=t0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?mb(e,e.limit,"L"):e}function Zp(n,e){return new u0(e.largestBatchId,Ey(n.Jt,e.overlayMutation))}function eC(n,e){const t=e.path.lastSegment();return[n,ui(e.path.popLast()),t]}class Uo{getBundleMetadata(e,t){return tC(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Qc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return tC(e).put({bundleId:(r=t).id,createTime:Jh(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Dy(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:c0(i.bundledQuery),readTime:Qc(i.readTime)};var i})}saveNamedQuery(e,t){return Dy(e).put({name:(r=t).name,readTime:Jh(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function tC(n){return Hr(n,"bundles")}function Dy(n){return Hr(n,"namedQueries")}class d0{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new d0(e,t.uid||"")}getOverlay(e,t){return Wp(e).get(eC(this.userId,t)).next(r=>r?Zp(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new u0(t,c);i.push(this.Xt(e,p))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ui(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Wp(e).Qt("collectionPathOverlayIndex",p))}),ge.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Zc(),u=ui(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wp(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const b=Zp(this.M,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Zc();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wp(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,b,S)=>{const M=Zp(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return Wp(e).put(function(r,i,u){const[c,p,_]=eC(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:$p(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Wp(n){return Hr(n,"documentOverlays")}class gu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ca(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Vc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?ub(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function nC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function h0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=nC(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}gu.fe=new gu;class wD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=h0(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=h0(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class rC{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class ED{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Kp{constructor(){this.De=new wD,this.Ce=new rC(this.De),this.xe=new ED(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Jc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Jc(this.indexId,this.documentKey,this.arrayValue,r)}}function mu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bl(n.arrayValue,e.arrayValue),0!==t?t:(t=bl(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function bl(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class iC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Uv(e);if(void 0!==t&&!this.Be(t))return!1;const r=$c(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sC{constructor(){this.qe=new f0}addToCollectionParentIndex(e,t){return this.qe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Ds.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class f0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(Qt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(Qt.comparator)).toArray()}}const p0=new Uint8Array(0);class bD{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new f0,this.Ge=new Vo(r=>_l(r),(r,i)=>Lh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ui(i)};return oC(e).put(u)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Fv(t),""],!1,!0);return oC(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Aa(c.parent))}return r})}addFieldIndex(e,t){const r=Qp(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Qp(e),i=Ay(e),u=Yp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Yp(e);let i=!0;const u=new Map;return ge.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=an();const p=[];return ge.forEach(u,(_,b)=>{var S;Le("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${_l(t)}`);const M=function(et,ze){const Tt=Uv(ze);if(void 0===Tt)return null;for(const xt of gy(et,Tt.fieldPath))switch(xt.op){case"array-contains-any":return xt.value.arrayValue.values||[];case"array-contains":return[xt.value]}return null}(b,_),F=function(et,ze){const Tt=new Map;for(const xt of $c(ze))for(const Wt of gy(et,xt.fieldPath))switch(Wt.op){case"==":case"in":Tt.set(xt.fieldPath.canonicalString(),Wt.value);break;case"not-in":case"!=":return Tt.set(xt.fieldPath.canonicalString(),Wt.value),Array.from(Tt.values())}return null}(b,_),$=function(et,ze){const Tt=[];let xt=!0;for(const Wt of $c(ze)){const Or=0===Wt.kind?xp(et,Wt.fieldPath,et.startAt):gb(et,Wt.fieldPath,et.startAt);Tt.push(Or.value),xt&&(xt=Or.inclusive)}return new hu(Tt,xt)}(b,_),z=function(et,ze){const Tt=[];let xt=!0;for(const Wt of $c(ze)){const Or=0===Wt.kind?gb(et,Wt.fieldPath,et.endAt):xp(et,Wt.fieldPath,et.endAt);Tt.push(Or.value),xt&&(xt=Or.inclusive)}return new hu(Tt,xt)}(b,_),ce=this.We(_,b,$),Se=this.We(_,b,z),rt=this.ze(_,b,F),ot=this.He(_.indexId,M,ce,$.inclusive,Se,z.inclusive,rt);return ge.forEach(ot,et=>r.Gt(et,t.limit).next(ze=>{ze.forEach(Tt=>{const xt=Ge.fromSegments(Tt.documentKey);c.has(xt)||(c=c.add(xt),p.push(xt))})}))}).next(()=>p)}return ge.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),S=[];for(let M=0;M<_;++M){const F=t?this.Je(t[M/b]):p0,$=this.Ye(e,F,r[M%b],i),z=this.Xe(e,F,u[M%b],c),ce=p.map(Se=>this.Ye(e,F,Se,!0));S.push(...this.createRange($,z,ce))}return S}Ye(e,t,r,i){const u=new Jc(e,Ge.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Jc(e,Ge.empty(),t,r);return i?u.ke():u}je(e,t){const r=new iC(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return ge.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new _n(yr.comparator),_=!1;for(const b of c.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?_=!0:p=p.add(S.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Kp;for(const i of $c(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);gu.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Kp;return gu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Kp;return gu.fe.Zt(jc(this.databaseId,t),r.Ne(function(i){const u=$c(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Kp);let u=0;for(const c of $c(e)){const p=r[u++];for(const _ of i)if(this.en(t,c.fieldPath)&&Ip(p))i=this.nn(i,c,p);else{const b=_.Ne(c.kind);gu.fe.Zt(p,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new Kp;_.seed(p.Se()),gu.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Wn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Qp(e),i=Ay(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ge.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(b,S){const M=S?new Mp(S.sequenceNumber,new Ds(Qc(S.readTime),new Ge(Aa(S.documentKey)),S.largestBatchId)):Mp.empty(),F=b.fields.map(([$,z])=>new Sp(yr.fromServerFormat($),z));return new Ap(b.indexId,b.collectionGroup,F,M)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Qp(e),u=Ay(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ge.forEach(p,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Jh((F=r).readTime),documentKey:ui(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ge.forEach(p,_=>this.on(e,i,_).next(b=>{const S=this.un(u,_);return b.isEqual(S)?ge.resolve():this.an(e,u,_,b,S)}))))})}cn(e,t,r,i){return Yp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Yp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Yp(e);let u=new _n(mu);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new Jc(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new _n(mu);const i=this.Ze(t,e);if(null==i)return r;const u=Uv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Ip(c))for(const p of c.arrayValue.values||[])r=r.add(new Jc(t.indexId,e.key,this.Je(p),i))}else r=r.add(new Jc(t.indexId,e.key,p0,i));return r}an(e,t,r,i,u){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,b,S,M){const F=p.getIterator(),$=_.getIterator();let z=Fh(F),ce=Fh($);for(;z||ce;){let Se=!1,rt=!1;if(z&&ce){const ot=b(z,ce);ot<0?rt=!0:ot>0&&(Se=!0)}else null!=z?rt=!0:Se=!0;Se?(S(ce),ce=Fh($)):rt?(M(z),z=Fh(F)):(z=Fh(F),ce=Fh($))}}(i,u,mu,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),ge.waitFor(c)}rn(e){let t=1;return Ay(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>mu(c,p)).filter((c,p,_)=>!p||0!==mu(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=mu(c,e),_=mu(c,t);if(0===p)i[0]=e.ke();else if(p>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,p0,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,p0,[]]));return u}getMinOffset(e,t){let r;return ge.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||fy(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Ds.min()})).next(()=>r)}}function oC(n){return Hr(n,"collectionParents")}function Yp(n){return Hr(n,"indexEntries")}function Qp(n){return Hr(n,"indexConfiguration")}function Ay(n){return Hr(n,"indexState")}const aC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class As{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sy(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:c},(S,M,F)=>(p++,F.delete()));u.push(_.next(()=>{Mt(1===p)}));const b=[];for(const S of t.mutations){const M=s0(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return ge.waitFor(u).next(()=>b)}function Jp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(41943040,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);class g0{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new g0(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Cl(e),c=yu(e);return c.add({}).next(p=>{Mt("number"==typeof p);const _=new Iy(p,t,r,i),b=function(F,$,z){const ce=z.baseMutations.map(rt=>$p(F.Jt,rt)),Se=z.mutations.map(rt=>$p(F.Jt,rt));return{userId:$,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ce,mutations:Se}}(this.M,this.userId,_),S=[];let M=new _n((F,$)=>Ft(F.canonicalString(),$.canonicalString()));for(const F of i){const $=s0(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put($,oD))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[p]=_.keys()}),ge.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return yu(e).get(t).next(r=>r?(Mt(r.userId===this.userId),Xh(this.M,r)):null)}fn(e,t){return this.ln[t]?ge.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yu(e).Wt({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(Mt(p.batchId>=r),u=Xh(this.M,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Xh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Cl(e).Wt({range:i},(c,p,_)=>{const[b,S,M]=c,F=Aa(S);if(b===this.userId&&t.path.isEqual(F))return yu(e).get(M).next($=>{if(!$)throw st();Mt($.userId===this.userId),u.push(Xh(this.M,$))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ft);const i=[];return t.forEach(u=>{const c=Gp(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=Cl(e).Wt({range:p},(b,S,M)=>{const[F,$,z]=b,ce=Aa($);F===this.userId&&u.path.isEqual(ce)?r=r.add(z):M.done()});i.push(_)}),ge.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Gp(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new _n(Ft);return Cl(e).Wt({range:c},(_,b,S)=>{const[M,F,$]=_,z=Aa(F);M===this.userId&&r.isPrefixOf(z)?z.length===i&&(p=p.add($)):S.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(yu(e).get(u).next(c=>{if(null===c)throw st();Mt(c.userId===this.userId),r.push(Xh(this.M,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sy(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Cl(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=Aa(u[1]);i.push(_)}else p.done()}).next(()=>{Mt(0===i.length)})})}containsKey(e,t){return uC(e,this.userId,t)}wn(e){return My(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uC(n,e,t){const r=Gp(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Cl(n).Wt({range:u,jt:!0},(p,_,b)=>{const[S,M,F]=p;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function yu(n){return Hr(n,"mutations")}function Cl(n){return Hr(n,"documentMutations")}function My(n){return Hr(n,"mutationQueues")}class Il{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Il(0)}static yn(){return new Il(-1)}}class CD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Il(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>bt.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xc(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Xc(e).Wt((c,p)=>{const _=zp(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>ge.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Xc(e).Wt((r,i)=>{const u=zp(i);t(u)})}pn(e){return m0(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}In(e,t){return m0(e).put("targetGlobalKey",t)}Tn(e,t){return Xc(e).put(vD(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_l(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Xc(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const b=zp(p);Lh(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Tl(e);return t.forEach(c=>{const p=ui(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=Tl(e);return ge.forEach(t,u=>{const c=ui(u.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Tl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Tl(e);let u=an();return i.Wt({range:r,jt:!0},(c,p,_)=>{const b=Aa(c[1]),S=new Ge(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=ui(t.path),i=IDBKeyRange.bound([r],[Fv(r)],!1,!0);let u=0;return Tl(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Xc(e).get(t).next(r=>r?zp(r):null)}}function Xc(n){return Hr(n,"targets")}function m0(n){return Hr(n,"targetGlobal")}function Tl(n){return Hr(n,"targetDocuments")}function ed(n){return lC.apply(this,arguments)}function lC(){return lC=(0,ye.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==pD)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),lC.apply(this,arguments)}function ID([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class cC{constructor(e){this.An=e,this.buffer=new _n(ID),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ID(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){pu(i)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ed(i)}yield t.Sn(e)}))}}class DD{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Ts.A);const r=new cC(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(aC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aC):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,p,_,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),ZE()<=al.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${M} documents in `+(b-_)+`ms\nTotal Duration: ${b-S}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class AD{constructor(e,t){this.db=e,this.garbageCollector=new DD(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return y0(e,r)}removeReference(e,t,r){return y0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return y0(e,t)}On(e,t){return function(r,i){let u=!1;return My(r).zt(c=>uC(r,c,i).next(p=>(p&&(u=!0),ge.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const _=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),Tl(e).delete([0,ui(c.path)])))});i.push(_)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return y0(e,t)}Mn(e,t){const r=Tl(e);let i,u=Ts.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:b})=>{0===c?(u!==Ts.A&&t(new Ge(Aa(i)),u),u=b,i=_):u=Ts.A}).next(()=>{u!==Ts.A&&t(new Ge(Aa(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function y0(n,e){return Tl(n).put((r=n.currentSequenceNumber,{targetId:0,path:ui(e.path),sequenceNumber:r}));var r}class SD{constructor(){this.changes=new Vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qM{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return td(e).put(r)}removeEntry(e,t,r){return td(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],l0(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=yn.newInvalidDocument(t);return td(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Dl(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:yn.newInvalidDocument(t)};return td(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Dl(t))},(i,u)=>{r={document:this.$n(t,u),size:Jp(u)}}).next(()=>r)}getEntries(e,t){let r=so();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=so(),i=new Zn(Ge.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),i=i.insert(u,Jp(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return ge.resolve();let i=new _n(hC);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Dl(i.first()),Dl(i.last())),c=i.getIterator();let p=c.getNext();return td(e).Wt({index:"documentKeyIndex",range:u},(_,b,S)=>{const M=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&hC(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?S.Ut(Dl(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),l0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return td(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=so();for(const _ of c){const b=this.$n(Ge.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=so();const c=dC(t,r),p=dC(t,Ds.max());return td(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,b,S)=>{const M=this.$n(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new zM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return MD(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}Fn(e,t){return MD(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function yD(n,e){let t;if(e.document)t=Kh(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=Qc(e.noDocument.readTime);t=yn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ge.fromSegments(e.unknownDocument.path),i=Qc(e.unknownDocument.version);t=yn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ir(r[0],r[1]);return bt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return yn.newInvalidDocument(e)}}class zM extends SD{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Vo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _n((u,c)=>Ft(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=_D(this.Kn.M,c);i=i.add(u.path.popLast()),r+=Jp(_)-p.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=_D(this.Kn.M,c.convertToNoDocument(bt.min()));t.push(this.Kn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function MD(n){return Hr(n,"remoteDocumentGlobal")}function td(n){return Hr(n,"remoteDocumentsV14")}function Dl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dC(n,e){const t=e.documentKey.path.toArray();return[n,l0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hC(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Ft(t[u],r[u]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class fC{constructor(e){this.M=e}kt(e,t,r,i){const u=new o0("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hb,{unique:!0}),p.createObjectStore("documentMutations"),Al(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Al(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hb,{unique:!0});const S=_.store("mutations"),M=b.map(F=>S.put(F));return ge.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:dD});_.createIndex("collectionPathOverlayIndex",jM,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Qb,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:Gb});_.createIndex("documentKeyIndex",qb),_.createIndex("collectionGroupIndex",aD)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:Wb}).createIndex("sequenceNumberIndex",Kb,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:Yb}).createIndex("documentKeyIndex",cD,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Jp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ge.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>ge.forEach(p,_=>{Mt(_.userId===u.userId);const b=Xh(this.M,_);return Sy(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const _=new Qt(c),b=[0,ui(_)];u.push(t.get(b).next(S=>S?ge.resolve():t.put({targetId:0,path:ui(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ge.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Zb});const r=t.store("collectionParents"),i=new f0,u=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:ui(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const _=new Qt(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,_],b)=>{const S=Aa(p);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=zp(i),c=vD(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(b=c,b.document?new Ge(Qt.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(S))}).next(()=>ge.waitFor(i))}}function Al(n){n.createObjectStore("targetDocuments",{keyPath:zb}).createIndex("documentTargetsIndex",lD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uD,{unique:!0}),n.createObjectStore("targetGlobal")}const xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xp{constructor(e,t,r,i,u,c,p,_,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=S,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!Xp.vt())throw new Pe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AD(this,i),this.hs=t+"main",this.M=new Ty(_),this.ls=new rs(this.hs,this.ts,new fC(this.M)),this.fs=new CD(this.referenceDelegate,this.M),this.ds=new qM(this.M),this._s=new Uo,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,xy);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ts(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Py(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(pu(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return nd(e).get("owner").next(t=>ge.resolve(this.Ps(t)))}Vs(e){return Py(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Hr(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return ge.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ge.resolve(!0):nd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,xy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Py(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new a0(t,Ts.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Py(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return g0.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new bD(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return d0.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?HM:13===c?fD:12===c?$M:11===c?hD:void st();var c;let p;return this.ls.runTransaction(e,i,u,_=>(p=new a0(_,this.es?this.es.next():Ts.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(fe.FAILED_PRECONDITION,pD);return r(p)}).next(b=>this.bs(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}$s(e){return nd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(fe.FAILED_PRECONDITION,xy)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nd(e).put("owner",t)}static vt(){return rs.vt()}Rs(e){const t=nd(e);return t.get("owner").next(r=>this.Ps(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,At.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nd(n){return Hr(n,"owner")}function Py(n){return Hr(n,"clientMetadata")}function eg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _0{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):qv(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Ge(t)).next(r=>{let i=_y();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=_y();return this.indexManager.getCollectionParents(e,i).next(c=>ge.forEach(c,p=>{const _=(b=t,S=p.child(i),new fu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,_,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const _=p.key;let b=i.get(_);null==b&&(b=yn.newInvalidDocument(_),i=i.insert(_,b)),Yv(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,c)=>{yb(t,c)||(i=i.remove(u))}),i))}}class ef{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=an(),i=an();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new ef(e,t.fromCache,r,i)}}class xD{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return ge.resolve(null)}ei(e,t,r,i){return function zT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(bt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(ZE()<=al.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vl(t)),this.ri(e,c,t,hb(i,-1)))})}si(e,t){let r=new _n(_b(e));return t.forEach((i,u)=>{yb(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return ZE()<=al.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",vl(t)),this.Zs.Qs(e,t,Ds.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class ZM{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Zn(Ft),this.ai=new Vo(u=>_l(u),Lh),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new _0(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function PD(n,e,t,r){return new ZM(n,e,t,r)}function OD(n,e){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,ye.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=an();for(const b of i){c.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}return t.fi.Ks(r,_).next(b=>({di:b,removedBatchIds:c,addedBatchIds:p}))})})}),Oy.apply(this,arguments)}function RD(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,b){const S=_.batch,M=S.keys();let F=ge.resolve();return M.forEach($=>{F=F.next(()=>b.getEntry(p,$)).next(z=>{const ce=_.docVersions.get($);Mt(null!==ce),z.version.compareTo(ce)<0&&(S.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),b.addEntry(z)))})}),F.next(()=>c.Bs.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function pC(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function ND(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const p=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var $,z,ce;e.targetMismatches.has(S)?F=F.withResumeToken(xr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),z=F,ce=b,(0===($=M).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,F))});let _=so();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(gC(u,c,e.documentUpdates).next(b=>{_=b})),!r.isEqual(bt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return ge.waitFor(p).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=i,u))}function gC(n,e,t){let r=an();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=so();return t.forEach((c,p)=>{const _=i.get(c);p.isNoDocument()&&p.version.isEqual(bt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Le("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",p.version)}),u})}function mC(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function rd(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,ge.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new El(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function id(n,e,t){return v0.apply(this,arguments)}function v0(){return v0=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!pu(c))throw c;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),v0.apply(this,arguments)}function Ry(n,e,t){const r=Ke(n);let i=bt.min(),u=an();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,b){const S=Ke(p),M=S.ai.get(b);return void 0!==M?ge.resolve(S.ui.get(M)):S.fs.getTargetData(_,b)}(r,c,io(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?i:bt.min(),t?u:an())).next(p=>(kD(r,Zv(e),p),{documents:p,_i:u})))}function w0(n,e){const t=Ke(n),r=Ke(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function Ny(n,e){const t=Ke(n),r=t.ci.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,hb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kD(t,e,i),i))}function kD(n,e,t){let r=bt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function tg(){return tg=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n);let u=an(),c=so();for(const b of t){const S=e.wi(b.metadata.name);b.document&&(u=u.add(S));const M=e.mi(b);M.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(S,M)}const p=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield rd(i,(b=r,io(Gc(Qt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>gC(b,p,c).next(S=>(p.apply(b),S)).next(S=>i.fs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.fs.addMatchingKeys(b,u,_.targetId)).next(()=>i.fi.Gs(b,S)).next(()=>S)))}),tg.apply(this,arguments)}function FD(n,e){return E0.apply(this,arguments)}function E0(){return E0=(0,ye.Z)(function*(n,e,t=an()){const r=yield rd(n,io(c0(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Pr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const p=r.withResumeToken(xr.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(p.targetId,p),i.fs.updateTargetData(u,p).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),E0.apply(this,arguments)}class WM{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ge.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:c0(r.bundledQuery),readTime:Pr(r.readTime)}),ge.resolve();var r}}class KM{constructor(){this.overlays=new Zn(Ge.comparator),this.Ii=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=Zc(),u=t.length+1,c=new Ge(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Zn((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=Zc(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=Zc(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=i)););return ge.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new u0(t,r));let u=this.Ii.get(t);void 0===u&&(u=an(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class b0{constructor(){this.Ti=new _n(Gr.Ei),this.Ai=new _n(Gr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Gr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Gr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ge(new Qt([])),r=new Gr(t,e),i=new Gr(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ge(new Qt([])),r=new Gr(t,e),i=new Gr(t,e+1);let u=an();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Gr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ge.comparator(e.key,t.key)||Ft(e.Ci,t.Ci)}static Ri(e,t){return Ft(e.Ci,t.Ci)||Ge.comparator(e.key,t.key)}}class YM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new _n(Gr.Ei)}checkEmpty(e){return ge.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new Iy(u,t,r,i);this.Bs.push(c);for(const p of i)this.Ni=this.Ni.add(new Gr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return ge.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ge.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gr(t,0),i=new Gr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const p=this.ki(c.Ci);u.push(p)}),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ft);return t.forEach(i=>{const u=new Gr(i,0),c=new Gr(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],p=>{r=r.add(p.Ci)})}),ge.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new Gr(new Ge(u),0);let p=new _n(Ft);return this.Ni.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(_.Ci)),!0)},c),ge.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Mt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ge.forEach(t.mutations,i=>{const u=new Gr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Gr(t,0),i=this.Ni.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class QM{constructor(e){this.$i=e,this.docs=new Zn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=so();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():yn.newInvalidDocument(i))}),ge.resolve(r)}getAllFromCollection(e,t,r){let i=so();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||fy(UT(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Bi(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JM(this)}getSize(e){return ge.resolve(this.size)}}class JM extends SD{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class XM{constructor(e){this.persistence=e,this.Li=new Vo(t=>_l(t),Lh),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new b0,this.targetCount=0,this.Ki=Il.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),ge.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Il(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Tn(t),ge.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ge.waitFor(u).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.qi.containsKey(t))}}class ex{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ts(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new XM(this),this.indexManager=new sC,this.ds=new QM(r=>this.referenceDelegate.Qi(r)),this.M=new Ty(t),this._s=new WM(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new YM(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new LD(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return ge.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class LD extends gD{constructor(e){super(),this.currentSequenceNumber=e}}class _C{constructor(e){this.persistence=e,this.Hi=new b0,this.Ji=null}static Yi(e){return new _C(e)}get Xi(){if(this.Ji)return this.Ji;throw st()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xi,r=>{const i=Ge.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,bt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ge.or([()=>ge.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function VD(n,e){return`firestore_clients_${n}_${e}`}function UD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function vC(n,e){return`firestore_targets_${n}_${e}`}class s{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Pe(i.error.code,i.error.message))),c?new s(e,t,i.state,u):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class o{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Pe(r.error.code,r.error.message))),u?new o(e,r.state,i):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class a{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Gh();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=sb(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new a(e,u):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class l{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new l(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class h{constructor(){this.activeTargetIds=Gh()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Zn(Ft),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=VD(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new h),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(VD(e.persistenceKey,i));if(u){const c=a.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(vC(this.persistenceKey,e));if(r){const i=o.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vC(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Ts.A;if(null!=u)try{const p=JSON.parse(u);Mt("number"==typeof p),c=p}catch(p){mr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Ts.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new s(this.currentUser,e,t,r),u=UD(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=UD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=vC(this.persistenceKey,e),u=new o(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return a.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return s.tr(new gr(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return o.tr(i,t)}pr(e){return l.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],p=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Gh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class v{constructor(){this.Ur=new h,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new h,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E{Kr(e){}shutdown(){}}class C{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const A={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class x{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class k extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);Le("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(_=>(Le("RestConnection","Received: ",_),_),_=>{throw Nh("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${A[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new oy;p.listenOnce(kM.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case iy.NO_ERROR:const b=p.getResponseJson();Le("Connection","XHR received:",JSON.stringify(b)),u(b);break;case iy.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),c(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case iy.HTTP_ERROR:const S=p.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function($){const z=$.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(z)>=0?z:fe.UNKNOWN}(M.status);c(new Pe(F,M.message))}else c(new Pe(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=NM(),c=GE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new PT({})),this.lo(p.initMessageHeaders,t,r),(0,At.uI)()||(0,At.b$)()||(0,At.d)()||(0,At.w1)()||(0,At.Mn)()||(0,At.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Le("Connection","Creating WebChannel: "+_,p);const b=u.createWebChannel(_,p);let S=!1,M=!1;const F=new x({Jr:z=>{M?Le("Connection","Not sending because WebChannel is closed:",z):(S||(Le("Connection","Opening WebChannel transport."),b.open(),S=!0),Le("Connection","WebChannel sending:",z),b.send(z))},Yr:()=>b.close()}),$=(z,ce,Se)=>{z.listen(ce,rt=>{try{Se(rt)}catch(ot){setTimeout(()=>{throw ot},0)}})};return $(b,sy.EventType.OPEN,()=>{M||Le("Connection","WebChannel transport opened.")}),$(b,sy.EventType.CLOSE,()=>{M||(M=!0,Le("Connection","WebChannel transport closed"),F.ro())}),$(b,sy.EventType.ERROR,z=>{M||(M=!0,Nh("Connection","WebChannel transport errored:",z),F.ro(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),$(b,sy.EventType.MESSAGE,z=>{var ce;if(!M){const Se=z.data[0];Mt(!!Se);const rt=Se,ot=rt.error||(null===(ce=rt[0])||void 0===ce?void 0:ce.error);if(ot){Le("Connection","WebChannel received error:",ot);const et=ot.status;let ze=function(xt){const Wt=_r[xt];if(void 0!==Wt)return Bp(Wt)}(et),Tt=ot.message;void 0===ze&&(ze=fe.INTERNAL,Tt="Unknown error status: "+et+" with message "+ot.message),M=!0,F.ro(new Pe(ze,Tt)),b.close()}else Le("Connection","WebChannel received:",Se),F.oo(Se)}}),$(c,wt.STAT_EVENT,z=>{z.stat===qE.PROXY?Le("Connection","Detected buffering proxy"):z.stat===qE.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.io()},0),F}}function j(){return"undefined"!=typeof window?window:null}function J(){return"undefined"!=typeof document?document:null}function ve(n){return new kb(n,!0)}class Fe{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class He{constructor(e,t,r,i,u,c,p,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Fe(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ye.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}jo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nt extends He{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function e0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],u=function(_,b){return _.N?(Mt(void 0===b||"string"==typeof b),xr.fromBase64String(b||"")):(Mt(void 0===b||b instanceof Uint8Array),xr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const b=void 0===_.code?fe.UNKNOWN:Bp(_.code);return new Pe(b,_.message||"")}(c);t=new Pb(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Da(n,r.document.name),u=Pr(r.document.updateTime),c=new Ii({mapValue:{fields:r.document.fields}}),p=yn.newFoundDocument(i,u,c);t=new zh(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Da(n,r.document),u=r.readTime?Pr(r.readTime):bt.min(),c=yn.newNoDocument(i,u);t=new zh([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Da(n,r.document);t=new zh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new Up(r.count||0);t=new vy(r.targetId,u)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return bt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Pr(u.readTime):bt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=jp(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=Bv(p)?{documents:Vb(i,p)}:{query:by(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Xv(i,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=Zh(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function Ub(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=jp(this.M),t.removeTarget=e,this.Lo(t)}}class xe extends He{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function iD(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,i){let u=Pr(r.updateTime?r.updateTime:i);return u.isEqual(bt.min())&&(u=Pr(i)),new Ib(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.tu(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=jp(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$p(this.M,r))};this.Lo(t)}}class mt extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(fe.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(fe.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class jt{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(mr(t),this.uu=!1):Le("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class un{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;Sa(c)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(b){const S=Ke(b);S.wu.add(4),yield Sl(S),S.yu.set("Unknown"),S.wu.delete(4),yield li(S)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new jt(r,i)}}function li(n){return _u.apply(this,arguments)}function _u(){return _u=(0,ye.Z)(function*(n){if(Sa(n))for(const e of n.mu)yield e(!0)}),_u.apply(this,arguments)}function Sl(n){return ng.apply(this,arguments)}function ng(){return ng=(0,ye.Z)(function*(n){for(const e of n.mu)yield e(!1)}),ng.apply(this,arguments)}function tf(n,e){const t=Ke(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),sg(t)?ig(t):Ly(t).Mo()&&rg(t,e))}function sd(n,e){const t=Ke(n),r=Ly(t);t._u.delete(e),r.Mo()&&ky(t,e),0===t._u.size&&(r.Mo()?r.$o():Sa(t)&&t.yu.set("Unknown"))}function rg(n,e){n.pu.Z(e.targetId),Ly(n).Ho(e)}function ky(n,e){n.pu.Z(e),Ly(n).Jo(e)}function ig(n){n.pu=new eD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Ly(n).start(),n.yu.au()}function sg(n){return Sa(n)&&!Ly(n).ko()&&n._u.size>0}function Sa(n){return 0===Ke(n).wu.size}function tx(n){n.pu=void 0}function eR(n){return BD.apply(this,arguments)}function BD(){return BD=(0,ye.Z)(function*(n){n._u.forEach((e,t)=>{rg(n,e)})}),BD.apply(this,arguments)}function tR(n,e){return jD.apply(this,arguments)}function jD(){return jD=(0,ye.Z)(function*(n,e){tx(n),sg(n)?(n.yu.lu(e),ig(n)):n.yu.set("Unknown")}),jD.apply(this,arguments)}function nR(n,e,t){return $D.apply(this,arguments)}function $D(){return $D=(0,ye.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Pb&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i._u.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i._u.delete(p),i.pu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wC(n,r)}else if(e instanceof zh?n.pu.ut(e):e instanceof vy?n.pu._t(e):n.pu.ht(e),!t.isEqual(bt.min()))try{const r=yield pC(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=i._u.get(p);if(!_)return;i._u.set(p,_.withResumeToken(xr.EMPTY_BYTE_STRING,_.snapshotVersion)),ky(i,p);const b=new El(_.target,p,1,_.sequenceNumber);rg(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield wC(n,r)}var r}),$D.apply(this,arguments)}function wC(n,e,t){return HD.apply(this,arguments)}function HD(){return HD=(0,ye.Z)(function*(n,e,t){if(!pu(e))throw e;n.wu.add(1),yield Sl(n),n.yu.set("Offline"),t||(t=()=>pC(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield li(n)}))}),HD.apply(this,arguments)}function nx(n,e){return e().catch(t=>wC(n,t,e))}function Fy(n){return GD.apply(this,arguments)}function GD(){return GD=(0,ye.Z)(function*(n){const e=Ke(n),t=nf(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;rR(e);)try{const i=yield mC(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,iR(e,i)}catch(i){yield wC(e,i)}rx(e)&&ix(e)}),GD.apply(this,arguments)}function rR(n){return Sa(n)&&n.du.length<10}function iR(n,e){n.du.push(e);const t=nf(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function rx(n){return Sa(n)&&!nf(n).ko()&&n.du.length>0}function ix(n){nf(n).start()}function sR(n){return qD.apply(this,arguments)}function qD(){return qD=(0,ye.Z)(function*(n){nf(n).nu()}),qD.apply(this,arguments)}function oR(n){return zD.apply(this,arguments)}function zD(){return zD=(0,ye.Z)(function*(n){const e=nf(n);for(const t of n.du)e.Zo(t.mutations)}),zD.apply(this,arguments)}function aR(n,e,t){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,ye.Z)(function*(n,e,t){const r=n.du.shift(),i=Xb.from(r,e,t);yield nx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fy(n)}),ZD.apply(this,arguments)}function uR(n,e){return WD.apply(this,arguments)}function WD(){return WD=(0,ye.Z)(function*(n,e){var t;e&&nf(n).Xo&&(yield(t=(0,ye.Z)(function*(r,i){if(Sb(u=i.code)&&u!==fe.ABORTED){const c=r.du.shift();nf(r).Fo(),yield nx(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Fy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),rx(n)&&ix(n)}),WD.apply(this,arguments)}function sx(n,e){return KD.apply(this,arguments)}function KD(){return KD=(0,ye.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Sa(t);t.wu.add(3),yield Sl(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield li(t)}),KD.apply(this,arguments)}function YD(n,e){return QD.apply(this,arguments)}function QD(){return QD=(0,ye.Z)(function*(n,e){const t=Ke(n);e?(t.wu.delete(2),yield li(t)):e||(t.wu.add(2),yield Sl(t),t.yu.set("Unknown"))}),QD.apply(this,arguments)}function Ly(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ke(e);return i.iu(),new nt(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:eR.bind(null,n),eo:tR.bind(null,n),zo:nR.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Fo(),sg(n)?ig(n):n.yu.set("Unknown")):(yield n.Iu.stop(),tx(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function nf(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ke(e);return i.iu(),new xe(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:sR.bind(null,n),eo:uR.bind(null,n),eu:oR.bind(null,n),tu:aR.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Tu.Fo(),yield Fy(n)):(yield n.Tu.stop(),n.du.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class JD{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new JD(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(n,e){if(mr("AsyncQueue",`${e}: ${n}`),pu(n))return new Pe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Uy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=_y(),this.sortedSet=new Zn(this.comparator)}static emptySet(e){return new Uy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ox{constructor(){this.Eu=new Zn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):st():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class By{constructor(e,t,r,i,u,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new By(e,t,Uy.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ta(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class lR{constructor(){this.Ru=void 0,this.listeners=[]}}class cR{constructor(){this.queries=new Vo(e=>zv(e),Ta),this.onlineState="Unknown",this.bu=new Set}}function XD(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new lR),i)try{u.Ru=yield t.onListen(r)}catch(c){const p=Vy(c,`Initialization of query '${vl(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&rA(t)}),eA.apply(this,arguments)}function tA(n,e){return nA.apply(this,arguments)}function nA(){return nA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),nA.apply(this,arguments)}function dR(n,e){const t=Ke(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Vu(i)&&(r=!0);c.Ru=i}}r&&rA(t)}function hR(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function rA(n){n.bu.forEach(e=>{e.next()})}class iA{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new By(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=By.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class fR{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class ax{constructor(e){this.M=e}wi(e){return Da(this.M,e)}mi(e){return e.metadata.exists?Kh(this.M,e.document,!1):yn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Pr(e)}}class pR{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ux(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new ax(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||an()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function yC(n,e,t,r){return tg.apply(this,arguments)}(e.localStore,new ax(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield FD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function ux(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class lx{constructor(e){this.key=e}}class cx{constructor(e){this.key=e}}class dx{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=an(),this.mutatedKeys=an(),this.Gu=_b(e),this.Qu=new Uy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new ox,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),$=yb(this.query,M)?M:null,z=!!F&&this.mutatedKeys.has(F.key),ce=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Se=!1;F&&$?F.data.isEqual($.data)?z!==ce&&(r.track({type:3,doc:$}),Se=!0):this.Hu(F,$)||(r.track({type:2,doc:$}),Se=!0,(_&&this.Gu($,_)>0||b&&this.Gu($,b)<0)&&(p=!0)):!F&&$?(r.track({type:0,doc:$}),Se=!0):F&&!$&&(r.track({type:1,doc:F}),Se=!0,(_||b)&&(p=!0)),Se&&($?(c=c.add($),u=ce?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:c,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,S)=>function(M,F){const $=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return $(M)-$(F)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new By(this.query,e.Qu,i,u,e.mutatedKeys,0===p,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ox,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=an(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new cx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new lx(r))}),t}ta(e){this.Uu=e._i,this.Ku=an();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return By.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class gR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mR{constructor(e){this.key=e,this.na=!1}}class yR{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Vo(p=>zv(p),Ta),this.ra=new Map,this.oa=new Set,this.ua=new Zn(Ge.comparator),this.aa=new Map,this.ca=new b0,this.ha={},this.la=new Map,this.fa=Il.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function _R(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n,e){const t=SA(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield rd(t.localStore,io(e));t.isPrimaryClient&&tf(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield oA(t,e,r,"current"===p)}return i}),sA.apply(this,arguments)}function oA(n,e,t,r){return aA.apply(this,arguments)}function aA(){return aA=(0,ye.Z)(function*(n,e,t,r){n._a=(S,M,F)=>{return($=(0,ye.Z)(function*(z,ce,Se,rt){let ot=ce.view.Wu(Se);ot.ii&&(ot=yield Ry(z.localStore,ce.query,!1).then(({documents:Tt})=>ce.view.Wu(Tt,ot)));const et=rt&&rt.targetChanges.get(ce.targetId),ze=ce.view.applyChanges(ot,z.isPrimaryClient,et);return yA(z,ce.targetId,ze.Xu),ze.snapshot}),function(z,ce,Se,rt){return $.apply(this,arguments)})(n,S,M,F);var $};const i=yield Ry(n.localStore,e,!0),u=new dx(e,i._i),c=u.Wu(i.documents),p=qh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,p);yA(n,t,_.Xu);const b=new gR(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),aA.apply(this,arguments)}function vR(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!Ta(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield id(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),sd(t.remoteStore,r.targetId),jy(t,r.targetId)}).catch(ed))):(jy(t,r.targetId),yield id(t.localStore,r.targetId,!0))}),uA.apply(this,arguments)}function lA(){return lA=(0,ye.Z)(function*(n,e,t){const r=MA(n);try{const i=yield function(u,c){const p=Ke(u),_=ir.now(),b=c.reduce((M,F)=>M.add(F.key),an());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>p.fi.Ks(M,b).next(F=>{S=F;const $=[];for(const z of c){const ce=QT(z,S.get(z.key));null!=ce&&$.push(new Fo(z.key,ce,db(ce.value.mapValue),sr.exists(!0)))}return p.Bs.addMutationBatch(M,_,$,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let _=u.ha[u.currentUser.toKey()];_||(_=new Zn(Ft)),_=_.insert(c,p),u.ha[u.currentUser.toKey()]=_}(r,i.batchId,t),yield od(r,i.changes),yield Fy(r.remoteStore)}catch(i){const u=Vy(i,"Failed to persist write");t.reject(u)}}),lA.apply(this,arguments)}function hx(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,ye.Z)(function*(n,e){const t=Ke(n);try{const r=yield ND(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Mt(c.na):i.removedDocuments.size>0&&(Mt(c.na),c.na=!1))}),yield od(t,r,e)}catch(r){yield ed(r)}}),cA.apply(this,arguments)}function fx(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ke(u);p.onlineState=c;let _=!1;p.queries.forEach((b,S)=>{for(const M of S.listeners)M.Pu(c)&&(_=!0)}),_&&rA(p)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ER(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new Zn(Ge.comparator);c=c.insert(u,yn.newNoDocument(u,bt.min()));const p=an().add(u),_=new Wc(bt.min(),new Map,new _n(Ft),c,p);yield hx(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),_A(r)}else yield id(r.localStore,e,!1).then(()=>jy(r,e,t)).catch(ed)}),dA.apply(this,arguments)}function bR(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield RD(t.localStore,e);mA(t,r,null),gA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield od(t,i)}catch(i){yield ed(i)}}),hA.apply(this,arguments)}function CR(n,e,t){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(u,c){const p=Ke(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.Bs.lookupMutationBatch(_,c).next(S=>(Mt(null!==S),b=S.keys(),p.Bs.removeMutationBatch(_,S))).next(()=>p.Bs.performConsistencyCheck(_)).next(()=>p.fi.Ks(_,b))})}(r.localStore,e);mA(r,e,t),gA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield od(r,i)}catch(i){yield ed(i)}}),fA.apply(this,arguments)}function pA(){return pA=(0,ye.Z)(function*(n,e){const t=Ke(n);Sa(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ke(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Vy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),pA.apply(this,arguments)}function gA(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function mA(n,e,t){const r=Ke(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function jy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||px(n,r)})}function px(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(sd(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),_A(n))}function yA(n,e,t){for(const r of t)r instanceof lx?(n.ca.addReference(r.key,e),TR(n,r)):r instanceof cx?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||px(n,r.key)):st()}function TR(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.oa.add(r),_A(n))}function _A(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ge(Qt.fromString(e)),r=n.fa.next();n.aa.set(r,new mR(t)),n.ua=n.ua.insert(t,r),tf(n.remoteStore,new El(io(Gc(t.path)),r,2,Ts.A))}}function od(n,e,t){return vA.apply(this,arguments)}function vA(){return vA=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=[],u=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,_)=>{c.push(r._a(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=ef.Ys(_.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.sa.zo(i),yield(p=(0,ye.Z)(function*(_,b){const S=Ke(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ge.forEach(b,F=>ge.forEach(F.Hs,$=>S.persistence.referenceDelegate.addReference(M,F.targetId,$)).next(()=>ge.forEach(F.Js,$=>S.persistence.referenceDelegate.removeReference(M,F.targetId,$)))))}catch(M){if(!pu(M))throw M;Le("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const $=S.ui.get(F),ce=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);S.ui=S.ui.insert(F,ce)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,u))}),vA.apply(this,arguments)}function DR(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,ye.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield OD(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(p=>{p.reject(new Pe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield od(t,r.di)}var i}),wA.apply(this,arguments)}function AR(n,e){const t=Ke(n),r=t.aa.get(e);if(r&&r.na)return an().add(r.key);{let i=an();const u=t.ra.get(e);if(!u)return i;for(const c of u){const p=t.ia.get(c);i=i.unionWith(p.view.ju)}return i}}function SR(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=yield Ry(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&yA(t,e.targetId,i.Xu),i}),EA.apply(this,arguments)}function MR(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,ye.Z)(function*(n,e){const t=Ke(n);return Ny(t.localStore,e).then(r=>od(t,r))}),bA.apply(this,arguments)}function xR(n,e,t,r){return CA.apply(this,arguments)}function CA(){return CA=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n),u=yield function(c,p){const _=Ke(c),b=Ke(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,p).next(M=>M?_.fi.Ks(S,M):ge.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Fy(i.remoteStore):"acknowledged"===t||"rejected"===t?(mA(i,e,r||null),gA(i,e),p=e,Ke(Ke(i.localStore).Bs)._n(p)):st(),yield od(i,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),CA.apply(this,arguments)}function IA(){return IA=(0,ye.Z)(function*(n,e){const t=Ke(n);if(SA(t),MA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield gx(t,r.toArray());t.da=!0,yield YD(t.remoteStore,!0);for(const u of i)tf(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(jy(t,c),id(t.localStore,c,!0))),sd(t.remoteStore,c)}),yield i,yield gx(t,r),function(u){const c=Ke(u);c.aa.forEach((p,_)=>{sd(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new Zn(Ge.comparator)}(t),t.da=!1,yield YD(t.remoteStore,!1)}}),IA.apply(this,arguments)}function gx(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=[],u=[];for(const c of e){let p;const _=r.ra.get(c);if(_&&0!==_.length){p=yield rd(r.localStore,io(_[0]));for(const b of _){const S=r.ia.get(b),M=yield SR(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield w0(r.localStore,c);p=yield rd(r.localStore,b),yield oA(r,mx(b),c,!1)}i.push(p)}return r.sa.zo(u),i}),TA.apply(this,arguments)}function mx(n){return Hv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function OR(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Fs()}function RR(n,e,t,r){return DA.apply(this,arguments)}function DA(){return DA=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n);if(i.da)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Ny(i.localStore,Zv(u[0])),p=Wc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield od(i,c,p);break}case"rejected":yield id(i.localStore,e,!0),jy(i,e,r);break;default:st()}}),DA.apply(this,arguments)}function NR(n,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,ye.Z)(function*(n,e,t){const r=SA(n);if(r.da){for(const i of e){if(r.ra.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const u=yield w0(r.localStore,i),c=yield rd(r.localStore,u);yield oA(r,mx(u),c.targetId,!1),tf(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield id(r.localStore,i,!1).then(()=>{sd(r.remoteStore,i),jy(r,i)}).catch(ed))}}),AA.apply(this,arguments)}function SA(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ER.bind(null,e),e.sa.zo=dR.bind(null,e.eventManager),e.sa.wa=hR.bind(null,e.eventManager),e}function MA(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CR.bind(null,e),e}class yx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=ve(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return PD(this.persistence,new xD,e.initialUser,this.M)}ya(e){return new ex(_C.Yi,this.M)}ga(e){return new v}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _x extends yx{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield MA(r.Ta.syncEngine),yield Fy(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return PD(this.persistence,new xD,e.initialUser,this.M)}pa(e){return new TD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=eg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new Xp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,j(),J(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new v}}class FR extends _x{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof g&&(r.sharedClientState.syncEngine={$r:xR.bind(null,i),Br:RR.bind(null,i),Lr:NR.bind(null,i),Fs:OR.bind(null,i),Fr:MR.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ye.Z)(function*(c){yield function PR(n,e){return IA.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=j();if(!g.vt(t))throw new Pe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=eg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new g(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class xA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>fx(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=DR.bind(null,r.syncEngine),yield YD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cR}createDatastore(e){const t=ve(e.databaseInfo.databaseId),r=new k(e.databaseInfo);return new mt(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>fx(this.syncEngine,p,0),c=C.vt()?new C:new E,new un(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,_,b){const S=new yR(r,i,u,c,p,_);return b&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ke(t);Le("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Sl(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vx(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class EC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class LR{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new $r,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new fR(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ye.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(u,c){const p=Ke(u),_=jp(p.M)+"/documents",b={documents:c.map($=>Wh(p.M,$))},S=yield p._o("BatchGetDocuments",_,b),M=new Map;S.forEach($=>{const z=function rD(n,e){return"found"in e?function(t,r){Mt(!!r.found);const i=Da(t,r.found.name),u=Pr(r.found.updateTime),c=new Ii({mapValue:{fields:r.found.fields}});return yn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const i=Da(t,r.missing),u=Pr(r.readTime);return yn.newNoDocument(i,u)}(n,e):st()}(p.M,$);M.set(z.key.toString(),z)});const F=[];return c.forEach($=>{const z=M.get($.toString());Mt(!!z),F.push(z)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ge.fromPath(i);e.mutations.push(new Vp(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(i,u){const c=Ke(i),p=jp(c.M)+"/documents",_={writes:u.map(b=>$p(c.M,b))};yield c.co("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Pe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class UR{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new Fe(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ye.Z)(function*(){const t=new VR(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Ep(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Sb(t)}return!1}}class BR{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=eb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(p){Le("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Le("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wx(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(u){r.isEqual(u)||(yield OD(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),PA.apply(this,arguments)}function Ex(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RA(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>sx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>sx(e.remoteStore,u)),n.onlineComponents=e}),OA.apply(this,arguments)}function RA(n){return NA.apply(this,arguments)}function NA(){return NA=(0,ye.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield wx(n,new yx)),n.offlineComponents}),NA.apply(this,arguments)}function bC(n){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield Ex(n,new xA)),n.onlineComponents}),kA.apply(this,arguments)}function bx(n){return RA(n).then(e=>e.persistence)}function FA(n){return RA(n).then(e=>e.localStore)}function Cx(n){return bC(n).then(e=>e.remoteStore)}function LA(n){return bC(n).then(e=>e.syncEngine)}function $y(n){return VA.apply(this,arguments)}function VA(){return VA=(0,ye.Z)(function*(n){const e=yield bC(n),t=e.eventManager;return t.onListen=_R.bind(null,e.syncEngine),t.onUnlisten=vR.bind(null,e.syncEngine),t}),VA.apply(this,arguments)}function Ix(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,u,c,p,_){const b=new EC({next:M=>{u.enqueueAndForget(()=>tA(i,S));const F=M.docs.has(c);!F&&M.fromCache?_.reject(new Pe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?_.reject(new Pe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),S=new iA(Gc(c.path),b,{includeMetadataChanges:!0,ku:!0});return XD(i,S)}(yield $y(n),n.asyncQueue,e,t,r)})),r.promise}function Tx(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,u,c,p,_){const b=new EC({next:M=>{u.enqueueAndForget(()=>tA(i,S)),M.fromCache&&"server"===p.source?_.reject(new Pe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),S=new iA(c,b,{includeMetadataChanges:!0,ku:!0});return XD(i,S)}(yield $y(n),n.asyncQueue,e,t,r)})),r.promise}const Dx=new Map;function UA(n,e,t){if(!t)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ax(n,e,t,r){if(!0===e&&!0===r)throw new Pe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sx(n){if(!Ge.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mx(n){if(Ge.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=CC(n);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xx(n,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Px{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ax("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class C0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Px({}),this._settingsFrozen=!1,e instanceof du?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Px(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new RT;switch(t.type){case"gapi":const r=t.client;return Mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new JE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Dx.get(e);t&&(Le("ComponentProvider","Removing Datastore"),Dx.delete(e),t.terminate())}(this),Promise.resolve()}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Ml extends is{constructor(e,t,r){super(e,t,Gc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Ge(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function Ox(n,e,...t){if(n=(0,At.m9)(n),UA("collection","path",e),n instanceof C0){const r=Qt.fromString(e,...t);return Mx(r),new Ml(n,null,r)}{if(!(n instanceof Ln||n instanceof Ml))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Mx(r),new Ml(n.firestore,null,r)}}function IC(n,e,...t){if(n=(0,At.m9)(n),1===arguments.length&&(e=eb.R()),UA("doc","path",e),n instanceof C0){const r=Qt.fromString(e,...t);return Sx(r),new Ln(n,null,new Ge(r))}{if(!(n instanceof Ln||n instanceof Ml))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Sx(r),new Ln(n.firestore,n instanceof Ml?n.converter:null,new Ge(r))}}function Rx(n,e){return n=(0,At.m9)(n),e=(0,At.m9)(e),(n instanceof Ln||n instanceof Ml)&&(e instanceof Ln||e instanceof Ml)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Nx(n,e){return n=(0,At.m9)(n),e=(0,At.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&Ta(n._query,e._query)&&n.converter===e.converter}class QR{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Fe(this,"async_queue_retry"),this.Qa=()=>{const t=J();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=J();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=J();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new $r;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ye.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!pu(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,mr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=JD.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&st()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function BA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class JR{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends C0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new QR,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||kx(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||kx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ib(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new BR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Fx(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield wx(n,t),yield Ex(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===fe.FAILED_PRECONDITION||u.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function Lx(n){if(n._initialized||n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ad{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xl(xr.fromBase64String(e))}catch(t){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xl(xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class og{constructor(e){this._methodName=e}}class TC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const uN=/^__.*__$/;class lN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fp(e,this.data,t,this.fieldTransforms)}}class Vx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ux(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class DC{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new DC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return MC(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ux(this.ec)&&uN.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class cN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||ve(e)}lc(e,t,r,i=!1){return new DC({ec:e,methodName:t,hc:r,path:yr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ag(n){const e=n._freezeSettings(),t=ve(n._databaseId);return new cN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AC(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);GA("Data must be an object, but it was:",c,r);const p=$x(r,c);let _,b;if(u.merge)_=new cu(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=qA(e,M,t);if(!c.contains(F))throw new Pe(fe.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);Gx(S,F)||S.push(F)}_=new cu(S),b=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,b=c.fieldTransforms;return new lN(new Ii(p),_,b)}class I0 extends og{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof I0}}function Bx(n,e,t){return new DC({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class jA extends og{_toFieldTransform(e){return new Hh(e.path,new Bh)}isEqual(e){return e instanceof jA}}class dN extends og{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Bx(this,e,!0),r=this.fc.map(u=>ug(u,t)),i=new qc(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class hN extends og{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Bx(this,e,!0),r=this.fc.map(u=>ug(u,t)),i=new zc(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class fN extends og{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new jh(e.M,Kv(e.M,this.dc));return new Hh(e.path,t)}isEqual(e){return this===e}}function $A(n,e,t,r){const i=n.lc(1,e,t);GA("Data must be an object, but it was:",i,r);const u=[],c=Ii.empty();Lc(r,(_,b)=>{const S=SC(e,_,t);b=(0,At.m9)(b);const M=i.oc(S);if(b instanceof I0)u.push(S);else{const F=ug(b,M);null!=F&&(u.push(S),c.set(S,F))}});const p=new cu(u);return new Vx(c,p,i.fieldTransforms)}function HA(n,e,t,r,i,u){const c=n.lc(1,e,t),p=[qA(e,r,t)],_=[i];if(u.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(qA(e,u[F])),_.push(u[F+1]);const b=[],S=Ii.empty();for(let F=p.length-1;F>=0;--F)if(!Gx(b,p[F])){const $=p[F];let z=_[F];z=(0,At.m9)(z);const ce=c.oc($);if(z instanceof I0)b.push($);else{const Se=ug(z,ce);null!=Se&&(b.push($),S.set($,Se))}}const M=new cu(b);return new Vx(S,M,c.fieldTransforms)}function jx(n,e,t,r=!1){return ug(t,n.lc(r?4:3,e))}function ug(n,e){if(Hx(n=(0,At.m9)(n)))return GA("Unsupported field value:",e,n),$x(n,e);if(n instanceof og)return function(t,r){if(!Ux(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=ug(c,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,At.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ir.fromDate(t);return{timestampValue:Zh(r.M,i)}}if(t instanceof ir){const i=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zh(r.M,i)}}if(t instanceof TC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xl)return{bytesValue:Xv(r.M,t._byteString)};if(t instanceof Ln){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:wy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${CC(t)}`)}(n,e)}function $x(n,e){const t={};return kT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lc(n,(r,i)=>{const u=ug(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Hx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof TC||n instanceof xl||n instanceof Ln||n instanceof og)}function GA(n,e,t){if(!Hx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CC(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function qA(n,e,t){if((e=(0,At.m9)(e))instanceof ad)return e._internalPath;if("string"==typeof e)return SC(n,e);throw MC("Field path arguments must be of type string or ",n,!1,void 0,t)}const pN=new RegExp("[~\\*/\\[\\]]");function SC(n,e,t){if(e.search(pN)>=0)throw MC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch(r){throw MC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function MC(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Pe(fe.INVALID_ARGUMENT,p+n+_)}function Gx(n,e){return n.some(t=>t.isEqual(e))}class T0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gN extends T0{data(){return super.data()}}function xC(n,e){return"string"==typeof e?SC(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}class lg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends T0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new D0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class D0 extends ud{data(e={}){return super.data(e)}}class rf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new D0(this._firestore,this._userDataWriter,r.key,r,new lg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new D0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new D0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:mN(c.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function qx(n,e){return n instanceof ud&&e instanceof ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rf&&e instanceof rf&&n._firestore===e._firestore&&Nx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function zx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A0{}function sf(n,...e){for(const t of e)n=t._apply(n);return n}class yN extends A0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=ag(e.firestore),r=function(i,u,c,p,_,b,S){let M;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Jx(S,b);const $=[];for(const z of S)$.push(Qx(p,i,z));M={arrayValue:{values:$}}}else M=Qx(p,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Jx(S,b),M=jx(c,"where",S,"in"===b||"not-in"===b);const F=Wn.create(_,b,M);return function($,z){if(z.S()){const Se=Rp($);if(null!==Se&&!Se.isEqual(z.field))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Se.toString()}' and '${z.field.toString()}'`);const rt=Gv($);null!==rt&&Xx(0,z.field,rt)}const ce=function(Se,rt){for(const ot of Se.filters)if(rt.indexOf(ot.op)>=0)return ot.op;return null}($,function(Se){switch(Se){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ce)throw new Pe(fe.INVALID_ARGUMENT,ce===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new is(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new fu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class vN extends A0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Hc(i,u);return function(p,_){if(null===Gv(p)){const b=Rp(p);null!==b&&Xx(0,b,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new is(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new fu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Zx extends A0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new is(e.firestore,e.converter,mb(e._query,this.yc,this.Ic))}}class Wx extends A0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Yx(e,this.type,this.Tc,this.Ec);return new is(e.firestore,e.converter,(i=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Kx extends A0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Yx(e,this.type,this.Tc,this.Ec);return new is(e.firestore,e.converter,(i=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Yx(n,e,t,r){if(t[0]=(0,At.m9)(t[0]),t[0]instanceof T0)return function(i,u,c,p,_){if(!p)throw new Pe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of Np(i))if(S.field.isKeyField())b.push(jc(u,p.key));else{const M=p.data.field(S.field);if(Lv(M))throw new Pe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new hu(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ag(n.firestore);return function(u,c,p,_,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new Pe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let $=0;$<b.length;$++){const z=b[$];if(M[$].field.isKeyField()){if("string"!=typeof z)throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!qv(u)&&-1!==z.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const ce=u.path.child(Qt.fromString(z));if(!Ge.isDocumentKey(ce))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const Se=new Ge(ce);F.push(jc(c,Se))}else{const ce=jx(p,_,z);F.push(ce)}}return new hu(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Qx(n,e,t){if("string"==typeof(t=(0,At.m9)(t))){if(""===t)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&-1!==t.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!Ge.isDocumentKey(r))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jc(n,new Ge(r))}if(t instanceof Ln)return jc(n,t._key);throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CC(t)}.`)}function Jx(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Xx(n,e,t){if(!t.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const AN={maxAttempts:5};class zA{convertValue(e,t="none"){switch(Uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Lc(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new TC(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wp(e));default:return null}}convertTimestamp(e){const t=ro(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Mt($b(r));const i=new du(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return i.isEqual(t)||mr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function PC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class SN extends zA{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}class e1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ag(e)}set(e,t,r){this._verifyNotCommitted();const i=af(e,this._firestore),u=PC(i.converter,t,r),c=AC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=af(e,this._firestore);let c;return c="string"==typeof(t=(0,At.m9)(t))||t instanceof ad?HA(this._dataReader,"WriteBatch.update",u._key,t,r,i):$A(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=af(e,this._firestore);return this._mutations=this._mutations.concat(new Lp(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function af(n,e){if((n=(0,At.m9)(n)).firestore!==e)throw new Pe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cg extends zA{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function t1(n,e,t){n=Jt(n,Ln);const r=Jt(n.firestore,Kn),i=PC(n.converter,e,t);return Hy(r,[AC(ag(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,sr.none())])}function n1(n,e,t,...r){n=Jt(n,Ln);const i=Jt(n.firestore,Kn),u=ag(i);let c;return c="string"==typeof(e=(0,At.m9)(e))||e instanceof ad?HA(u,"updateDoc",n._key,e,t,r):$A(u,"updateDoc",n._key,e),Hy(i,[c.toMutation(n._key,sr.exists(!0))])}function r1(n,...e){var t,r,i;n=(0,At.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||BA(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(BA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,b,S;if(n instanceof Ln)b=Jt(n.firestore,Kn),S=Gc(n._key.path),_={next:M=>{e[c]&&e[c](ZA(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Jt(n,is);b=Jt(M.firestore,Kn),S=M._query;const F=new cg(b);_={next:$=>{e[c]&&e[c](new rf(b,F,M,$))},error:e[c+1],complete:e[c+2]},zx(n._query)}return function(M,F,$,z){const ce=new EC(z),Se=new iA(F,ce,$);return M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return XD(yield $y(M),Se)})),()=>{ce.Aa(),M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return tA(yield $y(M),Se)}))}}(qr(b),S,p,_)}function Hy(n,e){return function(t,r){const i=new $r;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function wR(n,e,t){return lA.apply(this,arguments)}(yield LA(t),r,i)})),i.promise}(qr(n),e)}function ZA(n,e,t){const r=t.docs.get(e._key),i=new cg(n);return new ud(n,i,e._key,r,new lg(t.hasPendingWrites,t.fromCache),e.converter)}class VN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ag(e)}get(e){const t=af(e,this._firestore),r=new SN(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new T0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new T0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=af(e,this._firestore),u=PC(i.converter,t,r),c=AC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=af(e,this._firestore);let c;return c="string"==typeof(t=(0,At.m9)(t))||t instanceof ad?HA(this._dataReader,"Transaction.update",u._key,t,r,i):$A(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=af(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=af(e,this._firestore),r=new cg(this._firestore);return super.get(e).then(i=>new ud(this._firestore,r,t._key,i._document,new lg(!1,!1),t.converter))}}function WA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function s1(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function o1(){if(!function FT(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){lu=es.SDK_VERSION,(0,es._registerComponent)(new uh.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Kn(i,new YE(t.getProvider("auth-internal")),new vp(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,es.registerVersion)(zE,"3.4.9",n),(0,es.registerVersion)(zE,"3.4.9","esm2017")}();class S0{constructor(e){this._delegate=e}static fromBase64String(e){return o1(),new S0(xl.fromBase64String(e))}static fromUint8Array(e){return s1(),new S0(xl.fromUint8Array(e))}toBase64(){return o1(),this._delegate.toBase64()}toUint8Array(){return s1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KA(n){return function ZN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class WN{enableIndexedDbPersistence(e,t){return function eN(n,e){Lx(n=Jt(n,Kn));const t=qr(n),r=n._freezeSettings(),i=new xA;return Fx(t,i,new _x(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tN(n){Lx(n=Jt(n,Kn));const e=qr(n),t=n._freezeSettings(),r=new xA;return Fx(e,r,new FR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nN(n){if(n._initialized&&!n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!rs.vt())return Promise.resolve();const i=r+"main";yield rs.delete(i)}),function(r){return t.apply(this,arguments)})(eg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class a1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof du||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function KR(n,e,t,r={}){var i;const u=(n=Jt(n,C0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Nh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=gr.MOCK_USER;else{c=(0,At.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gr(_)}n._authCredentials=new uy(new KE(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function iN(n){return function jR(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield bx(n),t=yield Cx(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i.wu.delete(0),li(i)}(t)}))}(qr(n=Jt(n,Kn)))}(this._delegate)}disableNetwork(){return function sN(n){return function $R(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield bx(n),t=yield Cx(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const u=Ke(i);u.wu.add(0),yield Sl(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=Jt(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ax("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rN(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function IR(n,e){return pA.apply(this,arguments)}(yield LA(e),t)})),t.promise}(qr(n=Jt(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function LN(n,e){return function qR(n,e){const t=new EC(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield $y(n),i=t,Ke(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield $y(n),i=t,void Ke(r).bu.delete(i);var r,i}))}}(qr(n=Jt(n,Kn)),BA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gy(this,Ox(this._delegate,e))}catch(t){throw Ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,IC(this._delegate,e))}catch(t){throw Ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function YR(n,e){if(n=Jt(n,C0),UA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new fu(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function UN(n,e,t){n=Jt(n,Kn);const r=Object.assign(Object.assign({},AN),t);return function(i){if(i.maxAttempts<1)throw new Pe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function zR(n,e,t){const r=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const i=yield(u=n,bC(u).then(c=>c.datastore));var u;new UR(n.asyncQueue,i,t,e,r).run()})),r.promise}(qr(n),i=>e(new VN(n,i)),r)}(this._delegate,t=>e(new u1(this,t)))}batch(){return qr(this._delegate),new l1(new e1(this._delegate,e=>Hy(this._delegate,e)))}loadBundle(e){return function oN(n,e){const t=qr(n=Jt(n,Kn)),r=new JR;return function ZR(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return vx(_,b);if(_ instanceof ArrayBuffer)return vx(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new LR(_,c);var _}(t,ve(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function kR(n,e,t){const r=Ke(n);var i;(i=(0,ye.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(F,$){const z=Ke(F),ce=Pr($.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Se=>z._s.getBundleMetadata(Se,$.id)).then(Se=>!!Se&&Se.createTime.compareTo(ce)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(ux(_));const b=new pR(_,u.localStore,c.M);let S=yield c.ma();for(;S;){const F=yield b.Fu(S);F&&p._updateProgress(F),S=yield c.ma()}const M=yield b.complete();return yield od(u,M.Lu,void 0),yield function(F,$){const z=Ke(F);return z.persistence.runTransaction("Save bundle","readwrite",ce=>z._s.saveBundleMetadata(ce,$))}(u.localStore,_),p._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return Nh("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield LA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function aN(n,e){return function WR(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield FA(n),e)}))}(qr(n=Jt(n,Kn)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class OC extends zA{constructor(e){super(),this.firestore=e}convertBytes(e){return new S0(new xl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class u1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new OC(e)}get(e){const t=hg(e);return this._delegate.get(t).then(r=>new M0(this._firestore,new ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=hg(e);return r?(WA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=hg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=hg(e);return this._delegate.delete(t),this}}class l1{constructor(e){this._delegate=e}set(e,t,r){const i=hg(e);return r?(WA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=hg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=hg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new D0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new x0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=dg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new dg(e,new OC(e),t),i.set(t,u)),u}}dg.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new Ln(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Ma(t,new Ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gy(this.firestore,Ox(this._delegate,e))}catch(t){throw Ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,At.m9)(e))instanceof Ln&&Rx(this._delegate,e)}set(e,t){t=WA("DocumentReference.set",t);try{return t?t1(this._delegate,e,t):t1(this._delegate,e)}catch(r){throw Ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?n1(this._delegate,e):n1(this._delegate,e,t,...r)}catch(i){throw Ss(i,"updateDoc()","DocumentReference.update()")}}delete(){return function kN(n){return Hy(Jt(n.firestore,Kn),[new Lp(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=c1(e),r=d1(e,i=>new M0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return r1(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xN(n){n=Jt(n,Ln);const e=Jt(n.firestore,Kn),t=qr(e),r=new cg(e);return function HR(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,u,c){try{const p=yield function(_,b){const S=Ke(_);return S.persistence.runTransaction("read document","readonly",M=>S.fi.Ls(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Pe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Vy(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield FA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ud(e,r,n._key,i,new lg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function PN(n){n=Jt(n,Ln);const e=Jt(n.firestore,Kn);return Ix(qr(e),n._key,{source:"server"}).then(t=>ZA(e,n,t))}(this._delegate):function MN(n){n=Jt(n,Ln);const e=Jt(n.firestore,Kn);return Ix(qr(e),n._key).then(t=>ZA(e,n,t))}(this._delegate),t.then(r=>new M0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}function Ss(n,e,t){return n.message=n.message.replace(e,t),n}function c1(n){for(const e of n)if("object"==typeof e&&!KA(e))return e;return{}}function d1(n,e){var t,r;let i;return i=KA(n[0])?n[0]:KA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class M0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qx(this._delegate,e._delegate)}}class x0 extends M0{data(e){const t=this._delegate.data(e);return function OT(n,e){n||st()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OC(e)}where(e,t,r){try{return new Ms(this.firestore,sf(this._delegate,function _N(n,e,t){const r=e,i=xC("where",n);return new yN(i,r,t)}(e,t,r)))}catch(i){throw Ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,sf(this._delegate,function wN(n,e="asc"){const t=e,r=xC("orderBy",n);return new vN(r,t)}(e,t)))}catch(r){throw Ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,sf(this._delegate,function EN(n){return xx("limit",n),new Zx("limit",n,"F")}(e)))}catch(t){throw Ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,sf(this._delegate,function bN(n){return xx("limitToLast",n),new Zx("limitToLast",n,"L")}(e)))}catch(t){throw Ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,sf(this._delegate,function CN(...n){return new Wx("startAt",n,!0)}(...e)))}catch(t){throw Ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,sf(this._delegate,function IN(...n){return new Wx("startAfter",n,!1)}(...e)))}catch(t){throw Ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,sf(this._delegate,function TN(...n){return new Kx("endBefore",n,!1)}(...e)))}catch(t){throw Ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,sf(this._delegate,function DN(...n){return new Kx("endAt",n,!0)}(...e)))}catch(t){throw Ss(t,"endAt()","Query.endAt()")}}isEqual(e){return Nx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function RN(n){n=Jt(n,is);const e=Jt(n.firestore,Kn),t=qr(e),r=new cg(e);return function GR(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,u,c){try{const p=yield Ry(i,u,!0),_=new dx(u,p._i),b=_.Wu(p.documents),S=_.applyChanges(b,!1);c.resolve(S.snapshot)}catch(p){const _=Vy(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield FA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new rf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function NN(n){n=Jt(n,is);const e=Jt(n.firestore,Kn),t=qr(e),r=new cg(e);return Tx(t,n._query,{source:"server"}).then(i=>new rf(e,r,n,i))}(this._delegate):function ON(n){n=Jt(n,is);const e=Jt(n.firestore,Kn),t=qr(e),r=new cg(e);return zx(n._query),Tx(t,n._query).then(i=>new rf(e,r,n,i))}(this._delegate),t.then(r=>new YA(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=c1(e),r=d1(e,i=>new YA(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return r1(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}class YN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new x0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new x0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new YN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new x0(this._firestore,r))})}isEqual(e){return qx(this._delegate,e._delegate)}}class Gy extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?IC(this._delegate):IC(this._delegate,e))}catch(t){throw Ss(t,"doc()","CollectionReference.doc()")}}add(e){return function FN(n,e){const t=Jt(n.firestore,Kn),r=IC(n),i=PC(n.converter,e);return Hy(t,[AC(ag(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return Rx(this._delegate,e._delegate)}withConverter(e){return new Gy(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}function hg(n){return Jt(n,Ln)}class QA{constructor(...e){this._delegate=new ad(...e)}static documentId(){return new QA(yr.keyField().canonicalString())}isEqual(e){return(e=(0,At.m9)(e))instanceof ad&&this._delegate._internalPath.isEqual(e._internalPath)}}class fg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jN(){return new jA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fg(e)}static delete(){const e=function BN(){return new I0("deleteField")}();return e._methodName="FieldValue.delete",new fg(e)}static arrayUnion(...e){const t=function $N(...n){return new dN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new fg(t)}static arrayRemove(...e){const t=function HN(...n){return new hN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new fg(t)}static increment(e){const t=function GN(n){return new fN("increment",n)}(e);return t._methodName="FieldValue.increment",new fg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QN={Firestore:a1,GeoPoint:TC,Timestamp:ir,Blob:S0,Transaction:u1,WriteBatch:l1,DocumentReference:Ma,DocumentSnapshot:M0,Query:Ms,QueryDocumentSnapshot:x0,QuerySnapshot:YA,CollectionReference:Gy,FieldPath:QA,FieldValue:fg,setLogLevel:function KN(n){!function WE(n){ln.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function XN(n){(function JN(n,e){n.INTERNAL.registerComponent(new uh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},QN)))})(n,(e,t)=>new a1(e,t,new WN)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(W_.Z);var ek=R(6451),RC=R(5363),tk=R(6063);class nk extends Ur.x{constructor(e=1/0,t=1/0,r=tk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var rk=R(3099);function h1(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,rk.B)({connector:()=>new nk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function f1(n,e){return(0,bo.m)(e)?Tn(()=>n,e):Tn(()=>n)}var JA=R(9468);R(5867);const g1=new Map,uk={activated:!1,tokenObservers:[]},lk={initialized:!1,enabled:!1};function Ti(n){return g1.get(n)||uk}function vu(n,e){g1.set(n,e)}function kC(){return lk}class pk{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new At.BH,yield function gk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new At.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xs=new At.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function y1(n){if(!Ti(n).activated)throw xs.create("use-before-activation",{appName:n.name})}function nS(n,e){return rS.apply(this,arguments)}function rS(){return rS=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(M){throw xs.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw xs.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(M){throw xs.create("fetch-parse-error",{originalErrorMessage:M.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw xs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(_[1]),S=Date.now();return{token:p.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),rS.apply(this,arguments)}function wk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const P0="firebase-app-check-store";let VC=null;function v1(){return VC||(VC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(P0,{keyPath:"compositeKey"})}}catch(t){e(xs.create("storage-open",{originalErrorMessage:t.message}))}}),VC)}function iS(){return iS=(0,ye.Z)(function*(n,e){const r=(yield v1()).transaction(P0,"readwrite"),u=r.objectStore(P0).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;p(xs.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),iS.apply(this,arguments)}const O0=new al.Yd("@firebase/app-check");function C1(n,e){return(0,At.hl)()?function Ik(n,e){return function w1(n,e){return iS.apply(this,arguments)}(function b1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{O0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function I1(){return kC().enabled}function T1(){return uS.apply(this,arguments)}function uS(){return uS=(0,ye.Z)(function*(){const n=kC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),uS.apply(this,arguments)}const xk={error:"UNKNOWN_ERROR"};function Pk(n){return At.US.encodeString(JSON.stringify(n),!1)}function UC(n){return lS.apply(this,arguments)}function lS(){return lS=(0,ye.Z)(function*(n,e=!1){const t=n.app;y1(t);const r=Ti(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&BC(_)&&(i=_)}if(!e&&i&&BC(i))return{token:i.token};let p,c=!1;if(I1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nS(wk(t,yield T1()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const _=yield r.exchangeTokenPromise;return yield C1(t,_),vu(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?O0.warn(_.message):O0.error(_),u=_}return i?(p={token:i.token},vu(t,Object.assign(Object.assign({},r),{token:i})),yield C1(t,i)):p=Rk(u),c&&A1(t,p),p}),lS.apply(this,arguments)}function dS(n,e){const t=Ti(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),vu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function D1(n){const{app:e}=n,t=Ti(e);let r=t.tokenRefresher;r||(r=function Ok(n){const{app:e}=n;return new pk((0,ye.Z)(function*(){let r;if(r=Ti(e).token?yield UC(n,!0):yield UC(n),r.error)throw r.error}),()=>!0,()=>{const t=Ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),vu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function A1(n,e){const t=Ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function BC(n){return n.expireTimeMillis-Date.now()>0}function Rk(n){return{token:Pk(xk),error:n}}class Nk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ti(this.app);for(const t of e)dS(this.app,t.next);return Promise.resolve()}}const k1="app-check-internal";!function Wk(){(0,es._registerComponent)(new uh.wA("app-check",n=>function kk(n,e){return new Nk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(k1).initialize()})),(0,es._registerComponent)(new uh.wA(k1,n=>function Fk(n){return{getToken:e=>UC(n,e),addTokenListener:e=>function cS(n,e,t,r){const{app:i}=n,u=Ti(i),c={next:t,error:r,type:e};if(vu(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&BC(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),D1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>D1(n))}(n,"INTERNAL",e),removeTokenListener:e=>dS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,es.registerVersion)("@firebase/app-check","0.5.8")}();class $C{constructor(){return(0,nr.vb)("app-check")}}"undefined"!=typeof window&&window,R(127);const L1=new d.OlP("angularfire2.auth.use-emulator"),V1=new d.OlP("angularfire2.auth.settings"),U1=new d.OlP("angularfire2.auth.tenant-id"),B1=new d.OlP("angularfire2.auth.langugage-code"),j1=new d.OlP("angularfire2.auth.use-device-language"),$1=new d.OlP("angularfire.auth.persistence"),H1=(n,e,t,r,i,u,c,p)=>(0,ti.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))_.settings[b]=S;return p&&_.setPersistence(p),_},[t,r,i,u,c,p]);let HC=(()=>{class n{constructor(t,r,i,u,c,p,_,b,S,M,F,$){const z=new Ur.x,ce=at(void 0).pipe((0,RC.Q)(c.outsideAngular),Tn(()=>u.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,8775)))),(0,St.U)(()=>(0,ti.on)(t,u,r)),(0,St.U)(Se=>H1(Se,u,p,b,S,M,_,F)),h1({bufferSize:1,refCount:!1}));if(Ko(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ce.pipe(aa()).subscribe();const rt=ce.pipe(Tn(ze=>ze.getRedirectResult().then(Tt=>Tt,()=>null)),nr.iC,h1({bufferSize:1,refCount:!1})),ot=ce.pipe(Tn(ze=>new On.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ze.onAuthStateChanged(xt=>Tt.next(xt),xt=>Tt.error(xt),()=>Tt.complete()))})))),et=ce.pipe(Tn(ze=>new On.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ze.onIdTokenChanged(xt=>Tt.next(xt),xt=>Tt.error(xt),()=>Tt.complete()))}))));this.authState=rt.pipe(f1(ot),(0,JA.R)(c.outsideAngular),(0,RC.Q)(c.insideAngular)),this.user=rt.pipe(f1(et),(0,JA.R)(c.outsideAngular),(0,RC.Q)(c.insideAngular)),this.idToken=this.user.pipe(Tn(ze=>ze?(0,on.D)(ze.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Tn(ze=>ze?(0,on.D)(ze.getIdTokenResult()):at(null))),this.credential=(0,ek.T)(rt,z,this.authState.pipe(dr(ze=>!ze))).pipe((0,St.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,JA.R)(c.outsideAngular),(0,RC.Q)(c.insideAngular))}return(0,ti.pX)(this,ce,u,{spy:{apply:(Se,rt,ot)=>{(Se.startsWith("signIn")||Se.startsWith("createUser"))&&ot.then(et=>z.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nr.HU),d.LFG(L1,8),d.LFG(V1,8),d.LFG(U1,8),d.LFG(B1,8),d.LFG(j1,8),d.LFG($1,8),d.LFG($C,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function G1(n,e){return function eF(n,e=Qw.z){return new On.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function mS(n,e){return G1(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function GC(n,e){return mS(n,e).pipe(Do(void 0),eo(),(0,St.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function q1(n,e,t){return GC(n,t).pipe(Wi((r,i)=>function nF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return yS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return yS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Z_(n,e=Zi.y){return n=null!=n?n:Jw,(0,Xn.e)((t,r)=>{let i,u=!0;t.subscribe((0,Jn.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,St.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function yS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function z1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Z1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=GC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Do(void 0),eo(),dr(([r,i])=>i.length>0||!r),(0,St.U)(([r,i])=>i),nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=z1(e);return q1(this.query,t,this.afs.schedulers.outsideAngular).pipe(nr.iC)}valueChanges(e={}){return mS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),nr.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(nr.iC)}add(e){return this.ref.add(e)}doc(e){return new W1(this.ref.doc(e),this.afs)}}class W1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=K1(r,t);return new Z1(i,u,this.afs)}snapshotChanges(){return function tF(n,e){return G1(n,e).pipe(Do(void 0),eo(),(0,St.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(nr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,on.D)(this.ref.get(e)).pipe(nr.iC)}}class iF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?GC(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),dr(t=>t.length>0),nr.iC):GC(this.query,this.afs.schedulers.outsideAngular).pipe(nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=z1(e);return q1(this.query,t,this.afs.schedulers.outsideAngular).pipe(nr.iC)}valueChanges(e={}){return mS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),nr.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(nr.iC)}}const sF=new d.OlP("angularfire2.enableFirestorePersistence"),oF=new d.OlP("angularfire2.firestore.persistenceSettings"),aF=new d.OlP("angularfire2.firestore.settings"),uF=new d.OlP("angularfire2.firestore.use-emulator");function K1(n,e=(t=>t)){return{query:e(n),ref:n}}let lF=(()=>{class n{constructor(t,r,i,u,c,p,_,b,S,M,F,$,z,ce,Se,rt,ot){this.schedulers=_;const et=(0,ti.on)(t,p,r),ze=S;M&&H1(et,p,F,z,ce,Se,$,rt),[this.firestore,this.persistenceEnabled$]=(0,ti.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Tt=p.runOutsideAngular(()=>et.firestore());if(u&&Tt.settings(u),ze&&Tt.useEmulator(...ze),i&&!Ko(c)){const xt=()=>{try{return(0,on.D)(Tt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Wt){return"undefined"!=typeof console&&console.warn(Wt),at(!1)}};return[Tt,p.runOutsideAngular(xt)]}return[Tt,at(!1)]},[u,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=K1(i,r),p=this.schedulers.ngZone.run(()=>u);return new Z1(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new iF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new W1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(sF,8),d.LFG(aF,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nr.HU),d.LFG(oF,8),d.LFG(uF,8),d.LFG(HC,8),d.LFG(L1,8),d.LFG(V1,8),d.LFG(U1,8),d.LFG(B1,8),d.LFG(j1,8),d.LFG($1,8),d.LFG($C,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),R0=(()=>{class n{constructor(t){this.firebase=t}Register(t){var r=this;return(0,ye.Z)(function*(){try{return yield r.firebase.createUserWithEmailAndPassword(t.email,t.password)}catch(i){return i}})()}Login(t,r){var i=this;return(0,ye.Z)(function*(){try{return yield i.firebase.signInWithEmailAndPassword(t,r)}catch(u){return null}})()}LogOut(){var t=this;return(0,ye.Z)(function*(){try{return yield t.firebase.signOut()}catch(r){return null}})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(HC))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class qC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Y1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new qC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new qC(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new qC(c,this,this._ref)):{next:t.next?c=>t.next(new qC(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class Q1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ld(e,this._service))}get items(){return this._delegate.items.map(e=>new ld(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ld{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function fh(n,e){return H_(n,e)}(this._delegate,e);return new ld(t,this.storage)}get root(){return new ld(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ld(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Y1(function Zw(n,e,t){return function j_(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Fw(n,new ya(e),t)}(n=(0,At.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ts.RAW,r){this._throwIfRoot("putString");const i=M_(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new Y1(new Fw(this._delegate,new ya(i.data,!0),u),this)}listAll(){return function q_(n){return function Vw(n){const e={prefixes:[],items:[]};return JI(n,e).then(()=>e)}(n=(0,At.m9)(n))}(this._delegate).then(e=>new Q1(e,this.storage))}list(e){return function tT(n,e){return _m(n=(0,At.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Q1(t,this.storage))}getMetadata(){return function Ww(n){return function DM(n){n._throwIfRoot("getMetadata");const e=GI(n.storage,n._location,dh());return n.storage.makeRequestWithTokens(e,Xs)}(n=(0,At.m9)(n))}(this._delegate)}updateMetadata(e){return function Kw(n,e){return function XI(n,e){n._throwIfRoot("updateMetadata");const t=function qI(n,e,t,r){const u=il(e.fullServerUrl(),n.host,n._protocol),p=N_(t,r),b=n.maxOperationRetryTime,S=new _a(u,"PATCH",pm(n,r),b);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=p,S.errorHandler=Jf(e),S}(n.storage,n._location,e,dh());return n.storage.makeRequestWithTokens(t,Xs)}(n=(0,At.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function nT(n){return Bw(n=(0,At.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function rT(n){return function jw(n){n._throwIfRoot("deleteObject");const e=function L_(n,e){const r=il(e.fullServerUrl(),n.host,n._protocol),p=new _a(r,"DELETE",function c(_,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=Jf(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xs)}(n=(0,At.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw kI(e)}}class J1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(X1(e))throw rl("ref() expected a child path but got a URL, use refFromURL instead.");return new ld(z_(this._delegate,e),this)}refFromURL(e){if(!X1(e))throw rl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ei.makeFromUrl(e,this._delegate.host)}catch(t){throw rl("refFromUrl() expected a valid full URL but got an invalid one.")}return new ld(z_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function iT(n,e,t,r={}){!function eT(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,At.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function X1(n){return/^[A-Za-z]+:\/\//.test(n)}function pF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new J1(t,r)}function eP(n){const e=function mF(n){return new On.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function cF(n,e=Qw.z){return(0,Xn.e)((t,r)=>{let i=null,u=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function _(){const b=c+n,S=e.now();if(S<b)return i=this.schedule(void 0,b-S),void r.add(i);p()}t.subscribe((0,Jn.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,St.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function zC(n){return{getDownloadURL:()=>at(void 0).pipe(nr.fc,Tn(()=>n.getDownloadURL()),nr.iC),getMetadata:()=>at(void 0).pipe(nr.fc,Tn(()=>n.getMetadata()),nr.iC),delete:()=>(0,on.D)(n.delete()),child:e=>zC(n.child(e)),updateMetadata:e=>(0,on.D)(n.updateMetadata(e)),put:(e,t)=>eP(n.put(e,t)),putString:(e,t,r)=>eP(n.putString(e,t,r)),list:e=>(0,on.D)(n.list(e)),listAll:()=>(0,on.D)(n.listAll())}}!function gF(n){const e={TaskState:bi,TaskEvent:Nw,StringFormat:ts,Storage:J1,Reference:ld};n.INTERNAL.registerComponent(new uh.wA("storage-compat",pF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(W_.Z);const yF=new d.OlP("angularfire2.storageBucket"),_F=new d.OlP("angularfire2.storage.maxUploadRetryTime"),vF=new d.OlP("angularfire2.storage.maxOperationRetryTime"),wF=new d.OlP("angularfire2.storage.use-emulator");let EF=(()=>{class n{constructor(t,r,i,u,c,p,_,b,S,M){const F=(0,ti.on)(t,c,r);this.storage=(0,ti.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const $=c.runOutsideAngular(()=>F.storage(i||void 0)),z=S;return z&&$.useEmulator(...z),_&&$.setMaxUploadRetryTime(_),b&&$.setMaxOperationRetryTime(b),$},[_,b])}ref(t){return zC(this.storage.ref(t))}refFromURL(t){return zC(this.storage.refFromURL(t))}upload(t,r,i){return zC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(yF,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nr.HU),d.LFG(_F,8),d.LFG(vF,8),d.LFG(wF,8),d.LFG($C,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uf=(()=>{class n{constructor(t,r,i,u){this.aFStore=t,this.aFAuth=r,this.AFAuthService=i,this.storage=u,this.usuario=new _i(null),this.storageFirestore=function Yw(n=(0,es.getApp)(),e){return n=(0,At.m9)(n),(0,es._getProvider)(n,Em).getImmediate({identifier:e})}()}setPaciente(t){return this.aFStore.collection("users").add(t)}getPaciente(t){return this.aFStore.collection("users",r=>r.where("email","==",t)).valueChanges()}uploadImage(t,r){var i=this;return(0,ye.Z)(function*(){try{return yield(yield i.storage.ref("/users/"+t).putString(r,"data_url")).ref.getDownloadURL()}catch(u){return console.error(u),null}})()}getPacientes(){return this.aFStore.collection("users").valueChanges()}getTurnos(t){return this.aFStore.collection("turnos",r=>r.where("usuario.email","==",t)).valueChanges()}setTurnos(t){return this.aFStore.collection("turnos").doc(t.id).set(t)}getEspecilistas(){return this.aFStore.collection("users",t=>t.where("rol","==","especialista").where("activo","==","true")).valueChanges()}getEspecilistasByEspecilidad(t){return this.aFStore.collection("users",r=>r.where("rol","==","especialista").where("especialidad","==",t).where("activo","==","true")).valueChanges()}UpdateObj(t,r,i=r.id){return this.aFStore.collection(t).doc(i).set(r,{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(lF),d.LFG(HC),d.LFG(R0),d.LFG(EF))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bF(n,e){1&n&&(d.TgZ(0,"div",12)(1,"button",13),d._uU(2,"Log in"),d.qZA(),d.TgZ(3,"button",14),d._uU(4,"Register"),d.qZA()())}function CF(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"span",15),d._uU(2),d.qZA(),d.TgZ(3,"button",16),d.NdJ("click",function(){return d.CHM(t),d.oxw().onClickLogOut()}),d._UZ(4,"i",17),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(2),d.AsE("",t.usuario.value.nombre," ",t.usuario.value.apellido," ")}}let IF=(()=>{class n{constructor(t,r,i){this.firestore=t,this.auth=r,this.router=i,this.usuario=this.firestore.usuario}ngOnInit(){}onClickLogOut(){this.auth.LogOut(),this.firestore.usuario.next(null),window.localStorage.removeItem("usuario"),this.router.navigateByUrl("login")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uf),d.Y36(R0),d.Y36(Hn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:12,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","gap-2"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["src","../../../assets/clinica-logo2.jpg","alt","",1,"logo"],["class","buttons-login-container",4,"ngIf"],[4,"ngIf"],[1,"buttons-login-container"],["role","button","routerLink","/login",1,"button-24"],["role","button","routerLink","/register",1,"button-24"],[1,"logout-text"],[1,"button-login",3,"click"],[1,"fa","fa-power-off"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"div",1),d._UZ(2,"a",2),d.TgZ(3,"button",3),d._UZ(4,"span",4),d.qZA(),d.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),d._UZ(9,"img",9),d.qZA()()()(),d.YNc(10,bF,5,0,"div",10),d.YNc(11,CF,5,2,"div",11),d.qZA()()),2&t&&(d.xp6(10),d.Q6J("ngIf",null==r.usuario.value),d.xp6(1),d.Q6J("ngIf",null!=r.usuario.value))},directives:[Po,fn,Xu],styles:[".navbar[_ngcontent-%COMP%]{z-index:1001;background-color:#212121}.logo[_ngcontent-%COMP%]{height:3rem;width:3rem;border-radius:10px}.buttons-login-container[_ngcontent-%COMP%]{margin-left:200px}.button-24[_ngcontent-%COMP%]{background:#426eff;border:1px solid #426eff;border-radius:6px;box-shadow:#0000001a 1px 2px 4px;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:nunito,roboto,proxima-nova,proxima nova,sans-serif;font-size:16px;font-weight:800;line-height:16px;min-height:40px;outline:0;padding:12px 14px;text-align:center;text-rendering:geometricprecision;text-transform:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:middle}.button-24[_ngcontent-%COMP%]:hover, .button-24[_ngcontent-%COMP%]:active{background-color:initial;background-position:0 0;color:#42ffff}.button-24[_ngcontent-%COMP%]:active{opacity:.5}.button-login[_ngcontent-%COMP%]{background-color:red;color:#fff;font-size:x-large;border-radius:30px;width:50px;height:50px}.button-login[_ngcontent-%COMP%]:hover{background-color:#fc020277}.logout-text[_ngcontent-%COMP%]{margin-right:10px;font-size:x-large;color:#fff}"]}),n})();function TF(n,e){1&n&&(d.TgZ(0,"li",5)(1,"a",11),d._UZ(2,"i",12),d.TgZ(3,"span",3),d._uU(4," Usuarios "),d.qZA()()())}function DF(n,e){1&n&&(d.TgZ(0,"li",5)(1,"a",9),d._UZ(2,"i",12),d.TgZ(3,"span",3),d._uU(4," Mis datos "),d.qZA()()())}let AF=(()=>{class n{constructor(){}ngOnInit(){this.getUser()}getUser(){let t=window.localStorage.getItem("usuario");this.admin=null!=t&&"admin"==JSON.parse(t).rol}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dashboard"]],decls:20,vars:2,consts:[[1,"main-menu"],["routerLink","/home"],[1,"fa","fa-home","fa-2x"],[1,"nav-text"],["class","has-subnav",4,"ngIf"],[1,"has-subnav"],["routerLink","mis-turnos"],[1,"fa","fa-clock-o","fa-2x"],[1,"logout"],["href","#"],[1,"fa","fa-power-off","fa-2x"],["routerLink","usuarios"],[1,"fa","fa-user","fa-2x"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"ul")(2,"li")(3,"a",1),d._UZ(4,"i",2),d.TgZ(5,"span",3),d._uU(6," Inicio "),d.qZA()()(),d.YNc(7,TF,5,0,"li",4),d.TgZ(8,"li",5)(9,"a",6),d._UZ(10,"i",7),d.TgZ(11,"span",3),d._uU(12," Mis turnos "),d.qZA()()(),d.YNc(13,DF,5,0,"li",4),d.qZA(),d.TgZ(14,"ul",8)(15,"li")(16,"a",9),d._UZ(17,"i",10),d.TgZ(18,"span",3),d._uU(19," Logout "),d.qZA()()()()()),2&t&&(d.xp6(7),d.Q6J("ngIf",r.admin),d.xp6(6),d.Q6J("ngIf",!r.admin))},directives:[Po,fn],styles:['@import"//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css";@import"https://fonts.googleapis.com/css?family=Titillium+Web:300";.fa-2x[_ngcontent-%COMP%]{font-size:2em}.fa[_ngcontent-%COMP%]{position:relative;display:table-cell;width:60px;height:36px;text-align:center;vertical-align:middle;font-size:20px}.main-menu[_ngcontent-%COMP%]:hover, nav.main-menu.expanded[_ngcontent-%COMP%]{width:250px;overflow:visible}.main-menu[_ngcontent-%COMP%]{background:#212121;position:absolute;top:7.5%;bottom:0;height:92.5%;left:0;width:60px;overflow:hidden;transition:width .05s linear;z-index:1000}.main-menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin:7px 0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;display:block;width:250px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:relative;display:table;border-collapse:collapse;border-spacing:0;color:#999;font-family:arial;font-size:14px;text-decoration:none;transition:all .1s linear}.main-menu[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{position:relative;display:table-cell;width:60px;height:36px;text-align:center;vertical-align:middle;font-size:18px}.main-menu[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{position:relative;display:table-cell;vertical-align:middle;width:190px;font-family:Titillium Web,sans-serif}.main-menu[_ngcontent-%COMP%] > ul.logout[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0}.no-touch[_ngcontent-%COMP%]   .scrollable.hover[_ngcontent-%COMP%]{overflow-y:hidden}.no-touch[_ngcontent-%COMP%]   .scrollable.hover[_ngcontent-%COMP%]:hover{overflow-y:auto;overflow:visible}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{text-decoration:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{outline:0;margin:10;padding:0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%], nav.main-menu[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .no-touch[_ngcontent-%COMP%]   .dashboard-page[_ngcontent-%COMP%]   nav.dashboard-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .dashboard-page[_ngcontent-%COMP%]   nav.dashboard-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;background-color:#5d6e7c}@font-face{font-family:Titillium Web;font-style:normal;font-weight:300;src:local("Titillium WebLight"),local("TitilliumWeb-Light"),url(http://themes.googleusercontent.com/static/fonts/titilliumweb/v2/anMUvcNT0H1YN4FII8wpr24bNCNEoFTpS2BTjF6FB5E.woff) format("woff")}']}),n})();function SF(n,e){1&n&&d._UZ(0,"app-navbar")}function MF(n,e){1&n&&d._UZ(0,"app-dashboard")}let xF=(()=>{class n{constructor(t,r,i,u){this.firestore=t,this.auth=r,this.router=i,this.contexts=u,this.title="clinica",this.route=!0}ngOnInit(){var t,r;this.getRouter();let i=window.localStorage.getItem("usuario");i&&(this.firestore.usuario.next(JSON.parse(i)),this.auth.Login(null===(t=this.firestore.usuario.value)||void 0===t?void 0:t.email,null===(r=this.firestore.usuario.value)||void 0===r?void 0:r.password))}ngOnDestroy(){}getRouteAnimationData(){var t,r,i,u;return null===(u=null===(i=null===(r=null===(t=this.contexts.getContext("primary"))||void 0===t?void 0:t.route)||void 0===r?void 0:r.snapshot)||void 0===i?void 0:i.data)||void 0===u?void 0:u.animation}getRouter(){this.router.events.subscribe(t=>{t instanceof ec&&(this.route="/"!=t.url&&"/login"!=t.url&&"/register"!=t.url)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uf),d.Y36(R0),d.Y36(Hn),d.Y36(Qa))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(d.YNc(0,SF,1,0,"app-navbar",0),d.YNc(1,MF,1,0,"app-dashboard",0),d.TgZ(2,"div"),d._UZ(3,"router-outlet"),d.qZA()),2&t&&(d.Q6J("ngIf",r.route),d.xp6(1),d.Q6J("ngIf",r.route),d.xp6(1),d.Q6J("@routeAnimations",r.getRouteAnimationData()))},directives:[fn,IF,AF,Wu],styles:[""],data:{animation:[xI("routeAnimations",[cw("homePage => misTurnosPage",[ma({position:"relative"}),ei(":enter, :leave",[ma({position:"absolute",bottom:0,left:0,width:"100%"})]),ei(":enter",[ma({bottom:"-100%"})]),ei(":leave",RI()),lw([ei(":leave",[w_("300ms ease-out",ma({bottom:"100%"}))]),ei(":enter",[w_("300ms ease-out",ma({bottom:"0%"}))])])]),cw("* => fadePage",[ei(":enter, :leave",[ma({position:"absolute",top:0,width:"100%",opacity:0,transform:"scale(0) translateX(100%)"})]),ei(":enter",[w_("600ms ease",ma({opacity:1,transform:"scale(1) translateY(0)"}))])])])]}}),n})(),tP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),pg=(()=>{class n extends tP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Pl=new d.OlP("NgValueAccessor"),RF={provide:Pl,useExisting:(0,d.Gpc)(()=>qy),multi:!0},kF=new d.OlP("CompositionEventMode");let qy=(()=>{class n extends tP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function NF(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(kF,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([RF]),d.qOj]}),n})();function lf(n){return null==n||0===n.length}function rP(n){return null!=n&&"number"==typeof n.length}const ss=new d.OlP("NgValidators"),cf=new d.OlP("NgAsyncValidators"),FF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vr{static min(e){return function iP(n){return e=>{if(lf(e.value)||lf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function sP(n){return e=>{if(lf(e.value)||lf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function oP(n){return lf(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function aP(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function uP(n){return lf(n.value)||FF.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function lP(n){return e=>lf(e.value)||!rP(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function cP(n){return e=>rP(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function dP(n){if(!n)return ZC;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(lf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return yP(e)}static composeAsync(e){return _P(e)}}function ZC(n){return null}function hP(n){return null!=n}function fP(n){const e=(0,d.QGY)(n)?(0,on.D)(n):n;return(0,d.CqO)(e),e}function pP(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function gP(n,e){return e.map(t=>t(n))}function mP(n){return n.map(e=>function LF(n){return!n.validate}(e)?e:t=>e.validate(t))}function yP(n){if(!n)return null;const e=n.filter(hP);return 0==e.length?null:function(t){return pP(gP(t,e))}}function _S(n){return null!=n?yP(mP(n)):null}function _P(n){if(!n)return null;const e=n.filter(hP);return 0==e.length?null:function(t){return function PF(...n){const e=(0,Ha.jO)(n),{args:t,keys:r}=In(n),i=new On.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,Ql.Xf)(t[S]).subscribe((0,Jn.x)(u,F=>{M||(M=!0,b--),p[S]=F},()=>_--,void 0,()=>{(!_||!M)&&(b||u.next(r?Yl(r,p):p),u.complete())}))}});return e?i.pipe(Kl(e)):i}(gP(t,e).map(fP)).pipe((0,St.U)(pP))}}function vS(n){return null!=n?_P(mP(n)):null}function vP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wP(n){return n._rawValidators}function EP(n){return n._rawAsyncValidators}function wS(n){return n?Array.isArray(n)?n:[n]:[]}function WC(n,e){return Array.isArray(n)?n.includes(e):n===e}function bP(n,e){const t=wS(e);return wS(n).forEach(i=>{WC(t,i)||t.push(i)}),t}function CP(n,e){return wS(e).filter(t=>!WC(n,t))}class IP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_S(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class df extends IP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ps extends IP{get formDirective(){return null}get path(){return null}}class TP{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let KC=(()=>{class n extends TP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(df,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),YC=(()=>{class n extends TP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ps,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function N0(n,e){CS(n,e),e.valueAccessor.writeValue(n.value),function qF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&AP(n,e)})}(n,e),function ZF(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function zF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&AP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function GF(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function XC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),tI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function eI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CS(n,e){const t=wP(n);null!==e.validator?n.setValidators(vP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=EP(n);null!==e.asyncValidator?n.setAsyncValidators(vP(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();eI(e._rawValidators,i),eI(e._rawAsyncValidators,i)}function tI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=wP(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=EP(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return eI(e._rawValidators,r),eI(e._rawAsyncValidators,r),t}function AP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function DS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const k0="VALID",nI="INVALID",zy="PENDING",F0="DISABLED";function SS(n){return(rI(n)?n.validators:n)||null}function PP(n){return Array.isArray(n)?_S(n):n||null}function MS(n,e){return(rI(e)?e.asyncValidators:n)||null}function OP(n){return Array.isArray(n)?vS(n):n||null}function rI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const xS=n=>n instanceof L0,iI=n=>n instanceof sI,RP=n=>n instanceof LP;function NP(n){return xS(n)?n.value:n.getRawValue()}function kP(n,e){const t=iI(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function FP(n,e){iI(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new d.vHH(1002,"")})}class PS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=PP(this._rawValidators),this._composedAsyncValidatorFn=OP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===k0}get invalid(){return this.status===nI}get pending(){return this.status==zy}get disabled(){return this.status===F0}get enabled(){return this.status!==F0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=PP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=OP(e)}addValidators(e){this.setValidators(bP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CP(e,this._rawAsyncValidators))}hasValidator(e){return WC(this._rawValidators,e)}hasAsyncValidator(e){return WC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=F0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=k0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===k0||this.status===zy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?F0:k0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zy,this._hasOwnPendingAsyncValidator=!0;const t=fP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function QF(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=iI(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:RP(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?F0:this.errors?nI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zy)?zy:this._anyControlsHaveStatus(nI)?nI:k0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class L0 extends PS{constructor(e=null,t,r){super(SS(t),MS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){DS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){DS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class sI extends PS{constructor(e,t,r){super(SS(t),MS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){FP(this,e),Object.keys(e).forEach(r=>{kP(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=NP(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class LP extends PS{constructor(e,t,r){super(SS(t),MS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){FP(this,e),e.forEach((r,i)=>{kP(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>NP(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let oI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const tL={provide:Pl,useExisting:(0,d.Gpc)(()=>RS),multi:!0};let RS=(()=>{class n extends pg{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([tL]),d.qOj]}),n})(),$P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const NS=new d.OlP("NgModelWithFormControlWarning"),oL={provide:Ps,useExisting:(0,d.Gpc)(()=>Zy)};let Zy=(()=>{class n extends Ps{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return N0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){XC(t.control||null,t,!1),DS(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function xP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(XC(r||null,t),xS(i)&&(N0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function SP(n,e){CS(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function WF(n,e){return tI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CS(this.form,this),this._oldForm&&tI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ss,10),d.Y36(cf,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([oL]),d.qOj,d.TTD]}),n})();const lL={provide:df,useExisting:(0,d.Gpc)(()=>U0)};let U0=(()=>{class n extends df{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function TS(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===qy?t=u:function YF(n){return Object.getPrototypeOf(n.constructor)===pg}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function IS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function JC(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Ps,13),d.Y36(ss,10),d.Y36(cf,10),d.Y36(Pl,10),d.Y36(NS,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([lL]),d.qOj,d.TTD]}),n})(),iO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$P]]}),n})(),TL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[iO]}),n})(),sO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:NS,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[iO]}),n})(),BS=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function DL(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new sI(i,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,i){return new L0(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new LP(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return xS(t)||iI(t)||RP(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:sO}),n})(),B0=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"loading-overlay"],["src","../../../assets/heart-loading2.gif","alt","Loading..."]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.qZA())},styles:[".loading-overlay[_ngcontent-%COMP%]{display:flex;background:rgba(255,255,255,.7);position:fixed;bottom:0;left:0;right:0;top:0;z-index:9998;align-items:center;justify-content:center}"]}),n})();const AL=["file"];function SL(n,e){1&n&&d._UZ(0,"app-loading")}function ML(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",14)(1,"label",15),d._uU(2,"Admin"),d.qZA(),d.TgZ(3,"button",16)(4,"img",17),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).obtenerRol("admin")}),d.qZA()()()}}function xL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",5)(1,"div",6)(2,"label",7),d._uU(3,"Paciente"),d.qZA(),d.TgZ(4,"button",8)(5,"img",9),d.NdJ("click",function(){return d.CHM(t),d.oxw().obtenerRol("paciente")}),d.qZA()()(),d.TgZ(6,"div",6)(7,"label",10),d._uU(8,"Especialista"),d.qZA(),d.TgZ(9,"button",11)(10,"img",12),d.NdJ("click",function(){return d.CHM(t),d.oxw().obtenerRol("especialista")}),d.qZA()()(),d.YNc(11,ML,5,0,"div",13),d.qZA()}if(2&n){const t=d.oxw();d.xp6(11),d.Q6J("ngIf",1==t.admin)}}function PL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("nombre"))}}function OL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("apellido"))}}function RL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("edad"))}}function NL(n,e){if(1&n&&d._UZ(0,"input",35),2&n){const t=d.oxw(2);d.ekj("is-invalid",t.isNotValidField("obraSocial"))("is-valid",!t.isNotValidField("obraSocial")&&t.f.obraSocial.touched)}}function kL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("obraSocial"))}}function FL(n,e){if(1&n&&d._UZ(0,"input",36),2&n){const t=d.oxw(2);d.ekj("is-invalid",t.isNotValidField("especialidad"))("is-valid",!t.isNotValidField("especialidad")&&t.f.especialidad.touched)}}function LL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("",t.getErrorMessage("especialidad")," ")}}function VL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("email"))}}function UL(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1,"Email already in use."),d.qZA())}function BL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("password"))}}function jL(n,e){if(1&n&&(d.TgZ(0,"div",37),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.error)}}function $L(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"form",18)(1,"span",19),d._uU(2,"Register"),d.qZA(),d._UZ(3,"input",20),d.TgZ(4,"div",21),d._uU(5),d.qZA(),d._UZ(6,"input",22),d.YNc(7,PL,2,1,"div",23),d._UZ(8,"input",24),d.YNc(9,OL,2,1,"div",23),d._UZ(10,"input",25),d.YNc(11,RL,2,1,"div",23),d.YNc(12,NL,1,4,"input",26),d.YNc(13,kL,2,1,"div",23),d.YNc(14,FL,1,4,"input",27),d.YNc(15,LL,2,1,"div",23),d._UZ(16,"input",28),d.YNc(17,VL,2,1,"div",23),d.YNc(18,UL,2,0,"div",23),d._UZ(19,"input",29),d.YNc(20,BL,2,1,"div",23),d.TgZ(21,"input",30,31),d.NdJ("change",function(){return d.CHM(t),d.oxw().onChangeFile()}),d.qZA(),d.YNc(23,jL,2,1,"div",32),d.TgZ(24,"button",33),d.NdJ("click",function(){return d.CHM(t),d.oxw().submit()}),d._uU(25,"Register"),d.qZA(),d.TgZ(26,"a",34),d._uU(27,"Already have an account?"),d.qZA()()}if(2&n){const t=d.oxw();d.Q6J("formGroup",t.registerForm),d.xp6(3),d.ekj("is-invalid",t.isNotValidField("DNI"))("is-valid",!t.isNotValidField("DNI")&&t.f.DNI.touched),d.xp6(2),d.Oqu(t.getErrorMessage("DNI")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("nombre"))("is-valid",!t.isNotValidField("nombre")&&t.f.nombre.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("nombre")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("apellido"))("is-valid",!t.isNotValidField("apellido")&&t.f.apellido.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("apellido")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("edad"))("is-valid",!t.isNotValidField("edad")&&t.f.edad.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("edad")),d.xp6(1),d.Q6J("ngIf","paciente"==t.rol),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("obraSocial")),d.xp6(1),d.Q6J("ngIf","especialista"==t.rol),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("especialidad")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("email"))("is-valid",!t.isNotValidField("email")&&t.f.email.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("email")),d.xp6(1),d.Q6J("ngIf",null==t.f.email.errors?null:t.f.email.errors.emailVerified),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("password"))("is-valid",!t.isNotValidField("password")&&t.f.password.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("password")),d.xp6(3),d.Q6J("ngIf",""!=t.error),d.xp6(1),d.Q6J("disabled",t.registerForm.invalid)}}let HL=(()=>{class n{constructor(t,r,i,u){this.formBuilder=t,this.auth=r,this.firestore=i,this.router=u,this.rolSelected=!1,this.error="",this.listaUsuarios=[],this.admin=!1,this.cargando=!1,this.registerForm=this.formBuilder.group({DNI:["",[vr.minLength(7),vr.maxLength(8),vr.required]],nombre:["",[vr.minLength(3),vr.required]],apellido:["",[vr.minLength(3),vr.required]],edad:["",[vr.required]],rol:["",[vr.minLength(3),vr.required]],email:["",[vr.email,vr.required]],password:["",[vr.minLength(7),vr.required]]})}ngOnInit(){this.firestore.getPacientes().subscribe(t=>{t.forEach(r=>{this.listaUsuarios.push(r)})}),this.AdminValid()}get f(){return this.registerForm.controls}isNotValidField(t){return!!this.f[t]&&(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}submit(){console.log("Entre"),this.cargando=!0,this.registerForm.invalid?(this.error="Formulario invalido",console.log("error")):(this.paciente=this.registerForm.value,this.IsRepetedEmail(this.paciente.email,this.listaUsuarios)?(this.error="Email already in use",this.cargando=!1):this.auth.Register(this.paciente).then(t=>{var r;(null===(r=t.user)||void 0===r?void 0:r.email)?this.firestore.uploadImage(this.paciente.email,this.archivo).then(i=>{null!=i?(this.paciente.imageURL1=i,this.paciente.rol=this.rol,this.paciente.activo="true",this.firestore.setPaciente(this.paciente).then(()=>{this.cargando=!1,this.firestore.usuario.next(this.paciente),window.localStorage.setItem("usuario",JSON.stringify(this.firestore.usuario.value)),this.router.navigateByUrl("home")})):(this.error="Cant upload image.",this.cargando=!1)}):(this.error="Cant resolve register, try later.",this.cargando=!1)}))}getErrorMessage(t){let r="";return""!=t&&(this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="At least "+this.f[t].getError("minlength").requiredLength+" characters")),r}onChangeFile(){let t=this.file.nativeElement.files[0],r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{this.archivo=r.result}}obtenerRol(t){this.rolSelected=!0,this.rol=t,this.f.rol.setValue(this.rol),"especialista"==this.f.rol.value?(this.registerForm.addControl("especialidad",new L0("",vr.required)),this.registerForm.removeControl("obraSocial")):"paciente"==this.f.rol.value&&(this.registerForm.addControl("obraSocial",new L0("",vr.required)),this.registerForm.removeControl("especialidad"))}AdminValid(){let t=window.localStorage.getItem("usuario");null!=t&&"admin"==JSON.parse(t).rol&&(this.admin=!0)}IsRepetedEmail(t,r){let i=!1;return r.forEach(u=>{u.email==t&&(i=!0)}),i}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(BS),d.Y36(R0),d.Y36(uf),d.Y36(Hn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&d.Gf(AL,5),2&t){let i;d.iGM(i=d.CRH())&&(r.file=i.first)}},decls:5,vars:3,consts:[[1,"login"],[4,"ngIf"],[1,"form"],["class","row container-img",4,"ngIf"],["class","login-form",3,"formGroup",4,"ngIf"],[1,"row","container-img"],[1,"col-6","mb-4"],["for","paciente"],["id","paciente"],["src","../../../assets/logo-paciente.jpg","alt","",1,"btn-img",3,"click"],["for","especialista"],["id","especialista"],["src","../../../assets/logo-espcialista.png","alt","",1,"btn-img",3,"click"],["class","col-12",4,"ngIf"],[1,"col-12"],["for","admin"],["id","admin"],["src","../../../assets/logo-admin.png","alt","",1,"btn-img",3,"click"],[1,"login-form",3,"formGroup"],[1,"material-icon"],["type","text","placeholder","DNI","formControlName","DNI"],[1,"invalid-feedback"],["type","text","placeholder","Nombre","formControlName","nombre"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Apellido","formControlName","apellido"],["type","number","placeholder","Edad","formControlName","edad"],["type","text","placeholder","Obra Social","formControlName","obraSocial",3,"is-invalid","is-valid",4,"ngIf"],["type","text","placeholder","Especialidad","formControlName","especialidad",3,"is-invalid","is-valid",4,"ngIf"],["type","text","placeholder","Email","formControlName","email"],["type","password","placeholder","Contrase\xf1a","formControlName","password"],["type","file","accept","image/*","placeholder","Seleccione una imagen",3,"change"],["file",""],["Class","form","style","color: red;",4,"ngIf"],[3,"disabled","click"],["routerLink","/login",1,"register"],["type","text","placeholder","Obra Social","formControlName","obraSocial"],["type","text","placeholder","Especialidad","formControlName","especialidad"],["Class","form",2,"color","red"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,SL,1,0,"app-loading",1),d.TgZ(2,"div",2),d.YNc(3,xL,12,1,"div",3),d.YNc(4,$L,28,38,"form",4),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(2),d.Q6J("ngIf",!r.rolSelected),d.xp6(1),d.Q6J("ngIf",r.rolSelected))},directives:[fn,B0,oI,YC,Zy,qy,KC,U0,RS,Po],styles:['@import"https://fonts.googleapis.com/css2?family=Comfortaa&display=swap";body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b6cb7 0%,#182848 100%)}.login[_ngcontent-%COMP%]{width:360px;padding-top:3%;margin:auto;font-family:Comfortaa,cursive}.container-img[_ngcontent-%COMP%]{margin-top:60%}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#FFFFFF;border-radius:10px;max-width:360px;text-align:center}.btn-img[_ngcontent-%COMP%]{width:100px;height:100px;background-size:cover;background-repeat:no-repeat;border-radius:10px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0;background:#f2f2f2;width:100%;border:0;border-radius:5px;margin:0 0 15px;padding:15px;box-sizing:border-box;font-size:14px;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#dbdbdb}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Comfortaa,cursive;text-transform:uppercase;outline:0;background:#4b6cb7;width:100%;border:0;border-radius:5px;padding:15px;color:#fff;font-size:14px;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#395591}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:75px;color:#4b6cb7}.register[_ngcontent-%COMP%]{top:200px}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.is-valid[_ngcontent-%COMP%]{border-color:#35dc75;box-shadow:0 0 0 .25rem #44e04440}.invalid-feedback[_ngcontent-%COMP%]{top:1;bottom:100}']}),n})(),GL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Wu],styles:[".container[_ngcontent-%COMP%]{position:relative;top:10 .container;left:5%}"]}),n})();function qL(n,e){1&n&&d._UZ(0,"app-loading")}function zL(n,e){if(1&n&&(d.TgZ(0,"div",19),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.error)}}let ZL=(()=>{class n{constructor(t,r,i,u){this.formBuilder=t,this.auth=r,this.router=i,this.fireStore=u,this.cargando=!1,this.error="",this.fotos=[],this.loginForm=this.formBuilder.group({email:["",[vr.required,vr.email]],pass:["",[vr.required,vr.minLength(7)]]})}ngOnInit(){}get f(){return this.loginForm.controls}isNotValidField(t){return(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}submit(){this.auth.Login(this.f.email.value,this.f.pass.value).then(t=>{if(null!=t){this.cargando=!0;let r=this.fireStore.getPaciente(this.f.email.value).subscribe(i=>{null!=i&&0!=i.length?(this.fireStore.usuario.next(i[0]),window.localStorage.setItem("usuario",JSON.stringify(i[0])),r.unsubscribe(),this.cargando=!1,this.router.navigateByUrl("home")):this.error="error al iniciar sesion"})}else this.error="usuario o constrase\xf1a invalidos"})}getErrorMessage(t){let r="";return this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="at least 7 characters"),r}autocompletado(t,r){this.f.email.setValue(t),this.f.pass.setValue(r),this.submit()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(BS),d.Y36(R0),d.Y36(Hn),d.Y36(uf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:37,vars:14,consts:[[1,"login"],[4,"ngIf"],[1,"form"],[1,"login-form",3,"formGroup"],[1,"material-icon"],["type","text","placeholder","email","formControlName","email"],[1,"invalid-feedback"],["type","password","placeholder","password","formControlName","pass"],["style","color: red;",4,"ngIf"],[3,"disabled","click"],["routerLink","/register",1,"register"],[1,"row"],[1,"col-4",2,"border-color","transparent",3,"click"],["src","../../../assets/espcialista-2.png","alt","",1,"btn-img"],["src","../../../assets/espcialista-1.png","alt","",1,"btn-img"],["src","../../../assets/admin.png","alt","",1,"btn-img"],["src","../../../assets/paciente-1.png","alt","",1,"btn-img"],["src","../../../assets/paciente-2.png","alt","",1,"btn-img"],["src","../../../assets/paciente-3.png","alt","",1,"btn-img"],[2,"color","red"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,qL,1,0,"app-loading",1),d.TgZ(2,"div",2)(3,"form",3)(4,"span",4),d._uU(5,"Login"),d.qZA(),d._UZ(6,"input",5),d.TgZ(7,"div",6),d._uU(8),d.qZA(),d._UZ(9,"input",7),d.TgZ(10,"div",6),d._uU(11),d.qZA(),d.YNc(12,zL,2,1,"div",8),d.TgZ(13,"button",9),d.NdJ("click",function(){return r.submit()}),d._uU(14,"login"),d.qZA(),d.TgZ(15,"a",10),d._uU(16,"Dont have an account?"),d.qZA()()(),d.TgZ(17,"div",11)(18,"button",12),d.NdJ("click",function(){return r.autocompletado("CarlosBaute@gmail.com","1234567")}),d._uU(19,"Especilista "),d._UZ(20,"img",13),d.qZA(),d.TgZ(21,"button",12),d.NdJ("click",function(){return r.autocompletado("AilenGomez@gmail.com","1234567")}),d._uU(22,"Paciente "),d._UZ(23,"img",14),d.qZA(),d.TgZ(24,"button",12),d.NdJ("click",function(){return r.autocompletado("irismontaner@gmail.com","1234567")}),d._uU(25,"Admin "),d._UZ(26,"img",15),d.qZA()(),d.TgZ(27,"div",11)(28,"button",12),d.NdJ("click",function(){return r.autocompletado("BrunoGoffredo@gmail.com","1234567")}),d._uU(29,"Paciente "),d._UZ(30,"img",16),d.qZA(),d.TgZ(31,"button",12),d.NdJ("click",function(){return r.autocompletado("CamilaPerez@gmail.com","1234567")}),d._uU(32,"Paciente "),d._UZ(33,"img",17),d.qZA(),d.TgZ(34,"button",12),d.NdJ("click",function(){return r.autocompletado("SolMartinez@gmail.com","1234567")}),d._uU(35,"Especialista "),d._UZ(36,"img",18),d.qZA()()()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(2),d.Q6J("formGroup",r.loginForm),d.xp6(3),d.ekj("is-invalid",r.isNotValidField("email"))("is-valid",!r.isNotValidField("email")&&r.f.email.touched),d.xp6(2),d.Oqu(r.getErrorMessage("email")),d.xp6(1),d.ekj("is-invalid",r.isNotValidField("pass"))("is-valid",!r.isNotValidField("pass")&&r.f.pass.touched),d.xp6(2),d.Oqu(r.getErrorMessage("pass")),d.xp6(1),d.Q6J("ngIf",""!=r.error),d.xp6(1),d.Q6J("disabled",r.loginForm.invalid))},directives:[fn,B0,oI,YC,Zy,qy,KC,U0,Po],styles:['@import"https://fonts.googleapis.com/css2?family=Comfortaa&display=swap";body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b6cb7 0%,#182848 100%)}.login[_ngcontent-%COMP%]{width:360px;padding:8% 0 0;margin:auto;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#FFFFFF;border-radius:10px;max-width:360px;margin:0 auto 100px;padding:45px;text-align:center}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0;background:#f2f2f2;width:100%;border:0;border-radius:5px;margin:0 0 15px;padding:15px;box-sizing:border-box;font-size:14px;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#dbdbdb}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Comfortaa,cursive;text-transform:uppercase;outline:0;background:#4b6cb7;width:100%;border:0;border-radius:5px;padding:15px;color:#fff;font-size:14px;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#395591}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:75px;color:#4b6cb7}.register[_ngcontent-%COMP%]{top:200px}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.is-valid[_ngcontent-%COMP%]{border-color:#35dc75;box-shadow:0 0 0 .25rem #44e04440}.invalid-feedback[_ngcontent-%COMP%]{top:1;bottom:100}.btn-img[_ngcontent-%COMP%]{width:100px;height:100px;background-size:cover;background-repeat:no-repeat;border-radius:10px}']}),n})(),WL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenido"]],decls:5,vars:0,consts:[[1,"img"],["src","../../../assets/bienvenido-imagen.jpg","alt",""],[1,"container"],["role","button","routerLink","/login",1,"button-63"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.qZA(),d.TgZ(2,"div",2)(3,"button",3),d._uU(4,"Comenzar"),d.qZA()())},directives:[Xu],styles:[".contenedor[_ngcontent-%COMP%]{width:100vw;height:100vh}.img[_ngcontent-%COMP%]{position:absolute;width:100vw;height:600px;margin-top:7%;z-index:-1000}.button-63[_ngcontent-%COMP%]{align-items:center;background-image:linear-gradient(144deg,#AF40FF,#5B42F3 50%,#00DDEB);border:0;border-radius:8px;box-shadow:#9741fc33 0 15px 30px -5px;box-sizing:border-box;color:#fff;font-family:Phantomsans,sans-serif;font-size:20px;justify-content:center;line-height:1em;max-width:100%;min-width:140px;padding:19px 24px;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;cursor:pointer;font-size:xx-large;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif;margin-top:30%;margin-left:80%;z-index:1000}.button-63[_ngcontent-%COMP%]:active, .button-63[_ngcontent-%COMP%]:hover{outline:0}@media (min-width: 768px){.button-63[_ngcontent-%COMP%]{font-size:24px;min-width:196px}}"]}),n})();var KL=R(4327);let YL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-toggle-button"]],inputs:{activo:"activo"},decls:4,vars:1,consts:[[1,"switch"],["type","checkbox",3,"checked"]],template:function(t,r){1&t&&(d.TgZ(0,"label",0),d._UZ(1,"input",1),d.TgZ(2,"div"),d._UZ(3,"span"),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("checked","true"==r.activo))},styles:['.switch[_ngcontent-%COMP%]{--line: #E8EBFB;--dot: #275EFE;--circle: #D3D4EC;--background: #fff;--duration: .3s;--text: #9EA0BE;--shadow: 0 1px 3px rgba(0, 9, 61, .08);cursor:pointer;position:relative}.switch[_ngcontent-%COMP%]:before{content:"";width:60px;height:32px;border-radius:16px;background:var(--background);position:absolute;left:0;top:0;box-shadow:var(--shadow)}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before, .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{--s: 1;content:"";position:absolute;height:4px;top:14px;width:24px;background:var(--line);transform:scaleX(var(--s));transition:transform var(--duration) ease}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{--s: 0;left:4px;transform-origin:0 50%;border-radius:2px 0 0 2px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{left:32px;transform-origin:100% 50%;border-radius:0 2px 2px 0}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:60px;line-height:28px;color:var(--text)}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{--x: 0;--b: var(--circle);--s: 4px;content:"";position:absolute;left:4px;top:4px;width:24px;height:24px;border-radius:50%;box-shadow:inset 0 0 0 var(--s) var(--b);transform:translate(var(--x));transition:box-shadow var(--duration) ease,transform var(--duration) ease}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:empty){padding-left:68px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{--s: 1}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{--s: 0}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{--x: 28px;--s: 12px;--b: var(--dot)}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative;background:#E8EBFB}body[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%] + .switch[_ngcontent-%COMP%]{margin-top:32px}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]{position:fixed;display:block;right:20px;bottom:20px}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;height:28px}']}),n})();function QL(n,e){1&n&&d._UZ(0,"app-loading")}function JL(n,e){if(1&n&&(d.TgZ(0,"li",9)(1,"div",10),d._UZ(2,"img",11),d.qZA(),d.TgZ(3,"div",10),d._uU(4),d.qZA(),d.TgZ(5,"div",12),d._uU(6),d.qZA(),d.TgZ(7,"div",13),d._UZ(8,"img"),d._uU(9),d.qZA(),d._UZ(10,"app-toggle-button",14),d.qZA()),2&n){const t=e.$implicit;d.xp6(2),d.s9C("src",t.imageURL1,d.LSH),d.xp6(2),d.Oqu(t.rol),d.xp6(2),d.AsE("",t.nombre," ",t.apellido,""),d.xp6(3),d.Oqu(t.email),d.xp6(1),d.Q6J("activo",t.activo)}}function XL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Usuarios registrados"),d.qZA(),d._UZ(3,"hr"),d.TgZ(4,"button",3),d._UZ(5,"i",4),d.qZA(),d.TgZ(6,"button",5),d.NdJ("click",function(){return d.CHM(t),d.oxw().exportExcel()}),d._UZ(7,"i",6),d.qZA(),d.TgZ(8,"ul",7),d.YNc(9,JL,11,6,"li",8),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(9),d.Q6J("ngForOf",t.users)}}let eV=(()=>{class n{constructor(t){this.firestore=t,this.cargando=!1,this.users=[]}ngOnInit(){this.getUsers().then(()=>this.cargando=!0)}getUsers(){var t=this;return(0,ye.Z)(function*(){yield t.firestore.getPacientes().subscribe(r=>{r.forEach(i=>{t.users.push(i)}),t.cargando=!1})})()}exportExcel(){R.e(574).then(R.bind(R,574)).then(t=>{const i={Sheets:{data:t.utils.json_to_sheet(this.users)},SheetNames:["data"]},u=t.write(i,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(u,"users")})}saveAsExcelFile(t,r){const c=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});KL.saveAs(c,r+"export"+(new Date).getTime()+".xlsx")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-listado"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["class","container",4,"ngIf"],["mat-raised-button","","matTooltip","Agregar usuario","matTooltipPosition","above","matTooltipClass","example-tooltip-red","routerLink","/register",1,"button-add-Admin"],[1,"fa","fa-plus"],[1,"button-add-Admin",3,"click"],[1,"fa","fa-save"],[1,"responsive-table"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"col","col-2"],[1,"img",3,"src"],[1,"col","col-2",2,"padding-left","10%"],[1,"col","col-3"],[1,"col","col-2",3,"activo"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,QL,1,0,"app-loading",1),d.YNc(2,XL,10,1,"div",2),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(1),d.Q6J("ngIf",0==r.cargando))},directives:[fn,B0,Xu,xn,YL],styles:["body[_ngcontent-%COMP%]{font-family:lato,sans-serif}.container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:10px;padding-right:10px;width:4000px}h2[_ngcontent-%COMP%]{font-size:26px;margin:20px 0;text-align:center}h2[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.5em}.img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10%}.button-add-Admin[_ngcontent-%COMP%]{color:#00f;border:none;background-color:transparent;font-size:xx-large;border-radius:10px;width:40px;height:40px;margin-left:3%}.responsive-table[_ngcontent-%COMP%]{max-height:850px;overflow-y:scroll}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:3px;padding:25px 15px;display:flex;justify-content:space-between;margin-top:10px;margin-bottom:25px;font-family:Verdana,Geneva,Tahoma,sans-serif;width:98%}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 9px #0000001a}.responsive-table[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{flex-basis:10%;justify-content:center}@media all and (max-width: 767px){.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:none}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{flex-basis:100%}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;padding:10px 0}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:before{color:#6c7a89;padding-right:10px;content:attr(data-label);flex-basis:50%;text-align:right}}"]}),n})(),tV=(()=>{class n{canActivate(t,r){let i=window.localStorage.getItem("usuario");return null!=i&&"admin"==JSON.parse(i).rol}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var nV=R(3098);function rV(n,e){1&n&&d._UZ(0,"app-loading")}function iV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"button",19),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().FilterByEspecilidad(u)}),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(2),d.hij(" ",t," ")}}function sV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"button",20),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().selectEspecialista(u)}),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(2),d.AsE(" ",t.nombre," ",t.apellido,"")}}let oV=(()=>{class n{constructor(t,r){this.formBuilder=t,this.firestore=r,this.close=new d.vpe,this.specialtySelected=!1,this.especialistas=[],this.especialidades=[],this.cargando=!1,this.turnoForm=this.formBuilder.group({fecha:["",[vr.required]],hora:["",[vr.required]]})}ngOnInit(){this.getEspecialidades().then(()=>this.cargando=!1)}get f(){return this.turnoForm.controls}isNotValidField(t){return(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}getErrorMessage(t){let r="";return this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="at least 7 characters"),r}onClose(){this.close.emit()}getEspecialidades(){var t=this;return(0,ye.Z)(function*(){t.cargando=!0,yield t.firestore.getEspecilistas().subscribe(r=>{r.forEach(i=>{t.especialidades.push(i.especialidad)})})})()}FilterByEspecilidad(t){var r=this;return(0,ye.Z)(function*(){r.specialtySelected=!0,yield r.firestore.getEspecilistasByEspecilidad(t).subscribe(i=>{r.especialistas=[],i.forEach(u=>{r.especialistas.push(u)})})})()}selectEspecialista(t){this.specialtystSelected=t,console.log(this.specialtystSelected)}submit(){this.cargando=!0;let t=JSON.parse(window.localStorage.getItem("usuario"));this.turnoForm.invalid?(this.cargando=!1,this.close.emit()):(this.turno=this.turnoForm.value,this.turno.usuario=t,this.turno.especialista=this.specialtystSelected,this.turno.estado="pendiente",this.turno.id=nV.i.create().toString(),this.turno.resenia="",this.turno.EncuestaCompletada=!1,this.turno?this.firestore.setTurnos(this.turno).then(()=>{this.cargando=!1,this.close.emit()}):(this.cargando=!1,this.close.emit()))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(BS),d.Y36(uf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-turno"]],outputs:{close:"close"},decls:32,vars:6,consts:[[1,"contenedor"],[4,"ngIf"],[1,"login-box"],[1,"close-container"],["type","button",1,"btn-close",3,"click"],[1,"icon-cross"],[1,"visually-hidden"],[3,"formGroup"],[1,"user-box"],["for",""],["type","date","formControlName","fecha"],["type","time","formControlName","hora"],[1,"row"],[1,"dropdown","col-6"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[4,"ngFor","ngForOf"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle",3,"disabled"],[1,"button-submit",3,"disabled","click"],[1,"dropdown-item",3,"click"],["href","#",1,"dropdown-item",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,rV,1,0,"app-loading",1),d.TgZ(2,"div",2)(3,"div",3)(4,"button",4),d.NdJ("click",function(){return r.onClose()}),d._UZ(5,"span",5),d.TgZ(6,"span",6),d._uU(7,"Close"),d.qZA()()(),d.TgZ(8,"h2"),d._uU(9,"Turnos"),d.qZA(),d.TgZ(10,"form",7)(11,"div",8)(12,"label",9),d._uU(13,"Fecha:"),d.qZA(),d._UZ(14,"input",10),d.qZA(),d.TgZ(15,"div",8)(16,"label",9),d._uU(17,"Hora:"),d.qZA(),d._UZ(18,"input",11),d.qZA(),d.TgZ(19,"div",12)(20,"div",13)(21,"button",14),d._uU(22," Especilidad "),d.qZA(),d.TgZ(23,"ul",15),d.YNc(24,iV,3,1,"li",16),d.qZA()(),d.TgZ(25,"div",13)(26,"button",17),d._uU(27," Especialistas "),d.qZA(),d.TgZ(28,"ul",15),d.YNc(29,sV,3,2,"li",16),d.qZA()()(),d.TgZ(30,"button",18),d.NdJ("click",function(){return r.submit()}),d._uU(31," Solicitar "),d.qZA()()()()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(9),d.Q6J("formGroup",r.turnoForm),d.xp6(14),d.Q6J("ngForOf",r.especialidades),d.xp6(2),d.Q6J("disabled",!r.specialtySelected),d.xp6(3),d.Q6J("ngForOf",r.especialistas),d.xp6(1),d.Q6J("disabled",r.turnoForm.invalid||null==r.specialtystSelected))},directives:[fn,B0,oI,YC,Zy,qy,KC,U0,xn],styles:['.contenedor[_ngcontent-%COMP%]{position:relative;display:flex;background:#e0dede;color:#fff;position:fixed;width:100%;height:100%;top:0;left:0;bottom:0;right:0;z-index:9997;align-items:center;justify-content:center;animation:fadein .5s}.button-close[_ngcontent-%COMP%]{background-color:red;opacity:.7;font-size:large;color:#fff;border-radius:15%;width:40px;height:40px}@keyframes fadein{0%{opacity:0}to{opacity:1}}.login-box[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:400px;padding:40px;transform:translate(-50%,-50%);background:rgba(0,0,0,.5);box-sizing:border-box;box-shadow:0 15px 25px #0009;border-radius:10px;opacity:1}.login-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 30px;padding:0;color:#fff;text-align:center}.login-box[_ngcontent-%COMP%]   .user-box[_ngcontent-%COMP%]{position:relative}.login-box[_ngcontent-%COMP%]   .user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 0;font-size:16px;color:#fff;margin-bottom:30px;border:none;background-color:transparent;border-bottom:1px solid #fff;outline:none}.button-submit[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:10px 20px;color:#fff;font-size:16px;overflow:hidden;margin-top:40px;letter-spacing:4px;border-color:#000;border-radius:30px;background-color:gray;cursor:pointer}.button-submit[_ngcontent-%COMP%]:hover{border-color:#87c9d4;transition:.5s}.close-container[_ngcontent-%COMP%]{position:relative;width:50px;height:50px;top:0;left:0;margin:auto auto auto 0;cursor:pointer}.btn-close[_ngcontent-%COMP%]{margin:0;border:0;padding:0;background:#0066ff;border-radius:50%;width:50px;height:50px;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;cursor:pointer;transition:all .15s}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;position:relative;width:30px;height:30px}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:before, .btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:after{content:"";position:absolute;top:12px;left:0;right:0;height:6px;background:#fff;border-radius:6px}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.btn-close[_ngcontent-%COMP%]:hover, .btn-close[_ngcontent-%COMP%]:focus{transform:rotate(90deg);background:#0052cc}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:gray}.cross-stand-alone[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;position:relative;width:40px;height:40px}.cross-stand-alone[_ngcontent-%COMP%]:before, .cross-stand-alone[_ngcontent-%COMP%]:after{content:"";position:absolute;top:18px;left:0;right:0;height:4px;background:#000;border-radius:4px}.cross-stand-alone[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.cross-stand-alone[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.cross-stand-alone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.cross-1px[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;position:relative;width:80px;height:80px}.cross-1px[_ngcontent-%COMP%]:before, .cross-1px[_ngcontent-%COMP%]:after{content:"";position:absolute;top:39.5px;left:0;right:0;height:1px;background:#000;border-radius:1px}.cross-1px[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.cross-1px[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.cross-1px[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0!important;border:0!important;height:1px!important;width:1px!important;overflow:hidden}']}),n})(),aV=(()=>{class n{constructor(){this.close=new d.vpe}ngOnInit(){}closeReview(){this.close.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-review"]],inputs:{review:"review"},outputs:{close:"close"},decls:10,vars:1,consts:[[1,"loading-overlay"],[1,"paper"],[1,"row"],["type","button",1,"btn-close","col-12",3,"click"],[1,"icon-cross"],[1,"visually-hidden"],[1,"row","review"],[1,"col-12"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),d.NdJ("click",function(){return r.closeReview()}),d._UZ(4,"span",4),d.TgZ(5,"span",5),d._uU(6,"Close"),d.qZA()()(),d.TgZ(7,"div",6)(8,"P",7),d._uU(9),d.qZA()()()()),2&t&&(d.xp6(9),d.Oqu(r.review))},styles:['.loading-overlay[_ngcontent-%COMP%]{display:flex;background:rgba(255,255,255,.7);position:fixed;bottom:0;left:0;right:0;top:0;z-index:9997;align-items:center;justify-content:center}.paper[_ngcontent-%COMP%]{background-color:gray;width:20%;height:40%;border-radius:5px}.review[_ngcontent-%COMP%]{margin-top:10%;margin-left:1%;justify-content:center}.btn-close[_ngcontent-%COMP%]{margin-left:10%;margin-top:5%;border:0;padding:0;background:#0066ff;border-radius:50%;width:60px;height:60px;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;cursor:pointer;transition:all .15s}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;position:relative;width:40px;height:40px}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:before, .btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:after{content:"";position:absolute;top:17px;left:0;right:0;height:6px;background:#fff;border-radius:6px}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.btn-close[_ngcontent-%COMP%]   .icon-cross[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.btn-close[_ngcontent-%COMP%]:hover, .btn-close[_ngcontent-%COMP%]:focus{transform:rotate(90deg);background:#0052cc}.cross-stand-alone[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;position:relative;width:40px;height:40px}.cross-stand-alone[_ngcontent-%COMP%]:before, .cross-stand-alone[_ngcontent-%COMP%]:after{content:"";position:absolute;top:18px;left:0;right:0;height:4px;background:#000;border-radius:4px}.cross-stand-alone[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.cross-stand-alone[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.cross-stand-alone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.cross-1px[_ngcontent-%COMP%]{margin:0;padding:0;border:0;background:none;position:relative;width:80px;height:80px}.cross-1px[_ngcontent-%COMP%]:before, .cross-1px[_ngcontent-%COMP%]:after{content:"";position:absolute;top:39.5px;left:0;right:0;height:1px;background:#000;border-radius:1px}.cross-1px[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.cross-1px[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.cross-1px[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0!important;border:0!important;height:1px!important;width:1px!important;overflow:hidden}']}),n})(),uV=(()=>{class n{constructor(t){this.firestore=t,this.close=new d.vpe}ngOnInit(){}DeleteTurno(t){this.close.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-question"]],outputs:{close:"close"},decls:12,vars:0,consts:[[1,"contenedor"],[1,"card__container"],[1,"card"],[1,"card__content"],[1,"card__header"],[1,"card__info"],[1,"card__button",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),d._uU(5,"Cuidado!"),d.qZA(),d.TgZ(6,"p",5),d._uU(7,"Desea eleminar el turno?"),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return r.DeleteTurno(!0)}),d._uU(9,"Aceptar"),d.qZA(),d.TgZ(10,"button",6),d.NdJ("click",function(){return r.DeleteTurno(!1)}),d._uU(11,"Cancelar"),d.qZA()()()()())},styles:['@import"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap";.contenedor[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;align-items:center}.card[_ngcontent-%COMP%]{width:60%;height:50%;text-align:center;background:#333333;border-radius:10px;box-shadow:25px 25px 50px #1b1c1b,-25px -25px 50px #2d302f;margin-left:210%;margin-top:50%;font-size:x-large}.card__container[_ngcontent-%COMP%]{display:grid;width:100%;height:35%;grid-template-columns:1fr 1fr 1fr;align-items:center;justify-items:center;color:#fff}.card__content[_ngcontent-%COMP%]{width:90%;height:95%;background:#4e4e4e;margin:10px auto;border-radius:5px;padding:20px;box-shadow:16px 16px 44px #0a0a0a,-16px -16px 44px #282a28}.card__header[_ngcontent-%COMP%]{text-transform:uppercase;font-size:20px;margin:40px auto}.card__button[_ngcontent-%COMP%]{padding:10px;border-radius:50px;background:#1f75c4;color:#fff;font-weight:700;cursor:pointer;border:none;margin:50px auto;border:2px transparent;font-size:large}.card__button[_ngcontent-%COMP%]:hover{background-color:#4d6da8bb;transition:.5s}']}),n})();function lV(n,e){1&n&&d._UZ(0,"app-loading")}function cV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-add-turno",17),d.NdJ("close",function(){return d.CHM(t),d.oxw().Closeform()}),d.qZA()}}function dV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-review",18),d.NdJ("close",function(){return d.CHM(t),d.oxw().CloseReiew()}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("review",t.turnoSelected)}}function hV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-question",17),d.NdJ("close",function(i){return d.CHM(t),d.oxw().UpdateTurno(i)}),d.qZA()}}function fV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",19),d.NdJ("click",function(){return d.CHM(t),d.oxw().onClickError()}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.error," ")}}function pV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",20)(1,"div",14),d._uU(2),d.qZA(),d.TgZ(3,"div",14),d._uU(4),d.qZA(),d.TgZ(5,"div",14),d._uU(6),d.qZA(),d.TgZ(7,"div",14)(8,"button",21),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().viewReview(u.resenia)}),d._uU(9," Rese\xf1a "),d._UZ(10,"i",15),d.qZA()(),d.TgZ(11,"div",14),d._uU(12),d.qZA(),d.TgZ(13,"div",14)(14,"button",22),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().wantToCancel(u)}),d._UZ(15,"i",23),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.fecha),d.xp6(2),d.Oqu(t.hora),d.xp6(2),d.AsE("",t.especialista.nombre," ",t.especialista.apellido,""),d.xp6(5),d.ekj("cancelado","cancelado"==t.estado||"rechazado"==t.estado)("aceptado","aceptado"==t.estado)("completado","completado"==t.estado)("pendiente","pendiente"==t.estado),d.xp6(1),d.hij(" ",t.estado,"")}}const gV=[{path:"",component:WL},{path:"usuarios",component:eV,canActivate:[tV],data:{animation:"usuariosPage"}},{path:"mis-turnos",component:(()=>{class n{constructor(t){this.firestore=t,this.agregandoTurno=!1,this.mostrarReview=!1,this.turnos=[],this.turnosWithoutFilter=[],this.cargando=!1,this.mostrarQuestion=!1,this.error=""}ngOnInit(){this.getCurrentUser(),this.getTurnos()}onFilter(t){let r=t.srcElement.value;this.filter=r,this.turnos=this.turnosWithoutFilter.filter(i=>i.especialista.especialidad.toLowerCase().includes(r.toLowerCase())||i.especialista.nombre.toLowerCase().includes(r.toLowerCase())||i.especialista.apellido.toLowerCase().includes(r.toLowerCase()))}getTurnos(){this.cargando=!0,this.firestore.getTurnos(this.user.email).subscribe(t=>{this.turnos=[],t.forEach(r=>{this.turnos.push(r)}),this.filter&&this.onFilter(this.filter),this.turnosWithoutFilter=this.turnos,this.cargando=!1})}getCurrentUser(){this.user=JSON.parse(window.localStorage.getItem("usuario"))}OpenForm(){this.agregandoTurno=!0}Closeform(){this.agregandoTurno=!1}viewReview(t){null!=t&&""!=t?(this.turnoSelected=t,this.mostrarReview=!0):this.error="No hay ninguna rese\xf1a"}CloseReiew(){this.mostrarReview=!1}UpdateTurno(t){var r,i;this.cargando=!0,(null===(r=this.UpdateTurnoSelected)||void 0===r?void 0:r.estado)&&(this.UpdateTurnoSelected.estado="cancelado"),1==t?this.firestore.UpdateObj("turnos",this.UpdateTurnoSelected,null===(i=this.UpdateTurnoSelected)||void 0===i?void 0:i.id).then(u=>{this.cargando=!1,this.mostrarQuestion=!1,this.UpdateTurnoSelected=null}):0==t&&(this.mostrarQuestion=!1)}wantToCancel(t){this.UpdateTurnoSelected=t,this.mostrarQuestion=!0}onClickError(){this.error=""}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-mis-turnos"]],decls:33,vars:6,consts:[[1,"container"],[4,"ngIf"],[3,"close",4,"ngIf"],[3,"review","close",4,"ngIf"],[1,"row"],[1,"col-2"],[1,"button-add-turno",3,"click"],[1,"fa","fa-plus"],[1,"col-10","d-flex","flex-row-reverse"],["type","text","placeholder","Buscar por ...",1,"searcher",3,"change"],["class","alert alert-danger mt-2","role","alert",3,"click",4,"ngIf"],[1,"row","mt-5"],[1,"responsive-table"],[1,"table-header"],[1,"col","col-2"],[1,"fa","fa-pencil"],["class","table-row",4,"ngFor","ngForOf"],[3,"close"],[3,"review","close"],["role","alert",1,"alert","alert-danger","mt-2",3,"click"],[1,"table-row"],[1,"btn-review",3,"click"],[1,"button-delete-turno",3,"click"],[1,"fa","fa-ban"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,lV,1,0,"app-loading",1),d.YNc(2,cV,1,0,"app-add-turno",2),d.YNc(3,dV,1,1,"app-review",3),d.YNc(4,hV,1,0,"app-question",2),d.TgZ(5,"div",0)(6,"h2"),d._uU(7,"Turnos"),d.qZA(),d._UZ(8,"hr"),d.TgZ(9,"div",4)(10,"div",5)(11,"button",6),d.NdJ("click",function(){return r.OpenForm()}),d.TgZ(12,"i",7),d._uU(13," Agregar turno"),d.qZA()()(),d.TgZ(14,"div",8)(15,"input",9),d.NdJ("change",function(u){return r.onFilter(u)}),d.qZA()()(),d.YNc(16,fV,2,1,"div",10),d.TgZ(17,"div",11)(18,"ul",12)(19,"li",13)(20,"div",14),d._uU(21,"Fecha"),d.qZA(),d.TgZ(22,"div",14),d._uU(23,"Hora"),d.qZA(),d.TgZ(24,"div",14),d._uU(25,"Especialista "),d.qZA(),d.TgZ(26,"div",14),d._UZ(27,"i",15),d.qZA(),d.TgZ(28,"div",14),d._uU(29,"Estado"),d.qZA(),d.TgZ(30,"div",14),d._uU(31,"Accion"),d.qZA()(),d.YNc(32,pV,16,13,"li",16),d.qZA()()()()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(1),d.Q6J("ngIf",r.agregandoTurno),d.xp6(1),d.Q6J("ngIf",r.mostrarReview),d.xp6(1),d.Q6J("ngIf",r.mostrarQuestion),d.xp6(12),d.Q6J("ngIf",""!=r.error),d.xp6(16),d.Q6J("ngForOf",r.turnos))},directives:[fn,B0,oV,aV,uV,xn],styles:["body[_ngcontent-%COMP%]{font-family:lato,sans-serif}.container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:10px;padding-right:10px;width:4000px}h2[_ngcontent-%COMP%]{font-size:26px;margin:20px 0;text-align:center}h2[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.5em}.img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10%}.header[_ngcontent-%COMP%]{border-bottom:solid 1px;border-color:#6c7a89}.button-add-turno[_ngcontent-%COMP%]{color:green;border:none;background-color:transparent;font-size:x-large;border-radius:10px;margin-left:3%}.button-delete-turno[_ngcontent-%COMP%]{color:red;border:none;background-color:transparent;box-shadow:solid gray;font-size:x-large;border-radius:10px;margin-left:3%}.searcher[_ngcontent-%COMP%]{border-radius:20px;border-color:gray;height:100%;width:40%;font-family:Georgia,Times New Roman,Times,serif;color:gray}.searcher[_ngcontent-%COMP%]:hover{border-color:#4e67f0}.cancelado[_ngcontent-%COMP%]{color:red}.pendiente[_ngcontent-%COMP%]{color:#00f}.completado[_ngcontent-%COMP%]{color:green}.aceptado[_ngcontent-%COMP%]{color:#ff0}.responsive-table[_ngcontent-%COMP%]{max-height:850px;overflow-y:scroll}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:3px;padding:25px 15px;display:flex;justify-content:space-between;margin-top:10px;margin-bottom:25px;font-family:Verdana,Geneva,Tahoma,sans-serif;width:98%}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 9px #0000001a}.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{margin-bottom:5px;font-size:x-large;border-bottom:solid 1px;border-radius:0}.responsive-table[_ngcontent-%COMP%]   .btn-review[_ngcontent-%COMP%]{border-radius:10px;border-color:.5px grey;background-color:gray;color:#fff;cursor:pointer}.responsive-table[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{flex-basis:10%;justify-content:center}@media all and (max-width: 767px){.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:none}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{flex-basis:100%}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;padding:10px 0}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:before{color:#6c7a89;padding-right:10px;content:attr(data-label);flex-basis:50%;text-align:right}}"]}),n})(),data:{animation:"misTurnosPage"}},{path:"home",component:GL,data:{animation:"homePage"}},{path:"login",component:ZL,data:{animation:"fadePage"}},{path:"register",component:HL},{path:"**",redirectTo:"home"}];let mV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[nw.forRoot(gV)],nw]}),n})();const oO_firebase={projectId:"tp-final-3e4ef",appId:"1:617002588097:web:fd0739fe851e0e012f8140",storageBucket:"tp-final-3e4ef.appspot.com",locationId:"southamerica-east1",apiKey:"AIzaSyBEBxf5TwgW6jUgqlCmUTT4K0Pg0XE4ZHA",authDomain:"tp-final-3e4ef.firebaseapp.com",messagingSenderId:"617002588097"},Zt=!1;function aO(n){return new d.vHH(3e3,Zt)}function YV(){return"undefined"!=typeof window&&void 0!==window.document}function jS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function hf(n){switch(n.length){case 0:return new Gf;case 1:return n[0];default:return new dw(n)}}function uO(n,e,t,r,i={},u={}){const c=[],p=[];let _=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==_,$=F&&b||{};Object.keys(S).forEach(z=>{let ce=z,Se=S[z];if("offset"!==z)switch(ce=e.normalizePropertyName(ce,c),Se){case"!":Se=i[z];break;case ga:Se=u[z];break;default:Se=e.normalizeStyleValue(z,ce,Se,c)}$[ce]=Se}),F||p.push($),b=$,_=M}),c.length)throw function UV(n){return new d.vHH(3502,Zt)}();return p}function $S(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&HS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&HS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&HS(t,"destroy",n)))}}function HS(n,e,t){const r=t.totalTime,u=GS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function GS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Bo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function lO(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let qS=(n,e)=>!1,cO=(n,e,t)=>[],dO=null;function zS(n){const e=n.parentNode||n.host;return e===dO?null:e}(jS()||"undefined"!=typeof Element)&&(YV()?(dO=(()=>document.documentElement)(),qS=(n,e)=>{for(;e;){if(e===n)return!0;e=zS(e)}return!1}):qS=(n,e)=>n.contains(e),cO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let mg=null,hO=!1;function fO(n){mg||(mg=function JV(){return"undefined"!=typeof document?document.body:null}()||{},hO=!!mg.style&&"WebkitAppearance"in mg.style);let e=!0;return mg.style&&!function QV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in mg.style,!e&&hO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in mg.style)),e}const pO=qS,gO=cO;let mO=(()=>{class n{validateStyleProperty(t){return fO(t)}matchesElement(t,r){return!1}containsElement(t,r){return pO(t,r)}getParentElement(t){return zS(t)}query(t,r,i){return gO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],_){return new Gf(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ZS=(()=>{class n{}return n.NOOP=new mO,n})();const WS="ng-enter",uI="ng-leave",lI="ng-trigger",cI=".ng-trigger",_O="ng-animating",KS=".ng-animating";function yg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:YS(parseFloat(e[1]),e[2])}function YS(n,e){return"s"===e?1e3*n:n}function dI(n,e,t){return n.hasOwnProperty("duration")?n:function tU(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(aO()),{duration:0,delay:0,easing:""};i=YS(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=YS(parseFloat(_),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push(function yV(){return new d.vHH(3100,Zt)}()),p=!0),u<0&&(e.push(function _V(){return new d.vHH(3101,Zt)}()),p=!0),p&&e.splice(_,0,aO())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Wy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ff(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Wy(n,t);return t}function wO(n,e,t){return t?e+":"+t+";":""}function EO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=wO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=wO(0,iU(t),n.style[t]));n.setAttribute("style",e)}function Ol(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=JS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),jS()&&EO(n))}function _g(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=JS(t);n.style[r]=""}),jS()&&EO(n))}function j0(n){return Array.isArray(n)?1==n.length?n[0]:am(n):n}const QS=new RegExp("{{\\s*(.+?)\\s*}}","g");function bO(n){let e=[];if("string"==typeof n){let t;for(;t=QS.exec(n);)e.push(t[1]);QS.lastIndex=0}return e}function hI(n,e,t){const r=n.toString(),i=r.replace(QS,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function wV(n){return new d.vHH(3003,Zt)}()),p=""),p.toString()});return i==r?n:i}function fI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const rU=/-+([a-z0-9])/g;function JS(n){return n.replace(rU,(...e)=>e[1].toUpperCase())}function iU(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function EV(n){return new d.vHH(3004,Zt)}()}}function CO(n,e){return window.getComputedStyle(n)[e]}function cU(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function dU(n,e,t){if(":"==n[0]){const _=function hU(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function kV(n){return new d.vHH(3016,Zt)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function NV(n){return new d.vHH(3015,Zt)}()),e;const i=r[1],u=r[2],c=r[3];e.push(IO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(IO(c,i))}(r,t,e)):t.push(n),t}const yI=new Set(["true","1"]),_I=new Set(["false","0"]);function IO(n,e){const t=yI.has(n)||_I.has(n),r=yI.has(e)||_I.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?yI.has(n):_I.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?yI.has(e):_I.has(e)),c&&p}}const fU=new RegExp("s*:selfs*,?","g");function XS(n,e,t,r){return new pU(n).build(e,t,r)}class pU{constructor(e){this._driver=e}build(e,t,r){const i=new yU(t);this._resetContextStyleTimingState(i);const u=jo(this,j0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function CV(){return new d.vHH(3006,Zt)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,b=_.name;b.toString().split(/\s*,\s*/).forEach(S=>{_.name=S,u.push(this.visitState(_,t))}),_.name=b}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function IV(){return new d.vHH(3007,Zt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(vI(p)){const _=p;Object.keys(_).forEach(b=>{bO(_[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(fI(u.values()),t.errors.push(function TV(n,e){return new d.vHH(3008,Zt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=jo(this,j0(e.animation),t);return{type:1,matchers:cU(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:vg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>jo(this,r,t)),options:vg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=jo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:vg(e.options)}}visitAnimate(e,t){const r=function vU(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return eM(dI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=eM(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=dI(t,e);return eM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:ma({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=ma(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==ga?r.push(c):t.errors.push(function DV(n){return new d.vHH(3002,Zt)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(vI(c)){const p=c,_=p.easing;if(_&&(u=_,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const _=t.collectedStyles[t.currentQuerySelector],b=_[p];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function AV(n,e,t,r,i){return new d.vHH(3010,Zt)}()),S=!1),u=b.startTime),S&&(_[p]={startTime:u,endTime:i}),t.options&&function nU(n,e,t){const r=e.params||{},i=bO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function vV(n){return new d.vHH(3001,Zt)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function SV(){return new d.vHH(3011,Zt)}()),r;let u=0;const c=[];let p=!1,_=!1,b=0;const S=e.steps.map(rt=>{const ot=this._makeStyleAst(rt,t);let et=null!=ot.offset?ot.offset:function _U(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(vI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(vI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ot.styles),ze=0;return null!=et&&(u++,ze=ot.offset=et),_=_||ze<0||ze>1,p=p||ze<b,b=ze,c.push(ze),ot});_&&t.errors.push(function MV(){return new d.vHH(3012,Zt)}()),p&&t.errors.push(function xV(){return new d.vHH(3200,Zt)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function PV(){return new d.vHH(3202,Zt)}()):0==u&&(F=1/(M-1));const $=M-1,z=t.currentTime,ce=t.currentAnimateTimings,Se=ce.duration;return S.forEach((rt,ot)=>{const et=F>0?ot==$?1:F*ot:c[ot],ze=et*Se;t.currentTime=z+ce.delay+ze,ce.duration=ze,this._validateStyleAst(rt,t),rt.offset=et,r.styles.push(rt)}),r}visitReference(e,t){return{type:8,animation:jo(this,j0(e.animation),t),options:vg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:vg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:vg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function gU(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(fU,"")),n=n.replace(/@\*/g,cI).replace(/@\w+/g,t=>cI+"-"+t.substr(1)).replace(/:animating/g,KS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Bo(t.collectedStyles,t.currentQuerySelector,{});const p=jo(this,j0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:vg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function OV(){return new d.vHH(3013,Zt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:dI(e.timings,t.errors,!0);return{type:12,animation:jo(this,j0(e.animation),t),timings:r,options:null}}}class yU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vI(n){return!Array.isArray(n)&&"object"==typeof n}function vg(n){return n?(n=Wy(n)).params&&(n.params=function mU(n){return n?Wy(n):null}(n.params)):n={},n}function eM(n,e,t){return{duration:n,delay:e,easing:t}}function tM(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class wI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const bU=new RegExp(":enter","g"),IU=new RegExp(":leave","g");function nM(n,e,t,r,i,u={},c={},p,_,b=[]){return(new TU).buildKeyframes(n,e,t,r,i,u,c,p,_,b)}class TU{buildKeyframes(e,t,r,i,u,c,p,_,b,S=[]){b=b||new wI;const M=new rM(e,t,b,i,u,S,[]);M.options=_,M.currentTimeline.setStyles([c],null,M.errors,_),jo(this,r,M);const F=M.timelines.filter($=>$.containsAnimation());if(Object.keys(p).length){let $;for(let z=F.length-1;z>=0;z--){const ce=F[z];if(ce.element===t){$=ce;break}}$&&!$.allowOnlyTimelineStyles()&&$.setStyles([p],null,M.errors,_)}return F.length?F.map($=>$.buildKeyframes()):[tM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?yg(r.duration):null,p=null!=r.delay?yg(r.delay):null;return 0!==c&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),jo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=EI);const c=yg(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>jo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?yg(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),jo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return dI(t.params?hI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?yg(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=EI);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(_=M.currentTimeline),jo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const S=t.currentTimeline;_&&S.delayNextStep(_);const M=S.currentTime;jo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const EI={};class rM{constructor(e,t,r,i,u,c,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=EI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new bI(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=yg(r.duration)),null!=r.delay&&(i.delay=yg(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=hI(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new rM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=EI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new DU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(bU,"."+this._enterClassName)).replace(IU,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function RV(n){return new d.vHH(3014,Zt)}()),p}}class bI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new bI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||ga,this._currentKeyframe[t]=ga}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function AU(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=ga})):ff(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const _=hI(c[p],u,r);this._pendingStyles[p]=_,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:ga),this._updateStyle(p,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const b=ff(p,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==ga&&t.add(S)}),r||(b.offset=_/this.duration),i.push(b)});const u=e.size?fI(e.values()):[],c=t.size?fI(t.values()):[];if(r){const p=i[0],_=Wy(p);p.offset=0,_.offset=1,i=[p,_]}return tM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class DU extends bI{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,_=ff(e[0],!1);_.offset=0,u.push(_);const b=ff(e[0],!1);b.offset=AO(p),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=ff(e[M],!1);F.offset=AO((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return tM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function AO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class iM{}class SU extends iM{normalizePropertyName(e,t){return JS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(MU[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function bV(n,e){return new d.vHH(3005,Zt)}())}return c+u}}const MU=(()=>function xU(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function SO(n,e,t,r,i,u,c,p,_,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:_,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const sM={};class MO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function PU(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,_,b,S){const M=[],F=this.ast.options&&this.ast.options.params||sM,z=this.buildStyles(r,p&&p.params||sM,M),ce=_&&_.params||sM,Se=this.buildStyles(i,ce,M),rt=new Set,ot=new Map,et=new Map,ze="void"===i,Tt={params:Object.assign(Object.assign({},F),ce)},xt=S?[]:nM(e,t,this.ast.animation,u,c,z,Se,Tt,b,M);let Wt=0;if(xt.forEach($o=>{Wt=Math.max($o.duration+$o.delay,Wt)}),M.length)return SO(t,this._triggerName,r,i,ze,z,Se,[],[],ot,et,Wt,M);xt.forEach($o=>{const cd=$o.element,qO=Bo(ot,cd,{});$o.preStyleProps.forEach(wg=>qO[wg]=!0);const H0=Bo(et,cd,{});$o.postStyleProps.forEach(wg=>H0[wg]=!0),cd!==t&&rt.add(cd)});const Or=fI(rt.values());return SO(t,this._triggerName,r,i,ze,z,Se,xt,Or,ot,et,Wt)}}class OU{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Wy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let _=c[p];_.length>1&&(_=hI(_,i,t));const b=this.normalizer.normalizePropertyName(p,t);_=this.normalizer.normalizeStyleValue(p,b,_,t),r[b]=_})}}),r}}class NU{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new OU(i.style,i.options&&i.options.params||{},r)}),xO(this.states,"true","1"),xO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new MO(e,i,this.states))}),this.fallbackTransition=function kU(n,e,t){return new MO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function xO(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const FU=new wI;class LU{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=XS(this._driver,t,r,[]);if(r.length)throw function BV(n){return new d.vHH(3503,Zt)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=uO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=nM(this._driver,t,u,WS,uI,{},{},r,FU,i),c.forEach(S=>{const M=Bo(p,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function jV(){return new d.vHH(3300,Zt)}()),c=[]),i.length)throw function $V(n){return new d.vHH(3504,Zt)}();p.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,ga)})});const b=hf(c.map(S=>{const M=p.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function HV(n){return new d.vHH(3301,Zt)}();return t}listen(e,t,r,i){const u=GS(t,"","","");return $S(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const PO="ng-animate-queued",oM="ng-animate-disabled",$U=[],OO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},HU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xa="__ng_removed";class aM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function ZU(n){return null!=n?n:null}(r?e.value:e),r){const u=Wy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const $0="void",uM=new aM($0);class GU{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Pa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function GV(n,e){return new d.vHH(3302,Zt)}();if(null==r||0==r.length)throw function qV(n){return new d.vHH(3303,Zt)}();if(!function WU(n){return"start"==n||"done"==n}(r))throw function zV(n,e){return new d.vHH(3400,Zt)}();const u=Bo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=Bo(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Pa(e,lI),Pa(e,lI+"-"+t),p[t]=uM),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function ZV(n){return new d.vHH(3401,Zt)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new lM(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Pa(e,lI),Pa(e,lI+"-"+t),this._engine.statesByElement.set(e,p={}));let _=p[t];const b=new aM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),p[t]=b,_||(_=uM),b.value!==$0&&_.value===b.value){if(!function QU(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const ce=[],Se=u.matchStyles(_.value,_.params,ce),rt=u.matchStyles(b.value,b.params,ce);ce.length?this._engine.reportError(ce):this._engine.afterFlush(()=>{_g(e,Se),Ol(e,rt)})}return}const F=Bo(this._engine.playersByElement,e,[]);F.forEach(ce=>{ce.namespaceId==this.id&&ce.triggerName==t&&ce.queued&&ce.destroy()});let $=u.matchTransition(_.value,b.value,e,b.params),z=!1;if(!$){if(!i)return;$=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:$,fromState:_,toState:b,player:c,isFallbackTransition:z}),z||(Pa(e,PO),c.onStart(()=>{Ky(e,PO)})),c.onDone(()=>{let ce=this.players.indexOf(c);ce>=0&&this.players.splice(ce,1);const Se=this._engine.playersByElement.get(e);if(Se){let rt=Se.indexOf(c);rt>=0&&Se.splice(rt,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,cI,!0);r.forEach(i=>{if(i[xa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(_=>{if(c.set(_,u[_].value),this._triggers[_]){const b=this.trigger(e,_,$0,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&hf(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers[c].fallbackTransition,b=r[c]||uM,S=new aM($0),M=new lM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[xa];(!u||u===OO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Pa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const _=GS(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,$S(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class qU{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new GU(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const _=i.get(p);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(CI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!CI(t))return;const u=t[xa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pa(e,oM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ky(e,oM))}removeNode(e,t,r,i){if(CI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[xa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return CI(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,cI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,KS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return hf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[xa];if(r&&r.setForRemoval){if(e[xa]=OO,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(oM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Pa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?hf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function WV(n){return new d.vHH(3402,Zt)}()}_flushAnimations(e,t){const r=new wI,i=[],u=new Map,c=[],p=new Map,_=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(lt=>{S.add(lt);const Ct=this.driver.query(lt,".ng-animate-queued",!0);for(let Ot=0;Ot<Ct.length;Ot++)S.add(Ct[Ot])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),$=kO(F,this.collectedEnterElements),z=new Map;let ce=0;$.forEach((lt,Ct)=>{const Ot=WS+ce++;z.set(Ct,Ot),lt.forEach(tn=>Pa(tn,Ot))});const Se=[],rt=new Set,ot=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const Ct=this.collectedLeaveElements[lt],Ot=Ct[xa];Ot&&Ot.setForRemoval&&(Se.push(Ct),rt.add(Ct),Ot.hasAnimation?this.driver.query(Ct,".ng-star-inserted",!0).forEach(tn=>rt.add(tn)):ot.add(Ct))}const et=new Map,ze=kO(F,Array.from(rt));ze.forEach((lt,Ct)=>{const Ot=uI+ce++;et.set(Ct,Ot),lt.forEach(tn=>Pa(tn,Ot))}),e.push(()=>{$.forEach((lt,Ct)=>{const Ot=z.get(Ct);lt.forEach(tn=>Ky(tn,Ot))}),ze.forEach((lt,Ct)=>{const Ot=et.get(Ct);lt.forEach(tn=>Ky(tn,Ot))}),Se.forEach(lt=>{this.processLeaveNode(lt)})});const Tt=[],xt=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(t).forEach(Ot=>{const tn=Ot.player,Di=Ot.element;if(Tt.push(tn),this.collectedEnterElements.length){const Os=Di[xa];if(Os&&Os.setForMove){if(Os.previousTriggersValues&&Os.previousTriggersValues.has(Ot.triggerName)){const Eg=Os.previousTriggersValues.get(Ot.triggerName),gf=this.statesByElement.get(Ot.element);gf&&gf[Ot.triggerName]&&(gf[Ot.triggerName].value=Eg)}return void tn.destroy()}}const Rl=!M||!this.driver.containsElement(M,Di),Ho=et.get(Di),pf=z.get(Di),or=this._buildInstruction(Ot,r,pf,Ho,Rl);if(or.errors&&or.errors.length)return void xt.push(or);if(Rl)return tn.onStart(()=>_g(Di,or.fromStyles)),tn.onDestroy(()=>Ol(Di,or.toStyles)),void i.push(tn);if(Ot.isFallbackTransition)return tn.onStart(()=>_g(Di,or.fromStyles)),tn.onDestroy(()=>Ol(Di,or.toStyles)),void i.push(tn);const WO=[];or.timelines.forEach(Os=>{Os.stretchStartingKeyframe=!0,this.disabledNodes.has(Os.element)||WO.push(Os)}),or.timelines=WO,r.append(Di,or.timelines),c.push({instruction:or,player:tn,element:Di}),or.queriedElements.forEach(Os=>Bo(p,Os,[]).push(tn)),or.preStyleProps.forEach((Os,Eg)=>{const gf=Object.keys(Os);if(gf.length){let bg=_.get(Eg);bg||_.set(Eg,bg=new Set),gf.forEach(dM=>bg.add(dM))}}),or.postStyleProps.forEach((Os,Eg)=>{const gf=Object.keys(Os);let bg=b.get(Eg);bg||b.set(Eg,bg=new Set),gf.forEach(dM=>bg.add(dM))})});if(xt.length){const lt=[];xt.forEach(Ct=>{lt.push(function KV(n,e){return new d.vHH(3505,Zt)}())}),Tt.forEach(Ct=>Ct.destroy()),this.reportError(lt)}const Wt=new Map,Or=new Map;c.forEach(lt=>{const Ct=lt.element;r.has(Ct)&&(Or.set(Ct,Ct),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,Wt))}),i.forEach(lt=>{const Ct=lt.element;this._getPreviousPlayers(Ct,!1,lt.namespaceId,lt.triggerName,null).forEach(tn=>{Bo(Wt,Ct,[]).push(tn),tn.destroy()})});const $o=Se.filter(lt=>LO(lt,_,b)),cd=new Map;NO(cd,this.driver,ot,b,ga).forEach(lt=>{LO(lt,_,b)&&$o.push(lt)});const H0=new Map;$.forEach((lt,Ct)=>{NO(H0,this.driver,new Set(lt),_,"!")}),$o.forEach(lt=>{const Ct=cd.get(lt),Ot=H0.get(lt);cd.set(lt,Object.assign(Object.assign({},Ct),Ot))});const wg=[],zO=[],ZO={};c.forEach(lt=>{const{element:Ct,player:Ot,instruction:tn}=lt;if(r.has(Ct)){if(S.has(Ct))return Ot.onDestroy(()=>Ol(Ct,tn.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(tn.totalTime),void i.push(Ot);let Di=ZO;if(Or.size>1){let Ho=Ct;const pf=[];for(;Ho=Ho.parentNode;){const or=Or.get(Ho);if(or){Di=or;break}pf.push(Ho)}pf.forEach(or=>Or.set(or,Di))}const Rl=this._buildAnimation(Ot.namespaceId,tn,Wt,u,H0,cd);if(Ot.setRealPlayer(Rl),Di===ZO)wg.push(Ot);else{const Ho=this.playersByElement.get(Di);Ho&&Ho.length&&(Ot.parentPlayer=hf(Ho)),i.push(Ot)}}else _g(Ct,tn.fromStyles),Ot.onDestroy(()=>Ol(Ct,tn.toStyles)),zO.push(Ot),S.has(Ct)&&i.push(Ot)}),zO.forEach(lt=>{const Ct=u.get(lt.element);if(Ct&&Ct.length){const Ot=hf(Ct);lt.setRealPlayer(Ot)}}),i.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<Se.length;lt++){const Ct=Se[lt],Ot=Ct[xa];if(Ky(Ct,uI),Ot&&Ot.hasAnimation)continue;let tn=[];if(p.size){let Rl=p.get(Ct);Rl&&Rl.length&&tn.push(...Rl);let Ho=this.driver.query(Ct,KS,!0);for(let pf=0;pf<Ho.length;pf++){let or=p.get(Ho[pf]);or&&or.length&&tn.push(...or)}}const Di=tn.filter(Rl=>!Rl.destroyed);Di.length?KU(this,Ct,Di):this.processLeaveNode(Ct)}return Se.length=0,wg.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const Ct=this.players.indexOf(lt);this.players.splice(Ct,1)}),lt.play()}),wg}elementContainsData(e,t){let r=!1;const i=t[xa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==$0;p.forEach(b=>{b.queued||!_&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,S=b!==u,M=Bo(r,b,[]);this._getPreviousPlayers(b,S,c,p,t.toState).forEach($=>{const z=$.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),$.destroy(),M.push($)})}_g(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,_=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(z=>{const ce=z.element;S.add(ce);const Se=ce[xa];if(Se&&Se.removedBeforeQueried)return new Gf(z.duration,z.delay);const rt=ce!==_,ot=function YU(n){const e=[];return FO(n,e),e}((r.get(ce)||$U).map(Wt=>Wt.getRealPlayer())).filter(Wt=>!!Wt.element&&Wt.element===ce),et=u.get(ce),ze=c.get(ce),Tt=uO(0,this._normalizer,0,z.keyframes,et,ze),xt=this._buildPlayer(z,Tt,ot);if(z.subTimeline&&i&&M.add(ce),rt){const Wt=new lM(e,p,ce);Wt.setRealPlayer(xt),b.push(Wt)}return xt});b.forEach(z=>{Bo(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function zU(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),S.forEach(z=>Pa(z,_O));const $=hf(F);return $.onDestroy(()=>{S.forEach(z=>Ky(z,_O)),Ol(_,t.toStyles)}),M.forEach(z=>{Bo(i,z,[]).push($)}),$}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Gf(e.duration,e.delay)}}class lM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Gf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>$S(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function CI(n){return n&&1===n.nodeType}function RO(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function NO(n,e,t,r,i){const u=[];t.forEach(_=>u.push(RO(_)));const c=[];r.forEach((_,b)=>{const S={};_.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[xa]=HU,c.push(b))}),n.set(b,S)});let p=0;return t.forEach(_=>RO(_,u[p++])),c}function kO(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let _=u.get(p);if(_)return _;const b=p.parentNode;return _=t.has(b)?b:i.has(b)?1:c(b),u.set(p,_),_}return e.forEach(p=>{const _=c(p);1!==_&&t.get(_).push(p)}),t}function Pa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ky(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function KU(n,e,t){hf(t).onDone(()=>n.processLeaveNode(e))}function FO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof dw?FO(r.players,e):e.push(r)}}function LO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class II{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new qU(e,t,r),this._timelineEngine=new LU(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const _=[],S=XS(this._driver,u,_,[]);if(_.length)throw function VV(n,e){return new d.vHH(3404,Zt)}();p=function RU(n,e,t){return new NU(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=lO(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=lO(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let XU=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Ol(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ol(this._element,this._initialStyles),this._endStyles&&(Ol(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(_g(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_g(this._element,this._endStyles),this._endStyles=null),Ol(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];e2(i)&&(e=e||{},e[i]=n[i])}return e}function e2(n){return"display"===n||"position"===n}class VO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:CO(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class t2{validateStyleProperty(e){return fO(e)}matchesElement(e,t){return!1}containsElement(e,t){return pO(e,t)}getParentElement(e){return zS(e)}query(e,t,r){return gO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const b={},S=c.filter(F=>F instanceof VO);(function sU(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let $=F.currentSnapshot;Object.keys($).forEach(z=>b[z]=$[z])}),t=function oU(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(_){p[_]=CO(n,_)})}}return e}(e,t=t.map(F=>ff(F,!1)),b);const M=function JU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=cM(e[0]),e.length>1&&(r=cM(e[e.length-1]))):e&&(t=cM(e)),t||r?new XU(n,t,r):null}(e,t);return new VO(e,t,_,M)}}let n2=(()=>{class n extends ah{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?am(t):t;return UO(this._renderer,null,r,"register",[i]),new r2(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class r2 extends class MI{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new i2(this._id,e,t||{},this._renderer)}}class i2{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return UO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function UO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const BO="@.disabled";let s2=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new jO("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=S=>{Array.isArray(S)?S.forEach(_):this.engine.registerTrigger(c,p,t,S.name,S)};return r.data.animation.forEach(_),new o2(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(II),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class jO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==BO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class o2 extends jO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==BO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function a2(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function u2(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let l2=(()=>{class n extends II{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe),d.LFG(ZS),d.LFG(iM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const $O=new d.OlP("AnimationModuleType"),HO=[{provide:ah,useClass:n2},{provide:iM,useFactory:function c2(){return new SU}},{provide:II,useClass:l2},{provide:d.FYo,useFactory:function d2(n,e,t){return new s2(n,e,t)},deps:[go,II,d.R0b]}],GO=[{provide:ZS,useFactory:()=>new t2},{provide:$O,useValue:"BrowserAnimations"},...HO],h2=[{provide:ZS,useClass:mO},{provide:$O,useValue:"NoopAnimations"},...HO];let f2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?h2:GO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:GO,imports:[Xo]}),n})(),p2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[xF]}),n.\u0275inj=d.cJS({providers:[],imports:[[Xo,mV,TL,ti.hO,sO,ti.hO.initializeApp(oO_firebase),f2]]}),n})();(0,d.G48)(),Ou().bootstrapModule(p2).catch(n=>console.error(n))},4327:function(Ye,we){var Z;void 0!==(Z=function(){"use strict";function se(U,V,X){var Re=new XMLHttpRequest;Re.open("GET",U),Re.responseType="blob",Re.onload=function(){le(Re.response,V,X)},Re.onerror=function(){console.error("could not download file")},Re.send()}function ne(U){var V=new XMLHttpRequest;V.open("HEAD",U,!1);try{V.send()}catch(X){}return 200<=V.status&&299>=V.status}function he(U){try{U.dispatchEvent(new MouseEvent("click"))}catch(X){var V=document.createEvent("MouseEvents");V.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent(V)}}var oe="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,ae=oe.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),le=oe.saveAs||("object"!=typeof window||window!==oe?function(){}:"download"in HTMLAnchorElement.prototype&&!ae?function(U,V,X){var Re=oe.URL||oe.webkitURL,be=document.createElement("a");be.download=V=V||U.name||"download",be.rel="noopener","string"==typeof U?(be.href=U,be.origin===location.origin?he(be):ne(be.href)?se(U,V,X):he(be,be.target="_blank")):(be.href=Re.createObjectURL(U),setTimeout(function(){Re.revokeObjectURL(be.href)},4e4),setTimeout(function(){he(be)},0))}:"msSaveOrOpenBlob"in navigator?function(U,V,X){if(V=V||U.name||"download","string"!=typeof U)navigator.msSaveOrOpenBlob(function N(U,V){return void 0===V?V={autoBom:!1}:"object"!=typeof V&&(console.warn("Deprecated: Expected third argument to be a object"),V={autoBom:!V}),V.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(U.type)?new Blob(["\ufeff",U],{type:U.type}):U}(U,X),V);else if(ne(U))se(U,V,X);else{var Re=document.createElement("a");Re.href=U,Re.target="_blank",setTimeout(function(){he(Re)})}}:function(U,V,X,Re){if((Re=Re||open("","_blank"))&&(Re.document.title=Re.document.body.innerText="downloading..."),"string"==typeof U)return se(U,V,X);var be="application/octet-stream"===U.type,Ne=/constructor/i.test(oe.HTMLElement)||oe.safari,Ue=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ue||be&&Ne||ae)&&"undefined"!=typeof FileReader){var de=new FileReader;de.onloadend=function(){var qe=de.result;qe=Ue?qe:qe.replace(/^data:[^;]*;/,"data:attachment/file;"),Re?Re.location.href=qe:location=qe,Re=null},de.readAsDataURL(U)}else{var Ie=oe.URL||oe.webkitURL,$e=Ie.createObjectURL(U);Re?Re.location=$e:location.href=$e,Re=null,setTimeout(function(){Ie.revokeObjectURL($e)},4e4)}});oe.saveAs=le.saveAs=le,Ye.exports=le}.apply(we,[]))&&(Ye.exports=Z)},5867:(Ye,we,R)=>{"use strict";R.d(we,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=R(9681);(0,d.registerVersion)("firebase","9.8.2","app")},127:(Ye,we,R)=>{"use strict";R.d(we,{Z:()=>d.Z});var d=R(3942);d.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Ye,we,R)=>{"use strict";R.r(we);var d=R(5861),Z=R(3942),N=R(2090),se=R(9681),ne=R(655),he=R(1877),oe=R(4859);const Ne=function Re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$e=new he.Yd("@firebase/auth");function qe(y,...f){$e.logLevel<=he.in.ERROR&&$e.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Ae(y,...f){throw Be(y,...f)}function Ce(y,...f){return Be(y,...f)}function Te(y,f,m){const w=Object.assign(Object.assign({},Ue()),{[f]:m});return new N.LL("auth","Firebase",w).create(f,{appName:y.name})}function je(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ae(y,"argument-error"),Te(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...f){if("string"!=typeof y){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(m,...w)}return de.create(y,...f)}function H(y,f,...m){if(!y)throw Be(f,...m)}function Ee(y){const f="INTERNAL ASSERTION FAILED: "+y;throw qe(f),new Error(f)}function Y(y,f){y||Ee(f)}const ie=new Map;function te(y){Y(y instanceof Function,"Expected a class definition");let f=ie.get(y);return f?(Y(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ie.set(y,f),f)}function ke(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function dt(){return"http:"===$t()||"https:"===$t()}function $t(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Xt{constructor(f,m){this.shortDelay=f,this.longDelay=m,Y(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(y,f){Y(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class nn{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rr=new Xt(3e4,6e4);function qt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Lt(y,f,m,w){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(y,f,m,w,D={}){return ci(y,D,(0,d.Z)(function*(){let O={},K={};w&&("GET"===f?K=w:O={body:JSON.stringify(w)});const pe=(0,N.xO)(Object.assign({key:y.config.apiKey},K)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),nn.fetch()(Rs(y,y.config.apiHost,m,pe),Object.assign({method:f,headers:Ve,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ci(y,f,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(y,f,m){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Kt),f);try{const D=new di(y),O=yield Promise.race([m(),D.promise]);D.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw Ai(y,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const pe=O.ok?K.errorMessage:K.error.message,[Ve,Xe]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Ai(y,"credential-already-in-use",K);if("EMAIL_EXISTS"===Ve)throw Ai(y,"email-already-in-use",K);if("USER_DISABLED"===Ve)throw Ai(y,"user-disabled",K);const pt=w[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Te(y,pt,Xe);Ae(y,pt)}}catch(D){if(D instanceof N.ZR)throw D;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Nr(y,f,m,w){return Li.apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(y,f,m,w,D={}){const O=yield Lt(y,f,m,w,D);return"mfaPendingCredential"in O&&Ae(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Rs(y,f,m,w){const D=`${f}${m}?${w}`;return y.config.emulator?En(y.config,D):`${y.config.apiScheme}://${D}`}class di{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Ce(this.auth,"network-request-failed")),Rr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ai(y,f,m){const w={appName:y.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const D=Ce(y,f,w);return D.customData._tokenResponse=m,D}function hi(){return(hi=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function vn(y,f){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function oo(y,f){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Yn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Go(){return(Go=(0,d.Z)(function*(y,f=!1){const m=(0,N.m9)(y),w=yield m.getIdToken(f),D=ut(w);H(D&&D.exp&&D.auth_time&&D.iat,m.auth,"internal-error");const O="object"==typeof D.firebase?D.firebase:void 0,K=null==O?void 0:O.sign_in_provider;return{claims:D,token:w,authTime:Yn(Ht(D.auth_time)),issuedAtTime:Yn(Ht(D.iat)),expirationTime:Yn(Ht(D.exp)),signInProvider:K||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Ht(y){return 1e3*Number(y)}function ut(y){const[f,m,w]=y.split(".");if(void 0===f||void 0===m||void 0===w)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,N.tV)(m);return D?JSON.parse(D):(qe("Failed to decode base64 JWT payload"),null)}catch(D){return qe("Caught error parsing JWT payload as JSON",D),null}}function Er(y,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof N.ZR&&Bt(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Bt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ao{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class br{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yn(this.lastLoginAt),this.creationTime=Yn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cr(y){return B.apply(this,arguments)}function B(){return(B=(0,d.Z)(function*(y){var f;const m=y.auth,w=yield y.getIdToken(),D=yield Er(y,oo(m,{idToken:w}));H(null==D?void 0:D.users.length,m,"internal-error");const O=D.users[0];y._notifyReloadListener(O);const K=(null===(f=O.providerUserInfo)||void 0===f?void 0:f.length)?G(O.providerUserInfo):[],pe=De(y.providerData,K),pt=!!y.isAnonymous&&!(y.email&&O.passwordHash||(null==pe?void 0:pe.length)),ft={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:pe,metadata:new br(O.createdAt,O.lastLoginAt),isAnonymous:pt};Object.assign(y,ft)})).apply(this,arguments)}function W(){return(W=(0,d.Z)(function*(y){const f=(0,N.m9)(y);yield Cr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function De(y,f){return[...y.filter(w=>!f.some(D=>D.providerId===w.providerId)),...f]}function G(y){return y.map(f=>{var{providerId:m}=f,w=(0,ne._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Oe(){return(Oe=(0,d.Z)(function*(y,f){const m=yield ci(y,{},(0,d.Z)(function*(){const w=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:O}=y.config,K=Rs(y,D,"/v1/token",`key=${O}`),pe=yield y._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(K,{method:"POST",headers:pe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){H(f.idToken,"internal-error"),H(void 0!==f.idToken,"internal-error"),H(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function vt(y){const f=ut(y);return H(f,"internal-error"),H(void 0!==f.exp,"internal-error"),H(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,d.Z)(function*(){return H(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,d.Z)(function*(){const{accessToken:D,refreshToken:O,expiresIn:K}=yield function ee(y,f){return Oe.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(D,O,Number(K))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:D,expirationTime:O}=m,K=new Je;return w&&(H("string"==typeof w,"internal-error",{appName:f}),K.refreshToken=w),D&&(H("string"==typeof D,"internal-error",{appName:f}),K.accessToken=D),O&&(H("number"==typeof O,"internal-error",{appName:f}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function gt(y,f){H("string"==typeof y||void 0===y,"internal-error",{appName:f})}class It{constructor(f){var{uid:m,auth:w,stsTokenManager:D}=f,O=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ao(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new br(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const w=yield Er(m,m.stsTokenManager.getToken(m.auth,f));return H(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Si(y){return Go.apply(this,arguments)}(this,f)}reload(){return function q(y){return W.apply(this,arguments)}(this)}_assign(f){this!==f&&(H(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new It(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,d.Z)(function*(){let D=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),D=!0),m&&(yield Cr(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield Er(f,function yt(y,f){return hi.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,D,O,K,pe,Ve,Xe,pt;const ft=null!==(w=m.displayName)&&void 0!==w?w:void 0,Dn=null!==(D=m.email)&&void 0!==D?D:void 0,wi=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,Ju=null!==(K=m.photoURL)&&void 0!==K?K:void 0,jf=null!==(pe=m.tenantId)&&void 0!==pe?pe:void 0,em=null!==(Ve=m._redirectEventId)&&void 0!==Ve?Ve:void 0,tu=null!==(Xe=m.createdAt)&&void 0!==Xe?Xe:void 0,yc=null!==(pt=m.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:sh,emailVerified:tm,isAnonymous:Hn,providerData:$f,stsTokenManager:Hf}=m;H(sh&&Hf,f,"internal-error");const Xu=Je.fromJSON(this.name,Hf);H("string"==typeof sh,f,"internal-error"),gt(ft,f.name),gt(Dn,f.name),H("boolean"==typeof tm,f,"internal-error"),H("boolean"==typeof Hn,f,"internal-error"),gt(wi,f.name),gt(Ju,f.name),gt(jf,f.name),gt(em,f.name),gt(tu,f.name),gt(yc,f.name);const Po=new It({uid:sh,auth:f,email:Dn,emailVerified:tm,displayName:ft,isAnonymous:Hn,photoURL:Ju,phoneNumber:wi,tenantId:jf,stsTokenManager:Xu,createdAt:tu,lastLoginAt:yc});return $f&&Array.isArray($f)&&(Po.providerData=$f.map(el=>Object.assign({},el))),em&&(Po._redirectEventId=em),Po}static _fromIdTokenResponse(f,m,w=!1){return(0,d.Z)(function*(){const D=new Je;D.updateFromServerResponse(m);const O=new It({uid:m.localId,auth:f,stsTokenManager:D,isAnonymous:w});return yield Cr(O),O})()}}const Et=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var D=this;return(0,d.Z)(function*(){D.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const D=w.storage[m];return void 0===D?null:D})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return y.type="NONE",y})();function Vn(y,f,m){return`firebase:${y}:${f}:${m}`}class kr{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:D,name:O}=this.auth;this.fullUserKey=Vn(this.userKey,D.apiKey,O),this.fullPersistenceKey=Vn("persistence",D.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?It._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new kr(te(Et),f,w);const D=(yield Promise.all(m.map(function(){var Xe=(0,d.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=D[0]||te(Et);const K=Vn(w,f.config.apiKey,f.name);let pe=null;for(const Xe of m)try{const pt=yield Xe._get(K);if(pt){const ft=It._fromJSON(f,pt);Xe!==O&&(pe=ft),O=Xe;break}}catch(pt){}const Ve=D.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&Ve.length?(O=Ve[0],pe&&(yield O._set(K,pe.toJSON())),yield Promise.all(m.map(function(){var Xe=(0,d.Z)(function*(pt){if(pt!==O)try{yield pt._remove(K)}catch(ft){}});return function(pt){return Xe.apply(this,arguments)}}())),new kr(O,f,w)):new kr(O,f,w)})()}}function wu(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Un(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Oa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(as(f))return"Blackberry";if(Bn(f))return"Webos";if(Eu(f))return"Safari";if((f.includes("chrome/")||Ra(f))&&!f.includes("edge/"))return"Chrome";if(Fr(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Oa(y=(0,N.z$)()){return/firefox\//i.test(y)}function Eu(y=(0,N.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ra(y=(0,N.z$)()){return/crios\//i.test(y)}function Un(y=(0,N.z$)()){return/iemobile/i.test(y)}function Fr(y=(0,N.z$)()){return/android/i.test(y)}function as(y=(0,N.z$)()){return/blackberry/i.test(y)}function Bn(y=(0,N.z$)()){return/webos/i.test(y)}function zr(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ns(y=(0,N.z$)()){return zr(y)||Fr(y)||Bn(y)||as(y)||/windows phone/i.test(y)||Un(y)}function qo(y,f=[]){let m;switch(y){case"Browser":m=wu((0,N.z$)());break;case"Worker":m=`${wu((0,N.z$)())}-${y}`;break;default:m=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${se.SDK_VERSION}/${w}`}class Zr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=O=>new Promise((K,pe)=>{try{K(f(O))}catch(Ve){pe(Ve)}});w.onAbort=m,this.queue.push(w);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===f)return;const w=[];try{for(const D of m.queue)yield D(f),D.onAbort&&w.push(D.onAbort)}catch(D){w.reverse();for(const O of w)try{O()}catch(K){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:D.message})}})()}}class Ze{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new en(this),this.idTokenSubscription=new en(this),this.beforeStateQueue=new Zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=te(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var D,O;if(!w._deleted&&(w.persistenceManager=yield kr.create(w,f),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(K){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var w;const D=yield m.assertedPersistence.getCurrentUser();let O=D,K=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const pe=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Ve=null==O?void 0:O._redirectEventId,Xe=yield m.tryRedirectSignIn(f);(!pe||pe===Ve)&&(null==Xe?void 0:Xe.user)&&(O=Xe.user,K=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(O)}catch(pe){O=D,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(pe))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return H(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(D){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){try{yield Cr(f)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function We(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const w=f?(0,N.m9)(f):null;return w&&H(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return f&&H(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,d.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(m);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&te(f)||m._popupRedirectResolver;H(w,m,"argument-error"),m.redirectPersistenceManager=yield kr.create(m,[te(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var w,D;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(D=m.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,D){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return H(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof m?f.addObserver(m,w,D):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=qo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const D=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return D&&(w["X-Firebase-Client"]=D),w})()}}function ct(y){return(0,N.m9)(y)}class en{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(m=>this.observer=m)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ui(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Mi{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Ee("not implemented")}_getIdTokenResponse(f){return Ee("not implemented")}_linkToIdToken(f,m){return Ee("not implemented")}_getReauthenticationResolver(f){return Ee("not implemented")}}function Cn(y,f){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:resetPassword",qt(y,f))})).apply(this,arguments)}function ka(y,f){return ks.apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function bu(y,f){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",qt(y,f))})).apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithPassword",qt(y,f))})).apply(this,arguments)}function Ls(y,f){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendOobCode",qt(y,f))})).apply(this,arguments)}function rn(y,f){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,d.Z)(function*(y,f){return Ls(y,f)})).apply(this,arguments)}function Fa(y,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(y,f){return Ls(y,f)})).apply(this,arguments)}function Bi(y,f){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,d.Z)(function*(y,f){return Ls(y,f)})).apply(this,arguments)}function hd(y,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,d.Z)(function*(y,f){return Ls(y,f)})).apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}class Ir extends Mi{constructor(f,m,w,D=null){super("password",w),this._email=f,this._password=m,this._tenantId=D}static _fromEmailAndPassword(f,m){return new Ir(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Ir(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function xn(y,f){return lo.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function $i(y,f){return Nl.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return ka(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Cg(y,f){return fd.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Vs(y,f){return pd.apply(this,arguments)}function pd(){return(pd=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithIdp",qt(y,f))})).apply(this,arguments)}class us extends Mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new us(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D}=m,O=(0,ne._T)(m,["providerId","signInMethod"]);if(!w||!D)return null;const K=new us(w,D);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(f){return Vs(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Vs(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Vs(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,N.xO)(m)}return f}}function Tg(y,f){return gd.apply(this,arguments)}function gd(){return(gd=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,f))})).apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f))})).apply(this,arguments)}function md(){return(md=(0,d.Z)(function*(y,f){const m=yield Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f));if(m.temporaryProof)throw Ai(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ag={USER_NOT_FOUND:"user-not-found"};function yd(){return(yd=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ag)})).apply(this,arguments)}class zo extends Mi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new zo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new zo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function kl(y,f){return Us.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Dg(y,f){return md.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Sg(y,f){return yd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:D}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:D,temporaryProof:O}=f;return w||m||D||O?new zo({verificationId:m,verificationCode:w,phoneNumber:D,temporaryProof:O}):null}}class Tu{constructor(f){var m,w,D,O,K,pe;const Ve=(0,N.zd)((0,N.pd)(f)),Xe=null!==(m=Ve.apiKey)&&void 0!==m?m:null,pt=null!==(w=Ve.oobCode)&&void 0!==w?w:null,ft=function mf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ve.mode)&&void 0!==D?D:null);H(Xe&&pt&&ft,"argument-error"),this.apiKey=Xe,this.operation=ft,this.code=pt,this.continueUrl=null!==(O=Ve.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=Ve.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(pe=Ve.tenantId)&&void 0!==pe?pe:null}static parseLink(f){const m=function La(y){const f=(0,N.zd)((0,N.pd)(y)).link,m=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,w=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(w?(0,N.zd)((0,N.pd)(w)).link:null)||w||m||f||y}(f);try{return new Tu(m)}catch(w){return null}}}let vd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,w){return Ir._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const D=Tu.parseLink(w);return H(D,"argument-error"),Ir._fromEmailAndCode(m,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Tr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class co extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Hi extends co{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return H("providerId"in m&&"signInMethod"in m,"argument-error"),us._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return H(f.idToken||f.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Hi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Hi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:O,nonce:K,providerId:pe}=f;if(!w&&!D&&!m&&!O||!pe)return null;try{return new Hi(pe)._credential({idToken:m,accessToken:w,nonce:K,pendingToken:O})}catch(Ve){return null}}}let Zo=(()=>{class y extends co{constructor(){super("facebook.com")}static credential(m){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),wd=(()=>{class y extends co{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:D}=m;if(!w&&!D)return null;try{return y.credential(w,D)}catch(O){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),yf=(()=>{class y extends co{constructor(){super("github.com")}static credential(m){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ho extends Mi{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Vs(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Vs(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Vs(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D,pendingToken:O}=m;return w&&D&&O&&w===D?new ho(w,O):null}static _create(f,m){return new ho(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Lr extends Tr{constructor(f){H(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Lr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Lr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=ho.fromJSON(f);return H(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return ho._create(w,m)}catch(D){return null}}}let bd=(()=>{class y extends co{constructor(){super("twitter.com")}static credential(m,w){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=m;if(!w||!D)return null;try{return y.credential(w,D)}catch(O){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Vr(y,f){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signUp",qt(y,f))})).apply(this,arguments)}class gi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,D=!1){return(0,d.Z)(function*(){const O=yield It._fromIdTokenResponse(f,w,D),K=Fl(w);return new gi({user:O,providerId:K,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const D=Fl(w);return new gi({user:f,providerId:D,_tokenResponse:w,operationType:m})})()}}function Fl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ll(){return(Ll=(0,d.Z)(function*(y){var f;const m=ct(y);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new gi({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Vr(m,{returnSecureToken:!0}),D=yield gi._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class Yo extends N.ZR{constructor(f,m,w,D){var O;super(m.code,m.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,Yo.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,D){return new Yo(f,m,w,D)}}function Vl(y,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Yo._fromErrorAndOperation(y,O,f,w):O})}function Gi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function sn(){return(sn=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y);yield Yt(!0,m,f);const{providerUserInfo:w}=yield vn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),D=Gi(w||[]);return m.providerData=m.providerData.filter(O=>D.has(O.providerId)),D.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Va(y,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(y,f,m=!1){const w=yield Er(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return gi._forOperation(y,"link",w)})).apply(this,arguments)}function Yt(y,f,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,d.Z)(function*(y,f,m){yield Cr(f);const D=!1===y?"provider-already-linked":"no-such-provider";H(Gi(f.providerData).has(m)===y,f.auth,D)})).apply(this,arguments)}function Du(y,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(y,f,m=!1){const{auth:w}=y,D="reauthenticate";try{const O=yield Er(y,Vl(w,D,f,y),m);H(O.idToken,w,"internal-error");const K=ut(O.idToken);H(K,w,"internal-error");const{sub:pe}=K;return H(y.uid===pe,w,"user-mismatch"),gi._forOperation(y,D,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Ae(w,"user-mismatch"),O}})).apply(this,arguments)}function ur(y,f){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,d.Z)(function*(y,f,m=!1){const w="signIn",D=yield Vl(y,w,f),O=yield gi._fromIdTokenResponse(y,w,D);return m||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function mn(y,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(y,f){return ur(ct(y),f)})).apply(this,arguments)}function lr(y,f){return po.apply(this,arguments)}function po(){return(po=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y);return yield Yt(!1,m,f.providerId),Va(m,f)})).apply(this,arguments)}function ls(y,f){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(y,f){return Du((0,N.m9)(y),f)})).apply(this,arguments)}function xi(y,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(y,f){return Nr(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,f))})).apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(y,f){const m=ct(y),w=yield xi(m,{token:f,returnSecureToken:!0}),D=yield gi._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class js{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Bl._fromServerResponse(f,m):Ae(f,"internal-error")}}class Bl extends js{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Bl(m)}}function ja(y,f,m){var w;H((null===(w=m.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),H(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(H(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(H(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Au(){return(Au=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D={requestType:"PASSWORD_RESET",email:f};m&&ja(w,D,m),yield Fa(w,D)})).apply(this,arguments)}function $l(){return($l=(0,d.Z)(function*(y,f,m){yield Cn((0,N.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Me(){return(Me=(0,d.Z)(function*(y,f){yield bu((0,N.m9)(y),{oobCode:f})})).apply(this,arguments)}function Vt(y,f){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y),w=yield Cn(m,{oobCode:f}),D=w.requestType;switch(H(D,m,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(w.mfaInfo,m,"internal-error");default:H(w.email,m,"internal-error")}let O=null;return w.mfaInfo&&(O=js._fromServerResponse(ct(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:D}})).apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(y,f){const{data:m}=yield Vt((0,N.m9)(y),f);return m.email})).apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(y,f,m){const w=ct(y),D=yield Vr(w,{returnSecureToken:!0,email:f,password:m}),O=yield gi._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function ql(){return(ql=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D={requestType:"EMAIL_SIGNIN",email:f};H(m.handleCodeInApp,w,"argument-error"),m&&ja(w,D,m),yield Bi(w,D)})).apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D=vd.credentialWithLink(f,m||ke());return H(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),mn(w,D)})).apply(this,arguments)}function Dr(y,f){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:createAuthUri",qt(y,f))})).apply(this,arguments)}function $s(){return($s=(0,d.Z)(function*(y,f){const w={identifier:f,continueUri:dt()?ke():"http://localhost"},{signinMethods:D}=yield Dr((0,N.m9)(y),w);return D||[]})).apply(this,arguments)}function zl(){return(zl=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ja(m.auth,D,f);const{email:O}=yield rn(m.auth,D);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ou(){return(Ou=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&ja(w.auth,O,m);const{email:K}=yield hd(w.auth,O);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function Zl(y,f){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,N.m9)(y),O={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},K=yield Er(w,Zl(w.auth,O));w.displayName=K.displayName||null,w.photoURL=K.photoUrl||null;const pe=w.providerData.find(({providerId:Ve})=>"password"===Ve);pe&&(pe.displayName=w.displayName,pe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(K)})).apply(this,arguments)}function ku(y,f,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(y,f,m){const{auth:w}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(O.email=f),m&&(O.password=m);const K=yield Er(y,ka(w,O));yield y._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class ea{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class Sd extends ea{constructor(f,m,w,D){super(f,m,w),this.username=D}}class Fu extends ea{constructor(f,m){super(f,"facebook.com",m)}}class Yr extends Sd{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class vf extends ea{constructor(f,m){super(f,"google.com",m)}}class Wl extends Sd{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Qn(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ad(y){var f,m;if(!y)return null;const{providerId:w}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const K=null===(m=null===(f=ut(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new ea(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!w)return null;switch(w){case"facebook.com":return new Fu(O,D);case"github.com":return new Yr(O,D);case"google.com":return new vf(O,D);case"twitter.com":return new Wl(O,D,y.screenName||null);case"custom":case"anonymous":return new ea(O,null);default:return new ea(O,w,D)}}(m)}class ds{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ds("enroll",f)}static _fromMfaPendingCredential(f){return new ds("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ds._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ds._fromIdtoken(f.multiFactorSession.idToken)}return null}}class vo{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=ct(f),D=m.customData._serverResponse,O=(D.mfaInfo||[]).map(pe=>js._fromServerResponse(w,pe));H(D.mfaPendingCredential,w,"internal-error");const K=ds._fromMfaPendingCredential(D.mfaPendingCredential);return new vo(K,O,function(){var pe=(0,d.Z)(function*(Ve){const Xe=yield Ve._process(w,K);delete D.mfaInfo,delete D.mfaPendingCredential;const pt=Object.assign(Object.assign({},D),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(m.operationType){case"signIn":const ft=yield gi._fromIdTokenResponse(w,m.operationType,pt);return yield w._updateCurrentUser(ft.user),ft;case"reauthenticate":return H(m.user,w,"internal-error"),gi._forOperation(m.user,m.operationType,pt);default:Ae(w,"internal-error")}});return function(Ve){return pe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function xd(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,f))}class ta{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>js._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new ta(f)}getSession(){var f=this;return(0,d.Z)(function*(){return ds._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,d.Z)(function*(){const D=f,O=yield w.getSession(),K=yield Er(w.user,D._process(w.user.auth,O,m));return yield w.user._updateTokensIfNecessary(K),w.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){const w="string"==typeof f?f:f.uid,D=yield m.user.getIdToken(),O=yield Er(m.user,function wo(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,f))}(m.user.auth,{idToken:D,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:K})=>K!==w),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const Lu=new WeakMap,hs="__sak";class Vu{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(hs,"1"),this.storage.removeItem(hs),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ur=(()=>{class y extends Vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rg(){const y=(0,N.z$)();return Eu(y)||zr(y)}()&&function ar(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ns(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),O=this.localCache[w];D!==O&&m(w,O,D)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((pe,Ve,Xe)=>{this.notifyListeners(pe,Xe)});const D=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(D);if(m.newValue!==pe)null!==m.newValue?this.storage.setItem(D,m.newValue):this.storage.removeItem(D);else if(this.localCache[D]===m.newValue&&!w)return}const O=()=>{const pe=this.storage.getItem(D);!w&&this.localCache[D]===pe||this.notifyListeners(D,pe)},K=this.storage.getItem(D);!function Na(){return(0,N.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,w){this.localCache[m]=w;const D=this.listeners[m];if(D)for(const O of Array.from(D))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var D=()=>super._set,O=this;return(0,d.Z)(function*(){yield D().call(O,m,w),O.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,D=this;return(0,d.Z)(function*(){const O=yield w().call(D,m);return D.localCache[m]=JSON.stringify(O),O})()}_remove(m){var w=()=>super._remove,D=this;return(0,d.Z)(function*(){yield w().call(D,m),delete D.localCache[m]})()}}return y.type="LOCAL",y})(),On=(()=>{class y extends Vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return y.type="SESSION",y})();let Pd=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(O=>O.isListeningto(m));if(w)return w;const D=new y(m);return this.receivers.push(D),D}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const D=m,{eventId:O,eventType:K,data:pe}=D.data,Ve=w.handlersMap[K];if(!(null==Ve?void 0:Ve.size))return;D.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const Xe=Array.from(Ve).map(function(){var ft=(0,d.Z)(function*(Dn){return Dn(D.origin,pe)});return function(Dn){return ft.apply(this,arguments)}}()),pt=yield function Ga(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Xe);D.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:pt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function na(y="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return y+m}class Hs{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var D=this;return(0,d.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,pe;return new Promise((Ve,Xe)=>{const pt=na("",20);O.port1.start();const ft=setTimeout(()=>{Xe(new Error("unsupported_event"))},w);pe={messageChannel:O,onMessage(Dn){const wi=Dn;if(wi.data.eventId===pt)switch(wi.data.status){case"ack":clearTimeout(ft),K=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Ve(wi.data.response);break;default:clearTimeout(ft),clearTimeout(K),Xe(new Error("invalid_response"))}}},D.handlers.add(pe),O.port1.addEventListener("message",pe.onMessage),D.target.postMessage({eventType:f,eventId:pt,data:m},[O.port2])}).finally(()=>{pe&&D.removeMessageHandler(pe)})})()}}function In(){return window}function Zi(){return void 0!==In().WorkerGlobalScope&&"function"==typeof In().importScripts}function Od(){return(Od=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Yl="firebaseLocalStorageDb",qs="firebaseLocalStorage",ra="fbase_key";class Eo{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function cr(y,f){return y.transaction([qs],f?"readwrite":"readonly").objectStore(qs)}function Co(){const y=indexedDB.open(Yl,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(qs,{keyPath:ra})}catch(D){m(D)}}),y.addEventListener("success",(0,d.Z)(function*(){const w=y.result;w.objectStoreNames.contains(qs)?f(w):(w.close(),yield function bo(){const y=indexedDB.deleteDatabase(Yl);return new Eo(y).toPromise()}(),f(yield Co()))}))})}function ia(y,f,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(y,f,m){const w=cr(y,!0).put({[ra]:f,value:m});return new Eo(w).toPromise()})).apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(y,f){const m=cr(y,!1).get(f),w=yield new Eo(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function oa(y,f){const m=cr(y,!0).delete(f);return new Eo(m).toPromise()}const Io=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Co()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let D=0;for(;;)try{const O=yield w._openDb();return yield m(O)}catch(O){if(D++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Zi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=Pd._getInstance(function Kl(){return Zi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(D,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(D,O){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(D,O){return["keyChanged"]});return function(D,O){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,D;if(m.activeServiceWorker=yield function St(){return Od.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Hs(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=O[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Rd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Co();return yield ia(m,hs,"1"),yield oa(m,hs),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var D=this;return(0,d.Z)(function*(){return D._withPendingWrite((0,d.Z)(function*(){return yield D._withRetries(O=>ia(O,m,w)),D.localCache[m]=w,D.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const D=yield w._withRetries(O=>function sa(y,f){return Zs.apply(this,arguments)}(O,m));return w.localCache[m]=D,D})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(D=>oa(D,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(K=>{const pe=cr(K,!1).getAll();return new Eo(pe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const D=[],O=new Set;for(const{fbase_key:K,value:pe}of w)O.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(pe)&&(m.notifyListeners(K,pe),D.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!O.has(K)&&(m.notifyListeners(K,null),D.push(K));return D})()}notifyListeners(m,w){this.localCache[m]=w;const D=this.listeners[m];if(D)for(const O of Array.from(D))O(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Xn(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,f))}function Tn(){return(Tn=(0,d.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Do(y){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=D=>{const O=Ce("internal-error");O.customData=D,m(O)},w.type="text/javascript",w.charset="UTF-8",function To(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function ps(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Oi=1e12;class $n{constructor(f){this.auth=f,this.counter=Oi,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new Ki(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||Oi;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Oi))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(f||Oi))||void 0===w||w.execute(),""})()}}class Ki{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;H(D,"argument-error",{appName:m}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Uu(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xl=ps("rcb"),wn=new Xt(3e4,6e4);class Jy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!In().grecaptcha}load(f,m=""){return H(function aa(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(In().grecaptcha):new Promise((w,D)=>{const O=In().setTimeout(()=>{D(Ce(f,"network-request-failed"))},wn.get());In()[Xl]=()=>{In().clearTimeout(O),delete In()[Xl];const pe=In().grecaptcha;if(!pe)return void D(Ce(f,"internal-error"));const Ve=pe.render;pe.render=(Xe,pt)=>{const ft=Ve(Xe,pt);return this.counter++,ft},this.hostLanguage=m,w(pe)},Do(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Xl,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),D(Ce(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!In().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qr{load(f){return(0,d.Z)(function*(){return new $n(f)})()}clearedOneInstance(){}}const Nd="recaptcha",Ks={theme:"light",type:"image"};class ec{constructor(f,m=Object.assign({},Ks),w){this.parameters=m,this.type=Nd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(w),this.isInvisible="invisible"===this.parameters.size,H("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;H(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qr:new Jy,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(O=>{const K=pe=>{!pe||(f.tokenChangeListeners.delete(K),O(pe))};f.tokenChangeListeners.add(K),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=In()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){H(dt()&&!Zi(),f.auth,"internal-error"),yield function gs(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Ws(y){return Tn.apply(this,arguments)}(f.auth);H(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tc{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=zo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function za(){return(za=(0,d.Z)(function*(y,f,m){const w=ct(y),D=yield Br(w,f,(0,N.m9)(m));return new tc(D,O=>mn(w,O))})).apply(this,arguments)}function kd(){return(kd=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);yield Yt(!1,w,"phone");const D=yield Br(w.auth,f,(0,N.m9)(m));return new tc(D,O=>lr(w,O))})).apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D=yield Br(w.auth,f,(0,N.m9)(m));return new tc(D,O=>ls(w,O))})).apply(this,arguments)}function Br(y,f,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,d.Z)(function*(y,f,m){var w;const D=yield m.verify();try{let O;if(H("string"==typeof D,y,"argument-error"),H(m.type===Nd,y,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const K=O.session;if("phoneNumber"in O)return H("enroll"===K.type,y,"internal-error"),(yield xd(y,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{H("signin"===K.type,y,"internal-error");const pe=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return H(pe,y,"missing-multi-factor-info"),(yield Xn(y,{mfaPendingCredential:K.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield Tg(y,{phoneNumber:O.phoneNumber,recaptchaToken:D});return K}}finally{m._reset()}})).apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(y,f){yield Va((0,N.m9)(y),f)})).apply(this,arguments)}let Ys=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=ct(m)}verifyPhoneNumber(m,w){return Br(this.auth,m,(0,N.m9)(w))}static credential(m,w){return zo._fromVerification(m,w)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:D}=m;return w&&D?zo._fromTokenResponse(w,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ys(y,f){return f?te(f):(H(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class la extends Mi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Vs(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Vs(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Vs(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function kt(y){return ur(y.auth,new la(y),y.bypassAuthState)}function Fd(y){const{auth:f,user:m}=y;return H(m,f,"internal-error"),Du(m,new la(y),y.bypassAuthState)}function ca(y){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(y){const{auth:f,user:m}=y;return H(m,f,"internal-error"),Va(m,new la(y),y.bypassAuthState)})).apply(this,arguments)}class Wa{constructor(f,m,w,D,O=!1){this.auth=f,this.resolver=w,this.user=D,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(w,D){f.pendingPromise={resolve:w,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(w,D){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:O,tenantId:K,error:pe,type:Ve}=f;if(pe)return void m.reject(pe);const Xe={auth:m.auth,requestUri:w,sessionId:D,tenantId:K||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ve)(Xe))}catch(pt){m.reject(pt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return kt;case"linkViaPopup":case"linkViaRedirect":return ca;case"reauthViaPopup":case"reauthViaRedirect":return Fd;default:Ae(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const da=new Xt(2e3,1e4);function _s(){return(_s=(0,d.Z)(function*(y,f,m){const w=ct(y);je(y,f,Tr);const D=ys(w,m);return new Vd(w,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);je(w.auth,f,Tr);const D=ys(w.auth,m);return new Vd(w.auth,"reauthViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);je(w.auth,f,Tr);const D=ys(w.auth,m);return new Vd(w.auth,"linkViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}let Vd=(()=>{class y extends Wa{constructor(m,w,D,O,K){super(m,w,O,K),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return H(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){Y(1===m.filter.length,"Popup operations only handle one event");const w=na();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(D=>{m.reject(D)}),m.resolver._isIframeWebStorageSupported(m.auth,D=>{D||m.reject(Ce(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,da.get())};m()}}return y.currentPopupAction=null,y})();const hr=new Map;class nc extends Wa{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=hr.get(m.auth._key());if(!w){try{const O=(yield function Cf(y,f){return Qs.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(O)}catch(D){w=()=>Promise.reject(D)}hr.set(m.auth._key(),w)}return m.bypassAuthState||hr.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const D=yield w.auth._redirectUserForId(f.eventId);if(D)return w.user=D,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Qs(){return(Qs=(0,d.Z)(function*(y,f){const m=L(f),w=P(y);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(m));return yield w._remove(m),D})).apply(this,arguments)}function ha(y,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,d.Z)(function*(y,f){return P(y)._set(L(f),"true")})).apply(this,arguments)}function T(y,f){hr.set(y._key(),f)}function P(y){return te(y._redirectPersistence)}function L(y){return Vn("pendingRedirect",y.config.apiKey,y.name)}function me(){return(me=(0,d.Z)(function*(y,f,m){const w=ct(y);je(y,f,Tr);const D=ys(w,m);return yield ha(D,w),D._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function ht(){return(ht=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);je(w.auth,f,Tr);const D=ys(w.auth,m);yield ha(D,w.auth);const O=yield Mr(w);return D._openRedirect(w.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);je(w.auth,f,Tr);const D=ys(w.auth,m);yield Yt(!1,w,f.providerId),yield ha(D,w.auth);const O=yield Mr(w);return D._openRedirect(w.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(y,f){return yield ct(y)._initializationPromise,Qi(y,f,!1)})).apply(this,arguments)}function Qi(y,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(y,f,m=!1){const w=ct(y),D=ys(w,f),K=yield new nc(w,D,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield w._persistUserIfCurrent(K.user),yield w._setRedirectUser(null,f)),K})).apply(this,arguments)}function Mr(y){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(y){const f=na(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class rc{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Bd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ic(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!ic(f)){const D=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Ce(this.auth,D))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ud(f))}saveEventToCache(f){this.cachedEventUids.add(Ud(f)),this.lastProcessedEventTime=Date.now()}}function Ud(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function ic({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function If(y){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,d.Z)(function*(y,f={}){return Lt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const jd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$u=/^https?/;function Df(){return(Df=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield If(y);for(const m of f)try{if(q0(m))return}catch(w){}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function q0(y){const f=ke(),{protocol:m,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const K=new URL(y);return""===K.hostname&&""===w?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===w}if(!$u.test(m))return!1;if(jd.test(y))return w===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const kg=new Xt(3e4,6e4);function Af(){const y=In().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Hu=null;function Ao(y){return Hu=Hu||function Fg(y){return new Promise((f,m)=>{var w,D,O;function K(){Af(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Af(),m(Ce(y,"network-request-failed"))},timeout:kg.get()})}if(null===(D=null===(w=In().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(O=In().gapi)||void 0===O?void 0:O.load)){const pe=ps("iframefcb");return In()[pe]=()=>{gapi.load?K():m(Ce(y,"network-request-failed"))},Do(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Ve=>m(Ve))}K()}}).catch(f=>{throw Hu=null,f})}(y),Hu}const Gu=new Xt(5e3,15e3),qu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lg(y){const f=y.config;H(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?En(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},D=zu.get(y.config.apiHost);D&&(w.eid=D);const O=y._getFrameworks();return O.length&&(w.fw=O.join(",")),`${m}?${(0,N.xO)(w).slice(1)}`}function So(){return So=(0,d.Z)(function*(y){const f=yield Ao(y),m=In().gapi;return H(m,y,"internal-error"),f.open({where:document.body,url:Lg(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qu,dontclear:!0},w=>new Promise(function(){var D=(0,d.Z)(function*(O,K){yield w.restyle({setHideOnLeave:!1});const pe=Ce(y,"network-request-failed"),Ve=In().setTimeout(()=>{K(pe)},Gu.get());function Xe(){In().clearTimeout(Ve),O(w)}w.ping(Xe).then(Xe,()=>{K(pe)})});return function(O,K){return D.apply(this,arguments)}}()))}),So.apply(this,arguments)}const Hd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vg{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ki(y,f,m,w,D,O){H(y.config.authDomain,y,"auth-domain-config-required"),H(y.config.apiKey,y,"invalid-api-key");const K={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:w,v:se.SDK_VERSION,eventId:D};if(f instanceof Tr){f.setDefaultLanguage(y.languageCode),K.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(K.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ve,Xe]of Object.entries(O||{}))K[Ve]=Xe}if(f instanceof co){const Ve=f.getScopes().filter(Xe=>""!==Xe);Ve.length>0&&(K.scopes=Ve.join(","))}y.tenantId&&(K.tid=y.tenantId);const pe=K;for(const Ve of Object.keys(pe))void 0===pe[Ve]&&delete pe[Ve];return`${function Mo({config:y}){return y.emulator?En(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(pe).slice(1)}`}const uc="webStorageSupport";class Zd extends class Z0{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Zd(f)}_finalizeEnroll(f,m,w){return function Pg(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Jl(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let W0=(()=>{class y{constructor(){}static assertion(m){return Zd._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Mf="@firebase/auth";class jg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var D;f((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ya(){return window}function Ji(){return(Ji=(0,d.Z)(function*(y,f,m){var w;const{BuildInfo:D}=Ya();Y(f.sessionId,"AuthEvent did not contain a session ID");const O=yield K0(f.sessionId),K={};return zr()?K.ibi=D.packageName:Fr()?K.apn=D.packageName:Ae(y,"operation-not-supported-in-this-environment"),D.displayName&&(K.appDisplayName=D.displayName),K.sessionId=O,ki(y,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,K)})).apply(this,arguments)}function Kd(){return(Kd=(0,d.Z)(function*(y){const{BuildInfo:f}=Ya(),m={};zr()?m.iosBundleId=f.packageName:Fr()?m.androidPackageName=f.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield If(y,m)})).apply(this,arguments)}function $g(){return($g=(0,d.Z)(function*(y,f,m){const{cordova:w}=Ya();let D=()=>{};try{yield new Promise((O,K)=>{let pe=null;function Ve(){var ft;O();const Dn=null===(ft=w.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof Dn&&Dn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Xe(){pe||(pe=window.setTimeout(()=>{K(Ce(y,"redirect-cancelled-by-user"))},2e3))}function pt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}f.addPassiveListener(Ve),document.addEventListener("resume",Xe,!1),Fr()&&document.addEventListener("visibilitychange",pt,!1),D=()=>{f.removePassiveListener(Ve),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",pt,!1),pe&&window.clearTimeout(pe)}})}finally{D()}})).apply(this,arguments)}function K0(y){return dc.apply(this,arguments)}function dc(){return(dc=(0,d.Z)(function*(y){const f=Pf(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pf(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let w=0;w<y.length;w++)m[w]=y.charCodeAt(w);return m}!function r_(y){(0,se._registerComponent)(new oe.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),{apiKey:O,authDomain:K}=w.options;return((pe,Ve)=>{H(O&&!O.includes(":"),"invalid-api-key",{appName:pe.name}),H(!(null==K?void 0:K.includes(":")),"argument-error",{appName:pe.name});const Xe={apiKey:O,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qo(y)},pt=new Ze(pe,Ve,Xe);return function ue(y,f){const m=(null==f?void 0:f.persistence)||[],w=(Array.isArray(m)?m:[m]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(pt,m),pt})(w,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new oe.wA("auth-internal",f=>{const m=ct(f.getProvider("auth").getImmediate());return new jg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(Mf,"0.20.2",function Wd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(Mf,"0.20.2","esm2017")}("Browser");class Qd extends rc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function Qa(y){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,d.Z)(function*(y){const f=yield hc()._get(Ku(y));return f&&(yield hc()._remove(Ku(y))),f})).apply(this,arguments)}function Gg(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function hc(){return te(Ur)}function Ku(y){return Vn("authEvent",y.config.apiKey,y.name)}function Jr(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...m]=y.split("?");return(0,N.zd)(m.join("?"))}function Ja(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function fa(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Wg(y=(0,N.z$)()){return!("file:"!==fa()&&"ionic:"!==fa()&&"capacitor:"!==fa()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nf(){try{const y=self.localStorage,f=na();if(y)return y.setItem(f,"1"),y.removeItem(f),!function eh(y=(0,N.z$)()){return function Yu(){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)}()||function tr(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch(y){return th()&&(0,N.hl)()}return!1}function th(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function fr(){return(function Zg(){return"http:"===fa()||"https:"===fa()}()||(0,N.ru)()||Wg())&&!function Rf(){return(0,N.b$)()||(0,N.UG)()}()&&Nf()&&!th()}function Qu(){return Wg()&&"undefined"!=typeof document}function pc(){return(pc=(0,d.Z)(function*(){return!!Qu()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Xr={LOCAL:"local",NONE:"none",SESSION:"session"},pa=H,Ff="persistence";function Xa(y){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,d.Z)(function*(y){yield y._initializationPromise;const f=nh(),m=Vn(Ff,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function nh(){var y;try{return(null===(y=function c_(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const h_=H;class Xi{constructor(){this.browserResolver=te(class n_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=On,this._completeRedirectFn=Qi,this._overrideRedirectResult=T}_openPopup(f,m,w,D){var O=this;return(0,d.Z)(function*(){var K;Y(null===(K=O.eventManagers[f._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const pe=ki(f,m,w,ke(),D);return function ac(y,f,m,w=500,D=600){const O=Math.max((window.screen.availHeight-D)/2,0).toString(),K=Math.max((window.screen.availWidth-w)/2,0).toString();let pe="";const Ve=Object.assign(Object.assign({},Hd),{width:w.toString(),height:D.toString(),top:O,left:K}),Xe=(0,N.z$)().toLowerCase();m&&(pe=Ra(Xe)?"_blank":m),Oa(Xe)&&(f=f||"http://localhost",Ve.scrollbars="yes");const pt=Object.entries(Ve).reduce((Dn,[wi,Ju])=>`${Dn}${wi}=${Ju},`,"");if(function uo(y=(0,N.z$)()){var f;return zr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Xe)&&"_self"!==pe)return function Xy(y,f){const m=document.createElement("a");m.href=y,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",pe),new Vg(null);const ft=window.open(f||"",pe,pt);H(ft,y,"popup-blocked");try{ft.focus()}catch(Dn){}return new Vg(ft)}(f,pe,na())})()}_openRedirect(f,m,w,D){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(f),function Gs(y){In().location.href=y}(ki(f,m,w,ke(),D)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:D,promise:O}=this.eventManagers[m];return D?Promise.resolve(D):(Y(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const w=yield function z0(y){return So.apply(this,arguments)}(f),D=new rc(f);return w.register("authEvent",O=>(H(null==O?void 0:O.authEvent,f,"invalid-auth-event"),{status:D.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:D},m.iframes[f._key()]=w,D})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(uc,{type:uc},D=>{var O;const K=null===(O=null==D?void 0:D[0])||void 0===O?void 0:O[uc];void 0!==K&&m(!!K),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function sc(y){return Df.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ns()||Eu()||zr()}}),this.cordovaResolver=te(class qg{constructor(){this._redirectPersistence=On,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qi,this._overrideRedirectResult=T}_initialize(f){var m=this;return(0,d.Z)(function*(){const w=f._key();let D=m.eventManagers.get(w);return D||(D=new Qd(f),m.eventManagers.set(w,D),m.attachCallbackListeners(f,D)),D})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,D){var O=this;return(0,d.Z)(function*(){!function Zu(y){var f,m,w,D,O,K,pe,Ve,Xe,pt;const ft=Ya();H("function"==typeof(null===(f=null==ft?void 0:ft.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(void 0!==(null===(m=null==ft?void 0:ft.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(O=null===(D=null===(w=null==ft?void 0:ft.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Ve=null===(pe=null===(K=null==ft?void 0:ft.cordova)||void 0===K?void 0:K.plugins)||void 0===pe?void 0:pe.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(pt=null===(Xe=null==ft?void 0:ft.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===pt?void 0:pt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const K=yield O._initialize(f);yield K.initialized(),K.resetRedirect(),function I(){hr.clear()}(),yield O._originValidation(f);const pe=function Jd(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Gg(),postBody:null,tenantId:y.tenantId,error:Ce(y,"no-auth-event")}}(f,w,D);yield function Hg(y,f){return hc()._set(Ku(y),f)}(f,pe);const Ve=yield function xf(y,f,m){return Ji.apply(this,arguments)}(f,pe,m),Xe=yield function Yd(y){const{cordova:f}=Ya();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let D=null;w?f.plugins.browsertab.openUrl(y):D=f.InAppBrowser.open(y,function dd(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(D)})})}(Ve);return function xo(y,f,m){return $g.apply(this,arguments)}(f,K,Xe)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function cc(y){return Kd.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:D,BuildInfo:O}=Ya(),K=setTimeout((0,d.Z)(function*(){yield Qa(f),m.onEvent(Ja())}),500),pe=function(){var pt=(0,d.Z)(function*(ft){clearTimeout(K);const Dn=yield Qa(f);let wi=null;Dn&&(null==ft?void 0:ft.url)&&(wi=function s_(y,f){var m,w;const D=function fc(y){const f=Jr(y),m=f.link?decodeURIComponent(f.link):void 0,w=Jr(m).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Jr(D).link||D||w||m||y}(f);if(D.includes("/__/auth/callback")){const O=Jr(D),K=O.firebaseError?function o_(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(O.firebaseError)):null,pe=null===(w=null===(m=null==K?void 0:K.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Ve=pe?Ce(pe):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(Dn,ft.url)),m.onEvent(wi||Ja())});return function(Dn){return pt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,pe);const Ve=D,Xe=`${O.packageName.toLowerCase()}://`;Ya().handleOpenURL=function(){var pt=(0,d.Z)(function*(ft){if(ft.toLowerCase().startsWith(Xe)&&pe({url:ft}),"function"==typeof Ve)try{Ve(ft)}catch(Dn){console.error(Dn)}});return function(ft){return pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=On,this._completeRedirectFn=Qi,this._overrideRedirectResult=T}_initialize(f){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,D){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,m,w,D)})()}_openRedirect(f,m,w,D){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,m,w,D)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Qu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return h_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const m=yield function kf(){return pc.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function rh(y){return y.unwrap()}function p_(y){return Kg(y)}function Kg(y){const{_tokenResponse:f}=y instanceof N.ZR?y.customData:y;if(!f)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ys.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=wd;break;case"facebook.com":w=Zo;break;case"github.com":w=yf;break;case"twitter.com":w=bd;break;default:const{oauthIdToken:D,oauthAccessToken:O,oauthTokenSecret:K,pendingToken:pe,nonce:Ve}=f;return O||K||D||pe?pe?m.startsWith("saml.")?ho._create(m,pe):us._fromParams({providerId:m,signInMethod:m,pendingToken:pe,idToken:D,accessToken:O}):new Hi(m).credential({idToken:D,accessToken:O,rawNonce:Ve}):null}return y instanceof N.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function vi(y,f){return f.catch(m=>{throw m instanceof N.ZR&&function ih(y,f){var m;const w=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new g_(y,function jn(y,f){var m;const w=(0,N.m9)(y),D=f;return H(f.customData.operationType,w,"argument-error"),H(null===(m=D.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),vo._fromError(w,D)}(y,f));else if(w){const D=Kg(f),O=f;D&&(O.credential=D,O.tenantId=w.tenantId||void 0,O.email=w.email||void 0,O.phoneNumber=w.phoneNumber||void 0)}}(y,m),m}).then(m=>{const D=m.user;return{operationType:m.operationType,credential:p_(m),additionalUserInfo:Qn(m),user:Es.getOrCreate(D)}})}function Vf(y,f){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,d.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>vi(y,m.confirm(w))}})).apply(this,arguments)}class g_{constructor(f,m){this.resolver=m,this.auth=function f_(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return vi(rh(this.auth),this.resolver.resolveSignIn(f))}}class Es{constructor(f){this._delegate=f,this.multiFactor=function Og(y){const f=(0,N.m9)(y);return Lu.has(f)||Lu.set(f,ta._fromUser(f)),Lu.get(f)}(f)}static getOrCreate(f){return Es.USER_MAP.has(f)||Es.USER_MAP.set(f,new Es(f)),Es.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,d.Z)(function*(){return vi(m.auth,lr(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,d.Z)(function*(){return Vf(w.auth,function Bu(y,f,m){return kd.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,d.Z)(function*(){return vi(m.auth,function Ld(y,f,m){return Yi.apply(this,arguments)}(m._delegate,f,Xi))})()}linkWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield Xa(ct(m.auth)),function Gt(y,f,m){return function Dt(y,f,m){return Nn.apply(this,arguments)}(y,f,m)}(m._delegate,f,Xi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,d.Z)(function*(){return vi(m.auth,ls(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Vf(this.auth,function bf(y,f,m){return Ar.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return vi(this.auth,function Ri(y,f,m){return ju.apply(this,arguments)}(this._delegate,f,Xi))}reauthenticateWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield Xa(ct(m.auth)),function Qe(y,f,m){return function it(y,f,m){return ht.apply(this,arguments)}(y,f,m)}(m._delegate,f,Xi)})()}sendEmailVerification(f){return function Pi(y,f){return zl.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,d.Z)(function*(){return yield function _f(y,f){return sn.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Td(y,f){return ku((0,N.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Dd(y,f){return ku((0,N.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ua(y,f){return ms.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Ru(y,f){return Nu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Pu(y,f,m){return Ou.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Es.USER_MAP=new WeakMap;const mc=H;let Yg=(()=>{class y{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=m.options;mc(D,"invalid-api-key",{appName:m.name}),mc(D,"invalid-api-key",{appName:m.name});const O="undefined"!=typeof window?Xi:void 0;this._delegate=w.initialize({options:{persistence:m_(D,m.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Es.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Wr(y,f,m){const w=ct(y);H(w._canInitEmulator,w,"emulator-config-failed"),H(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const D=!!(null==m?void 0:m.disableWarnings),O=Vi(f),{host:K,port:pe}=function Mn(y){const f=Vi(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const O=D[1];return{host:O,port:Ui(w.substr(O.length+1))}}{const[O,K]=w.split(":");return{host:O,port:Ui(K)}}}(f);w.config.emulator={url:`${O}//${K}${null===pe?"":`:${pe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:K,port:pe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function dn(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,w)}applyActionCode(m){return function Jo(y,f){return Me.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Vt(this._delegate,m)}confirmPasswordReset(m,w){return function Su(y,f,m){return $l.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var D=this;return(0,d.Z)(function*(){return vi(D._delegate,function mo(y,f,m){return mi.apply(this,arguments)}(D._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function xu(y,f){return $s.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Id(y,f){const m=Tu.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){mc(fr(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function er(y,f){return vs.apply(this,arguments)}(m._delegate,Xi);return w?vi(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function zg(y,f){ct(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,D){const{next:O,error:K,complete:pe}=Qg(m,w,D);return this._delegate.onAuthStateChanged(O,K,pe)}onIdTokenChanged(m,w,D){const{next:O,error:K,complete:pe}=Qg(m,w,D);return this._delegate.onIdTokenChanged(O,K,pe)}sendSignInLinkToEmail(m,w){return function Gl(y,f,m){return ql.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function jl(y,f,m){return Au.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,d.Z)(function*(){let D;switch(function d_(y,f){pa(Object.values(Xr).includes(f),y,"invalid-persistence-type"),(0,N.b$)()?pa(f!==Xr.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?pa(f===Xr.NONE,y,"unsupported-persistence-type"):th()?pa(f===Xr.NONE||f===Xr.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):pa(f===Xr.NONE||Nf(),y,"unsupported-persistence-type")}(w._delegate,m),m){case Xr.SESSION:D=On;break;case Xr.LOCAL:D=(yield te(Io)._isAvailable())?Io:Ur;break;case Xr.NONE:D=Et;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return vi(this._delegate,function Cd(y){return Ll.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return vi(this._delegate,mn(this._delegate,m))}signInWithCustomToken(m){return vi(this._delegate,function Qo(y,f){return _t.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return vi(this._delegate,function Hl(y,f,m){return mn((0,N.m9)(y),vd.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return vi(this._delegate,function Mg(y,f,m){return cs.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Vf(this._delegate,function Rn(y,f,m){return za.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,d.Z)(function*(){return mc(fr(),w._delegate,"operation-not-supported-in-this-environment"),vi(w._delegate,function Ng(y,f,m){return _s.apply(this,arguments)}(w._delegate,m,Xi))})()}signInWithRedirect(m){var w=this;return(0,d.Z)(function*(){return mc(fr(),w._delegate,"operation-not-supported-in-this-environment"),yield Xa(w._delegate),function Q(y,f,m){return function re(y,f,m){return me.apply(this,arguments)}(y,f,m)}(w._delegate,m,Xi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function pn(y,f){return Mu.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Xr,y})();function Qg(y,f,m){let w=y;"function"!=typeof y&&({next:w,error:f,complete:m}=y);const D=w;return{next:K=>D(K&&Es.getOrCreate(K)),error:f,complete:m}}function m_(y,f){const m=function gc(y,f){const m=nh();if(!m)return[];const w=Vn(Ff,y,f);switch(m.getItem(w)){case Xr.NONE:return[Et];case Xr.LOCAL:return[Io,On];case Xr.SESSION:return[On];default:return[]}}(y,f);if("undefined"!=typeof self&&!m.includes(Io)&&m.push(Io),"undefined"!=typeof window)for(const w of[Ur,On])m.includes(w)||m.push(w);return m.includes(Et)||m.push(Et),m}class Bf{constructor(){this.providerId="phone",this._delegate=new Ys(rh(Z.Z.auth()))}static credential(f,m){return Ys.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Bf.PHONE_SIGN_IN_METHOD=Ys.PHONE_SIGN_IN_METHOD,Bf.PROVIDER_ID=Ys.PROVIDER_ID;const Jg=H;class Y0{constructor(f,m,w=Z.Z.app()){var D;Jg(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ec(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function eu(y){y.INTERNAL.registerComponent(new oe.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Yg(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:vd,FacebookAuthProvider:Zo,GithubAuthProvider:yf,GoogleAuthProvider:wd,OAuthProvider:Hi,SAMLAuthProvider:Lr,PhoneAuthProvider:Bf,PhoneMultiFactorGenerator:W0,RecaptchaVerifier:Y0,TwitterAuthProvider:bd,Auth:Yg,AuthCredential:Mi,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(Z.Z)},3098:(Ye,we)=>{"use strict";var d=function(){function Z(N){if(!N)throw new TypeError("Invalid argument; `value` has no value.");this.value=Z.EMPTY,N&&Z.isGuid(N)&&(this.value=N)}return Z.isGuid=function(N){var se=N.toString();return N&&(N instanceof Z||Z.validator.test(se))},Z.create=function(){return new Z([Z.gen(2),Z.gen(1),Z.gen(1),Z.gen(1),Z.gen(3)].join("-"))},Z.createEmpty=function(){return new Z("emptyguid")},Z.parse=function(N){return new Z(N)},Z.raw=function(){return[Z.gen(2),Z.gen(1),Z.gen(1),Z.gen(1),Z.gen(3)].join("-")},Z.gen=function(N){for(var se="",ne=0;ne<N;ne++)se+=(65536*(1+Math.random())|0).toString(16).substring(1);return se},Z.prototype.equals=function(N){return Z.isGuid(N)&&this.value===N.toString()},Z.prototype.isEmpty=function(){return this.value===Z.EMPTY},Z.prototype.toString=function(){return this.value},Z.prototype.toJSON=function(){return{value:this.value}},Z.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),Z.EMPTY="00000000-0000-0000-0000-000000000000",Z}();we.i=d},8306:(Ye,we,R)=>{"use strict";R.d(we,{y:()=>U});var d=R(2961),Z=R(727),N=R(8822),se=R(4671);var oe=R(2416),ae=R(576),le=R(2806);let U=(()=>{class be{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const de=new be;return de.source=this,de.operator=Ue,de}subscribe(Ue,de,Ie){const $e=function Re(be){return be&&be instanceof d.Lv||function X(be){return be&&(0,ae.m)(be.next)&&(0,ae.m)(be.error)&&(0,ae.m)(be.complete)}(be)&&(0,Z.Nn)(be)}(Ue)?Ue:new d.Hp(Ue,de,Ie);return(0,le.x)(()=>{const{operator:qe,source:Ae}=this;$e.add(qe?qe.call($e,Ae):Ae?this._subscribe($e):this._trySubscribe($e))}),$e}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(de){Ue.error(de)}}forEach(Ue,de){return new(de=V(de))((Ie,$e)=>{const qe=new d.Hp({next:Ae=>{try{Ue(Ae)}catch(Ce){$e(Ce),qe.unsubscribe()}},error:$e,complete:Ie});this.subscribe(qe)})}_subscribe(Ue){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Ue)}[N.L](){return this}pipe(...Ue){return function he(be){return 0===be.length?se.y:1===be.length?be[0]:function(Ue){return be.reduce((de,Ie)=>Ie(de),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=V(Ue))((de,Ie)=>{let $e;this.subscribe(qe=>$e=qe,qe=>Ie(qe),()=>de($e))})}}return be.create=Ne=>new be(Ne),be})();function V(be){var Ne;return null!==(Ne=null!=be?be:oe.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(Ye,we,R)=>{"use strict";R.d(we,{x:()=>oe});var d=R(8306),Z=R(727);const se=(0,R(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=R(8737),he=R(2806);let oe=(()=>{class le extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(V){const X=new ae(this,this);return X.operator=V,X}_throwIfClosed(){if(this.closed)throw new se}next(V){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(V)}})}error(V){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=V;const{observers:X}=this;for(;X.length;)X.shift().error(V)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:V}=this;for(;V.length;)V.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var V;return(null===(V=this.observers)||void 0===V?void 0:V.length)>0}_trySubscribe(V){return this._throwIfClosed(),super._trySubscribe(V)}_subscribe(V){return this._throwIfClosed(),this._checkFinalizedStatuses(V),this._innerSubscribe(V)}_innerSubscribe(V){const{hasError:X,isStopped:Re,observers:be}=this;return X||Re?Z.Lc:(this.currentObservers=null,be.push(V),new Z.w0(()=>{this.currentObservers=null,(0,ne.P)(be,V)}))}_checkFinalizedStatuses(V){const{hasError:X,thrownError:Re,isStopped:be}=this;X?V.error(Re):be&&V.complete()}asObservable(){const V=new d.y;return V.source=this,V}}return le.create=(U,V)=>new ae(U,V),le})();class ae extends oe{constructor(U,V){super(),this.destination=U,this.source=V}next(U){var V,X;null===(X=null===(V=this.destination)||void 0===V?void 0:V.next)||void 0===X||X.call(V,U)}error(U){var V,X;null===(X=null===(V=this.destination)||void 0===V?void 0:V.error)||void 0===X||X.call(V,U)}complete(){var U,V;null===(V=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===V||V.call(U)}_subscribe(U){var V,X;return null!==(X=null===(V=this.source)||void 0===V?void 0:V.subscribe(U))&&void 0!==X?X:Z.Lc}}},2961:(Ye,we,R)=>{"use strict";R.d(we,{Hp:()=>Ue,Lv:()=>X});var d=R(576),Z=R(727),N=R(2416),se=R(7849);function ne(){}const he=le("C",void 0,void 0);function le(Ae,Ce,Te){return{kind:Ae,value:Ce,error:Te}}var U=R(3410),V=R(2806);class X extends Z.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,Z.Nn)(Ce)&&Ce.add(this)):this.destination=qe}static create(Ce,Te,je){return new Ue(Ce,Te,je)}next(Ce){this.isStopped?$e(function ae(Ae){return le("N",Ae,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?$e(function oe(Ae){return le("E",void 0,Ae)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?$e(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Re=Function.prototype.bind;function be(Ae,Ce){return Re.call(Ae,Ce)}class Ne{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ce)}catch(je){de(je)}}error(Ce){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ce)}catch(je){de(je)}else de(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Te){de(Te)}}}class Ue extends X{constructor(Ce,Te,je){let Be;if(super(),(0,d.m)(Ce)||!Ce)Be={next:null!=Ce?Ce:void 0,error:null!=Te?Te:void 0,complete:null!=je?je:void 0};else{let H;this&&N.v.useDeprecatedNextContext?(H=Object.create(Ce),H.unsubscribe=()=>this.unsubscribe(),Be={next:Ce.next&&be(Ce.next,H),error:Ce.error&&be(Ce.error,H),complete:Ce.complete&&be(Ce.complete,H)}):Be=Ce}this.destination=new Ne(Be)}}function de(Ae){N.v.useDeprecatedSynchronousErrorHandling?(0,V.O)(Ae):(0,se.h)(Ae)}function $e(Ae,Ce){const{onStoppedNotification:Te}=N.v;Te&&U.z.setTimeout(()=>Te(Ae,Ce))}const qe={closed:!0,next:ne,error:function Ie(Ae){throw Ae},complete:ne}},727:(Ye,we,R)=>{"use strict";R.d(we,{Lc:()=>he,w0:()=>ne,Nn:()=>oe});var d=R(576);const N=(0,R(3888).d)(le=>function(V){le(this),this.message=V?`${V.length} errors occurred during unsubscription:\n${V.map((X,Re)=>`${Re+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=V});var se=R(8737);class ne{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:V}=this;if(V)if(this._parentage=null,Array.isArray(V))for(const be of V)be.remove(this);else V.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(be){U=be instanceof N?be.errors:[be]}const{_finalizers:Re}=this;if(Re){this._finalizers=null;for(const be of Re)try{ae(be)}catch(Ne){U=null!=U?U:[],Ne instanceof N?U=[...U,...Ne.errors]:U.push(Ne)}}if(U)throw new N(U)}}add(U){var V;if(U&&U!==this)if(this.closed)ae(U);else{if(U instanceof ne){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(V=this._finalizers)&&void 0!==V?V:[]).push(U)}}_hasParent(U){const{_parentage:V}=this;return V===U||Array.isArray(V)&&V.includes(U)}_addParent(U){const{_parentage:V}=this;this._parentage=Array.isArray(V)?(V.push(U),V):V?[V,U]:U}_removeParent(U){const{_parentage:V}=this;V===U?this._parentage=null:Array.isArray(V)&&(0,se.P)(V,U)}remove(U){const{_finalizers:V}=this;V&&(0,se.P)(V,U),U instanceof ne&&U._removeParent(this)}}ne.EMPTY=(()=>{const le=new ne;return le.closed=!0,le})();const he=ne.EMPTY;function oe(le){return le instanceof ne||le&&"closed"in le&&(0,d.m)(le.remove)&&(0,d.m)(le.add)&&(0,d.m)(le.unsubscribe)}function ae(le){(0,d.m)(le)?le():le.unsubscribe()}},2416:(Ye,we,R)=>{"use strict";R.d(we,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ye,we,R)=>{"use strict";R.d(we,{E:()=>Z});const Z=new(R(8306).y)(ne=>ne.complete())},8996:(Ye,we,R)=>{"use strict";R.d(we,{D:()=>Ce});var d=R(8421),Z=R(5363),N=R(9468),he=R(8306),ae=R(2202),le=R(576),U=R(9672);function X(Te,je){if(!Te)throw new Error("Iterable cannot be null");return new he.y(Be=>{(0,U.f)(Be,je,()=>{const H=Te[Symbol.asyncIterator]();(0,U.f)(Be,je,()=>{H.next().then(Ee=>{Ee.done?Be.complete():Be.next(Ee.value)})},0,!0)})})}var Re=R(3670),be=R(8239),Ne=R(1144),Ue=R(6495),de=R(2206),Ie=R(4532),$e=R(3260);function Ce(Te,je){return je?function Ae(Te,je){if(null!=Te){if((0,Re.c)(Te))return function se(Te,je){return(0,d.Xf)(Te).pipe((0,N.R)(je),(0,Z.Q)(je))}(Te,je);if((0,Ne.z)(Te))return function oe(Te,je){return new he.y(Be=>{let H=0;return je.schedule(function(){H===Te.length?Be.complete():(Be.next(Te[H++]),Be.closed||this.schedule())})})}(Te,je);if((0,be.t)(Te))return function ne(Te,je){return(0,d.Xf)(Te).pipe((0,N.R)(je),(0,Z.Q)(je))}(Te,je);if((0,de.D)(Te))return X(Te,je);if((0,Ue.T)(Te))return function V(Te,je){return new he.y(Be=>{let H;return(0,U.f)(Be,je,()=>{H=Te[ae.h](),(0,U.f)(Be,je,()=>{let Ee,Y;try{({value:Ee,done:Y}=H.next())}catch(ie){return void Be.error(ie)}Y?Be.complete():Be.next(Ee)},0,!0)}),()=>(0,le.m)(null==H?void 0:H.return)&&H.return()})}(Te,je);if((0,$e.L)(Te))return function qe(Te,je){return X((0,$e.Q)(Te),je)}(Te,je)}throw(0,Ie.z)(Te)}(Te,je):(0,d.Xf)(Te)}},8421:(Ye,we,R)=>{"use strict";R.d(we,{Xf:()=>Re});var d=R(655),Z=R(1144),N=R(8239),se=R(8306),ne=R(3670),he=R(2206),oe=R(4532),ae=R(6495),le=R(3260),U=R(576),V=R(7849),X=R(8822);function Re(Ae){if(Ae instanceof se.y)return Ae;if(null!=Ae){if((0,ne.c)(Ae))return function be(Ae){return new se.y(Ce=>{const Te=Ae[X.L]();if((0,U.m)(Te.subscribe))return Te.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,Z.z)(Ae))return function Ne(Ae){return new se.y(Ce=>{for(let Te=0;Te<Ae.length&&!Ce.closed;Te++)Ce.next(Ae[Te]);Ce.complete()})}(Ae);if((0,N.t)(Ae))return function Ue(Ae){return new se.y(Ce=>{Ae.then(Te=>{Ce.closed||(Ce.next(Te),Ce.complete())},Te=>Ce.error(Te)).then(null,V.h)})}(Ae);if((0,he.D)(Ae))return Ie(Ae);if((0,ae.T)(Ae))return function de(Ae){return new se.y(Ce=>{for(const Te of Ae)if(Ce.next(Te),Ce.closed)return;Ce.complete()})}(Ae);if((0,le.L)(Ae))return function $e(Ae){return Ie((0,le.Q)(Ae))}(Ae)}throw(0,oe.z)(Ae)}function Ie(Ae){return new se.y(Ce=>{(function qe(Ae,Ce){var Te,je,Be,H;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Te=(0,d.KL)(Ae);!(je=yield Te.next()).done;)if(Ce.next(je.value),Ce.closed)return}catch(Ee){Be={error:Ee}}finally{try{je&&!je.done&&(H=Te.return)&&(yield H.call(Te))}finally{if(Be)throw Be.error}}Ce.complete()})})(Ae,Ce).catch(Te=>Ce.error(Te))})}},6451:(Ye,we,R)=>{"use strict";R.d(we,{T:()=>he});var d=R(8189),Z=R(8421),N=R(515),se=R(7669),ne=R(8996);function he(...oe){const ae=(0,se.yG)(oe),le=(0,se._6)(oe,1/0),U=oe;return U.length?1===U.length?(0,Z.Xf)(U[0]):(0,d.J)(le)((0,ne.D)(U,ae)):N.E}},5403:(Ye,we,R)=>{"use strict";R.d(we,{x:()=>Z});var d=R(2961);function Z(se,ne,he,oe,ae){return new N(se,ne,he,oe,ae)}class N extends d.Lv{constructor(ne,he,oe,ae,le,U){super(ne),this.onFinalize=le,this.shouldUnsubscribe=U,this._next=he?function(V){try{he(V)}catch(X){ne.error(X)}}:super._next,this._error=ae?function(V){try{ae(V)}catch(X){ne.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(V){ne.error(V)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Ye,we,R)=>{"use strict";R.d(we,{U:()=>N});var d=R(4482),Z=R(5403);function N(se,ne){return(0,d.e)((he,oe)=>{let ae=0;he.subscribe((0,Z.x)(oe,le=>{oe.next(se.call(ne,le,ae++))}))})}},8189:(Ye,we,R)=>{"use strict";R.d(we,{J:()=>N});var d=R(5577),Z=R(4671);function N(se=1/0){return(0,d.z)(Z.y,se)}},5577:(Ye,we,R)=>{"use strict";R.d(we,{z:()=>ae});var d=R(4004),Z=R(8421),N=R(4482),se=R(9672),ne=R(5403),oe=R(576);function ae(le,U,V=1/0){return(0,oe.m)(U)?ae((X,Re)=>(0,d.U)((be,Ne)=>U(X,be,Re,Ne))((0,Z.Xf)(le(X,Re))),V):("number"==typeof U&&(V=U),(0,N.e)((X,Re)=>function he(le,U,V,X,Re,be,Ne,Ue){const de=[];let Ie=0,$e=0,qe=!1;const Ae=()=>{qe&&!de.length&&!Ie&&U.complete()},Ce=je=>Ie<X?Te(je):de.push(je),Te=je=>{be&&U.next(je),Ie++;let Be=!1;(0,Z.Xf)(V(je,$e++)).subscribe((0,ne.x)(U,H=>{null==Re||Re(H),be?Ce(H):U.next(H)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ie--;de.length&&Ie<X;){const H=de.shift();Ne?(0,se.f)(U,Ne,()=>Te(H)):Te(H)}Ae()}catch(H){U.error(H)}}))};return le.subscribe((0,ne.x)(U,Ce,()=>{qe=!0,Ae()})),()=>{null==Ue||Ue()}}(X,Re,le,V)))}},5363:(Ye,we,R)=>{"use strict";R.d(we,{Q:()=>se});var d=R(9672),Z=R(4482),N=R(5403);function se(ne,he=0){return(0,Z.e)((oe,ae)=>{oe.subscribe((0,N.x)(ae,le=>(0,d.f)(ae,ne,()=>ae.next(le),he),()=>(0,d.f)(ae,ne,()=>ae.complete(),he),le=>(0,d.f)(ae,ne,()=>ae.error(le),he)))})}},3099:(Ye,we,R)=>{"use strict";R.d(we,{B:()=>he});var d=R(8996),Z=R(5698),N=R(7579),se=R(2961),ne=R(4482);function he(ae={}){const{connector:le=(()=>new N.x),resetOnError:U=!0,resetOnComplete:V=!0,resetOnRefCountZero:X=!0}=ae;return Re=>{let be=null,Ne=null,Ue=null,de=0,Ie=!1,$e=!1;const qe=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Ae=()=>{qe(),be=Ue=null,Ie=$e=!1},Ce=()=>{const Te=be;Ae(),null==Te||Te.unsubscribe()};return(0,ne.e)((Te,je)=>{de++,!$e&&!Ie&&qe();const Be=Ue=null!=Ue?Ue:le();je.add(()=>{de--,0===de&&!$e&&!Ie&&(Ne=oe(Ce,X))}),Be.subscribe(je),be||(be=new se.Hp({next:H=>Be.next(H),error:H=>{$e=!0,qe(),Ne=oe(Ae,U,H),Be.error(H)},complete:()=>{Ie=!0,qe(),Ne=oe(Ae,V),Be.complete()}}),(0,d.D)(Te).subscribe(be))})(Re)}}function oe(ae,le,...U){return!0===le?(ae(),null):!1===le?null:le(...U).pipe((0,Z.q)(1)).subscribe(()=>ae())}},9468:(Ye,we,R)=>{"use strict";R.d(we,{R:()=>Z});var d=R(4482);function Z(N,se=0){return(0,d.e)((ne,he)=>{he.add(N.schedule(()=>ne.subscribe(he),se))})}},5698:(Ye,we,R)=>{"use strict";R.d(we,{q:()=>se});var d=R(515),Z=R(4482),N=R(5403);function se(ne){return ne<=0?()=>d.E:(0,Z.e)((he,oe)=>{let ae=0;he.subscribe((0,N.x)(oe,le=>{++ae<=ne&&(oe.next(le),ne<=ae&&oe.complete())}))})}},8505:(Ye,we,R)=>{"use strict";R.d(we,{b:()=>ne});var d=R(576),Z=R(4482),N=R(5403),se=R(4671);function ne(he,oe,ae){const le=(0,d.m)(he)||oe||ae?{next:he,error:oe,complete:ae}:he;return le?(0,Z.e)((U,V)=>{var X;null===(X=le.subscribe)||void 0===X||X.call(le);let Re=!0;U.subscribe((0,N.x)(V,be=>{var Ne;null===(Ne=le.next)||void 0===Ne||Ne.call(le,be),V.next(be)},()=>{var be;Re=!1,null===(be=le.complete)||void 0===be||be.call(le),V.complete()},be=>{var Ne;Re=!1,null===(Ne=le.error)||void 0===Ne||Ne.call(le,be),V.error(be)},()=>{var be,Ne;Re&&(null===(be=le.unsubscribe)||void 0===be||be.call(le)),null===(Ne=le.finalize)||void 0===Ne||Ne.call(le)}))}):se.y}},4408:(Ye,we,R)=>{"use strict";R.d(we,{o:()=>ne});var d=R(727);class Z extends d.w0{constructor(oe,ae){super()}schedule(oe,ae=0){return this}}const N={setInterval(he,oe,...ae){const{delegate:le}=N;return(null==le?void 0:le.setInterval)?le.setInterval(he,oe,...ae):setInterval(he,oe,...ae)},clearInterval(he){const{delegate:oe}=N;return((null==oe?void 0:oe.clearInterval)||clearInterval)(he)},delegate:void 0};var se=R(8737);class ne extends Z{constructor(oe,ae){super(oe,ae),this.scheduler=oe,this.work=ae,this.pending=!1}schedule(oe,ae=0){if(this.closed)return this;this.state=oe;const le=this.id,U=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(U,le,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(U,this.id,ae),this}requestAsyncId(oe,ae,le=0){return N.setInterval(oe.flush.bind(oe,this),le)}recycleAsyncId(oe,ae,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return ae;N.clearInterval(ae)}execute(oe,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(oe,ae);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ae){let U,le=!1;try{this.work(oe)}catch(V){le=!0,U=V||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ae}=this,{actions:le}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(le,this),null!=oe&&(this.id=this.recycleAsyncId(ae,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ye,we,R)=>{"use strict";R.d(we,{v:()=>N});var d=R(6063);class Z{constructor(ne,he=Z.now){this.schedulerActionCtor=ne,this.now=he}schedule(ne,he=0,oe){return new this.schedulerActionCtor(this,ne).schedule(oe,he)}}Z.now=d.l.now;class N extends Z{constructor(ne,he=Z.now){super(ne,he),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:he}=this;if(this._active)return void he.push(ne);let oe;this._active=!0;do{if(oe=ne.execute(ne.state,ne.delay))break}while(ne=he.shift());if(this._active=!1,oe){for(;ne=he.shift();)ne.unsubscribe();throw oe}}}},4986:(Ye,we,R)=>{"use strict";R.d(we,{z:()=>N});var d=R(4408);const N=new(R(7565).v)(d.o)},6063:(Ye,we,R)=>{"use strict";R.d(we,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Ye,we,R)=>{"use strict";R.d(we,{z:()=>d});const d={setTimeout(Z,N,...se){const{delegate:ne}=d;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(Z,N,...se):setTimeout(Z,N,...se)},clearTimeout(Z){const{delegate:N}=d;return((null==N?void 0:N.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(Ye,we,R)=>{"use strict";R.d(we,{h:()=>Z});const Z=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ye,we,R)=>{"use strict";R.d(we,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Ye,we,R)=>{"use strict";R.d(we,{_6:()=>he,jO:()=>se,yG:()=>ne});var d=R(576);function N(oe){return oe[oe.length-1]}function se(oe){return(0,d.m)(N(oe))?oe.pop():void 0}function ne(oe){return function Z(oe){return oe&&(0,d.m)(oe.schedule)}(N(oe))?oe.pop():void 0}function he(oe,ae){return"number"==typeof N(oe)?oe.pop():ae}},8737:(Ye,we,R)=>{"use strict";function d(Z,N){if(Z){const se=Z.indexOf(N);0<=se&&Z.splice(se,1)}}R.d(we,{P:()=>d})},3888:(Ye,we,R)=>{"use strict";function d(Z){const se=Z(ne=>{Error.call(ne),ne.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}R.d(we,{d:()=>d})},2806:(Ye,we,R)=>{"use strict";R.d(we,{O:()=>se,x:()=>N});var d=R(2416);let Z=null;function N(ne){if(d.v.useDeprecatedSynchronousErrorHandling){const he=!Z;if(he&&(Z={errorThrown:!1,error:null}),ne(),he){const{errorThrown:oe,error:ae}=Z;if(Z=null,oe)throw ae}}else ne()}function se(ne){d.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=ne)}},9672:(Ye,we,R)=>{"use strict";function d(Z,N,se,ne=0,he=!1){const oe=N.schedule(function(){se(),he?Z.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Z.add(oe),!he)return oe}R.d(we,{f:()=>d})},4671:(Ye,we,R)=>{"use strict";function d(Z){return Z}R.d(we,{y:()=>d})},1144:(Ye,we,R)=>{"use strict";R.d(we,{z:()=>d});const d=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(Ye,we,R)=>{"use strict";R.d(we,{D:()=>Z});var d=R(576);function Z(N){return Symbol.asyncIterator&&(0,d.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(Ye,we,R)=>{"use strict";function d(Z){return"function"==typeof Z}R.d(we,{m:()=>d})},3670:(Ye,we,R)=>{"use strict";R.d(we,{c:()=>N});var d=R(8822),Z=R(576);function N(se){return(0,Z.m)(se[d.L])}},6495:(Ye,we,R)=>{"use strict";R.d(we,{T:()=>N});var d=R(2202),Z=R(576);function N(se){return(0,Z.m)(null==se?void 0:se[d.h])}},8239:(Ye,we,R)=>{"use strict";R.d(we,{t:()=>Z});var d=R(576);function Z(N){return(0,d.m)(null==N?void 0:N.then)}},3260:(Ye,we,R)=>{"use strict";R.d(we,{L:()=>se,Q:()=>N});var d=R(655),Z=R(576);function N(ne){return(0,d.FC)(this,arguments,function*(){const oe=ne.getReader();try{for(;;){const{value:ae,done:le}=yield(0,d.qq)(oe.read());if(le)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ae)}}finally{oe.releaseLock()}})}function se(ne){return(0,Z.m)(null==ne?void 0:ne.getReader)}},4482:(Ye,we,R)=>{"use strict";R.d(we,{A:()=>Z,e:()=>N});var d=R(576);function Z(se){return(0,d.m)(null==se?void 0:se.lift)}function N(se){return ne=>{if(Z(ne))return ne.lift(function(he){try{return se(he,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Ye,we,R)=>{"use strict";R.d(we,{h:()=>N});var d=R(2416),Z=R(3410);function N(se){Z.z.setTimeout(()=>{const{onUnhandledError:ne}=d.v;if(!ne)throw se;ne(se)})}},4532:(Ye,we,R)=>{"use strict";function d(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(we,{z:()=>d})},655:(Ye,we,R)=>{"use strict";function se(Y,ie){var te={};for(var _e in Y)Object.prototype.hasOwnProperty.call(Y,_e)&&ie.indexOf(_e)<0&&(te[_e]=Y[_e]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(_e=Object.getOwnPropertySymbols(Y);ue<_e.length;ue++)ie.indexOf(_e[ue])<0&&Object.prototype.propertyIsEnumerable.call(Y,_e[ue])&&(te[_e[ue]]=Y[_e[ue]])}return te}function ae(Y,ie,te,_e){return new(te||(te=Promise))(function(ke,dt){function $t(Xt){try{We(_e.next(Xt))}catch(En){dt(En)}}function Ut(Xt){try{We(_e.throw(Xt))}catch(En){dt(En)}}function We(Xt){Xt.done?ke(Xt.value):function ue(ke){return ke instanceof te?ke:new te(function(dt){dt(ke)})}(Xt.value).then($t,Ut)}We((_e=_e.apply(Y,ie||[])).next())})}function de(Y){return this instanceof de?(this.v=Y,this):new de(Y)}function Ie(Y,ie,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,_e=te.apply(Y,ie||[]),ke=[];return ue={},dt("next"),dt("throw"),dt("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function dt(nn){_e[nn]&&(ue[nn]=function(Kt){return new Promise(function(Rr,qt){ke.push([nn,Kt,Rr,qt])>1||$t(nn,Kt)})})}function $t(nn,Kt){try{!function Ut(nn){nn.value instanceof de?Promise.resolve(nn.value.v).then(We,Xt):En(ke[0][2],nn)}(_e[nn](Kt))}catch(Rr){En(ke[0][3],Rr)}}function We(nn){$t("next",nn)}function Xt(nn){$t("throw",nn)}function En(nn,Kt){nn(Kt),ke.shift(),ke.length&&$t(ke[0][0],ke[0][1])}}function qe(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,ie=Y[Symbol.asyncIterator];return ie?ie.call(Y):(Y=function X(Y){var ie="function"==typeof Symbol&&Symbol.iterator,te=ie&&Y[ie],_e=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&_e>=Y.length&&(Y=void 0),{value:Y&&Y[_e++],done:!Y}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),te={},_e("next"),_e("throw"),_e("return"),te[Symbol.asyncIterator]=function(){return this},te);function _e(ke){te[ke]=Y[ke]&&function(dt){return new Promise(function($t,Ut){!function ue(ke,dt,$t,Ut){Promise.resolve(Ut).then(function(We){ke({value:We,done:$t})},dt)}($t,Ut,(dt=Y[ke](dt)).done,dt.value)})}}}R.d(we,{FC:()=>Ie,KL:()=>qe,_T:()=>se,mG:()=>ae,qq:()=>de})},5e3:(Ye,we,R)=>{"use strict";R.d(we,{$8M:()=>Do,$Z:()=>dv,AFp:()=>Jb,AaK:()=>ae,AsE:()=>qn,CHM:()=>go,CRH:()=>Xv,CZH:()=>pu,CqO:()=>hv,EJc:()=>yD,EpF:()=>Vm,F4k:()=>Dh,FYo:()=>jv,FiY:()=>Mr,G48:()=>ed,Gf:()=>kb,GfV:()=>hu,Gpc:()=>V,JOm:()=>O,LFG:()=>it,LSH:()=>Ja,Lbi:()=>Hr,NdJ:()=>fv,OlP:()=>wn,Oqu:()=>Nc,PXZ:()=>oC,Q6J:()=>si,QGY:()=>Th,Qsj:()=>$T,R0b:()=>Uo,RDi:()=>Vl,Rgc:()=>Up,SBq:()=>Pp,Sil:()=>Xh,Suo:()=>Zh,TTD:()=>Hi,TgZ:()=>Ac,VLi:()=>Jc,X6Q:()=>Tl,XFs:()=>yt,Xpm:()=>gt,Y36:()=>su,YKP:()=>zv,YNc:()=>iv,Yjl:()=>Ra,Yz7:()=>Kt,ZZ4:()=>Ny,_Bn:()=>fb,_UZ:()=>dp,_Vd:()=>xp,_c5:()=>b0,_uU:()=>Rh,aQg:()=>tg,c2e:()=>u0,cJS:()=>qt,cg1:()=>ml,dDg:()=>rC,deG:()=>Ef,dqk:()=>Bt,eFA:()=>Qp,ekj:()=>Km,g9A:()=>a0,h0i:()=>Ta,hGG:()=>Gr,hij:()=>Qm,iGM:()=>Nb,ifc:()=>Ht,ip1:()=>Qh,kL8:()=>GE,lG2:()=>Eu,n5z:()=>Tn,oAB:()=>kr,oxw:()=>gv,q4F:()=>Hc,qLn:()=>ih,qOj:()=>ph,qZA:()=>cp,s9C:()=>Ah,sBO:()=>TD,sIi:()=>rp,s_b:()=>Vo,soG:()=>Ty,tBr:()=>Ni,tb:()=>Iy,tp0:()=>Js,uIk:()=>ip,vHH:()=>Ne,vpe:()=>Lo,wAp:()=>wt,xp6:()=>fw,z2F:()=>Cl,zSh:()=>Em,zs3:()=>eo});var d=R(7579),Z=R(727),N=R(8306),se=R(6451),ne=R(3099);function he(s){for(let o in s)if(s[o]===he)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const U=he({__forward_ref__:he});function V(s){return s.__forward_ref__=V,s.toString=function(){return ae(this())},s}function X(s){return Re(s)?s():s}function Re(s){return"function"==typeof s&&s.hasOwnProperty(U)&&s.__forward_ref__===V}class Ne extends Error{constructor(o,a){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function de(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():de(s)}function Ce(s,o){const a=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${Ie(s)} found${a}`)}function Ut(s,o){null==s&&function We(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Kt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function qt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Lt(s){return os(s,Li)||os(s,di)}function os(s,o){return s.hasOwnProperty(o)?s[o]:null}function Nr(s){return s&&(s.hasOwnProperty(Rs)||s.hasOwnProperty(Ai))?s[Rs]:null}const Li=he({\u0275prov:he}),Rs=he({\u0275inj:he}),di=he({ngInjectableDef:he}),Ai=he({ngInjectorDef:he});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let hi;function bn(s){const o=hi;return hi=s,o}function oo(s,o,a){const l=Lt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&yt.Optional?null:void 0!==o?o:void Ce(ae(s),"Injector")}function Yn(s){return{toString:s}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),Ht=(()=>{return(s=Ht||(Ht={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ht;var s})();const ut="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,Er="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bt=ut||"undefined"!=typeof global&&global||vt||Er,Cr={},B=[],q=he({\u0275cmp:he}),W=he({\u0275dir:he}),De=he({\u0275pipe:he}),G=he({\u0275mod:he}),ee=he({\u0275fac:he}),Oe=he({__NG_ELEMENT_ID__:he});let Je=0;function gt(s){return Yn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||B,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ht.Emulated,id:"c",styles:s.styles||B,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,g=s.features,v=s.pipes;return l.id+=Je++,l.inputs=Oa(s.inputs,a),l.outputs=Oa(s.outputs),g&&g.forEach(E=>E(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(cn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(Et):null,l})}function cn(s){return Un(s)||function Fr(s){return s[W]||null}(s)}function Et(s){return function as(s){return s[De]||null}(s)}const Vn={};function kr(s){return Yn(()=>{const o={type:s.type,bootstrap:s.bootstrap||B,declarations:s.declarations||B,imports:s.imports||B,exports:s.exports||B,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Vn[s.id]=s.type),o})}function Oa(s,o){if(null==s)return Cr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=l,o&&(o[h]=g)}return a}const Eu=gt;function Ra(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Un(s){return s[q]||null}function Bn(s,o){const a=s[G]||null;if(!a&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return a}function Kr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Bi(s){return Array.isArray(s)&&!0===s[1]}function Iu(s){return 0!=(8&s.flags)}function hd(s){return 2==(2&s.flags)}function ji(s){return 1==(1&s.flags)}function $i(s){return null!==s.template}function Nl(s){return 0!=(512&s[2])}function Tr(s,o){return s.hasOwnProperty(ee)?s[ee]:null}class co{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Hi(){return Zo}function Zo(s){return s.type.prototype.ngOnChanges&&(s.setInput=yf),wd}function wd(){const s=ho(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===Cr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function yf(s,o,a,l){const h=ho(s)||function Wo(s,o){return s[Ed]=o}(s,{previous:Cr,current:null}),g=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[a],C=v[E];g[E]=new co(C&&C.currentValue,o,v===Cr),s[l]=o}Hi.ngInherit=!0;const Ed="__ngSimpleChanges__";function ho(s){return s[Ed]||null}let Yo;function Vl(s){Yo=s}function sn(s){return!!s.listen}const Va={createRenderer:(s,o)=>function Gi(){return void 0!==Yo?Yo:"undefined"!=typeof document?document:void 0}()};function Yt(s){for(;Array.isArray(s);)s=s[0];return s}function Bs(s,o){return Yt(o[s])}function ur(s,o){return Yt(o[s.index])}function mn(s,o){return s.data[o]}function lr(s,o){const a=o[s];return Kr(a)?a:a[0]}function po(s){return 4==(4&s[2])}function ls(s){return 128==(128&s[2])}function xi(s,o){return null==o?null:s[o]}function zi(s){s[18]=0}function Qo(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const _t={lFrame:ea(null),bindingsEnabled:!0};function Su(){return _t.bindingsEnabled}function Me(){return _t.lFrame.lView}function Vt(){return _t.lFrame.tView}function go(s){return _t.lFrame.contextLView=s,s[8]}function pn(){let s=Mu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Mu(){return _t.lFrame.currentTNode}function mi(s,o){const a=_t.lFrame;a.currentTNode=s,a.isParent=o}function Hl(){return _t.lFrame.isParent}function $s(){return _t.lFrame.bindingIndex++}function Pi(s){const o=_t.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Ou(s,o){const a=_t.lFrame;a.bindingIndex=a.bindingRootIndex=s,Xo(o)}function Xo(s){_t.lFrame.currentDirectiveIndex=s}function Nu(){return _t.lFrame.currentQueryIndex}function Td(s){_t.lFrame.currentQueryIndex=s}function Dd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ku(s,o,a){if(a&yt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||a&yt.Host||(h=Dd(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const l=_t.lFrame=Ad();return l.currentTNode=o,l.lView=s,!0}function yo(s){const o=Ad(),a=s[1];_t.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ad(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?ea(s):o}function ea(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Sd(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Fu=Sd;function Yr(){const s=Sd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Qn(){return _t.lFrame.selectedIndex}function _o(s){_t.lFrame.selectedIndex=s}function Pn(){const s=_t.lFrame;return mn(s.tView,s.selectedIndex)}function $a(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function ds(s,o,a){xd(s,o,3,a)}function vo(s,o,a,l){(3&s[2])===a&&xd(s,o,a,l)}function jn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function xd(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let E=0;for(let C=void 0!==l?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=l&&E>=l)break}else o[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(Pg(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Pg(s,o,a,l){const h=a[l]<0,g=a[l+1],E=s[h?-a[l]:a[l]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class ta{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ur(s,o,a){const l=sn(s);let h=0;for(;h<a.length;){const g=a[h];if("number"==typeof g){if(0!==g)break;h++;const v=a[h++],E=a[h++],C=a[h++];l?s.setAttribute(o,E,C,v):o.setAttributeNS(v,E,C)}else{const v=g,E=a[++h];On(v)?l&&s.setProperty(o,v,E):l?s.setAttribute(o,v,E):o.setAttribute(v,E),h++}}return h}function _i(s){return 3===s||4===s||6===s}function On(s){return 64===s.charCodeAt(0)}function Ga(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||Pd(s,a,h,null,-1===a||2===a?o[++l]:null)}}return s}function Pd(s,o,a,l,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==h&&(s[g+1]=h));if(l===s[g+1])return void(s[g+2]=h)}g++,null!==l&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==h&&s.splice(g++,0,h)}function na(s){return-1!==s}function Hs(s){return 32767&s}function Gs(s,o){let a=function In(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Zi=!0;function St(s){const o=Zi;return Zi=s,o}let Yl=0;function qs(s,o){const a=Eo(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ra(l.data,s),ra(o,null),ra(l.blueprint,null));const h=cr(s,o),g=s.injectorIndex;if(na(h)){const v=Hs(h),E=Gs(h,o),C=E[1].data;for(let A=0;A<8;A++)o[g+A]=E[v+A]|C[v+A]}return o[g+8]=h,g}function ra(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Eo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function cr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){const g=h[1],v=g.type;if(l=2===v?g.declTNode:1===v?h[6]:null,null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function bo(s,o,a){!function Jn(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Oe)&&(l=a[Oe]),null==l&&(l=a[Oe]=Yl++);const h=255&l;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function ia(s,o,a){if(a&yt.Optional)return s;Ce(o,"NodeInjector")}function zs(s,o,a,l){if(a&yt.Optional&&void 0===l&&(l=null),0==(a&(yt.Self|yt.Host))){const h=s[9],g=bn(void 0);try{return h?h.get(o,l,a&yt.Optional):oo(o,l,a&yt.Optional)}finally{bn(g)}}return ia(l,o,a)}function sa(s,o,a,l=yt.Default,h){if(null!==s){const g=function Io(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Oe)?s[Oe]:void 0;return"number"==typeof o?o>=0?255&o:oa:o}(a);if("function"==typeof g){if(!ku(o,s,l))return l&yt.Host?ia(h,a,l):zs(o,a,l,h);try{const v=g(l);if(null!=v||l&yt.Optional)return v;Ce(a)}finally{Fu()}}else if("number"==typeof g){let v=null,E=Eo(s,o),C=-1,A=l&yt.Host?o[16][6]:null;for((-1===E||l&yt.SkipSelf)&&(C=-1===E?cr(s,o):o[E+8],-1!==C&&Jl(l,!1)?(v=o[1],E=Hs(C),o=Gs(C,o)):E=-1);-1!==E;){const x=o[1];if(Xn(g,E,x.data)){const k=Ql(E,o,a,v,l,A);if(k!==Zs)return k}C=o[E+8],-1!==C&&Jl(l,o[1].data[E+8]===A)&&Xn(g,E,o)?(v=x,E=Hs(C),o=Gs(C,o)):E=-1}}}return zs(o,a,l,h)}const Zs={};function oa(){return new Ws(pn(),Me())}function Ql(s,o,a,l,h,g){const v=o[1],E=v.data[s+8],x=qa(E,v,a,null==l?hd(E)&&Zi:l!=v&&0!=(3&E.type),h&yt.Host&&g===E);return null!==x?fs(o,v,x,E):Zs}function qa(s,o,a,l,h){const g=s.providerIndexes,v=o.data,E=1048575&g,C=s.directiveStart,x=g>>20,j=h?E+x:s.directiveEnd;for(let J=l?E:E+x;J<j;J++){const ve=v[J];if(J<C&&a===ve||J>=C&&ve.type===a)return J}if(h){const J=v[C];if(J&&$i(J)&&J.type===a)return C}return null}function fs(s,o,a,l){let h=s[a];const g=o.data;if(function Lu(s){return s instanceof ta}(h)){const v=h;v.resolving&&function $e(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ie(g[a]));const E=St(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?bn(v.injectImpl):null;ku(s,l,yt.Default);try{h=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Qy(s,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(l){const v=Zo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==C&&bn(C),St(E),v.resolving=!1,Fu()}}return h}function Xn(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Jl(s,o){return!(s&yt.Self||s&yt.Host&&o)}class Ws{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return sa(this._tNode,this._lView,o,l,a)}}function Tn(s){return Yn(()=>{const o=s.prototype.constructor,a=o[ee]||To(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const g=h[ee]||To(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function To(s){return Re(s)?()=>{const o=To(X(s));return o&&o()}:Tr(s)}function Do(s){return function Co(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const g=a[h];if(_i(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(pn(),s)}const Wi="__parameters__";function Ki(s,o,a){return Yn(()=>{const l=function $n(s){return function(...a){if(s){const l=s(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...g){if(this instanceof h)return l.apply(this,g),this;const v=new h(...g);return E.annotation=v,E;function E(C,A,x){const k=C.hasOwnProperty(Wi)?C[Wi]:Object.defineProperty(C,Wi,{value:[]})[Wi];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class wn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ef=new wn("AnalyzeForEntryComponents");function Ar(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Ar(l,o)):o!==s&&o.push(l)}return o}function Br(s,o){s.forEach(a=>Array.isArray(a)?Br(a,o):o(a))}function Za(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ua(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Sr(s,o,a){let l=da(s,o);return l>=0?s[1|l]=a:(l=~l,function la(s,o,a,l){let h=s.length;if(h==o)s.push(a,l);else if(1===h)s.push(l,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Wa(s,o){const a=da(s,o);if(a>=0)return s[1|a]}function da(s,o){return function _s(s,o,a){let l=0,h=s.length>>a;for(;h!==l;){const g=l+(h-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?h=g:l=g+1}return~(h<<a)}(s,o,1)}const Qs={},ha="__NG_DI_FLAG__",Ka="ngTempTokenPath",T=/\n/gm,L="__source",Q=he({provide:String,useValue:he});let re;function me(s){const o=re;return re=s,o}function Qe(s,o=yt.Default){if(void 0===re)throw new Ne(203,"");return null===re?oo(s,void 0,o):re.get(s,o&yt.Optional?null:void 0,o)}function it(s,o=yt.Default){return(function vn(){return hi}()||Qe)(X(s),o)}const Gt=it;function Dt(s){const o=[];for(let a=0;a<s.length;a++){const l=X(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let h,g=yt.Default;for(let v=0;v<l.length;v++){const E=l[v],C=er(E);"number"==typeof C?-1===C?h=E.token:g|=C:h=E}o.push(it(h,g))}else o.push(it(l))}return o}function Nn(s,o){return s[ha]=o,s.prototype[ha]=o,s}function er(s){return s[ha]}const Ni=Nn(Ki("Inject",s=>({token:s})),-1),Mr=Nn(Ki("Optional"),8),Js=Nn(Ki("SkipSelf"),4);class zd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ki(s){return s instanceof zd?s.changingThisBreaksApplicationSecurity:s}const r_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ya=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var kn=(()=>((kn=kn||{})[kn.NONE=0]="NONE",kn[kn.HTML=1]="HTML",kn[kn.STYLE=2]="STYLE",kn[kn.SCRIPT=3]="SCRIPT",kn[kn.URL=4]="URL",kn[kn.RESOURCE_URL=5]="RESOURCE_URL",kn))();function Ja(s){const o=function Yu(){const s=Me();return s&&s[12]}();return o?o.sanitize(kn.URL,s)||"":function Mo(s,o){const a=function uc(s){return s instanceof zd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?ki(s):function lc(s){return(s=String(s)).match(r_)||s.match(Ya)?s:"unsafe:"+s}(de(s))}const th="__ngContext__";function fr(s,o){s[th]=o}function kf(s){const o=function Qu(s){return s[th]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function rh(s){return s.ngOriginalError}function p_(s,...o){s.error(...o)}class ih{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function f_(s){return s&&s.ngErrorLogger||p_}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&rh(o);for(;a&&rh(a);)a=rh(a);return a||null}}const Bf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bt))();function y(s){return s instanceof Function?s():s}var O=(()=>((O=O||{})[O.Important=1]="Important",O[O.DashCase=2]="DashCase",O))();function pe(s,o){return undefined(s,o)}function pt(s){const o=s[3];return Bi(o)?o[3]:o}function wi(s){return jf(s[13])}function Ju(s){return jf(s[4])}function jf(s){for(;null!==s&&!Bi(s);)s=s[4];return s}function tu(s,o,a,l,h){if(null!=l){let g,v=!1;Bi(l)?g=l:Kr(l)&&(v=!0,l=l[0]);const E=Yt(l);0===s&&null!==a?null==h?ew(o,a,E):nl(o,a,E,h||null,!0):1===s&&null!==a?nl(o,a,E,h||null,!0):2===s?function aw(s,o,a){const l=im(s,o);l&&function nw(s,o,a,l){sn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function xI(s,o,a,l,h){const g=a[7];g!==Yt(a)&&tu(o,s,l,g,h);for(let E=10;E<a.length;E++){const C=a[E];ah(C[1],C,s,o,l,g)}}(o,s,g,a,h)}}function Hn(s,o,a){if(sn(s))return s.createElement(o,a);{const l=null!==a?function Ll(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function Q0(s,o){const a=s[9],l=a.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Qo(h,-1)),a.splice(l,1)}function nm(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const h=l[17];null!==h&&h!==s&&Q0(h,l),o>0&&(s[a-1][4]=l[4]);const g=ua(s,10+o);!function $f(s,o){ah(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function J0(s,o){if(!(256&o[2])){const a=o[11];sn(a)&&a.destroyNode&&ah(s,o,a,3,null,null),function Po(s){let o=s[13];if(!o)return rm(s[1],s);for(;o;){let a=null;if(Kr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Kr(o)&&rm(o[1],o),o=o[3];null===o&&(o=s),Kr(o)&&rm(o[1],o),a=o&&o[4]}o=a}}(o)}}function rm(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function y_(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof ta)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=h[g[v]],C=g[v+1];try{C.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function X0(s,o){const a=s.cleanup,l=o[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],E="function"==typeof v?v(o):Yt(o[v]),C=l[h=a[g+2]],A=a[g+3];"boolean"==typeof A?E.removeEventListener(a[g],C,A):A>=0?l[h=A]():l[h=-A].unsubscribe(),g+=2}else{const v=l[h=a[g+1]];a[g].call(v)}if(null!==l){for(let g=h+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&sn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Bi(o[3])){a!==o[3]&&Q0(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function AI(s,o,a){return function tl(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=s.data[l.directiveStart].encapsulation;if(h===Ht.None||h===Ht.Emulated)return null}return ur(l,a)}(s,o.parent,a)}function nl(s,o,a,l,h){sn(s)?s.insertBefore(o,a,l,h):o.insertBefore(a,l,h)}function ew(s,o,a){sn(s)?s.appendChild(o,a):o.appendChild(a)}function tw(s,o,a,l,h){null!==l?nl(s,o,a,l,h):ew(s,o,a)}function im(s,o){return sn(s)?s.parentNode(o):o.parentNode}let iw=function __(s,o,a){return 40&s.type?ur(s,a):null};function oh(s,o,a,l){const h=AI(s,l,o),g=o[11],E=function rw(s,o,a){return iw(s,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)tw(g,h,a[C],E,!1);else tw(g,h,a,E,!1)}function sm(s,o){if(null!==o){const a=o.type;if(3&a)return ur(o,s);if(4&a)return om(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return sm(s,l);{const h=s[o.index];return Bi(h)?om(-1,h):Yt(h)}}if(32&a)return pe(o,s)()||Yt(s[o.index]);{const l=ow(s,o);return null!==l?Array.isArray(l)?l[0]:sm(pt(s[16]),l):sm(s,o.next)}}return null}function ow(s,o){return null!==o?s[16][6].projection[o.projection]:null}function om(s,o){const a=10+s+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return sm(l,h)}return o[7]}function uw(s,o,a,l,h,g,v){for(;null!=a;){const E=l[a.index],C=a.type;if(v&&0===o&&(E&&fr(Yt(E),l),a.flags|=4),64!=(64&a.flags))if(8&C)uw(s,o,a.child,l,h,g,!1),tu(o,s,h,E,g);else if(32&C){const A=pe(a,l);let x;for(;x=A();)tu(o,s,h,x,g);tu(o,s,h,E,g)}else 16&C?ga(s,o,l,a,h,g):tu(o,s,h,E,g);a=v?a.projectionNext:a.next}}function ah(s,o,a,l,h,g){uw(a,l,s.firstChild,o,h,g,!1)}function ga(s,o,a,l,h,g){const v=a[16],C=v[6].projection[l.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)tu(o,s,h,C[A],g);else uw(s,o,C,v[3],h,g,!0)}function lw(s,o,a){sn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function am(s,o,a){sn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function ma(s,o,a){let l=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===l||s.charCodeAt(h+g)<=32)return h}a=h+1}}const PI="ng-template";function cw(s,o,a){let l=0;for(;l<s.length;){let h=s[l++];if(a&&"class"===h){if(h=s[l],-1!==ma(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<s.length&&"string"==typeof(h=s[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function OI(s){return 4===s.type&&s.value!==PI}function RI(s,o,a){return o===(4!==s.type||a?s.value:PI)}function hM(s,o,a){let l=4;const h=s.attrs||[],g=function dw(s){for(let o=0;o<s.length;o++)if(_i(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!v)if(4&l){if(l=2|1&l,""!==C&&!RI(s,C,a)||""===C&&1===o.length){if(ei(l))return!1;v=!0}}else{const A=8&l?C:o[++E];if(8&l&&null!==s.attrs){if(!cw(s.attrs,A,a)){if(ei(l))return!1;v=!0}continue}const k=fM(8&l?"class":C,h,OI(s),a);if(-1===k){if(ei(l))return!1;v=!0;continue}if(""!==A){let j;j=k>g?"":h[k+1].toLowerCase();const J=8&l?j:null;if(J&&-1!==ma(J,A,0)||2&l&&A!==j){if(ei(l))return!1;v=!0}}}}else{if(!v&&!ei(l)&&!ei(C))return!1;if(v&&ei(C))continue;v=!1,l=C|1&l}}return ei(l)||v}function ei(s){return 0==(1&s)}function fM(s,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function b_(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function E_(s,o,a=!1){for(let l=0;l<o.length;l++)if(hM(s,o[l],a))return!0;return!1}function es(s,o){return s?":not("+o.trim()+")":o}function At(s){let o=s[0],a=1,l=2,h="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const E=s[++a];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?h+="."+v:4&l&&(h+=" "+v);else""!==h&&!ei(v)&&(o+=es(g,h),h=""),l=v,g=g||!ei(l);a++}return""!==h&&(o+=es(g,h)),o}const Rt={};function fw(s){pw(Vt(),Me(),Qn()+s,!1)}function pw(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ds(o,g,a)}else{const g=s.preOrderHooks;null!==g&&vo(o,g,0,a)}_o(a)}function lh(s,o){return s<<17|o<<2}function bs(s){return s>>17&32767}function C_(s){return 2|s}function nu(s){return(131068&s)>>2}function I_(s,o){return-131069&s|o<<2}function um(s){return 1|s}function Tw(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Td(h),v.contentQueries(2,o[g],g)}}}function vc(s,o,a,l,h,g,v,E,C,A){const x=o.blueprint.slice();return x[0]=h,x[2]=140|l,zi(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=E||s&&s[11],x[12]=C||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function ch(s,o,a,l,h){let g=s.data[o];if(null===g)g=function x_(s,o,a,l,h){const g=Mu(),v=Hl(),C=s.data[o]=function _a(s,o,a,l,h,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,a,l,h),function zl(){return _t.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=h;const v=function mo(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return mi(g,!0),g}function wc(s,o,a,l){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function Qf(s,o,a){yo(o);try{const l=s.viewQuery;null!==l&&_m(1,l,a);const h=s.template;null!==h&&Dw(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Tw(s,o),s.staticViewQueries&&_m(2,s.viewQuery,a);const g=s.components;null!==g&&function ya(s,o){for(let a=0;a<o.length;a++)Fw(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Yr()}}function pr(s,o,a,l){const h=o[2];if(256!=(256&h)){yo(o);try{zi(o),function xu(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Dw(s,o,a,2,l);const v=3==(3&h);if(v){const A=s.preOrderCheckHooks;null!==A&&ds(o,A,null)}else{const A=s.preOrderHooks;null!==A&&vo(o,A,0,null),jn(o,0)}if(function YI(s){for(let o=wi(s);null!==o;o=Ju(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],g=h[3];0==(1024&h[2])&&Qo(g,1),h[2]|=1024}}}(o),function KI(s){for(let o=wi(s);null!==o;o=Ju(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];ls(l)&&pr(h,l,h.template,l[8])}}(o),null!==s.contentQueries&&Tw(s,o),v){const A=s.contentCheckHooks;null!==A&&ds(o,A)}else{const A=s.contentHooks;null!==A&&vo(o,A,1),jn(o,1)}!function BI(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)_o(~h);else{const g=h,v=a[++l],E=a[++l];Ou(v,g),E(2,o[g])}}}finally{_o(-1)}}(s,o);const E=s.components;null!==E&&function jI(s,o){for(let a=0;a<o.length;a++)QI(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&_m(2,C,l),v){const A=s.viewCheckHooks;null!==A&&ds(o,A)}else{const A=s.viewHooks;null!==A&&vo(o,A,2),jn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Qo(o[3],-1))}finally{Yr()}}}function hm(s,o,a,l){const h=o[10],v=po(o);try{!v&&h.begin&&h.begin(),v&&Qf(s,o,l),pr(s,o,a,l)}finally{!v&&h.end&&h.end()}}function Dw(s,o,a,l,h){const g=Qn(),v=2&l;try{_o(-1),v&&o.length>20&&pw(s,o,20,!1),a(l,h)}finally{_o(g)}}function P_(s,o,a){!Su()||(function Pw(s,o,a,l){const h=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||qs(a,o),fr(l,o);const v=a.initialInputs;for(let E=h;E<g;E++){const C=s.data[E],A=$i(C);A&&V_(o,a,C);const x=fs(o,s,E,a);fr(x,o),null!==v&&kw(0,E-h,x,C,0,v),A&&(lr(a.index,o)[8]=x)}}(s,o,a,ur(a,o)),128==(128&a.flags)&&function gm(s,o,a){const l=a.directiveStart,h=a.directiveEnd,v=a.index,E=function Zl(){return _t.lFrame.currentDirectiveIndex}();try{_o(v);for(let C=l;C<h;C++){const A=s.data[C],x=o[C];Xo(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&mm(A,x)}}finally{_o(-1),Xo(E)}}(s,o,a))}function O_(s,o,a=ur){const l=o.localNames;if(null!==l){let h=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],E=-1===v?a(o,s):s[v];s[h++]=E}}}function R_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=fm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function fm(s,o,a,l,h,g,v,E,C,A){const x=20+l,k=x+h,j=function N_(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Rt);return a}(x,k),J="function"==typeof A?A():A;return j[1]={type:s,blueprint:j,template:a,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:J,incompleteFirstPass:!1}}function Sw(s,o,a,l){const h=Bw(o);null===a?h.push(l):(h.push(a),s.firstCreatePass&&jw(s).push(l,h.length-1))}function Oo(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const h=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function Cs(s,o,a,l,h,g,v,E){const C=ur(o,a);let x,A=o.inputs;!E&&null!=A&&(x=A[l])?(Hw(s,a,x,l,h),hd(o)&&function hh(s,o){const a=lr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function HI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=v?v(h,o.value||"",l):h,sn(g)?g.setProperty(C,l,h):On(l)||(C.setProperty?C.setProperty(l,h):C[l]=h))}function L_(s,o,a,l){let h=!1;if(Su()){const g=function zI(s,o,a){const l=s.directiveRegistry;let h=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];E_(a,v.selectors,!1)&&(h||(h=[]),bo(qs(a,o),s,v.type),$i(v)?(Ow(s,a),h.unshift(v)):h.push(v))}return h}(s,o,a),v=null===l?null:{"":-1};if(null!==g){h=!0,Nw(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const k=g[x];k.providersResolver&&k.providersResolver(k)}let E=!1,C=!1,A=wc(s,o,g.length,null);for(let x=0;x<g.length;x++){const k=g[x];a.mergedAttrs=Ga(a.mergedAttrs,k.hostAttrs),bi(s,a,o,A,k),ZI(A,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const j=k.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!C&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),A++}!function pm(s,o){const l=o.directiveEnd,h=s.data,g=o.attrs,v=[];let E=null,C=null;for(let A=o.directiveStart;A<l;A++){const x=h[A],k=x.inputs,j=null===g||OI(o)?null:WI(k,g);v.push(j),E=Oo(k,A,E),C=Oo(x.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=C}(s,a)}v&&function Rw(s,o,a){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new Ne(-301,!1);l.push(o[h],g)}}}(a,l,v)}return a.mergedAttrs=Ga(a.mergedAttrs,a.attrs),h}function Mw(s,o,a,l,h,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function xw(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(l,h,v)}}function mm(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ow(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ZI(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;$i(o)&&(a[""]=s)}}function Nw(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function bi(s,o,a,l,h){s.data[l]=h;const g=h.factory||(h.factory=Tr(h.type)),v=new ta(g,$i(h),null);s.blueprint[l]=v,a[l]=v,Mw(s,o,0,l,wc(s,a,h.hostVars,Rt),h)}function V_(s,o,a){const l=ur(o,s),h=R_(a),g=s[10],v=ym(s,vc(s,h,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function va(s,o,a,l,h,g){const v=ur(s,o);!function ol(s,o,a,l,h,g,v){if(null==g)sn(s)?s.removeAttribute(o,h,a):o.removeAttribute(h);else{const E=null==v?de(g):v(g,l||"",h);sn(s)?s.setAttribute(o,h,E,a):a?o.setAttributeNS(a,h,E):o.setAttribute(h,E)}}(o[11],v,g,s.value,a,l,h)}function kw(s,o,a,l,h,g){const v=g[o];if(null!==v){const E=l.setInput;for(let C=0;C<v.length;){const A=v[C++],x=v[C++],k=v[C++];null!==E?l.setInput(a,k,A,x):a[x]=k}}}function WI(s,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Xs(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function QI(s,o){const a=lr(o,s);if(ls(a)){const l=a[1];80&a[2]?pr(l,a,l.template,a[8]):a[5]>0&&U_(a)}}function U_(s){for(let l=wi(s);null!==l;l=Ju(l))for(let h=10;h<l.length;h++){const g=l[h];if(1024&g[2]){const v=g[1];pr(v,g,v.template,g[8])}else g[5]>0&&U_(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=lr(a[l],s);ls(h)&&h[5]>0&&U_(h)}}function Fw(s,o){const a=lr(o,s),l=a[1];(function Ec(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Qf(l,a,a[8])}function ym(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function B_(s){for(;s;){s[2]|=64;const o=pt(s);if(Nl(s)&&!o)return s;s=o}return null}function Vw(s){!function j_(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=kf(a),h=l[1];hm(h,l,h.template,a)}}(s[8])}function _m(s,o,a){Td(0),o(s,a)}const XI=(()=>Promise.resolve(null))();function Bw(s){return s[7]||(s[7]=[])}function jw(s){return s.cleanup||(s.cleanup=[])}function $w(s,o){const a=s[9],l=a?a.get(ih,null):null;l&&l.handleError(o)}function Hw(s,o,a,l,h){for(let g=0;g<a.length;){const v=a[g++],E=a[g++],C=o[v],A=s.data[v];null!==A.setInput?A.setInput(C,h,l,E):C[E]=h}}function wa(s,o,a){const l=Bs(o,s);!function sh(s,o,a){sn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function vm(s,o,a){let l=a?s.styles:null,h=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?h=le(h,E):2==g&&(l=le(l,E+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=h:s.classesWithoutHost=h}const wm=new wn("INJECTOR",-1);class G_{get(o,a=Qs){if(a===Qs){const l=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw l.name="NullInjectorError",l}return a}}const Em=new wn("Set Injector scope."),bm={},AM={};let zw;function Zw(){return void 0===zw&&(zw=new G_),zw}function Ww(s,o=null,a=null,l){const h=Kw(s,o,a,l);return h._resolveInjectorDefTypes(),h}function Kw(s,o=null,a=null,l){return new tT(s,a,o||Zw(),l)}class tT{constructor(o,a,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&Br(a,E=>this.processProvider(E,o,a)),Br([o],E=>this.processInjectorType(E,[],g)),this.records.set(wm,fh(void 0,this));const v=this.records.get(Em);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Qs,l=yt.Default){this.assertNotDestroyed();const h=me(this),g=bn(void 0);try{if(!(l&yt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function nr(s){return"function"==typeof s||"object"==typeof s&&s instanceof wn}(o)&&Lt(o);E=C&&this.injectableDefInScope(C)?fh(q_(o),bm):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&yt.Self?Zw():this.parent).get(o,a=l&yt.Optional&&a===Qs?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ka]=v[Ka]||[]).unshift(ae(o)),h)throw v;return function vs(s,o,a,l){const h=s[Ka];throw o[L]&&h.unshift(o[L]),s.message=function Qi(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ae(o);if(Array.isArray(o))h=o.map(ae).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}h=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,h,a,l),s.ngTokenPath=h,s[Ka]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{bn(g),me(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,h)=>o.push(ae(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(o,a,l){if(!(o=X(o)))return!1;let h=Nr(o);const g=null==h&&o.ngModule||void 0,v=void 0===g?o:g,E=-1!==l.indexOf(v);if(void 0!==g&&(h=Nr(g)),null==h)return!1;if(null!=h.imports&&!E){let x;l.push(v);try{Br(h.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:j,providers:J}=x[k];Br(J,ve=>this.processProvider(ve,j,J||B))}}this.injectorDefTypes.add(v);const C=Tr(v)||(()=>new v);this.records.set(v,fh(C,bm));const A=h.providers;if(null!=A&&!E){const x=o;Br(A,k=>this.processProvider(k,x,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let h=Xf(o=X(o))?o:X(o&&o.provide);const g=function rT(s,o,a){return Yw(s)?fh(void 0,s.useValue):fh(z_(s),bm)}(o);if(Xf(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=fh(void 0,bm,!0),v.factory=()=>Dt(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,g)}hydrate(o,a){return a.value===bm&&(a.value=AM,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Qw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=X(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function q_(s){const o=Lt(s),a=null!==o?o.factory:Tr(s);if(null!==a)return a;if(s instanceof wn)throw new Ne(204,!1);if(s instanceof Function)return function nT(s){const o=s.length;if(o>0)throw function ms(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ne(204,!1);const a=function ci(s){const o=s&&(s[Li]||s[di]);if(o){const a=function wr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ne(204,!1)}function z_(s,o,a){let l;if(Xf(s)){const h=X(s);return Tr(h)||q_(h)}if(Yw(s))l=()=>X(s.useValue);else if(function SM(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Dt(s.deps||[]));else if(function iT(s){return!(!s||!s.useExisting)}(s))l=()=>it(X(s.useExisting));else{const h=X(s&&(s.useClass||s.provide));if(!function oT(s){return!!s.deps}(s))return Tr(h)||q_(h);l=()=>new h(...Dt(s.deps))}return l}function fh(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Yw(s){return null!==s&&"object"==typeof s&&Q in s}function Xf(s){return"function"==typeof s}let eo=(()=>{class s{static create(a,l){var h;if(Array.isArray(a))return Ww({name:""},l,a,"");{const g=null!==(h=a.name)&&void 0!==h?h:"";return Ww({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=Qs,s.NULL=new G_,s.\u0275prov=Kt({token:s,providedIn:"any",factory:()=>it(wm)}),s.__NG_ELEMENT_ID__=-1,s})();function cT(s,o){$a(kf(s)[1],pn())}function ph(s){let o=function Im(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let h;if($i(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");h=o.\u0275dir}if(h){if(a){l.push(h);const v=s;v.inputs=ni(s.inputs),v.declaredInputs=ni(s.declaredInputs),v.outputs=ni(s.outputs);const E=h.hostBindings;E&&rE(s,E);const C=h.viewQuery,A=h.contentQueries;if(C&&ev(s,C),A&&Fi(s,A),oe(s.inputs,h.inputs),oe(s.declaredInputs,h.declaredInputs),oe(s.outputs,h.outputs),$i(h)&&h.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===ph&&(a=!1)}}o=Object.getPrototypeOf(o)}!function nE(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Ga(h.hostAttrs,a=Ga(a,h.hostAttrs))}}(l)}function ni(s){return s===Cr?{}:s===B?[]:s}function ev(s,o){const a=s.viewQuery;s.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function Fi(s,o){const a=s.contentQueries;s.contentQueries=a?(l,h,g)=>{o(l,h,g),a(l,h,g)}:o}function rE(s,o){const a=s.hostBindings;s.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let np=null;function Cc(){if(!np){const s=Bt.Symbol;if(s&&s.iterator)np=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(np=l)}}}return np}function rp(s){return!!Tm(s)&&(Array.isArray(s)||!(s instanceof Map)&&Cc()in s)}function Tm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ci(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function ip(s,o,a,l){const h=Me();return Ci(h,$s(),o)&&(Vt(),va(Pn(),h,s,o,a,l)),ip}function yh(s,o,a,l){return Ci(s,$s(),a)?o+de(a)+l:Rt}function _h(s,o,a,l,h,g){const E=function ul(s,o,a,l){const h=Ci(s,o,a);return Ci(s,o+1,l)||h}(s,function yi(){return _t.lFrame.bindingIndex}(),a,h);return Pi(2),E?o+de(a)+l+de(h)+g:Rt}function iv(s,o,a,l,h,g,v,E){const C=Me(),A=Vt(),x=s+20,k=A.firstCreatePass?function rv(s,o,a,l,h,g,v,E,C){const A=o.consts,x=ch(o,s,4,v||null,xi(A,E));L_(o,a,x,xi(A,C)),$a(o,x);const k=x.tViews=fm(2,x,l,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),k.queries=o.queries.embeddedTView(x)),x}(x,A,C,o,a,l,h,g,v):A.data[x];mi(k,!1);const j=C[11].createComment("");oh(A,C,j,k),fr(j,C),ym(C,C[x]=Xs(j,C,j,k)),ji(k)&&P_(A,C,k),null!=v&&O_(C,k,E)}function su(s,o=yt.Default){const a=Me();return null===a?it(s,o):sa(pn(),a,X(s),o)}function dv(){throw new Error("invalid")}function si(s,o,a){const l=Me();return Ci(l,$s(),o)&&Cs(Vt(),Pn(),l,s,o,l[11],a,!1),si}function Fm(s,o,a,l,h){const v=h?"class":"style";Hw(s,a,o.inputs[v],v,l)}function Ac(s,o,a,l){const h=Me(),g=Vt(),v=20+s,E=h[11],C=h[v]=Hn(E,o,function xg(){return _t.lFrame.currentNamespace}()),A=g.firstCreatePass?function lp(s,o,a,l,h,g,v){const E=o.consts,A=ch(o,s,2,h,xi(E,g));return L_(o,a,A,xi(E,v)),null!==A.attrs&&vm(A,A.attrs,!1),null!==A.mergedAttrs&&vm(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,h,0,o,a,l):g.data[v];mi(A,!0);const x=A.mergedAttrs;null!==x&&Ur(E,C,x);const k=A.classes;null!==k&&am(E,C,k);const j=A.styles;return null!==j&&lw(E,C,j),64!=(64&A.flags)&&oh(g,h,C,A),0===function ja(){return _t.lFrame.elementDepthCount}()&&fr(C,h),function jl(){_t.lFrame.elementDepthCount++}(),ji(A)&&(P_(g,h,A),function dh(s,o,a){if(Iu(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,h)),null!==l&&O_(h,A),Ac}function cp(){let s=pn();Hl()?function Gl(){_t.lFrame.isParent=!1}():(s=s.parent,mi(s,!1));const o=s;!function Au(){_t.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&($a(a,s),Iu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Rg(s){return 0!=(16&s.flags)}(o)&&Fm(a,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function on(s){return 0!=(32&s.flags)}(o)&&Fm(a,o,Me(),o.stylesWithoutHost,!1),cp}function dp(s,o,a,l){return Ac(s,o,a,l),cp(),dp}function Vm(){return Me()}function Th(s){return!!s&&"function"==typeof s.then}function Dh(s){return!!s&&"function"==typeof s.subscribe}const hv=Dh;function fv(s,o,a,l){const h=Me(),g=Vt(),v=pn();return function jm(s,o,a,l,h,g,v,E){const C=ji(l),x=s.firstCreatePass&&jw(s),k=o[8],j=Bw(o);let J=!0;if(3&l.type||E){const He=ur(l,o),nt=E?E(He):He,xe=j.length,mt=E?jt=>E(Yt(jt[l.index])):l.index;if(sn(a)){let jt=null;if(!E&&C&&(jt=function Bm(s,o,a,l){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===a&&h[g+1]===l){const E=o[7],C=h[g+2];return E.length>C?E[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,l.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=g,jt.__ngLastListenerFn__=g,J=!1;else{g=$m(l,o,k,g,!1);const un=a.listen(nt,h,g);j.push(g,un),x&&x.push(h,mt,xe,xe+1)}}else g=$m(l,o,k,g,!0),nt.addEventListener(h,g,v),j.push(g),x&&x.push(h,mt,xe,v)}else g=$m(l,o,k,g,!1);const ve=l.outputs;let Fe;if(J&&null!==ve&&(Fe=ve[h])){const He=Fe.length;if(He)for(let nt=0;nt<He;nt+=2){const li=o[Fe[nt]][Fe[nt+1]].subscribe(g),_u=j.length;j.push(g,li),x&&x.push(h,l.index,_u,-(_u+1))}}}(g,h,h[11],v,s,o,!!a,l),fv}function pv(s,o,a,l){try{return!1!==a(l)}catch(h){return $w(s,h),!1}}function $m(s,o,a,l,h){return function g(v){if(v===Function)return l;const E=2&s.flags?lr(s.index,o):o;0==(32&o[2])&&B_(E);let C=pv(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)C=pv(o,0,A,v)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function gv(s=1){return function vf(s){return(_t.lFrame.contextLView=function Wl(s,o){for(;s>0;)o=o[15],s--;return o}(s,_t.lFrame.contextLView))[8]}(s)}function Ah(s,o,a){return Mc(s,"",o,"",a),Ah}function Mc(s,o,a,l,h){const g=Me(),v=yh(g,o,a,l);return v!==Rt&&Cs(Vt(),Pn(),g,s,v,g[11],h,!1),Mc}function pp(s,o,a,l,h){const g=s[a+1],v=null===o;let E=l?bs(g):nu(g),C=!1;for(;0!==E&&(!1===C||v);){const x=s[E+1];zm(s[E],o)&&(C=!0,s[E+1]=l?um(x):C_(x)),E=l?bs(x):nu(x)}C&&(s[a+1]=l?C_(g):um(g))}function zm(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&da(s,o)>=0}function Km(s,o){return function No(s,o,a,l){const h=Me(),g=Vt(),v=Pi(2);g.firstUpdatePass&&function _v(s,o,a,l){const h=s.data;if(null===h[a+1]){const g=h[Qn()],v=function ME(s,o){return o>=s.expandoStartIndex}(s,a);(function bv(s,o){return 0!=(s.flags&(o?16:32))})(g,l)&&null===o&&!v&&(o=!1),o=function xE(s,o,a,l){const h=function Ru(s){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=Oc(a=Ym(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(a=Ym(h,s,o,a,l),null===g){let C=function vv(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==nu(l))return s[bs(l)]}(s,o,l);void 0!==C&&Array.isArray(C)&&(C=Ym(null,s,o,C[1],l),C=Oc(C,o.attrs,l),function wv(s,o,a,l){s[bs(a?o.classBindings:o.styleBindings)]=l}(s,o,l,C))}else g=function PE(s,o,a){let l;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)l=Oc(l,s[g].hostAttrs,a);return Oc(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,l),function Pc(s,o,a,l,h,g){let v=g?o.classBindings:o.styleBindings,E=bs(v),C=nu(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||da(k,x)>0)&&(A=!0)}else x=a;if(h)if(0!==C){const j=bs(s[E+1]);s[l+1]=lh(j,E),0!==j&&(s[j+1]=I_(s[j+1],l)),s[E+1]=function NI(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=lh(E,0),0!==E&&(s[E+1]=I_(s[E+1],l)),E=l;else s[l+1]=lh(C,0),0===E?E=l:s[C+1]=I_(s[C+1],l),C=l;A&&(s[l+1]=C_(s[l+1])),pp(s,x,l,!0),pp(s,x,l,!1),function ou(s,o,a,l,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&da(g,o)>=0&&(a[l+1]=um(a[l+1]))}(o,x,s,l,g),v=lh(E,C),g?o.classBindings=v:o.styleBindings=v}(h,g,o,a,v,l)}}(g,s,v,l),o!==Rt&&Ci(h,v,o)&&function gp(s,o,a,l,h,g,v,E){if(!(3&o.type))return;const C=s.data,A=C[E+1];Rc(function mw(s){return 1==(1&s)}(A)?Oh(C,o,a,h,nu(A),v):void 0)||(Rc(g)||function gw(s){return 2==(2&s)}(A)&&(g=Oh(C,null,a,h,E,v)),function w_(s,o,a,l,h){const g=sn(s);if(o)h?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:O.DashCase;if(null==h)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),v|=O.Important),g?s.setStyle(a,l,h,v):a.style.setProperty(l,h,E?"important":"")}}}(l,v,Bs(Qn(),a),h,g))}(g,g.data[Qn()],h,h[11],s,h[v+1]=function Ev(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(ki(s)))),s}(o,a),l,v)}(s,o,null,!0),Km}function Ym(s,o,a,l,h){let g=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(g=o[E],l=Oc(l,g.hostAttrs,h),g!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function Oc(s,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Sr(s,v,!!a||o[++g]))}return void 0===s?null:s}function Oh(s,o,a,l,h,g){const v=null===o;let E;for(;h>0;){const C=s[h],A=Array.isArray(C),x=A?C[1]:C,k=null===x;let j=a[h+1];j===Rt&&(j=k?B:void 0);let J=k?Wa(j,l):x===l?j:void 0;if(A&&!Rc(J)&&(J=Wa(C,l)),Rc(J)&&(E=J,v))return E;const ve=s[h+1];h=v?bs(ve):nu(ve)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(E=Wa(C,l))}return E}function Rc(s){return void 0!==s}function Rh(s,o=""){const a=Me(),l=Vt(),h=s+20,g=l.firstCreatePass?ch(l,h,1,o,null):l.data[h],v=a[h]=function yc(s,o){return sn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);oh(l,a,v,g),mi(g,!1)}function Nc(s){return Qm("",s,""),Nc}function Qm(s,o,a){const l=Me(),h=yh(l,s,o,a);return h!==Rt&&wa(l,Qn(),h),Qm}function qn(s,o,a,l,h){const g=Me(),v=_h(g,s,o,a,l,h);return v!==Rt&&wa(g,Qn(),v),qn}const gl=void 0;var Is=["en",[["a","p"],["AM","PM"],gl],[["AM","PM"],gl,gl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gl,"{1} 'at' {0}",gl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ry(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let kc={};function ml(s){const o=function qE(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=iy(o);if(a)return a;const l=o.split("-")[0];if(a=iy(l),a)return a;if("en"===l)return Is;throw new Error(`Missing locale data for the locale "${s}".`)}function GE(s){return ml(s)[wt.PluralCase]}function iy(s){return s in kc||(kc[s]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[s]),kc[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const oy="en-US";let WE=oy;function Ds(s,o,a,l,h){if(s=X(s),Array.isArray(s))for(let g=0;g<s.length;g++)Ds(s[g],o,a,l,h);else{const g=Vt(),v=Me();let E=Xf(s)?s:X(s.provide),C=z_(s);const A=pn(),x=1048575&A.providerIndexes,k=A.directiveStart,j=A.providerIndexes>>20;if(Xf(s)||!s.multi){const J=new ta(C,h,su),ve=kh(E,o,h?x:x+j,k);-1===ve?(bo(qs(A,v),g,E),fy(g,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(J),v.push(J)):(a[ve]=J,v[ve]=J)}else{const J=kh(E,o,x+j,k),ve=kh(E,o,x,x+j),Fe=J>=0&&a[J],He=ve>=0&&a[ve];if(h&&!He||!h&&!Fe){bo(qs(A,v),g,E);const nt=function Fh(s,o,a,l,h){const g=new ta(s,a,su);return g.multi=[],g.index=o,g.componentProviders=0,Zn(g,h,l&&!a),g}(h?_n:oi,a.length,h,l,C);!h&&He&&(a[ve].providerFactory=nt),fy(g,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(nt),v.push(nt)}else fy(g,s,J>-1?J:ve,Zn(a[h?ve:J],C,!h&&l));!h&&l&&He&&a[ve].componentProviders++}}}function fy(s,o,a,l){const h=Xf(o),g=function sT(s){return!!s.useClass}(o);if(h||g){const C=(g?X(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,C]):A[x+1].push(l,C)}else A.push(a,C)}}}function Zn(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function kh(s,o,a,l){for(let h=a;h<l;h++)if(o[h]===s)return h;return-1}function oi(s,o,a,l){return py(this.multi,[])}function _n(s,o,a,l){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=fs(a,a[1],this.providerFactory.index,l);g=E.slice(0,v),py(h,g);for(let C=v;C<E.length;C++)g.push(E[C])}else g=[],py(h,g);return g}function py(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function fb(s,o=[]){return a=>{a.providersResolver=(l,h)=>function UT(s,o,a){const l=Vt();if(l.firstCreatePass){const h=$i(s);Ds(a,l.data,l.blueprint,h,!0),Ds(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class _l{}class gy{resolveComponentFactory(o){throw function BT(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let xp=(()=>{class s{}return s.NULL=new gy,s})();function gb(){return Wn(pn(),Me())}function Wn(s,o){return new Pp(ur(s,o))}let Pp=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=gb,s})();function jT(s){return s instanceof Pp?s.nativeElement:s}class jv{}let $T=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function GT(){const s=Me(),a=lr(pn().index,s);return function HT(s){return s[11]}(Kr(a)?a:s)}(),s})(),qT=(()=>{class s{}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:()=>null}),s})();class hu{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Hc=new hu("13.3.11"),$v={};function Op(s,o,a,l,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(Yt(g)),Bi(g))for(let E=10;E<g.length;E++){const C=g[E],A=C[1].firstChild;null!==A&&Op(C[1],C,A,l)}const v=a.type;if(8&v)Op(s,o,a.child,l);else if(32&v){const E=pe(a,o);let C;for(;C=E();)l.push(C)}else if(16&v){const E=ow(o,a);if(Array.isArray(E))l.push(...E);else{const C=pt(o[16]);Op(C[1],C,E,l,!0)}}a=h?a.projectionNext:a.next}return l}class Vh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Op(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Bi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(nm(o,l),ua(a,l))}this._attachedToViewContainer=!1}J0(this._lView[1],this._lView)}onDestroy(o){Sw(this._lView[1],this._lView,null,o)}markForCheck(){B_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function $_(s,o,a){const l=o[10];l.begin&&l.begin();try{pr(s,o,s.template,a)}catch(h){throw $w(o,h),h}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Xu(s,o){ah(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class fu extends Vh{constructor(o){super(o),this._view=o}detectChanges(){Vw(this._view)}checkNoChanges(){}get context(){return null}}class Hv extends xp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Un(o);return new Rp(a,this.ngModule)}}function Gc(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Rp extends _l{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function uh(s){return s.map(At).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Gc(this.componentDef.inputs)}get outputs(){return Gc(this.componentDef.outputs)}create(o,a,l,h){const g=(h=h||this.ngModule)?function Gv(s,o){return{get:(a,l,h)=>{const g=s.get(a,$v,h);return g!==$v||l===$v?g:o.get(a,l,h)}}}(o,h.injector):o,v=g.get(jv,Va),E=g.get(qT,null),C=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function Aw(s,o,a){if(sn(s))return s.selectRootElement(o,a===Ht.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(C,l,this.componentDef.encapsulation):Hn(v.createRenderer(null,this.componentDef),A,function zT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),k=this.componentDef.onPush?576:528,j=function X_(s,o){return{components:[],scheduler:s||Bf,clean:XI,playerHandler:o||null,flags:0}}(),J=fm(0,null,null,1,0,null,null,null,null,null),ve=vc(null,J,j,k,null,null,v,C,E,g);let Fe,He;yo(ve);try{const nt=function tE(s,o,a,l,h,g){const v=a[1];a[20]=s;const C=ch(v,20,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(vm(C,A,!0),null!==s&&(Ur(h,s,A),null!==C.classes&&am(h,s,C.classes),null!==C.styles&&lw(h,s,C.styles)));const x=l.createRenderer(s,o),k=vc(a,R_(o),null,o.onPush?64:16,a[20],C,l,x,g||null,null);return v.firstCreatePass&&(bo(qs(C,a),v,o.type),Ow(v,C),Nw(C,a.length,1)),ym(a,k),a[20]=k}(x,this.componentDef,ve,v,C);if(x)if(l)Ur(C,x,["ng-version",Hc.full]);else{const{attrs:xe,classes:mt}=function hw(s){const o=[],a=[];let l=1,h=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++l]):8===h&&a.push(g);else{if(!ei(h))break;h=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);xe&&Ur(C,x,xe),mt&&mt.length>0&&am(C,x,mt.join(" "))}if(He=mn(J,20),void 0!==a){const xe=He.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const jt=a[mt];xe.push(null!=jt?Array.from(jt):null)}}Fe=function J_(s,o,a,l,h){const g=a[1],v=function qI(s,o,a){const l=pn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),bi(s,l,o,wc(s,o,1,null),a));const h=fs(o,s,l.directiveStart,l);fr(h,o);const g=ur(l,o);return g&&fr(g,o),h}(g,a,o);if(l.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=pn();o.contentQueries(1,v,C.directiveStart)}const E=pn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(_o(E.index),Mw(a[1],E,0,E.directiveStart,E.directiveEnd,o),mm(o,v)),v}(nt,this.componentDef,ve,j,[cT]),Qf(J,ve,null)}finally{Yr()}return new io(this.componentType,Fe,Wn(He,ve),ve,He)}}class io extends class pb{}{constructor(o,a,l,h,g){super(),this.location=l,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new fu(h),this.componentType=o}get injector(){return new Ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ta{}class zv{}const vl=new Map;class Kv extends Ta{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Hv(this);const l=Bn(o);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=Kw(o,a,[{provide:Ta,useValue:this},{provide:xp,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=eo.THROW_IF_NOT_FOUND,l=yt.Default){return o===eo||o===Ta||o===wm?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Uh extends zv{constructor(o){super(),this.moduleType=o,null!==Bn(o)&&function _b(s){const o=new Set;!function a(l){const h=Bn(l,!0),g=h.id;null!==g&&(function Zv(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(g,vl.get(g),l),vl.set(g,l));const v=y(h.imports);for(const E of v)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new Kv(this.moduleType,o)}}function yy(s){return o=>{setTimeout(s,void 0,o)}}const Lo=class Ab extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var h,g,v;let E=o,C=a||(()=>null),A=l;if(o&&"object"==typeof o){const k=o;E=null===(h=k.next)||void 0===h?void 0:h.bind(k),C=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(C=yy(C),E&&(E=yy(E)),A&&(A=yy(A)));const x=super.subscribe({next:E,error:C,complete:A});return o instanceof Z.w0&&o.add(x),x}};function Lp(){return this._results[Cc()]()}class Vp{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Cc(),l=Vp.prototype;l[a]||(l[a]=Lp)}get changes(){return this._changes||(this._changes=new Lo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=Ar(o);(this._changesDetected=!function bf(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],g=o[l];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Up=(()=>{class s{}return s.__NG_ELEMENT_ID__=Sb,s})();const _r=Up,zt=class extends _r{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=vc(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Qf(a,l,o),new Vh(l)}};function Sb(){return Bp(pn(),Me())}function Bp(s,o){return 4&s.type?new zt(o,s,Wn(s,o)):null}let Vo=(()=>{class s{}return s.__NG_ELEMENT_ID__=JT,s})();function JT(){return xb(pn(),Me())}const so=Vo,Mb=class extends so{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Wn(this._hostTNode,this._hostLView)}get injector(){return new Ws(this._hostTNode,this._hostLView)}get parentInjector(){const o=cr(this._hostTNode,this._hostLView);if(na(o)){const a=Gs(o,this._hostLView),l=Hs(o);return new Ws(a[1].data[l+8],a)}return new Ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=_y(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const h=o.createEmbeddedView(a||{});return this.insert(h,l),h}createComponent(o,a,l,h,g){const v=o&&!function Bu(s){return"function"==typeof s}(o);let E;if(v)E=a;else{const k=a||{};E=k.index,l=k.injector,h=k.projectableNodes,g=k.ngModuleRef}const C=v?o:new Rp(Un(o)),A=l||this.parentInjector;if(!g&&null==C.ngModule){const j=(v?A:this.parentInjector).get(Ta,null);j&&(g=j)}const x=C.create(A,h,void 0,g);return this.insert(x.hostView,E),x}insert(o,a){const l=o._lView,h=l[1];if(function Ba(s){return Bi(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const k=l[3],j=new Mb(k,k[6],k[3]);j.detach(j.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function el(s,o,a,l){const h=10+l,g=a.length;l>0&&(a[h-1][4]=o),l<g-10?(o[4]=a[h],Za(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function DI(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,l,v,g);const E=om(g,v),C=l[11],A=im(C,v[7]);return null!==A&&function Hf(s,o,a,l,h,g){l[0]=h,l[6]=o,ah(s,l,a,1,h,g)}(h,v[6],C,l,A,E),o.attachToViewContainerRef(),Za(Zc(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=_y(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=nm(this._lContainer,a);l&&(ua(Zc(this._lContainer),a),J0(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=nm(this._lContainer,a);return l&&null!=ua(Zc(this._lContainer),a)?new Vh(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function _y(s){return s[8]}function Zc(s){return s[8]||(s[8]=[])}function xb(s,o){let a;const l=o[s.index];if(Bi(l))a=l;else{let h;if(8&s.type)h=Yt(l);else{const g=o[11];h=g.createComment("");const v=ur(s,o);nl(g,im(g,v),h,function SI(s,o){return sn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=Xs(l,o,h,s),ym(o,a)}return new Mb(a,s,o)}class Gh{constructor(o){this.queryList=o,this.matches=null}clone(){return new Gh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new Wc(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Wh(o,a).matches&&this.queries[a].setDirty()}}class qh{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class zh{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,h);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new zh(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class vy{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new vy(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const g=l[h];this.matchTNodeWithReadOption(o,a,Pb(a,g)),this.matchTNodeWithReadOption(o,a,qa(a,o,g,!1,!1))}else l===Up?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,qa(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Pp||h===Vo||h===Up&&4&a.type)this.addMatch(a.index,-2);else{const g=qa(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Pb(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function eD(s,o,a,l){return-1===a?function Ob(s,o){return 11&s.type?Wn(s,o):4&s.type?Bp(s,o):null}(o,s):-2===a?function Rb(s,o,a){return a===Pp?Wn(o,s):a===Up?Bp(o,s):a===Vo?xb(o,s):void 0}(s,o,l):fs(s,s[1],a,o)}function Qv(s,o,a,l){const h=o[19].queries[l];if(null===h.matches){const g=s.data,v=a.matches,E=[];for(let C=0;C<v.length;C+=2){const A=v[C];E.push(A<0?null:eD(o,g[A],v[C+1],a.metadata.read))}h.matches=E}return h.matches}function Jv(s,o,a,l){const h=s.queries.getByIndex(a),g=h.matches;if(null!==g){const v=Qv(s,o,h,a);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)l.push(v[E/2]);else{const A=g[E+1],x=o[-C];for(let k=10;k<x.length;k++){const j=x[k];j[17]===j[3]&&Jv(j[1],j,A,l)}if(null!==x[9]){const k=x[9];for(let j=0;j<k.length;j++){const J=k[j];Jv(J[1],J,A,l)}}}}}return l}function Nb(s){const o=Me(),a=Vt(),l=Nu();Td(l+1);const h=Wh(a,l);if(s.dirty&&po(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Jv(a,o,l,[]):Qv(a,o,h,l);s.reset(g,jT),s.notifyOnChanges()}return!0}return!1}function kb(s,o,a){const l=Vt();l.firstCreatePass&&(wy(l,new qh(s,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),Pr(l,Me(),o)}function Zh(s,o,a,l){const h=Vt();if(h.firstCreatePass){const g=pn();wy(h,new qh(o,a,l),g.index),function Fb(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}Pr(h,Me(),a)}function Xv(){return function tD(s,o){return s[19].queries[o].queryList}(Me(),Nu())}function Pr(s,o,a){const l=new Vp(4==(4&a));Sw(s,o,l,l.destroy),null===o[19]&&(o[19]=new Wc),o[19].queries.push(new Gh(l))}function wy(s,o,a){null===s.queries&&(s.queries=new zh),s.queries.track(new vy(o,a))}function Wh(s,o){return s.queries.getByIndex(o)}function rs(...s){}const Qh=new wn("Application Initializer");let pu=(()=>{class s{constructor(a){this.appInits=a,this.resolve=rs,this.reject=rs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Th(g))a.push(g);else if(hv(g)){const v=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(it(Qh,8))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Jb=new wn("AppId",{providedIn:"root",factory:function wl(){return`${qp()}${qp()}${qp()}`}});function qp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const a0=new wn("Platform Initializer"),Hr=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Iy=new wn("appBootstrapListener");let u0=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ty=new wn("LocaleId",{providedIn:"root",factory:()=>Gt(Ty,yt.Optional|yt.SkipSelf)||function El(){return"undefined"!=typeof $localize&&$localize.locale||oy}()}),yD=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Qc{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Xh=(()=>{class s{compileModuleSync(a){return new Uh(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=y(Bn(a).declarations).reduce((v,E)=>{const C=Un(E);return C&&v.push(new Rp(C)),v},[]);return new Qc(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const c0=(()=>Promise.resolve(0))();function Zp(s){"undefined"==typeof Zone?c0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Uo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lo(!1),this.onMicrotaskEmpty=new Lo(!1),this.onStable=new Lo(!1),this.onError=new Lo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function eC(){let s=Bt.requestAnimationFrame,o=Bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Wp(s){const o=()=>{!function d0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,gu(s),s.isCheckStableRunning=!0,Dy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),gu(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,g,v,E)=>{try{return nC(s),a.invokeTask(h,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),h0(s)}},onInvoke:(a,l,h,g,v,E,C)=>{try{return nC(s),a.invoke(h,g,v,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),h0(s)}},onHasTask:(a,l,h,g)=>{a.hasTask(h,g),l===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,gu(s),Dy(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,h,g)=>(a.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Uo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Uo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,tC,rs,rs);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const tC={};function Dy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function gu(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function nC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function h0(s){s._nesting--,Dy(s)}class wD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lo,this.onMicrotaskEmpty=new Lo,this.onStable=new Lo,this.onError=new Lo}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}let rC=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Uo.assertNotInAngularZone(),Zp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(it(Uo))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac}),s})(),ED=(()=>{class s{constructor(){this._applications=new Map,mu.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return mu.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class Kp{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Jc(s){mu=s}let mu=new Kp,bl=null;const iC=new wn("AllowMultipleToken"),sC=new wn("PlatformOnDestroy");class oC{constructor(o,a){this.name=o,this.token=a}}function Qp(s,o,a=[]){const l=`Platform: ${o}`,h=new wn(l);return(g=[])=>{let v=Sy();if(!v||v.injector.get(iC,!1)){const E=[...a,...g,{provide:h,useValue:!0}];s?s(E):function Yp(s){if(bl&&!bl.get(iC,!1))throw new Ne(400,"");bl=s;const o=s.get(Jp),a=s.get(a0,null);a&&a.forEach(l=>l())}(function aC(s=[],o){return eo.create({name:o,providers:[{provide:Em,useValue:"platform"},{provide:sC,useValue:()=>bl=null},...s]})}(E,l))}return function Ay(s){const o=Sy();if(!o)throw new Ne(401,"");return o}()}}function Sy(){var s;return null!==(s=null==bl?void 0:bl.get(Jp))&&void 0!==s?s:null}let Jp=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function g0(s,o){let a;return a="noop"===s?new wD:("zone.js"===s?void 0:s)||new Uo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:Uo,useValue:E}];return E.run(()=>{const A=eo.create({providers:C,parent:this.injector,name:a.moduleType.name}),x=a.create(A),k=x.injector.get(ih,null);if(!k)throw new Ne(402,"");return E.runOutsideAngular(()=>{const j=E.onError.subscribe({next:J=>{k.handleError(J)}});x.onDestroy(()=>{My(this._modules,x),j.unsubscribe()})}),function uC(s,o,a){try{const l=a();return Th(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,E,()=>{const j=x.injector.get(pu);return j.runInitializers(),j.donePromise.then(()=>(function Le(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(WE=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Ty,oy)||oy),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const h=yu({},l);return function f0(s,o,a){const l=new Uh(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const l=a.injector.get(Cl);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(sC,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(it(eo))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function yu(s,o){return Array.isArray(o)?o.reduce(yu,s):Object.assign(Object.assign({},s),o)}let Cl=(()=>{class s{constructor(a,l,h,g){this._zone=a,this._injector=l,this._exceptionHandler=h,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),E=new N.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Uo.assertNotInAngularZone(),Zp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Uo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),x.unsubscribe()}});this.isStable=(0,se.T)(v,E.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let h;h=a instanceof _l?a:this._injector.get(xp).resolveComponentFactory(a),this.componentTypes.push(h.componentType);const g=function bD(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Ta),E=h.create(eo.NULL,[],l||h.selector,g),C=E.location.nativeElement,A=E.injector.get(rC,null),x=A&&E.injector.get(ED);return A&&x&&x.registerApplication(C,A),E.onDestroy(()=>{this.detachView(E.hostView),My(this.components,E),x&&x.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;My(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Iy,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(it(Uo),it(eo),it(ih),it(pu))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function My(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Xc=!0,m0=!1;function Tl(){return m0=!0,Xc}function ed(){if(m0)throw new Error("Cannot enable prod mode after platform setup.");Xc=!1}let TD=(()=>{class s{}return s.__NG_ELEMENT_ID__=DD,s})();function DD(s){return function AD(s,o,a){if(hd(s)&&!a){const l=lr(s.index,o);return new Vh(l,l)}return 47&s.type?new Vh(o[16],o):null}(pn(),Me(),16==(16&s))}class Oy{constructor(){}supports(o){return rp(o)}create(o){return new pC(o)}}const RD=(s,o)=>o;class pC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||RD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<rd(l,h,g)?a:l,E=rd(v,h,g),C=v.currentIndex;if(v===l)h--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)h++;else{g||(g=[]);const A=E-h,x=C-h;if(A!=x){for(let j=0;j<A;j++){const J=j<g.length?g[j]:g[j]=0,ve=J+j;x<=ve&&ve<A&&(g[j]=J+1)}g[v.previousIndex]=x-A}}E!==C&&o(v,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!rp(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,E),l=!0),a=a._next}else h=0,function gh(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Cc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new ND(a,l),g,h),o}_verifyReinsertion(o,a,l,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new mC),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ND{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gC{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class mC{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new gC,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rd(s,o,a){const l=s.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class id{constructor(){}supports(o){return o instanceof Map||Tm(o)}create(){return new v0}}class v0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Tm(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const l=new Ry(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Ry{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function w0(){return new Ny([new Oy])}let Ny=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||w0()),deps:[[s,new Js,new Mr]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:w0}),s})();function yC(){return new tg([new id])}let tg=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||yC()),deps:[[s,new Js,new Mr]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Ne(901,"")}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:yC}),s})();const b0=Qp(null,"core",[]);let Gr=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(it(Cl))},s.\u0275mod=kr({type:s}),s.\u0275inj=qt({}),s})()},3942:(Ye,we,R)=>{"use strict";R.d(we,{Z:()=>Ne});var d=R(2090),Z=R(4859),N=R(9681),se=R(1877);class ne{constructor(de,Ie){this._delegate=de,this.firebase=Ie,(0,N._addComponent)(de,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(de,Ie=N._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(de);return!qe.isInitialized()&&"EXPLICIT"===(null===($e=qe.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:Ie})}_removeServiceInstance(de,Ie=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Ie)}_addComponent(de){(0,N._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,N._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function le(){const Ue=function ae(Ue){const de={},Ie={__esModule:!0,initializeApp:function Ae(Be,H={}){const Ee=N.initializeApp(Be,H);if((0,d.r3)(de,Ee.name))return de[Ee.name];const Y=new Ue(Ee,Ie);return de[Ee.name]=Y,Y},app:qe,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Te(Be){const H=Be.name,Ee=H.replace("-compat","");if(N._registerComponent(Be)&&"PUBLIC"===Be.type){const Y=(ie=qe())=>{if("function"!=typeof ie[Ee])throw oe.create("invalid-app-argument",{appName:H});return ie[Ee]()};void 0!==Be.serviceProps&&(0,d.ZB)(Y,Be.serviceProps),Ie[Ee]=Y,Ue.prototype[Ee]=function(...ie){return this._getService.bind(this,H).apply(this,Be.multipleInstances?ie:[])}}return"PUBLIC"===Be.type?Ie[Ee]:null},removeApp:function $e(Be){delete de[Be]},useAsService:function je(Be,H){return"serverAuth"===H?null:H},modularAPIs:N}};function qe(Be){if(!(0,d.r3)(de,Be=Be||N._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Be});return de[Be]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Ce(){return Object.keys(de).map(Be=>de[Be])}}),qe.App=Ue,Ie}(ne);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function de(Ie){(0,d.ZB)(Ue,Ie)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ue}(),V=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=U;!function be(Ue){(0,N.registerVersion)("@firebase/app-compat","0.1.26",Ue)}()},9681:(Ye,we,R)=>{"use strict";R.r(we),R.d(we,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Li,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>nn,_addOrOverwriteComponent:()=>Kt,_apps:()=>Xt,_clearComponents:()=>os,_components:()=>En,_getProvider:()=>qt,_registerComponent:()=>Rr,_removeServiceInstance:()=>Lt,deleteApp:()=>yt,getApp:()=>di,getApps:()=>Ai,initializeApp:()=>Rs,onLog:()=>bn,registerVersion:()=>vn,setLogLevel:()=>oo});var d=R(5861),Z=R(4859),N=R(1877),se=R(2090),ne=R(8766);class he{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function oe(G){const ee=G.getComponent();return"VERSION"===(null==ee?void 0:ee.type)}(Oe)){const Je=Oe.getImmediate();return`${Je.library}/${Je.version}`}return null}).filter(Oe=>Oe).join(" ")}}const ae="@firebase/app",U=new N.Yd("@firebase/app"),Ut="[DEFAULT]",We={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,En=new Map;function nn(G,ee){try{G.container.addComponent(ee)}catch(Oe){U.debug(`Component ${ee.name} failed to register with FirebaseApp ${G.name}`,Oe)}}function Kt(G,ee){G.container.addOrOverwriteComponent(ee)}function Rr(G){const ee=G.name;if(En.has(ee))return U.debug(`There were multiple attempts to register component ${ee}.`),!1;En.set(ee,G);for(const Oe of Xt.values())nn(Oe,G);return!0}function qt(G,ee){const Oe=G.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),G.container.getProvider(ee)}function Lt(G,ee,Oe=Ut){qt(G,ee).clearInstance(Oe)}function os(){En.clear()}const wr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Nr{constructor(ee,Oe,Je){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=Je,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const Li="9.8.2";function Rs(G,ee={}){"object"!=typeof ee&&(ee={name:ee});const Oe=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},ee),Je=Oe.name;if("string"!=typeof Je||!Je)throw wr.create("bad-app-name",{appName:String(Je)});const gt=Xt.get(Je);if(gt){if((0,se.vZ)(G,gt.options)&&(0,se.vZ)(Oe,gt.config))return gt;throw wr.create("duplicate-app",{appName:Je})}const It=new Z.H0(Je);for(const Et of En.values())It.addComponent(Et);const cn=new Nr(G,Oe,It);return Xt.set(Je,cn),cn}function di(G=Ut){const ee=Xt.get(G);if(!ee)throw wr.create("no-app",{appName:G});return ee}function Ai(){return Array.from(Xt.values())}function yt(G){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(G){const ee=G.name;Xt.has(ee)&&(Xt.delete(ee),yield Promise.all(G.container.getProviders().map(Oe=>Oe.delete())),G.isDeleted=!0)})).apply(this,arguments)}function vn(G,ee,Oe){var Je;let gt=null!==(Je=We[G])&&void 0!==Je?Je:G;Oe&&(gt+=`-${Oe}`);const It=gt.match(/\s|\//),cn=ee.match(/\s|\//);if(It||cn){const Et=[`Unable to register library "${gt}" with version "${ee}":`];return It&&Et.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),It&&cn&&Et.push("and"),cn&&Et.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void U.warn(Et.join(" "))}Rr(new Z.wA(`${gt}-version`,()=>({library:gt,version:ee}),"VERSION"))}function bn(G,ee){if(null!==G&&"function"!=typeof G)throw wr.create("invalid-log-argument");(0,N.Am)(G,ee)}function oo(G){(0,N.Ub)(G)}const Sn="firebase-heartbeat-store";let Si=null;function Go(){return Si||(Si=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(G,ee)=>{0===ee&&G.createObjectStore(Sn)}}).catch(G=>{throw wr.create("storage-open",{originalErrorMessage:G.message})})),Si}function ut(){return(ut=(0,d.Z)(function*(G){try{return(yield Go()).transaction(Sn).objectStore(Sn).get(pi(G))}catch(ee){throw wr.create("storage-get",{originalErrorMessage:ee.message})}})).apply(this,arguments)}function vt(G,ee){return Er.apply(this,arguments)}function Er(){return(Er=(0,d.Z)(function*(G,ee){try{const Je=(yield Go()).transaction(Sn,"readwrite");return yield Je.objectStore(Sn).put(ee,pi(G)),Je.done}catch(Oe){throw wr.create("storage-set",{originalErrorMessage:Oe.message})}})).apply(this,arguments)}function pi(G){return`${G.name}!${G.options.appId}`}class br{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new q(Oe),this._heartbeatsCachePromise=this._storage.read().then(Je=>(this._heartbeatsCache=Je,Je))}triggerHeartbeat(){var ee=this;return(0,d.Z)(function*(){const Je=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=Cr();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==gt&&!ee._heartbeatsCache.heartbeats.some(It=>It.date===gt))return ee._heartbeatsCache.heartbeats.push({date:gt,agent:Je}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(It=>{const cn=new Date(It.date).valueOf();return Date.now()-cn<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,d.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Oe=Cr(),{heartbeatsToSend:Je,unsentEntries:gt}=function B(G,ee=1024){const Oe=[];let Je=G.slice();for(const gt of G){const It=Oe.find(cn=>cn.agent===gt.agent);if(It){if(It.dates.push(gt.date),W(Oe)>ee){It.dates.pop();break}}else if(Oe.push({agent:gt.agent,dates:[gt.date]}),W(Oe)>ee){Oe.pop();break}Je=Je.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:Je}}(ee._heartbeatsCache.heartbeats),It=(0,se.L)(JSON.stringify({version:2,heartbeats:Je}));return ee._heartbeatsCache.lastSentHeartbeatDate=Oe,gt.length>0?(ee._heartbeatsCache.heartbeats=gt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),It})()}}function Cr(){return(new Date).toISOString().substring(0,10)}class q{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,d.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function Ht(G){return ut.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Oe=this;return(0,d.Z)(function*(){var Je;if(yield Oe._canUseIndexedDBPromise){const It=yield Oe.read();return vt(Oe.app,{lastSentHeartbeatDate:null!==(Je=ee.lastSentHeartbeatDate)&&void 0!==Je?Je:It.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Oe=this;return(0,d.Z)(function*(){var Je;if(yield Oe._canUseIndexedDBPromise){const It=yield Oe.read();return vt(Oe.app,{lastSentHeartbeatDate:null!==(Je=ee.lastSentHeartbeatDate)&&void 0!==Je?Je:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...ee.heartbeats]})}})()}}function W(G){return(0,se.L)(JSON.stringify({version:2,heartbeats:G})).length}!function De(G){Rr(new Z.wA("platform-logger",ee=>new he(ee),"PRIVATE")),Rr(new Z.wA("heartbeat",ee=>new br(ee),"PRIVATE")),vn(ae,"0.7.25",G),vn(ae,"0.7.25","esm2017"),vn("fire-js","")}("")},4859:(Ye,we,R)=>{"use strict";R.d(we,{H0:()=>ae,wA:()=>N});var d=R(5861),Z=R(2090);class N{constructor(U,V,X){this.name=U,this.instanceFactory=V,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const se="[DEFAULT]";class ne{constructor(U,V){this.name=U,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const V=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(V)){const X=new Z.BH;if(this.instancesDeferred.set(V,X),this.isInitialized(V)||this.shouldAutoInitialize())try{const Re=this.getOrInitializeService({instanceIdentifier:V});Re&&X.resolve(Re)}catch(Re){}}return this.instancesDeferred.get(V).promise}getImmediate(U){var V;const X=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),Re=null!==(V=null==U?void 0:U.optional)&&void 0!==V&&V;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Re)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(be){if(Re)return null;throw be}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function oe(le){return"EAGER"===le.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:se})}catch(V){}for(const[V,X]of this.instancesDeferred.entries()){const Re=this.normalizeInstanceIdentifier(V);try{const be=this.getOrInitializeService({instanceIdentifier:Re});X.resolve(be)}catch(be){}}}}clearInstance(U=se){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,d.Z)(function*(){const V=Array.from(U.instances.values());yield Promise.all([...V.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...V.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=se){return this.instances.has(U)}getOptions(U=se){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:V={}}=U,X=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Re=this.getOrInitializeService({instanceIdentifier:X,options:V});for(const[be,Ne]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(be)&&Ne.resolve(Re);return Re}onInit(U,V){var X;const Re=this.normalizeInstanceIdentifier(V),be=null!==(X=this.onInitCallbacks.get(Re))&&void 0!==X?X:new Set;be.add(U),this.onInitCallbacks.set(Re,be);const Ne=this.instances.get(Re);return Ne&&U(Ne,Re),()=>{be.delete(U)}}invokeOnInitCallbacks(U,V){const X=this.onInitCallbacks.get(V);if(X)for(const Re of X)try{Re(U,V)}catch(be){}}getOrInitializeService({instanceIdentifier:U,options:V={}}){let X=this.instances.get(U);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(le=U,le===se?void 0:le),options:V}),this.instances.set(U,X),this.instancesOptions.set(U,V),this.invokeOnInitCallbacks(X,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,X)}catch(Re){}var le;return X||null}normalizeInstanceIdentifier(U=se){return this.component?this.component.multipleInstances?U:se:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const V=this.getProvider(U.name);if(V.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);V.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const V=new ne(U,this);return this.providers.set(U,V),V}getProviders(){return Array.from(this.providers.values())}}},1877:(Ye,we,R)=>{"use strict";R.d(we,{Am:()=>le,Ub:()=>ae,Yd:()=>oe,in:()=>Z});const d=[];var Z=(()=>{return(U=Z||(Z={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",Z;var U})();const N={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},se=Z.INFO,ne={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},he=(U,V,...X)=>{if(V<U.logLevel)return;const Re=(new Date).toISOString(),be=ne[V];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[be](`[${Re}]  ${U.name}:`,...X)};class oe{constructor(V){this.name=V,this._logLevel=se,this._logHandler=he,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in Z))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?N[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...V),this._logHandler(this,Z.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...V),this._logHandler(this,Z.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...V),this._logHandler(this,Z.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...V),this._logHandler(this,Z.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...V),this._logHandler(this,Z.ERROR,...V)}}function ae(U){d.forEach(V=>{V.setLogLevel(U)})}function le(U,V){for(const X of d){let Re=null;V&&V.level&&(Re=N[V.level]),X.userLogHandler=null===U?null:(be,Ne,...Ue)=>{const de=Ue.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch($e){return null}}).filter(Ie=>Ie).join(" ");Ne>=(null!=Re?Re:be.logLevel)&&U({level:Z[Ne].toLowerCase(),message:de,args:Ue,type:be.name})}}}},8766:(Ye,we,R)=>{"use strict";R.d(we,{Lj:()=>Ae,X3:()=>qe});var d=R(5861);let N,se;const oe=new WeakMap,ae=new WeakMap,le=new WeakMap,U=new WeakMap,V=new WeakMap;let be={get(H,Ee,Y){if(H instanceof IDBTransaction){if("done"===Ee)return ae.get(H);if("objectStoreNames"===Ee)return H.objectStoreNames||le.get(H);if("store"===Ee)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return Ie(H[Ee])},set:(H,Ee,Y)=>(H[Ee]=Y,!0),has:(H,Ee)=>H instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in H};function de(H){return"function"==typeof H?function Ue(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...Ee){return H.apply($e(this),Ee),Ie(oe.get(this))}:function(...Ee){return Ie(H.apply($e(this),Ee))}:function(Ee,...Y){const ie=H.call($e(this),Ee,...Y);return le.set(ie,Ee.sort?Ee.sort():[Ee]),Ie(ie)}}(H):(H instanceof IDBTransaction&&function Re(H){if(ae.has(H))return;const Ee=new Promise((Y,ie)=>{const te=()=>{H.removeEventListener("complete",_e),H.removeEventListener("error",ue),H.removeEventListener("abort",ue)},_e=()=>{Y(),te()},ue=()=>{ie(H.error||new DOMException("AbortError","AbortError")),te()};H.addEventListener("complete",_e),H.addEventListener("error",ue),H.addEventListener("abort",ue)});ae.set(H,Ee)}(H),((H,Ee)=>Ee.some(Y=>H instanceof Y))(H,function ne(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,be):H)}function Ie(H){if(H instanceof IDBRequest)return function X(H){const Ee=new Promise((Y,ie)=>{const te=()=>{H.removeEventListener("success",_e),H.removeEventListener("error",ue)},_e=()=>{Y(Ie(H.result)),te()},ue=()=>{ie(H.error),te()};H.addEventListener("success",_e),H.addEventListener("error",ue)});return Ee.then(Y=>{Y instanceof IDBCursor&&oe.set(Y,H)}).catch(()=>{}),V.set(Ee,H),Ee}(H);if(U.has(H))return U.get(H);const Ee=de(H);return Ee!==H&&(U.set(H,Ee),V.set(Ee,H)),Ee}const $e=H=>V.get(H);function qe(H,Ee,{blocked:Y,upgrade:ie,blocking:te,terminated:_e}={}){const ue=indexedDB.open(H,Ee),ke=Ie(ue);return ie&&ue.addEventListener("upgradeneeded",dt=>{ie(Ie(ue.result),dt.oldVersion,dt.newVersion,Ie(ue.transaction))}),Y&&ue.addEventListener("blocked",()=>Y()),ke.then(dt=>{_e&&dt.addEventListener("close",()=>_e()),te&&dt.addEventListener("versionchange",()=>te())}).catch(()=>{}),ke}function Ae(H,{blocked:Ee}={}){const Y=indexedDB.deleteDatabase(H);return Ee&&Y.addEventListener("blocked",()=>Ee()),Ie(Y).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],je=new Map;function Be(H,Ee){if(!(H instanceof IDBDatabase)||Ee in H||"string"!=typeof Ee)return;if(je.get(Ee))return je.get(Ee);const Y=Ee.replace(/FromIndex$/,""),ie=Ee!==Y,te=Te.includes(Y);if(!(Y in(ie?IDBIndex:IDBObjectStore).prototype)||!te&&!Ce.includes(Y))return;const _e=function(){var ue=(0,d.Z)(function*(ke,...dt){const $t=this.transaction(ke,te?"readwrite":"readonly");let Ut=$t.store;return ie&&(Ut=Ut.index(dt.shift())),(yield Promise.all([Ut[Y](...dt),te&&$t.done]))[0]});return function(dt){return ue.apply(this,arguments)}}();return je.set(Ee,_e),_e}!function Ne(H){be=H(be)}(H=>JO(QO({},H),{get:(Ee,Y,ie)=>Be(Ee,Y)||H.get(Ee,Y,ie),has:(Ee,Y)=>!!Be(Ee,Y)||H.has(Ee,Y)}))},5861:(Ye,we,R)=>{"use strict";function d(N,se,ne,he,oe,ae,le){try{var U=N[ae](le),V=U.value}catch(X){return void ne(X)}U.done?se(V):Promise.resolve(V).then(he,oe)}function Z(N){return function(){var se=this,ne=arguments;return new Promise(function(he,oe){var ae=N.apply(se,ne);function le(V){d(ae,he,oe,le,U,"next",V)}function U(V){d(ae,he,oe,le,U,"throw",V)}le(void 0)})}}R.d(we,{Z:()=>Z})}},Ye=>{Ye(Ye.s=3535)}]);