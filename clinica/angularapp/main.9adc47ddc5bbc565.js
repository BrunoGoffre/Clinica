"use strict";var Hk=Object.defineProperty,Gk=Object.defineProperties,qk=Object.getOwnPropertyDescriptors,YM=Object.getOwnPropertySymbols,zk=Object.prototype.hasOwnProperty,Wk=Object.prototype.propertyIsEnumerable,QM=(Je,we,P)=>we in Je?Hk(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:P}):Je[we]=P,JM=(Je,we)=>{for(var P in we||(we={}))zk.call(we,P)&&QM(Je,P,we[P]);if(YM)for(var P of YM(we))Wk.call(we,P)&&QM(Je,P,we[P]);return Je},XM=(Je,we)=>Gk(Je,qk(we));(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{2011:(Je,we,P)=>{P.d(we,{Dh:()=>se,GT:()=>ge,cc:()=>Te,hO:()=>He,on:()=>$,pX:()=>te,xv:()=>he});var h=P(5e3),J=P(127),N=P(5813);Je=P.hmd(Je);const ae=["ngOnDestroy"],te=(be,Ge,Ze,Ce={})=>new Proxy(be,{get:(ve,Ee)=>Ze.runOutsideAngular(()=>{var Be;if(be[Ee])return(null===(Be=null==Ce?void 0:Ce.spy)||void 0===Be?void 0:Be.get)&&Ce.spy.get(Ee,be[Ee]),be[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const Ue=Ge.toPromise().then(j=>{const ye=j&&j[Ee];return"function"==typeof ye?ye.bind(j):ye&&ye.then?ye.then(W=>Ze.run(()=>W)):Ze.run(()=>ye)});return new Proxy(()=>{},{get:(j,ye)=>Ue[ye],apply:(j,ye,W)=>Ue.then(ne=>{var X;const me=ne&&ne(...W);return(null===(X=null==Ce?void 0:Ce.spy)||void 0===X?void 0:X.apply)&&Ce.spy.apply(Ee,W,me),me})})})}),ge=(be,Ge)=>{Ge.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Ce=>{Object.defineProperty(be.prototype,Ce,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Ce))})})};class le{constructor(Ge){return Ge}}const se=new h.OlP("angularfire2.app.options"),he=new h.OlP("angularfire2.app.name");function $(be,Ge,Ze){const ve="object"==typeof Ze&&Ze||{};ve.name=ve.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Be=J.Z.apps.filter(Ue=>Ue&&Ue.name===ve.name)[0]||Ge.runOutsideAngular(()=>J.Z.initializeApp(be,ve));try{JSON.stringify(be)!==JSON.stringify(Be.options)&&B("error",`${Be.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new le(Be)}const B=(be,...Ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)},ee={provide:le,useFactory:$,deps:[se,h.R0b,[new h.FiY,he]]};let He=(()=>{class be{constructor(Ze){J.Z.registerVersion("angularfire",N.q4.full,"core"),J.Z.registerVersion("angularfire",N.q4.full,"app-compat"),J.Z.registerVersion("angular",h.q4F.full,Ze.toString())}static initializeApp(Ze,Ce){return{ngModule:be,providers:[{provide:se,useValue:Ze},{provide:he,useValue:Ce}]}}}return be.\u0275fac=function(Ze){return new(Ze||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[ee]}),be})();function Te(be,Ge,Ze,Ce,ve){const[,Ee,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===be)||[];if(Ee)return function Re(be,Ge){try{return be.toString()===Ge.toString()}catch(Ze){return be===Ge}}(ve,Be)||(fe("error",`${Ge} was already initialized on the ${Ze} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:ve,was:Be})),Ee;{const Ue=Ce();return globalThis.\u0275AngularfireInstanceCache.push([be,Ue,ve]),Ue}}const Le=!!Je.hot,fe=(be,...Ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,P)=>{P.d(we,{q4:()=>$o,iC:()=>Da,fc:()=>bi,HU:()=>dd,vb:()=>ld,JM:()=>Ns});var h=P(5e3),J=P(5867),N=P(5861),ae=P(9681),te=P(2090),ge=P(4859),le=P(1877),se=P(8766);const he="@firebase/installations",$="0.5.9",ee=`w:${$}`,He="FIS_v2",Ge=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(I){return I instanceof te.ZR&&I.code.includes("request-failed")}function Ce({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ve(I){return{token:I.token,requestStatus:2,expiresIn:ne(I.expiresIn),creationTime:Date.now()}}function Ee(I,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,N.Z)(function*(I,D){const F=(yield D.json()).error;return Ge.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function j(I,{refreshToken:D}){const M=Ue(I);return M.append("Authorization",function X(I){return`${He} ${I}`}(D)),M}function ye(I){return W.apply(this,arguments)}function W(){return(W=(0,N.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function ne(I){return Number(I.replace("s","000"))}function me(I,D){return oe.apply(this,arguments)}function oe(){return(oe=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:M}){const F=Ce(I),K=Ue(I),re=D.getImmediate({optional:!0});if(re){const mt=yield re.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Xe={method:"POST",headers:K,body:JSON.stringify({fid:M,authVersion:He,appId:I.appId,sdkVersion:ee})},et=yield ye(()=>fetch(F,Xe));if(et.ok){const mt=yield et.json();return{fid:mt.fid||M,registrationStatus:2,refreshToken:mt.refreshToken,authToken:ve(mt.authToken)}}throw yield Ee("Create Installation",et)})).apply(this,arguments)}function Pe(I){return new Promise(D=>{setTimeout(D,I)})}const jt=/^[cdef][\w-]{21}$/;function ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function Jt(I){return function ut(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return jt.test(M)?M:""}catch(I){return""}}function Cn(I){return`${I.appName}!${I.appId}`}const nn=new Map;function Yt(I,D){const M=Cn(I);Pt(M,D),function Ji(I,D){const M=function yr(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=I=>{Pt(I.data.key,I.data.fid)}),ti}();M&&M.postMessage({key:I,fid:D}),function Rr(){0===nn.size&&ti&&(ti.close(),ti=null)}()}(M,D)}function Pt(I,D){const M=nn.get(I);if(M)for(const F of M)F(D)}let ti=null;const ni="firebase-installations-store";let mi=null;function ft(){return mi||(mi=(0,se.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(ni)}})),mi}function ri(I,D){return wn.apply(this,arguments)}function wn(){return(wn=(0,N.Z)(function*(I,D){const M=Cn(I),K=(yield ft()).transaction(ni,"readwrite"),re=K.objectStore(ni),Me=yield re.get(M);return yield re.put(D,M),yield K.done,(!Me||Me.fid!==D.fid)&&Yt(I,D.fid),D})).apply(this,arguments)}function Dn(I){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,N.Z)(function*(I){const D=Cn(I),F=(yield ft()).transaction(ni,"readwrite");yield F.objectStore(ni).delete(D),yield F.done})).apply(this,arguments)}function ii(I,D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,N.Z)(function*(I,D){const M=Cn(I),K=(yield ft()).transaction(ni,"readwrite"),re=K.objectStore(ni),Me=yield re.get(M),Xe=D(Me);return void 0===Xe?yield re.delete(M):yield re.put(Xe,M),yield K.done,Xe&&(!Me||Me.fid!==Xe.fid)&&Yt(I,Xe.fid),Xe})).apply(this,arguments)}function Pn(I){return yi.apply(this,arguments)}function yi(){return(yi=(0,N.Z)(function*(I){let D;const M=yield ii(I.appConfig,F=>{const K=Do(F),re=$t(I,K);return D=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function Do(I){return qs(I||{fid:ze(),registrationStatus:0})}function $t(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ge.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(I,D){return yt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:_r(I)}:{installationEntry:D}}function yt(){return(yt=(0,N.Z)(function*(I,D){try{const M=yield me(I,D);return ri(I.appConfig,M)}catch(M){throw Ze(M)&&409===M.customData.serverCode?yield Dn(I.appConfig):yield ri(I.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function _r(I){return si.apply(this,arguments)}function si(){return(si=(0,N.Z)(function*(I){let D=yield Ft(I.appConfig);for(;1===D.registrationStatus;)yield Pe(100),D=yield Ft(I.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Pn(I);return F||M}return D})).apply(this,arguments)}function Ft(I){return ii(I,D=>{if(!D)throw Ge.create("installation-not-found");return qs(D)})}function qs(I){return function vr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function wr(I,D){return L.apply(this,arguments)}function L(){return(L=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},M){const F=G(I,M),K=j(I,M),re=D.getImmediate({optional:!0});if(re){const mt=yield re.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Xe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},et=yield ye(()=>fetch(F,Xe));if(et.ok)return ve(yield et.json());throw yield Ee("Generate Auth Token",et)})).apply(this,arguments)}function G(I,{fid:D}){return`${Ce(I)}/${D}/authTokens:generate`}function q(I){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(I,D=!1){let M;const F=yield ii(I.appConfig,re=>{if(!bt(re))throw Ge.create("not-registered");const Me=re.authToken;if(!D&&cn(Me))return re;if(1===Me.requestStatus)return M=H(I,D),re;{if(!navigator.onLine)throw Ge.create("app-offline");const Xe=Gn(re);return M=Qe(I,Xe),Xe}});return M?yield M:F.authToken})).apply(this,arguments)}function H(I,D){return Q.apply(this,arguments)}function Q(){return(Q=(0,N.Z)(function*(I,D){let M=yield Se(I.appConfig);for(;1===M.authToken.requestStatus;)yield Pe(100),M=yield Se(I.appConfig);const F=M.authToken;return 0===F.requestStatus?q(I,D):F})).apply(this,arguments)}function Se(I){return ii(I,D=>{if(!bt(D))throw Ge.create("not-registered");return function Or(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Qe(I,D){return ct.apply(this,arguments)}function ct(){return(ct=(0,N.Z)(function*(I,D){try{const M=yield wr(I,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield ri(I.appConfig,F),M}catch(M){if(!Ze(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ri(I.appConfig,F)}else yield Dn(I.appConfig);throw M}})).apply(this,arguments)}function bt(I){return void 0!==I&&2===I.registrationStatus}function cn(I){return 2===I.requestStatus&&!function wt(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Gn(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function ua(){return(ua=(0,N.Z)(function*(I){const D=I,{installationEntry:M,registrationPromise:F}=yield Pn(D);return F?F.catch(console.error):q(D).catch(console.error),M.fid})).apply(this,arguments)}function la(){return(la=(0,N.Z)(function*(I,D=!1){const M=I;return yield qn(M),(yield q(M,D)).token})).apply(this,arguments)}function qn(I){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,N.Z)(function*(I){const{registrationPromise:D}=yield Pn(I);D&&(yield D)})).apply(this,arguments)}function To(I){return Ge.create("missing-app-config-values",{valueName:I})}const qr="installations",st=I=>{const D=I.getProvider("app").getImmediate(),M=function rr(I){if(!I||!I.options)throw To("App Configuration");if(!I.name)throw To("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!I.options[M])throw To(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},en=I=>{const D=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(D,qr).getImmediate();return{getId:()=>function ru(I){return ua.apply(this,arguments)}(M),getToken:K=>function iu(I){return la.apply(this,arguments)}(M,K)}};(function zr(){(0,ae._registerComponent)(new ge.wA(qr,st,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("installations-internal",en,"PRIVATE"))})(),(0,ae.registerVersion)(he,$),(0,ae.registerVersion)(he,$,"esm2017");const Si="@firebase/remote-config",Tn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yp{constructor(D,M,F,K){this.client=D,this.storage=M,this.storageCache=F,this.logger=K}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,K=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var M=this;return(0,N.Z)(function*(){const[F,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return K;D.eTag=K&&K.eTag;const re=yield M.client.fetch(D),Me=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Me.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Me),re})()}}function Uc(I=navigator){return I.languages&&I.languages[0]||I.language}class Er{constructor(D,M,F,K,re,Me){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=K,this.apiKey=re,this.appId=Me}fetch(D){var M=this;return(0,N.Z)(function*(){const[F,K]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},et={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:M.appId,language_code:Uc()},mt={method:"POST",headers:Xe,body:JSON.stringify(et)},Vt=fetch(Me,mt),It=new Promise((Xt,di)=>{D.signal.addEventListener(()=>{const Vs=new Error("The operation was aborted.");Vs.name="AbortError",di(Vs)})});let Zn;try{yield Promise.race([Vt,It]),Zn=yield Vt}catch(Xt){let di="fetch-client-network";throw"AbortError"===Xt.name&&(di="fetch-timeout"),Tn.create(di,{originalErrorMessage:Xt.message})}let Bn=Zn.status;const Fs=Zn.headers.get("ETag")||void 0;let Ls,tn;if(200===Zn.status){let Xt;try{Xt=yield Zn.json()}catch(di){throw Tn.create("fetch-client-parse",{originalErrorMessage:di.message})}Ls=Xt.entries,tn=Xt.state}if("INSTANCE_STATE_UNSPECIFIED"===tn?Bn=500:"NO_CHANGE"===tn?Bn=304:("NO_TEMPLATE"===tn||"EMPTY_CONFIG"===tn)&&(Ls={}),304!==Bn&&200!==Bn)throw Tn.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:Fs,config:Ls}})()}}class _p{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,N.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var K=this;return(0,N.Z)(function*(){yield function Cs(I,D){return new Promise((M,F)=>{const K=Math.max(D-Date.now(),0),re=setTimeout(M,K);I.addEventListener(()=>{clearTimeout(re),F(Tn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const re=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),re}catch(re){if(!function Bc(I){if(!(I instanceof te.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(re))throw re;const Me={throttleEndTimeMillis:Date.now()+(0,te.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Me),K.attemptFetch(D,Me)}})()}}class jc{constructor(D,M,F,K,re){this.app=D,this._client=M,this._storageCache=F,this._storage=K,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ol(I,D){const M=I.target.error||void 0;return Tn.create(D,{originalErrorMessage:M&&M.message})}const Ds="app_namespace_store";class bp{constructor(D,M,F,K=function Ep(){return new Promise((I,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{D(ol(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(M){D(Tn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,re)=>{const Xe=F.transaction([Ds],"readonly").objectStore(Ds),et=M.createCompositeKey(D);try{const mt=Xe.get(et);mt.onerror=Vt=>{re(ol(Vt,"storage-get"))},mt.onsuccess=Vt=>{const It=Vt.target.result;K(It?It.value:void 0)}}catch(mt){re(Tn.create("storage-get",{originalErrorMessage:mt&&mt.message}))}})})()}set(D,M){var F=this;return(0,N.Z)(function*(){const K=yield F.openDbPromise;return new Promise((re,Me)=>{const et=K.transaction([Ds],"readwrite").objectStore(Ds),mt=F.createCompositeKey(D);try{const Vt=et.put({compositeKey:mt,value:M});Vt.onerror=It=>{Me(ol(It,"storage-set"))},Vt.onsuccess=()=>{re()}}catch(Vt){Me(Tn.create("storage-set",{originalErrorMessage:Vt&&Vt.message}))}})})()}delete(D){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,re)=>{const Xe=F.transaction([Ds],"readwrite").objectStore(Ds),et=M.createCompositeKey(D);try{const mt=Xe.delete(et);mt.onerror=Vt=>{re(ol(Vt,"storage-delete"))},mt.onsuccess=()=>{K()}}catch(mt){re(Tn.create("storage-delete",{originalErrorMessage:mt&&mt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Hc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),re=yield M;re&&(D.lastFetchStatus=re);const Me=yield F;Me&&(D.lastSuccessfulFetchTimestampMillis=Me);const Xe=yield K;Xe&&(D.activeConfig=Xe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function uu(){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,N.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Ao(){(0,ae._registerComponent)(new ge.wA("remote-config",function I(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tn.create("registration-window");if(!(0,te.hl)())throw Tn.create("indexed-db-unavailable");const{projectId:re,apiKey:Me,appId:Xe}=F.options;if(!re)throw Tn.create("registration-project-id");if(!Me)throw Tn.create("registration-api-key");if(!Xe)throw Tn.create("registration-app-id");const et=new bp(Xe,F.name,M=M||"firebase"),mt=new Hc(et),Vt=new le.Yd(Si);Vt.logLevel=le.in.ERROR;const It=new Er(K,ae.SDK_VERSION,M,re,Me,Xe),Zn=new _p(It,et),Bn=new yp(Zn,et,mt,Vt),Fs=new jc(F,Bn,mt,et,Vt);return function rn(I){const D=(0,te.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Fs),Fs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Si,"0.3.8"),(0,ae.registerVersion)(Si,"0.3.8","esm2017")}();const qc="/firebase-messaging-sw.js",br="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",So="google.c.a.c_id",zc="google.c.a.c_l",jh="google.c.a.ts",Wc="google.c.a.e";var xo=(()=>{return(I=xo||(xo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",xo;var I})();function Nr(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zc(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),K=new Uint8Array(F.length);for(let re=0;re<F.length;++re)K[re]=F.charCodeAt(re);return K}const kr="fcm_token_details_db",oi="fcm_token_object_Store";function al(I){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(kr))return null;let D=null;return(yield(0,se.X3)(kr,5,{upgrade:(F=(0,N.Z)(function*(K,re,Me,Xe){var et;if(re<2||!K.objectStoreNames.contains(oi))return;const mt=Xe.objectStore(oi),Vt=yield mt.index("fcmSenderId").get(I);if(yield mt.clear(),Vt)if(2===re){const It=Vt;if(!It.auth||!It.p256dh||!It.endpoint)return;D={token:It.fcmToken,createTime:null!==(et=It.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:Nr(It.vapidKey)}}}else if(3===re){const It=Vt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Nr(It.auth),p256dh:Nr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Nr(It.vapidKey)}}}else if(4===re){const It=Vt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Nr(It.auth),p256dh:Nr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Nr(It.vapidKey)}}}}),function(re,Me,Xe,et){return F.apply(this,arguments)})})).close(),yield(0,se.Lj)(kr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),ul(D)?D:null;var F}),Kc.apply(this,arguments)}function ul(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ni="firebase-messaging-store";let $h=null;function sn(){return $h||($h=(0,se.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Ni)}})),$h}function pa(I){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,N.Z)(function*(I){const D=ir(I),F=yield(yield sn()).transaction(Ni).objectStore(Ni).get(D);if(F)return F;{const K=yield al(I.appConfig.senderId);if(K)return yield Qt(I,K),K}})).apply(this,arguments)}function Qt(I,D){return ga.apply(this,arguments)}function ga(){return(ga=(0,N.Z)(function*(I,D){const M=ir(I),K=(yield sn()).transaction(Ni,"readwrite");return yield K.objectStore(Ni).put(D,M),yield K.done,D})).apply(this,arguments)}function lu(I){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,N.Z)(function*(I){const D=ir(I),F=(yield sn()).transaction(Ni,"readwrite");yield F.objectStore(Ni).delete(D),yield F.done})).apply(this,arguments)}function ir({appConfig:I}){return I.appId}const mn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ki(I,D){return sr.apply(this,arguments)}function sr(){return(sr=(0,N.Z)(function*(I,D){const M=yield Oo(I),F=As(D),K={method:"POST",headers:M,body:JSON.stringify(F)};let re;try{re=yield(yield fetch(Fi(I.appConfig),K)).json()}catch(Me){throw mn.create("token-subscribe-failed",{errorInfo:Me})}if(re.error)throw mn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw mn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Qs(I,D){return ts.apply(this,arguments)}function ts(){return(ts=(0,N.Z)(function*(I,D){const M=yield Oo(I),F=As(D.subscriptionOptions),K={method:"PATCH",headers:M,body:JSON.stringify(F)};let re;try{re=yield(yield fetch(`${Fi(I.appConfig)}/${D.token}`,K)).json()}catch(Me){throw mn.create("token-update-failed",{errorInfo:Me})}if(re.error)throw mn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw mn.create("token-update-no-token");return re.token})).apply(this,arguments)}function ma(I,D){return vi.apply(this,arguments)}function vi(){return(vi=(0,N.Z)(function*(I,D){const F={method:"DELETE",headers:yield Oo(I)};try{const re=yield(yield fetch(`${Fi(I.appConfig)}/${D}`,F)).json();if(re.error)throw mn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(K){throw mn.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Fi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Oo(I){return pt.apply(this,arguments)}function pt(){return(pt=(0,N.Z)(function*({appConfig:I,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function As({p256dh:I,auth:D,endpoint:M,vapidKey:F}){const K={web:{endpoint:M,auth:D,p256dh:I}};return F!==Zs&&(K.web.applicationPubKey=F),K}const dl=6048e5;function ya(I){return hl.apply(this,arguments)}function hl(){return(hl=(0,N.Z)(function*(I){const D=yield No(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Nr(D.getKey("auth")),p256dh:Nr(D.getKey("p256dh"))},F=yield pa(I.firebaseDependencies);if(F){if(hu(F.subscriptionOptions,M))return Date.now()>=F.createTime+dl?fl(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield ma(I.firebaseDependencies,F.token)}catch(K){console.warn(K)}return De(I.firebaseDependencies,M)}return De(I.firebaseDependencies,M)})).apply(this,arguments)}function cu(I){return du.apply(this,arguments)}function du(){return(du=(0,N.Z)(function*(I){const D=yield pa(I.firebaseDependencies);D&&(yield ma(I.firebaseDependencies,D.token),yield lu(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function fl(I,D){return Po.apply(this,arguments)}function Po(){return(Po=(0,N.Z)(function*(I,D){try{const M=yield Qs(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Qt(I.firebaseDependencies,F),M}catch(M){throw yield cu(I),M}})).apply(this,arguments)}function De(I,D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,N.Z)(function*(I,D){const F={token:yield ki(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Qt(I,F),F.token})).apply(this,arguments)}function No(I,D){return hn.apply(this,arguments)}function hn(){return(hn=(0,N.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zc(D)})})).apply(this,arguments)}function hu(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Js(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function ai(I,D){if(!D.notification)return;I.notification={};const M=D.notification.title;M&&(I.notification.title=M);const F=D.notification.body;F&&(I.notification.body=F);const K=D.notification.image;K&&(I.notification.image=K)}(D,I),function pl(I,D){!D.data||(I.data=D.data)}(D,I),function gl(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const M=D.fcmOptions.link;M&&(I.fcmOptions.link=M);const F=D.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(D,I),D}function ml(I){return"object"==typeof I&&!!I&&So in I}function Yc(I,D){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function ns(I){return mn.create("missing-app-config-values",{valueName:I})}Yc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ir{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Ip(I){if(!I||!I.options)throw ns("App Configuration Object");if(!I.name)throw ns("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of D)if(!M[F])throw ns(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ui(I){return fu.apply(this,arguments)}function fu(){return(fu=(0,N.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(qc,{scope:br}),I.swRegistration.update().catch(()=>{})}catch(D){throw mn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ss(I,D){return wi.apply(this,arguments)}function wi(){return(wi=(0,N.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield ui(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function yl(I,D){return pu.apply(this,arguments)}function pu(){return(pu=(0,N.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Zs)})).apply(this,arguments)}function _l(){return(_l=(0,N.Z)(function*(I,D){if(!navigator)throw mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mn.create("permission-blocked");return yield yl(I,null==D?void 0:D.vapidKey),yield Ss(I,null==D?void 0:D.serviceWorkerRegistration),ya(I)})).apply(this,arguments)}function _a(I,D,M){return mu.apply(this,arguments)}function mu(){return(mu=(0,N.Z)(function*(I,D,M){const F=yu(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[So],message_name:M[zc],message_time:M[jh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yu(I){switch(I){case xo.NOTIFICATION_CLICKED:return"notification_open";case xo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Jc(){return(Jc=(0,N.Z)(function*(I,D){const M=D.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===xo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Js(M)):I.onMessageHandler.next(Js(M)));const F=M.data;ml(F)&&"1"===F[Wc]&&(yield _a(I,M.messageType,F))})).apply(this,arguments)}const _u="@firebase/messaging",Xc=I=>{const D=new Ir(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Qc(I,D){return Jc.apply(this,arguments)}(D,M)),D},ko=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function gu(I,D){return _l.apply(this,arguments)}(D,F)}};function vu(){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,N.Z)(function*(){try{yield(0,te.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ed(){(0,ae._registerComponent)(new ge.wA("messaging",Xc,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("messaging-internal",ko,"PRIVATE")),(0,ae.registerVersion)(_u,"0.9.13"),(0,ae.registerVersion)(_u,"0.9.13","esm2017")}();const td="analytics",Cp="firebase_id",rs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",to="https://www.googletagmanager.com/gtag/js",Wn=new le.Yd("@firebase/analytics");function nd(I){return Promise.all(I.map(D=>D.catch(M=>M)))}function Dp(I,D){const M=document.createElement("script");M.src=`${to}?l=${I}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Fo(I,D,M,F,K,re){return wu.apply(this,arguments)}function wu(){return(wu=(0,N.Z)(function*(I,D,M,F,K,re){const Me=F[K];try{if(Me)yield D[Me];else{const et=(yield nd(M)).find(mt=>mt.measurementId===K);et&&(yield D[et.appId])}}catch(Xe){Wn.error(Xe)}I("config",K,re)})).apply(this,arguments)}function Tp(I,D,M,F,K){return is.apply(this,arguments)}function is(){return(is=(0,N.Z)(function*(I,D,M,F,K){try{let re=[];if(K&&K.send_to){let Me=K.send_to;Array.isArray(Me)||(Me=[Me]);const Xe=yield nd(M);for(const et of Me){const mt=Xe.find(It=>It.measurementId===et),Vt=mt&&D[mt.appId];if(!Vt){re=[];break}re.push(Vt)}}0===re.length&&(re=Object.values(D)),yield Promise.all(re),I("event",F,K||{})}catch(re){Wn.error(re)}})).apply(this,arguments)}function pe(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(to))return D;return null}const yn=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vi=new class Lt{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function gt(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function on(I){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,N.Z)(function*(I){var D;const{appId:M,apiKey:F}=I,K={method:"GET",headers:gt(F)},re=rs.replace("{app-id}",M),Me=yield fetch(re,K);if(200!==Me.status&&304!==Me.status){let Xe="";try{const et=yield Me.json();(null===(D=et.error)||void 0===D?void 0:D.message)&&(Xe=et.error.message)}catch(et){}throw yn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Xe})}return Me.json()})).apply(this,arguments)}function Ln(I){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,N.Z)(function*(I,D=Vi,M){const{appId:F,apiKey:K,measurementId:re}=I.options;if(!F)throw yn.create("no-app-id");if(!K){if(re)return{measurementId:re,appId:F};throw yn.create("no-api-key")}const Me=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Mt;return setTimeout((0,N.Z)(function*(){Xe.abort()}),void 0!==M?M:6e4),Vn({appId:F,apiKey:K,measurementId:re},Me,Xe,D)})).apply(this,arguments)}function Vn(I,D,M){return ss.apply(this,arguments)}function ss(){return(ss=(0,N.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:M},F,K=Vi){const{appId:re,measurementId:Me}=I;try{yield or(F,D)}catch(Xe){if(Me)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Xe.message}]`),{appId:re,measurementId:Me};throw Xe}try{const Xe=yield on(I);return K.deleteThrottleMetadata(re),Xe}catch(Xe){if(!bu(Xe)){if(K.deleteThrottleMetadata(re),Me)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Xe.message}]`),{appId:re,measurementId:Me};throw Xe}const et=503===Number(Xe.customData.httpStatus)?(0,te.$s)(M,K.intervalMillis,30):(0,te.$s)(M,K.intervalMillis),mt={throttleEndTimeMillis:Date.now()+et,backoffCount:M+1};return K.setThrottleMetadata(re,mt),Wn.debug(`Calling attemptFetch again in ${et} millis`),Vn(I,mt,F,K)}})).apply(this,arguments)}function or(I,D){return new Promise((M,F)=>{const K=Math.max(D-Date.now(),0),re=setTimeout(M,K);I.addEventListener(()=>{clearTimeout(re),F(yn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function bu(I){if(!(I instanceof te.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Mt{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function rd(){return io.apply(this,arguments)}function io(){return(io=(0,N.Z)(function*(){if(!(0,te.hl)())return Wn.warn(yn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(I){return Wn.warn(yn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Lo(){return(Lo=(0,N.Z)(function*(I,D,M,F,K,re,Me){var Xe;const et=Ln(I);et.then(Bn=>{M[Bn.measurementId]=Bn.appId,I.options.measurementId&&Bn.measurementId!==I.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>Wn.error(Bn)),D.push(et);const mt=rd().then(Bn=>{if(Bn)return F.getId()}),[Vt,It]=yield Promise.all([et,mt]);pe()||Dp(re,Vt.measurementId),K("js",new Date);const Zn=null!==(Xe=null==Me?void 0:Me.config)&&void 0!==Xe?Xe:{};return Zn.origin="firebase",Zn.update=!0,null!=It&&(Zn[Cp]=It),K("config",Vt.measurementId,Zn),Vt.measurementId})).apply(this,arguments)}class so{constructor(D){this.app=D}_delete(){return delete fn[this.app.options.appId],Promise.resolve()}}let fn={},An=[];const wl={};let Ms,Dr,oo="dataLayer",dt=!1;function Ke(I,D,M){!function ci(){const I=[];if((0,te.ru)()&&I.push("This is a browser extension environment."),(0,te.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,K)=>`(${K+1}) ${F}`).join(" "),M=yn.create("invalid-analytics-context",{errorInfo:D});Wn.warn(M.message)}}();const F=I.options.appId;if(!F)throw yn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw yn.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fn[F])throw yn.create("already-exists",{id:F});if(!dt){!function no(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(oo);const{wrappedGtag:re,gtagCore:Me}=function Ap(I,D,M,F,K){let re=function(...Me){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(re=window[K]),window[K]=function Eu(I,D,M,F){function re(){return(re=(0,N.Z)(function*(Me,Xe,et){try{"event"===Me?yield Tp(I,D,M,Xe,et):"config"===Me?yield Fo(I,D,M,F,Xe,et):I("set",Xe)}catch(mt){Wn.error(mt)}})).apply(this,arguments)}return function K(Me,Xe,et){return re.apply(this,arguments)}}(re,I,D,M),{gtagCore:re,wrappedGtag:window[K]}}(fn,An,wl,oo,"gtag");Dr=re,Ms=Me,dt=!0}return fn[F]=function li(I,D,M,F,K,re,Me){return Lo.apply(this,arguments)}(I,An,wl,D,Ms,oo,M),new so(I)}function _t(){return(_t=(0,N.Z)(function*(I,D,M,F,K){if(K&&K.global)I("event",M,F);else{const re=yield D;I("event",M,Object.assign(Object.assign({},F),{send_to:re}))}})).apply(this,arguments)}function _n(){return as.apply(this,arguments)}function as(){return(as=(0,N.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}const sd="@firebase/analytics";!function El(){(0,ae._registerComponent)(new ge.wA(td,(D,{options:M})=>Ke(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ge.wA("analytics-internal",function I(D){try{const M=D.getProvider(td).getImmediate();return{logEvent:(F,K,re)=>function Mp(I,D,M,F){I=(0,te.m9)(I),function Rs(I,D,M,F,K){return _t.apply(this,arguments)}(Dr,fn[I.app.options.appId],D,M,F).catch(K=>Wn.error(K))}(M,F,K,re)}}catch(M){throw yn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(sd,"0.7.9"),(0,ae.registerVersion)(sd,"0.7.9","esm2017")}();var zh=P(4408),Cu=P(7565);const jo=new class Ut extends Cu.v{}(class Un extends zh.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var Du=P(4986),od=P(8505),ar=P(5363),Fr=P(9468);const $o=new h.GfV("7.3.0"),Ho="__angularfire_symbol__analyticsIsSupportedValue",us="__angularfire_symbol__analyticsIsSupported",Kr="__angularfire_symbol__remoteConfigIsSupportedValue",ji="__angularfire_symbol__remoteConfigIsSupported",ao="__angularfire_symbol__messagingIsSupportedValue",bl="__angularfire_symbol__messagingIsSupported";function Ns(I,D,M){if(D){if(1===D.length)return D[0];const re=D.filter(Me=>Me.app===M);if(1===re.length)return re[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[us]||(globalThis[us]=_n().then(I=>globalThis[Ho]=I).catch(()=>globalThis[Ho]=!1)),globalThis[bl]||(globalThis[bl]=vu().then(I=>globalThis[ao]=I).catch(()=>globalThis[ao]=!1)),globalThis[ji]||(globalThis[ji]=uu().then(I=>globalThis[Kr]=I).catch(()=>globalThis[Kr]=!1));const ld=(I,D)=>{const M=D?[D]:(0,J.C6)(),F=[];return M.forEach(K=>{K.container.getProvider(I).instances.forEach(Me=>{F.includes(Me)||F.push(Me)})}),F};function ls(){}class cd{constructor(D,M=jo){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const K=this.zone;return this.delegate.schedule(function(Me){K.runGuarded(()=>{D.apply(this,[Me])})},M,F)}}class Ca{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ls,{},ls,ls)),M.pipe((0,od.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dd=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new cd(Zone.current)),this.insideAngular=M.run(()=>new cd(Zone.current,Du.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function cs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function bi(I){return I.pipe((0,ar.Q)(cs().outsideAngular))}function Da(I){return cs(),function uo(I){return function(M){return(M=M.lift(new Ca(I.ngZone))).pipe((0,Fr.R)(I.outsideAngular),(0,ar.Q)(I.insideAngular))}}(cs())(I)}},2090:(Je,we,P)=>{P.d(we,{$s:()=>Ft,BH:()=>He,G6:()=>Ue,L:()=>se,LL:()=>oe,Mn:()=>Ee,Sg:()=>Te,UG:()=>fe,US:()=>ge,ZB:()=>B,ZR:()=>me,b$:()=>Ze,d:()=>Ce,eu:()=>ye,hl:()=>j,jU:()=>be,m9:()=>wr,ne:()=>mi,pd:()=>vs,r3:()=>Mr,ru:()=>Ge,tV:()=>he,uI:()=>Le,vZ:()=>ti,w1:()=>ve,xO:()=>Rr,xb:()=>Pt,z$:()=>Re,zI:()=>W,zd:()=>Ai});const ae=function(L){const G=[];let q=0;for(let Ie=0;Ie<L.length;Ie++){let H=L.charCodeAt(Ie);H<128?G[q++]=H:H<2048?(G[q++]=H>>6|192,G[q++]=63&H|128):55296==(64512&H)&&Ie+1<L.length&&56320==(64512&L.charCodeAt(Ie+1))?(H=65536+((1023&H)<<10)+(1023&L.charCodeAt(++Ie)),G[q++]=H>>18|240,G[q++]=H>>12&63|128,G[q++]=H>>6&63|128,G[q++]=63&H|128):(G[q++]=H>>12|224,G[q++]=H>>6&63|128,G[q++]=63&H|128)}return G},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,G){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let H=0;H<L.length;H+=3){const Q=L[H],Se=H+1<L.length,Qe=Se?L[H+1]:0,ct=H+2<L.length,bt=ct?L[H+2]:0;let Gn=(15&Qe)<<2|bt>>6,Or=63&bt;ct||(Or=64,Se||(Gn=64)),Ie.push(q[Q>>2],q[(3&Q)<<4|Qe>>4],q[Gn],q[Or])}return Ie.join("")},encodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(L):this.encodeByteArray(ae(L),G)},decodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(L):function(L){const G=[];let q=0,Ie=0;for(;q<L.length;){const H=L[q++];if(H<128)G[Ie++]=String.fromCharCode(H);else if(H>191&&H<224){const Q=L[q++];G[Ie++]=String.fromCharCode((31&H)<<6|63&Q)}else if(H>239&&H<365){const ct=((7&H)<<18|(63&L[q++])<<12|(63&L[q++])<<6|63&L[q++])-65536;G[Ie++]=String.fromCharCode(55296+(ct>>10)),G[Ie++]=String.fromCharCode(56320+(1023&ct))}else{const Q=L[q++],Se=L[q++];G[Ie++]=String.fromCharCode((15&H)<<12|(63&Q)<<6|63&Se)}}return G.join("")}(this.decodeStringToByteArray(L,G))},decodeStringToByteArray(L,G){this.init_();const q=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let H=0;H<L.length;){const Q=q[L.charAt(H++)],Qe=H<L.length?q[L.charAt(H)]:0;++H;const bt=H<L.length?q[L.charAt(H)]:64;++H;const wt=H<L.length?q[L.charAt(H)]:64;if(++H,null==Q||null==Qe||null==bt||null==wt)throw Error();Ie.push(Q<<2|Qe>>4),64!==bt&&(Ie.push(Qe<<4&240|bt>>2),64!==wt&&Ie.push(bt<<6&192|wt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},se=function(L){return function(L){const G=ae(L);return ge.encodeByteArray(G,!0)}(L).replace(/\./g,"")},he=function(L){try{return ge.decodeString(L,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(L,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return G}for(const q in G)!G.hasOwnProperty(q)||!ee(q)||(L[q]=B(L[q],G[q]));return L}function ee(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,q)=>{this.resolve=G,this.reject=q})}wrapCallback(G){return(q,Ie)=>{q?this.reject(q):this.resolve(Ie),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(q):G(q,Ie))}}}function Te(L,G){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=G||"demo-project",H=L.iat||0,Q=L.sub||L.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Se=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:H,exp:H+3600,auth_time:H,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},L);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(Se)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function be(){return"object"==typeof self&&self.self===self}function Ge(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return Re().indexOf("Electron/")>=0}function ve(){const L=Re();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ee(){return Re().indexOf("MSAppHost/")>=0}function Ue(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function ye(){return new Promise((L,G)=>{try{let q=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(Ie);H.onsuccess=()=>{H.result.close(),q||self.indexedDB.deleteDatabase(Ie),L(!0)},H.onupgradeneeded=()=>{q=!1},H.onerror=()=>{var Q;G((null===(Q=H.error)||void 0===Q?void 0:Q.message)||"")}}catch(q){G(q)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(G,q,Ie){super(q),this.code=G,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(G,q,Ie){this.service=G,this.serviceName=q,this.errors=Ie}create(G,...q){const Ie=q[0]||{},H=`${this.service}/${G}`,Q=this.errors[G],Se=Q?function Pe(L,G){return L.replace(ut,(q,Ie)=>{const H=G[Ie];return null!=H?String(H):`<${Ie}?>`})}(Q,Ie):"Error";return new me(H,`${this.serviceName}: ${Se} (${H}).`,Ie)}}const ut=/\{\$([^}]+)}/g;function Mr(L,G){return Object.prototype.hasOwnProperty.call(L,G)}function Pt(L){for(const G in L)if(Object.prototype.hasOwnProperty.call(L,G))return!1;return!0}function ti(L,G){if(L===G)return!0;const q=Object.keys(L),Ie=Object.keys(G);for(const H of q){if(!Ie.includes(H))return!1;const Q=L[H],Se=G[H];if(yr(Q)&&yr(Se)){if(!ti(Q,Se))return!1}else if(Q!==Se)return!1}for(const H of Ie)if(!q.includes(H))return!1;return!0}function yr(L){return null!==L&&"object"==typeof L}function Rr(L){const G=[];for(const[q,Ie]of Object.entries(L))Array.isArray(Ie)?Ie.forEach(H=>{G.push(encodeURIComponent(q)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(q)+"="+encodeURIComponent(Ie));return G.length?"&"+G.join("&"):""}function Ai(L){const G={};return L.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[H,Q]=Ie.split("=");G[decodeURIComponent(H)]=decodeURIComponent(Q)}}),G}function vs(L){const G=L.indexOf("?");if(!G)return"";const q=L.indexOf("#",G);return L.substring(G,q>0?q:void 0)}function mi(L,G){const q=new ft(L,G);return q.subscribe.bind(q)}class ft{constructor(G,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{G(this)}).catch(Ie=>{this.error(Ie)})}next(G){this.forEachObserver(q=>{q.next(G)})}error(G){this.forEachObserver(q=>{q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,q,Ie){let H;if(void 0===G&&void 0===q&&void 0===Ie)throw new Error("Missing Observer.");H=function wn(L,G){if("object"!=typeof L||null===L)return!1;for(const q of G)if(q in L&&"function"==typeof L[q])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:q,complete:Ie},void 0===H.next&&(H.next=Dn),void 0===H.error&&(H.error=Dn),void 0===H.complete&&(H.complete=Dn);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Se){}}),this.observers.push(H),Q}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,G)}sendOne(G,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{q(this.observers[G])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dn(){}function Ft(L,G=1e3,q=2){const Ie=G*Math.pow(q,L),H=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+H)}function wr(L){return L&&L._delegate?L._delegate:L}},8162:(Je,we,P)=>{var h=P(5e3);let J=null;function N(){return J}const le=new h.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function he(){return(0,h.LFG)(B)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let B=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function He(){return new B((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(n){const e=(0,h.LFG)(le).location;return new Ze((0,h.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new h.OlP("appBaseHref");let Ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se),h.LFG(Ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se),h.LFG(Ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Ue(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Te,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return new ve((0,h.LFG)(fe),(0,h.LFG)(se))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}class bs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Jn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new bs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Ws(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ws(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ws(n,e){n.context.$implicit=e.item}let kn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ou("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ou("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class rn{constructor(){this.$implicit=null,this.ngIf=null}}function ou(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Wc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Mo(n){return"server"===n}let ul=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Ro((0,h.LFG)(le),window)}),n})();class Ro{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ni(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ll(this.window.history)||ll(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ll(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ys extends class pa extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){J||(J=n)}(new Ys)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ga(){return Qt=Qt||document.querySelector("base"),Qt?Qt.getAttribute("href"):null}();return null==t?null:function Ts(n){lu=lu||document.createElement("a"),lu.setAttribute("href",n);const e=lu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function da(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let lu,Qt=null;const ir=new h.OlP("TRANSITION_ID"),mn=[{provide:h.ip1,useFactory:function cl(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[ir,le,h.zs3],multi:!0}];class ki{static init(){(0,h.VLi)(new ki)}addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let sr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Qs=new h.OlP("EventManagerPlugins");let ts=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ma{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let vi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fi=(()=>{class n extends vi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Oo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Oo))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Oo(n){N().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},As=/%COMP%/g;function Po(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Po(n,o,t):(o=o.replace(As,n),t.push(o))}return t}function De(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let No=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new hn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ai(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new pl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Po(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ts),h.LFG(Fi),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class hn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=pt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=pt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,De(r)):this.eventManager.addEventListener(e,t,De(r))}}class ai extends hn{constructor(e,t,r,o){super(e),this.component=r;const u=Po(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function du(n){return"_ngcontent-%COMP%".replace(As,n)}(o+"-"+r.id),this.hostAttr=function fl(n){return"_nghost-%COMP%".replace(As,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class pl extends hn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Po(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gl=(()=>{class n extends ma{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ml=["alt","control","meta","shift"],Ip={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ns={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ir={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ui=(()=>{class n extends ma{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(ml.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function fu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ns.hasOwnProperty(e)&&(e=ns[e]))}return Ip[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ml.forEach(u=>{u!=o&&Ir[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const gu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Ss(){Ys.makeCurrent(),ki.init()},multi:!0},{provide:le,useFactory:function yl(){return(0,h.RDi)(document),document},deps:[]}]),_l=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function wi(){return new h.qLn},deps:[]},{provide:Qs,useClass:gl,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:Qs,useClass:ui,multi:!0,deps:[le]},{provide:No,useClass:No,deps:[ts,Fi,h.AFp]},{provide:h.FYo,useExisting:No},{provide:vi,useExisting:Fi},{provide:Fi,useClass:Fi,deps:[le]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ts,useClass:ts,deps:[Qs,h.R0b]},{provide:class sn{},useClass:sr,deps:[]}];let _a=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:ir,useExisting:h.AFp},mn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:_l,imports:[Wc,h.hGG]}),n})();"undefined"!=typeof window&&window;var pe=P(5861),ro=P(7579);class yn extends ro.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var xs=P(4986),Li=P(8306),Lt=P(8996),Vi=P(7669);function gt(...n){const e=(0,Vi.yG)(n);return(0,Lt.D)(n,e)}var on=P(5813),Ei=P(8189);function Ui(...n){return function Ln(){return(0,Ei.J)(1)}()((0,Lt.D)(n,(0,Vi.yG)(n)))}var Vn=P(4482);function ss(...n){const e=(0,Vi.yG)(n);return(0,Vn.e)((t,r)=>{(e?Ui(n,t,e):Ui(n,t)).subscribe(r)})}var or=P(5403);function bu(){return(0,Vn.e)((n,e)=>{let t,r=!1;n.subscribe((0,or.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var Mt=P(4004);function rd(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,or.x)(d,x=>{const O=C++;w=m?n(w,x,O):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function io(n,e){return(0,Vn.e)(rd(n,e,arguments.length>=2,!0))}var li=P(4671);function so(n,e){return n===e}function fn(n,e){return(0,Vn.e)((t,r)=>{let o=0;t.subscribe((0,or.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Ke,An=P(2011),oo=(P(8775),P(3942)),Cr=P(9681),Ms=P(4859),Dr=P(1877),dt=P(2090),Sp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ci={},Rs=Rs||{},_t=Sp||self;function wa(){}function Bi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Os(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vo="closure_uid_"+(1e9*Math.random()>>>0),os=0;function Uo(n,e,t){return n.call.apply(n.bind,arguments)}function Ps(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Sn(n,e,t){return(Sn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Uo:Ps).apply(null,arguments)}function Bo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _n(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function as(){this.s=this.s,this.o=this.o}var En={};as.prototype.s=!1,as.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Ea(n){return Object.prototype.hasOwnProperty.call(n,Vo)&&n[Vo]||(n[Vo]=++os)}(this);delete En[n]}},as.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qh=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},xp=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function sd(n){return Array.prototype.concat.apply([],arguments)}function Iu(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function El(n){return/^[\s\xa0]*$/.test(n)}var Ut,zh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Un(n,e){return-1!=n.indexOf(e)}function Cu(n,e){return n<e?-1:n>e?1:0}e:{var jo=_t.navigator;if(jo){var ba=jo.userAgent;if(ba){Ut=ba;break e}}Ut=""}function Du(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function od(n){const e={};for(const t in n)e[t]=n[t];return e}var ar="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fr(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<ar.length;u++)t=ar[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $o(n){return $o[" "](n),n}$o[" "]=wa;var er,n,us=Un(Ut,"Opera"),Kr=Un(Ut,"Trident")||Un(Ut,"MSIE"),ji=Un(Ut,"Edge"),ao=ji||Kr,bl=Un(Ut,"Gecko")&&!(Un(Ut.toLowerCase(),"webkit")&&!Un(Ut,"Edge"))&&!(Un(Ut,"Trident")||Un(Ut,"MSIE"))&&!Un(Ut,"Edge"),ad=Un(Ut.toLowerCase(),"webkit")&&!Un(Ut,"Edge");function ud(){var n=_t.document;return n?n.documentMode:void 0}e:{var Ia="",Ns=(n=Ut,bl?/rv:([^\);]+)(\)|;)/.exec(n):ji?/Edge\/([\d\.]+)/.exec(n):Kr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ad?/WebKit\/(\S+)/.exec(n):us?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ns&&(Ia=Ns?Ns[1]:""),Kr){var ld=ud();if(null!=ld&&ld>parseFloat(Ia)){er=String(ld);break e}}er=Ia}var ls={};var cs=_t.document&&Kr&&(ud()||parseInt(er,10))||void 0,Il=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{_t.addEventListener("test",wa,e),_t.removeEventListener("test",wa,e)}catch(t){}return n}();function pn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function bi(n,e){if(pn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(bl){e:{try{$o(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Cl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&bi.Z.h.call(this)}}pn.prototype.h=function(){this.defaultPrevented=!0},_n(bi,pn);var Cl={2:"touch",3:"pen",4:"mouse"};bi.prototype.h=function(){bi.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Da="closure_listenable_"+(1e6*Math.random()|0),uo=0;function Ta(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++uo,this.ca=this.fa=!1}function ks(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function I(n){this.src=n,this.g={},this.h=0}function D(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=qh(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(ks(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function M(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}I.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=M(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Ta(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var F="closure_lm_"+(1e6*Math.random()|0),K={};function re(n,e,t,r,o){if(r&&r.once)return et(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)re(n,e[u],t,r,o);return null}return t=Ls(t),n&&n[Da]?n.N(e,t,Os(r)?!!r.capture:!!r,o):Me(n,e,t,!1,r,o)}function Me(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Os(o)?!!o.capture:!!o,m=Bn(n);if(m||(n[F]=m=new I(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function Xe(){var e=Zn;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Il||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(It(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function et(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)et(n,e[u],t,r,o);return null}return t=Ls(t),n&&n[Da]?n.O(e,t,Os(r)?!!r.capture:!!r,o):Me(n,e,t,!0,r,o)}function mt(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)mt(n,e[u],t,r,o);else r=Os(r)?!!r.capture:!!r,t=Ls(t),n&&n[Da]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=M(u=n.g[e],t,r,o))&&(ks(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Bn(n))&&(e=n.g[e.toString()],n=-1,e&&(n=M(e,t,r,o)),(t=-1<n?e[n]:null)&&Vt(t))}function Vt(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Da])D(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(It(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Bn(e))?(D(t,n),0==t.h&&(t.src=null,e[F]=null)):ks(n)}}}function It(n){return n in K?K[n]:K[n]="on"+n}function Zn(n,e){if(n.ca)n=!0;else{e=new bi(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Vt(n),n=t.call(r,e)}return n}function Bn(n){return(n=n[F])instanceof I?n:null}var Fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ls(n){return"function"==typeof n?n:(n[Fs]||(n[Fs]=function(e){return n.handleEvent(e)}),n[Fs])}function tn(){as.call(this),this.i=new I(this),this.P=this,this.I=null}function Xt(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new pn(e,n);else if(e instanceof pn)e.target=e.target||n;else{var o=e;Fr(e=new pn(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=di(d,r,!0,e)&&o}if(o=di(d=e.g=n,r,!0,e)&&o,o=di(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=di(d=e.g=t[u],r,!1,e)&&o}function di(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&D(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}_n(tn,as),tn.prototype[Da]=!0,tn.prototype.removeEventListener=function(n,e,t,r){mt(this,n,e,t,r)},tn.prototype.M=function(){if(tn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ks(t[r]);delete n.g[e],n.h--}}this.I=null},tn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},tn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Vs=_t.JSON.stringify;function Rp(){var n=fd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Kh,Dl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new hd,n=>n.reset());class hd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Zh(n){_t.setTimeout(()=>{throw n},0)}function Tl(n,e){Kh||function Tu(){var n=_t.Promise.resolve(void 0);Kh=function(){n.then(M0)}}(),Aa||(Kh(),Aa=!0),fd.add(n,e)}var Aa=!1,fd=new class Wh{constructor(){this.h=this.g=null}add(e,t){const r=Dl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function M0(){for(var n;n=Rp();){try{n.h.call(n.g)}catch(t){Zh(t)}var e=Dl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Aa=!1}function Al(n,e){tn.call(this),this.h=n||1,this.g=e||_t,this.j=Sn(this.kb,this),this.l=Date.now()}function pd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Op(n,e,t){if("function"==typeof n)t&&(n=Sn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Sn(n.handleEvent,n)}return 2147483647<Number(e)?-1:_t.setTimeout(n,e||0)}function Sl(n){n.g=Op(()=>{n.g=null,n.i&&(n.i=!1,Sl(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_n(Al,tn),(Ke=Al.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xt(this,"tick"),this.da&&(pd(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){Al.Z.M.call(this),pd(this),delete this.g};class ly extends as{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Sl(this)}M(){super.M(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xl(n){as.call(this),this.h=n,this.g={}}_n(xl,as);var Ml=[];function gd(n,e,t,r){Array.isArray(t)||(t&&(Ml[0]=t.toString()),t=Ml);for(var o=0;o<t.length;o++){var u=re(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Sa(n){Du(n.g,function(e,t){this.g.hasOwnProperty(t)&&Vt(e)},n),n.g={}}function md(){this.g=!0}function ds(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Pp(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Vs(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}xl.prototype.M=function(){xl.Z.M.call(this),Sa(this)},xl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},md.prototype.Aa=function(){this.g=!1},md.prototype.info=function(){};var Go={},Qh=null;function Rl(){return Qh=Qh||new tn}function Jh(n){pn.call(this,Go.Ma,n)}function Ol(n){const e=Rl();Xt(e,new Jh(e,n))}function Np(n,e){pn.call(this,Go.STAT_EVENT,n),this.stat=e}function Yr(n){const e=Rl();Xt(e,new Np(e,n))}function kp(n,e){pn.call(this,Go.Na,n),this.size=e}function hi(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){n()},e)}Go.Ma="serverreachability",_n(Jh,pn),Go.STAT_EVENT="statevent",_n(Np,pn),Go.Na="timingevent",_n(kp,pn);var qo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Fp(){}function dy(){}Fp.prototype.h=null;var _d,Au={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vp(){pn.call(this,"d")}function Pl(){pn.call(this,"c")}function vd(){}function Nl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new xl(this),this.P=EI,this.W=new Al(n=ao?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Up}function Up(){this.i=null,this.g="",this.h=!1}_n(Vp,pn),_n(Pl,pn),_n(vd,Fp),vd.prototype.g=function(){return new XMLHttpRequest},vd.prototype.i=function(){return{}},_d=new vd;var EI=45e3,lo={},xa={};function wd(n,e,t){n.K=1,n.v=Dd($i(e)),n.s=t,n.U=!0,Ii(n,null)}function Ii(n,e){n.F=Date.now(),xu(n),n.A=$i(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jl(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Up,n.g=Ld(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ly(Sn(n.Ia,n,n.g),n.O)),gd(n.V,n.g,"readystatechange",n.gb),e=n.H?od(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ol(1),function cy(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var x=C[0];C=C[1];var O=x.split("_");d=2<=O.length&&"type"==O[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Su(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function kl(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Bp(n,t),o==xa){4==e&&(n.o=4,Yr(14),r=!1),ds(n.j,n.m,null,"[Incomplete Response]");break}if(o==lo){n.o=4,Yr(15),ds(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ds(n.j,n.m,o,null),Fl(n,o)}Su(n)&&o!=xa&&o!=lo&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Yr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),fo(e),e.L=!0,Yr(11))):(ds(n.j,n.m,t,"[Invalid Chunked Response]"),hs(n),Ed(n))}function Bp(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xa:(t=Number(e.substring(t,r)),isNaN(t)?lo:(r+=1)+t>e.length?xa:(e=e.substr(r,t),n.C=r+t,e))}function xu(n){n.Y=Date.now()+n.P,Xh(n,n.P)}function Xh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hi(Sn(n.eb,n),e)}function ef(n){n.B&&(_t.clearTimeout(n.B),n.B=null)}function Ed(n){0==n.l.G||n.I||lf(n.l,n)}function hs(n){ef(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,pd(n.W),Sa(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||$l(t.i,n)))if(t.I=n.N,!n.J&&$l(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=hi(Sn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ka(t),ce(t)}Fd(t),Yr(18)}if(1>=Pu(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else po(t,11)}else if((n.J||t.g==n)&&ka(t),!El(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const O=C[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const U=C[5];null!=U&&"number"==typeof U&&0<U&&(t.K=r=1.5*U,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const ie=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.i;!u.g&&(Un(ie,"spdy")||Un(ie,"quic")||Un(ie,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(rf(u,u.h),u.h=null))}if(r.D){const Oe=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.sa=Oe,xt(r.F,r.D,Oe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Wp(r,r.H?r.la:null,r.W),d.J){Hl(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(ef(m),xu(m)),r.g=d}else kd(r);0<t.l.length&&it(t)}else"stop"!=C[0]&&"close"!=C[0]||po(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?po(t,7):z(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Ol(4)}catch(C){}}function jp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bi(n)||"string"==typeof n)xp(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Bi(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function tf(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Bi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ll(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ll)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function bd(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];zo(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)zo(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function zo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=Nl.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==y(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const x=y(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>x)&&(3!=x||ao||this.g&&(this.h.h||this.g.ga()||f(this.g)))){this.I||4!=x||7==e||Ol(8==e||0>=O?3:2),ef(this);var t=this.g.ba();this.N=t;t:if(Su(this)){var r=f(this.g);n="";var o=r.length,u=4==y(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hs(this),Ed(this);var d="";break t}this.h.i=new _t.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function R0(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!El(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Yr(12),hs(this),Ed(this);break e}ds(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fl(this,t)}this.U?(kl(this,x,d),ao&&this.i&&3==x&&(gd(this.V,this.W,"tick",this.fb),this.W.start())):(ds(this.j,this.m,d,null),Fl(this,d)),4==x&&hs(this),this.i&&!this.I&&(4==x?lf(this.l,this):(this.i=!1,xu(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Yr(12)):(this.o=0,Yr(13)),hs(this),Ed(this)}}}catch(x){}},Ke.fb=function(){if(this.g){var n=y(this.g),e=this.g.ga();this.C<e.length&&(ef(this),kl(this,n,e),this.i&&4!=n&&xu(this))}},Ke.cancel=function(){this.I=!0,hs(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Yh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ol(3),Yr(17)),hs(this),this.o=2,Ed(this)):Xh(this,this.Y-n)},(Ke=Ll.prototype).R=function(){bd(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return bd(this),this.g.concat()},Ke.get=function(n,e){return zo(this.h,n)?this.h[n]:e},Ke.set=function(n,e){zo(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Id=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ma(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ma){this.g=void 0!==e?e:n.g,co(this,n.j),this.s=n.s,Cd(this,n.i),Mu(this,n.m),this.l=n.l,e=n.h;var t=new ho;t.i=e.i,e.g&&(t.g=new Ll(e.g),t.h=e.h),Vl(this,t),this.o=n.o}else n&&(t=String(n).match(Id))?(this.g=!!e,co(this,t[1]||"",!0),this.s=Ru(t[2]||""),Cd(this,t[3]||"",!0),Mu(this,t[4]),this.l=Ru(t[5]||"",!0),Vl(this,t[6]||"",!0),this.o=Ru(t[7]||"")):(this.g=!!e,this.h=new ho(null,this.g))}function $i(n){return new Ma(n)}function co(n,e,t){n.j=t?Ru(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Cd(n,e,t){n.i=t?Ru(e,!0):e}function Mu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Vl(n,e,t){e instanceof ho?(n.h=e,function Ou(n,e){e&&!n.j&&(xn(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Ad(this,r),jl(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ul(e,my)),n.h=new ho(e,n.g))}function xt(n,e,t){n.h.set(e,t)}function Dd(n){return xt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ru(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ul(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,py),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function py(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ma.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ul(e,$p,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ul(e,$p,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ul(t,"/"==t.charAt(0)?gy:Bl,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ul(t,O0)),n.join("")};var $p=/[#\/\?@]/g,Bl=/[#\?:]/g,gy=/[#\?]/g,my=/[#\?@]/g,O0=/#/g;function ho(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xn(n){n.g||(n.g=new Ll,n.h=0,n.i&&function hy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ad(n,e){xn(n),e=bn(n,e),zo(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,zo((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&bd(n)))}function Sd(n,e){return xn(n),e=bn(n,e),zo(n.g.h,e)}function jl(n,e,t){Ad(n,e),0<t.length&&(n.i=null,n.g.set(bn(n,e),Iu(t)),n.h+=t.length)}function bn(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xd(n){this.l=n||yy,n=_t.PerformanceNavigationTiming?0<(n=_t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(_t.g&&_t.g.Ea&&_t.g.Ea()&&_t.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=ho.prototype).add=function(n,e){xn(this),this.i=null,n=bn(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){xn(this),this.g.forEach(function(t,r){xp(t,function(o){n.call(e,o,r,this)},this)},this)},Ke.T=function(){xn(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ke.R=function(n){xn(this);var e=[];if("string"==typeof n)Sd(this,n)&&(e=sd(e,this.g.get(bn(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=sd(e,n[t])}return e},Ke.set=function(n,e){return xn(this),this.i=null,Sd(this,n=bn(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var yy=10;function Qr(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pu(n){return n.h?1:n.g?n.g.size:0}function $l(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function rf(n,e){n.g?n.g.add(e):n.h=e}function Hl(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Md(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Iu(n.i)}function sf(){}function Rd(){this.g=new sf}function _y(n,e,t){const r=t||"";try{jp(n,function(o,u){let d=o;Os(o)&&(d=Vs(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Ra(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Gl(n){this.l=n.$b||null,this.j=n.ib||!1}function Od(n,e){tn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Nu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xd.prototype.cancel=function(){if(this.i=Md(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sf.prototype.stringify=function(n){return _t.JSON.stringify(n,void 0)},sf.prototype.parse=function(n){return _t.JSON.parse(n,void 0)},_n(Gl,Fp),Gl.prototype.g=function(){return new Od(this.l,this.j)},Gl.prototype.i=function(n){return function(){return n}}({}),_n(Od,tn);var Nu=0;function af(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ur(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Oa(n)}function Oa(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=Od.prototype).open=function(n,e){if(this.readyState!=Nu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Oa(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||_t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ur(this)),this.readyState=Nu},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==_t.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;af(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ur(this):Oa(this),3==this.readyState&&af(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,ur(this))},Ke.Ta=function(n){this.g&&(this.response=n,ur(this))},Ke.ha=function(){this.g&&ur(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Od.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var uf=_t.JSON.parse;function Kn(n){tn.call(this),this.headers=new Ll,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fs,this.K=this.L=!1}_n(Kn,tn);var fs="",ql=/^https?$/i,Hp=["POST","PUT"];function vy(n){return"content-type"==n.toLowerCase()}function Pd(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qp(n),Nd(n)}function qp(n){n.D||(n.D=!0,Xt(n,"complete"),Xt(n,"error"))}function zp(n){if(n.h&&void 0!==Rs&&(!n.C[1]||4!=y(n)||2!=n.ba()))if(n.v&&4==y(n))Op(n.Fa,0,n);else if(Xt(n,"readystatechange"),4==y(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Id)[1]||null;if(!o&&_t.self&&_t.self.location){var u=_t.self.location.protocol;o=u.substr(0,u.length-1)}r=!ql.test(o?o.toLowerCase():"")}t=r}if(t)Xt(n,"complete"),Xt(n,"success");else{n.m=6;try{var d=2<y(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",qp(n)}}finally{Nd(n)}}}function Nd(n,e){if(n.g){Pa(n);const t=n.g,r=n.C[0]?wa:null;n.g=null,n.C=null,e||Xt(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Pa(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(_t.clearTimeout(n.A),n.A=null)}function y(n){return n.g?n.g.readyState:0}function f(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case fs:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function v(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function g(n){let e="";return Du(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xt(n,e,t))}function T(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function R(n){this.za=0,this.l=[],this.h=new md,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=T("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=T("baseRetryDelayMs",5e3,n),this.$a=T("retryDelaySeedMs",1e4,n),this.Ya=T("forwardChannelMaxRetries",2,n),this.ra=T("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new xd(n&&n.concurrentRequestLimit),this.Ca=new Rd,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function z(n){if(Fe(n),3==n.G){var e=n.V++,t=$i(n.F);xt(t,"SID",n.J),xt(t,"RID",e),xt(t,"TYPE","terminate"),Tr(n,t),(e=new Nl(n,n.h,e,void 0)).K=2,e.v=Dd($i(t)),t=!1,_t.navigator&&_t.navigator.sendBeacon&&(t=_t.navigator.sendBeacon(e.v.toString(),"")),!t&&_t.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ld(e.l,null),e.g.ea(e.v)),e.F=Date.now(),xu(e)}cf(n)}function ce(n){n.g&&(fo(n),n.g.cancel(),n.g=null)}function Fe(n){ce(n),n.u&&(_t.clearTimeout(n.u),n.u=null),ka(n),n.i.cancel(),n.m&&("number"==typeof n.m&&_t.clearTimeout(n.m),n.m=null)}function Ye(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&it(n)}function it(n){Qr(n.i)||n.m||(n.m=!0,Tl(n.Ha,n),n.C=0)}function jn(n,e){var t;t=e?e.m:n.V++;const r=$i(n.F);xt(r,"SID",n.J),xt(r,"RID",t),xt(r,"AID",n.U),Tr(n,r),n.o&&n.s&&v(r,n.o,n.s),t=new Nl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Na(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),rf(n.i,t),wd(t,r,e)}function Tr(n,e){n.j&&jp({},function(t,r){xt(e,r,t)})}function Na(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Sn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const x=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{_y(x,d,"req"+C+"_")}catch(O){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function kd(n){n.g||n.u||(n.Y=1,Tl(n.Ga,n),n.A=0)}function Fd(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=hi(Sn(n.Ga,n),Wl(n,n.A)),n.A++,0))}function fo(n){null!=n.B&&(_t.clearTimeout(n.B),n.B=null)}function zl(n){n.g=new Nl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=$i(n.oa);xt(e,"RID","rpc"),xt(e,"SID",n.J),xt(e,"CI",n.N?"0":"1"),xt(e,"AID",n.U),Tr(n,e),xt(e,"TYPE","xmlhttp"),n.o&&n.s&&v(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Dd($i(e)),t.s=null,t.U=!0,Ii(t,n)}function ka(n){null!=n.v&&(_t.clearTimeout(n.v),n.v=null)}function lf(n,e){var t=null;if(n.g==e){ka(n),fo(n),n.g=null;var r=2}else{if(!$l(n.i,e))return;t=e.D,Hl(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Xt(r=Rl(),new kp(r,t,e,o)),it(n)}else kd(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function lt(n,e){return!(Pu(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=hi(Sn(n.Ha,n,e),Wl(n,n.C)),n.C++,0)))}(n,e)||2==r&&Fd(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:po(n,5);break;case 4:po(n,10);break;case 3:po(n,6);break;default:po(n,2)}}function Wl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function po(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Sn(n.jb,n);t||(t=new Ma("//www.google.com/images/cleardot.gif"),_t.location&&"http"==_t.location.protocol||co(t,"https"),Dd(t)),function Wo(n,e){const t=new md;if(_t.Image){const r=new Image;r.onload=Bo(Ra,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Bo(Ra,t,r,"TestLoadImage: error",!1,e),r.onabort=Bo(Ra,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bo(Ra,t,r,"TestLoadImage: timeout",!1,e),_t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Yr(2);n.G=0,n.j&&n.j.va(e),cf(n),Fe(n)}function cf(n){n.G=0,n.I=-1,n.j&&((0!=Md(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Iu(n.l),n.l.length=0),n.j.ua())}function Wp(n,e,t){let r=function fy(n){return n instanceof Ma?$i(n):new Ma(n,void 0)}(t);if(""!=r.i)e&&Cd(r,e+"."+r.i),Mu(r,r.m);else{const o=_t.location;r=function Td(n,e,t,r){var o=new Ma(null,void 0);return n&&co(o,n),e&&Cd(o,e),t&&Mu(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Du(n.aa,function(o,u){xt(r,u,o)}),t=n.sa,(e=n.D)&&t&&xt(r,e,t),xt(r,"VER",n.ma),Tr(n,r),r}function Ld(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Ba&&!n.qa?new Gl({ib:!0}):n.qa)).L=n.H,e}function Zp(){}function Kp(){if(Kr&&!(10<=Number(cs)))throw Error("Environmental error: no available transport.")}function Hi(n,e){tn.call(this),this.g=new R(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!El(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!El(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ku(this)}function Yp(n){Vp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function wy(){Pl.call(this),this.status=1}function ku(n){this.g=n}(Ke=Kn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_d.g(),this.C=function Lp(n){return n.h||(n.h=n.i())}(this.u?this.u:_d),this.g.onreadystatechange=Sn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Pd(this,u)}n=t||"";const o=new Ll(this.headers);r&&jp(r,function(u,d){o.set(d,u)}),r=function Mp(n){e:{var e=vy;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=_t.FormData&&n instanceof _t.FormData,!(0<=qh(Hp,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pa(this),0<this.B&&((this.K=function Gp(n){return Kr&&function cd(){return function Ho(n){var e=ls;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=zh(String(er)).split("."),t=zh("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Cu(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Cu(0==o[2].length,0==u[2].length)||Cu(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sn(this.pa,this)):this.A=Op(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Pd(this,u)}},Ke.pa=function(){void 0!==Rs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xt(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xt(this,"complete"),Xt(this,"abort"),Nd(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nd(this,!0)),Kn.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?zp(this):this.cb())},Ke.cb=function(){zp(this)},Ke.ba=function(){try{return 2<y(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),uf(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=R.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Nl(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=od(u),Fr(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Na(this,o,e),xt(t=$i(this.F),"RID",n),xt(t,"CVER",22),this.D&&xt(t,"X-HTTP-Session-Id",this.D),Tr(this,t),this.o&&u&&v(t,this.o,u),rf(this.i,o),this.Ra&&xt(t,"TYPE","init"),this.ja?(xt(t,"$req",e),xt(t,"SID","null"),o.$=!0,wd(o,t,null)):wd(o,t,e),this.G=2}}else 3==this.G&&(n?jn(this,n):0==this.l.length||Qr(this.i)||jn(this))},Ke.Ga=function(){if(this.u=null,zl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=hi(Sn(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Yr(10),ce(this),zl(this))},Ke.ab=function(){null!=this.v&&(this.v=null,ce(this),Fd(this),Yr(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Yr(2)):(this.h.info("Failed to ping google.com"),Yr(1))},(Ke=Zp.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},Kp.prototype.g=function(n,e){return new Hi(n,e)},_n(Hi,tn),Hi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Tl(Sn(n.hb,n,e))),Yr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Wp(n,null,n.W),it(n)},Hi.prototype.close=function(){z(this.g)},Hi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ye(this.g,e)}else this.v?((e={}).__data__=Vs(n),Ye(this.g,e)):Ye(this.g,n)},Hi.prototype.M=function(){this.g.j=null,delete this.j,z(this.g),delete this.g,Hi.Z.M.call(this)},_n(Yp,Vp),_n(wy,Pl),_n(ku,Zp),ku.prototype.xa=function(){Xt(this.g,"a")},ku.prototype.wa=function(n){Xt(this.g,new Yp(n))},ku.prototype.va=function(n){Xt(this.g,new wy(n))},ku.prototype.ua=function(){Xt(this.g,"b")},Kp.prototype.createWebChannel=Kp.prototype.g,Hi.prototype.send=Hi.prototype.u,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,yd.COMPLETE="complete",dy.EventType=Au,Au.OPEN="a",Au.CLOSE="b",Au.ERROR="c",Au.MESSAGE="d",tn.prototype.listen=tn.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.La,Kn.prototype.getLastErrorCode=Kn.prototype.Da,Kn.prototype.getStatus=Kn.prototype.ba,Kn.prototype.getResponseJson=Kn.prototype.Qa,Kn.prototype.getResponseText=Kn.prototype.ga,Kn.prototype.send=Kn.prototype.ea;var bI=ci.createWebChannelTransport=function(){return new Kp},II=ci.getStatEventTarget=function(){return Rl()},Qp=ci.ErrorCode=qo,P0=ci.EventType=yd,Zl=ci.Event=Go,Ey=ci.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},N0=ci.FetchXmlHttpFactory=Gl,Jp=ci.WebChannel=dy,Xp=ci.XhrIo=Kn;const k0="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let Kl="9.8.0";const Fa=new Dr.Yd("@firebase/firestore");function df(){return Fa.logLevel}function Ne(n,...e){if(Fa.logLevel<=Dr.in.DEBUG){const t=e.map(hf);Fa.debug(`Firestore (${Kl}): ${n}`,...t)}}function $n(n,...e){if(Fa.logLevel<=Dr.in.ERROR){const t=e.map(hf);Fa.error(`Firestore (${Kl}): ${n}`,...t)}}function Vd(n,...e){if(Fa.logLevel<=Dr.in.WARN){const t=e.map(hf);Fa.warn(`Firestore (${Kl}): ${n}`,...t)}}function hf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Kl}) INTERNAL ASSERTION FAILED: `+n;throw $n(e),new Error(e)}function Ct(n,e){n||nt()}function We(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class by{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Iy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class L0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tA{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Vr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,pe.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Vr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new by(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Lr(e)}}class V0{constructor(e,t,r){this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class CI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new V0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new Cy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Hn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function TI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Hn.A=-1;class Dy{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=TI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function Ud(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function U0(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new tr(0,0))}static max(){return new Et(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function B0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function j0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dt{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Dt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends Dt{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const $0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Dt{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return $0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class La{constructor(e){this.fields=e,e.sort(lr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ud(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new cr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const AI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zo(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=AI.exec(n);if(Ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Va(n){return"string"==typeof n?cr.fromBase64String(n):cr.fromUint8Array(n)}function eg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tg(n){const e=n.mapValue.fields.__previous_value__;return eg(e)?tg(e):e}function ng(n){const e=Zo(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class H0{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Fu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}function Lu(n){return null==n}function Vu(n){return 0===n&&1/n==-1/0}function rg(n){return"number"==typeof n&&Number.isInteger(n)&&!Vu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(zt.fromString(e))}static fromName(e){return new je(zt.fromString(e).popFirst(5))}static empty(){return new je(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new zt(e.slice()))}}const Ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ty={nullValue:"NULL_VALUE"};function Ql(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eg(n)?4:SI(n)?9007199254740991:10:nt()}function Yo(n,e){if(n===e)return!0;const t=Ql(n);if(t!==Ql(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ng(n).isEqual(ng(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Zo(r.timestampValue),d=Zo(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Va(n.bytesValue).isEqual(Va(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return an(r.geoPointValue.latitude)===an(o.geoPointValue.latitude)&&an(r.geoPointValue.longitude)===an(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return an(r.integerValue)===an(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=an(r.doubleValue),d=an(o.doubleValue);return u===d?Vu(u)===Vu(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Ud(n.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(B0(u)!==B0(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Yo(u[m],d[m])))return!1;return!0}(n,e);default:return nt()}var o}function pf(n,e){return void 0!==(n.values||[]).find(t=>Yo(t,e))}function Uu(n,e){if(n===e)return 0;const t=Ql(n),r=Ql(e);if(t!==r)return Ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=an(o.integerValue||o.doubleValue),m=an(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Ay(n.timestampValue,e.timestampValue);case 4:return Ay(ng(n),ng(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Va(o),m=Va(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Ot(d[w],m[w]);if(0!==C)return C}return Ot(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Ot(an(o.latitude),an(u.latitude));return 0!==d?d:Ot(an(o.longitude),an(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=Uu(d[w],m[w]);if(C)return C}return Ot(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Ko.mapValue&&u===Ko.mapValue)return 0;if(o===Ko.mapValue)return 1;if(u===Ko.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const O=Ot(m[x],C[x]);if(0!==O)return O;const U=Uu(d[m[x]],w[C[x]]);if(0!==U)return U}return Ot(m.length,C.length)}(n.mapValue,e.mapValue);default:throw nt()}}function Ay(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Zo(n),r=Zo(e),o=Ot(t.seconds,r.seconds);return 0!==o?o:Ot(t.nanos,r.nanos)}function gf(n){return Sy(n)}function Sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Zo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Va(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Sy(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Sy(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function Bd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ig(n){return!!n&&"integerValue"in n}function jd(n){return!!n&&"arrayValue"in n}function G0(n){return!!n&&"nullValue"in n}function sg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xy(n){return!!n&&"mapValue"in n}function og(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=og(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=og(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rA(n){return"nullValue"in n?Ty:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bd(Fu.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function iA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bd(Fu.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ko:nt()}function xI(n,e){const t=Uu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function MI(n,e){const t=Uu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=og(t)}setAll(e){let t=lr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=og(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());xy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];xy(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Yl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ci(og(this.value))}}function RI(n){const e=[];return Yl(n.fields,(t,r)=>{const o=new lr([t]);if(xy(r)){const u=RI(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new La(e)}class Mn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Mn(e,0,Et.min(),Et.min(),Ci.empty(),0)}static newFoundDocument(e,t,r){return new Mn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new Mn(e,2,t,Et.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,Et.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mo{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function mf(n){return n.fields.find(e=>2===e.kind)}function Jl(n){return n.fields.filter(e=>2!==e.kind)}mo.UNKNOWN_ID=-1;class yf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xl(0,yo.min())}}function My(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new yo(o,je.empty(),e)}function Ry(n){return new yo(n.readTime,n.key,-1)}class yo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yo(Et.min(),je.empty(),-1)}static max(){return new yo(Et.max(),je.empty(),-1)}}function Ua(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}class Yn{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ag(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ag(this.root,e,this.comparator,!1)}getReverseIterator(){return new ag(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ag(this.root,e,this.comparator,!0)}}class ag{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Ar.RED,this.left=null!=o?o:Ar.EMPTY,this.right=null!=u?u:Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Ar(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ar.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1,Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ar(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class Oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $d(n){return n.hasNext()?n.getNext():void 0}class OI{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function Hd(n,e=null,t=[],r=[],o=null,u=null,d=null){return new OI(n,e,t,r,o,u,d)}function Us(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+gf(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Lu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gf(r)).join(",")),e.P=t}return e.P}function Qo(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!K0(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Yo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Q0(n.startAt,e.startAt)&&Q0(n.endAt,e.endAt)}function Bu(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ba(n,e){return n.filters.filter(t=>t instanceof Ur&&t.field.isEqual(e))}function q0(n,e,t){let r=Ty,o=!0;for(const u of Ba(n,e)){let d=Ty,m=!0;switch(u.op){case"<":case"<=":d=rA(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Ty}xI({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];xI({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Ny(n,e,t){let r=Ko,o=!0;for(const u of Ba(n,e)){let d=Ko,m=!0;switch(u.op){case">=":case">":d=iA(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Ko}MI({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];MI({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Ur extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new ky(e,t,r):"array-contains"===t?new PI(e,r):"in"===t?new W0(e,r):"not-in"===t?new sA(e,r):"array-contains-any"===t?new Z0(e,r):new Ur(e,t,r)}static V(e,t,r){return"in"===t?new Fy(e,r):new z0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Uu(t,this.value)):null!==t&&Ql(this.value)===Ql(t)&&this.v(Uu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ky extends Ur{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class Fy extends Ur{constructor(e,t){super(e,"in",t),this.keys=_f(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z0 extends Ur{constructor(e,t){super(e,"not-in",t),this.keys=_f(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _f(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class PI extends Ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jd(t)&&pf(t.arrayValue,this.value)}}class W0 extends Ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pf(this.value.arrayValue,t)}}class sA extends Ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(pf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pf(this.value.arrayValue,t)}}class Z0 extends Ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pf(this.value.arrayValue,r))}}class ja{constructor(e,t){this.position=e,this.inclusive=t}}class Gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function K0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Y0(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(d.referenceValue),t.key):Uu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Q0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yo(n.position[t],e.position[t]))return!1;return!0}class nr{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function J0(n,e,t,r,o,u,d,m){return new nr(n,e,t,r,o,u,d,m)}function qd(n){return new nr(n)}function X0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ug(n){for(const e of n.filters)if(e.S())return e.field;return null}function ew(n){return null!==n.collectionGroup}function zd(n){const e=We(n);if(null===e.D){e.D=[];const t=ug(e),r=X0(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Gd(t)),e.D.push(new Gd(lr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Gd(lr.keyField(),u))}}}return e.D}function Gi(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=Hd(e.path,e.collectionGroup,zd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of zd(e))t.push(new Gd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ja(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new ja(e.startAt.position,e.startAt.inclusive):null;e.C=Hd(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Ly(n,e,t){return new nr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vf(n,e){return Qo(Gi(n),Gi(e))&&n.limitType===e.limitType}function tw(n){return`${Us(Gi(n))}|lt:${n.limitType}`}function Vy(n){return`Query(target=${function Py(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gf(r.value)}`;var r}).join(", ")}]`),Lu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gf(t)).join(",")),`Target(${e})`}(Gi(n))}; limitType=${n.limitType})`}function lg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Y0(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,zd(t),r)||t.endAt&&!function(o,u,d){const m=Y0(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,zd(t),r)));var t,r}function nw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Uy(n){return(e,t)=>{let r=!1;for(const o of zd(n)){const u=NI(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function NI(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Uu(m,w):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function rw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(e)?"-0":e}}function By(n){return{integerValue:""+n}}function jy(n,e){return rg(e)?By(e):rw(n,e)}class cg{constructor(){this._=void 0}}function Jo(n,e,t){return n instanceof Wd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Zd?Hy(n,e):n instanceof ec?sw(n,e):function(r,o){const u=iw(r,o),d=dg(u)+dg(r.k);return ig(u)&&ig(r.k)?By(d):rw(r.M,d)}(n,e)}function $y(n,e,t){return n instanceof Zd?Hy(n,e):n instanceof ec?sw(n,e):t}function iw(n,e){return n instanceof Kd?ig(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Wd extends cg{}class Zd extends cg{constructor(e){super(),this.elements=e}}function Hy(n,e){const t=ow(e);for(const r of n.elements)t.some(o=>Yo(o,r))||t.push(r);return{arrayValue:{values:t}}}class ec extends cg{constructor(e){super(),this.elements=e}}function sw(n,e){let t=ow(e);for(const r of n.elements)t=t.filter(o=>!Yo(o,r));return{arrayValue:{values:t}}}class Kd extends cg{constructor(e,t){super(),this.M=e,this.k=t}}function dg(n){return an(n.integerValue||n.doubleValue)}function ow(n){return jd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wf{constructor(e,t){this.field=e,this.transform=t}}class Gy{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qd{}function aw(n,e,t){n instanceof Ef?function(r,o,u){const d=r.value.clone(),m=zy(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ju?function(r,o,u){if(!Yd(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=zy(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(qy(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uw(n,e,t){var o;n instanceof Ef?function(r,o,u){if(!Yd(r.precondition,o))return;const d=r.value.clone(),m=Wy(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(kI(o),d).setHasLocalMutations()}(n,e,t):n instanceof ju?function(r,o,u){if(!Yd(r.precondition,o))return;const d=Wy(r.fieldTransforms,u,o),m=o.data;m.setAll(qy(r)),m.setAll(d),o.convertToFoundDocument(kI(o),m).setHasLocalMutations()}(n,e,t):Yd(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function aA(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=iw(r.transform,o||null);null!=u&&(null==t&&(t=Ci.empty()),t.set(r.field,u))}return t||null}function fg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ud(t,r,(o,u)=>function hg(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zd&&r instanceof Zd||t instanceof ec&&r instanceof ec?Ud(t.elements,r.elements,Yo):t instanceof Kd&&r instanceof Kd?Yo(t.k,r.k):t instanceof Wd&&r instanceof Wd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function kI(n){return n.isFoundDocument()?n.version:Et.min()}class Ef extends Qd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class ju extends Qd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function qy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zy(n,e,t){const r=new Map;Ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,$y(d,m,t[o]))}return r}function Wy(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Jo(u,d,e))}return r}class Jd extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class _o extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class pg{constructor(e){this.count=e}}var hr,Zt;function FI(n){switch(n){default:return nt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function gg(n){if(void 0===n)return $n("GRPC error has no .code"),de.UNKNOWN;switch(n){case hr.OK:return de.OK;case hr.CANCELLED:return de.CANCELLED;case hr.UNKNOWN:return de.UNKNOWN;case hr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case hr.INTERNAL:return de.INTERNAL;case hr.UNAVAILABLE:return de.UNAVAILABLE;case hr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case hr.NOT_FOUND:return de.NOT_FOUND;case hr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case hr.ABORTED:return de.ABORTED;case hr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case hr.DATA_LOSS:return de.DATA_LOSS;default:return nt()}}(Zt=hr||(hr={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Yl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return j0(this.inner)}size(){return this.innerSize}}const Zy=new Yn(je.comparator);function fi(){return Zy}const LI=new Yn(je.comparator);function bf(...n){let e=LI;for(const t of n)e=e.insert(t.key,t);return e}function Xd(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const lw=new Yn(je.comparator),cw=new vn(je.comparator);function un(...n){let e=cw;for(const t of n)e=e.add(t);return e}const Ky=new vn(Ot);function mg(){return Ky}class If{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,eh.createSynthesizedTargetChangeForCurrentChange(e,t)),new If(Et.min(),r,mg(),fi(),un())}}class eh{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new eh(cr.EMPTY_BYTE_STRING,t,un(),un(),un())}}class Ha{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Yy{constructor(e,t){this.targetId=e,this.$=t}}class dw{constructor(e,t,r=cr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class hw{constructor(){this.B=0,this.L=pw(),this.U=cr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=un(),t=un(),r=un();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new eh(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=pw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class th{constructor(e){this.nt=e,this.st=new Map,this.it=fi(),this.rt=fw(),this.ot=new vn(Ot)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Bu(u))if(0===r){const d=new je(u.path);this.ct(t,d,Mn.newNoDocument(d,Et.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Bu(m.target)){const w=new je(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,Mn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=un();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new If(e,t,this.ot,this.it,r);return this.it=fi(),this.rt=fw(),this.ot=new vn(Ot),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new hw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new vn(Ot),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new hw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function fw(){return new Yn(je.comparator)}function pw(){return new Yn(je.comparator)}const VI={asc:"ASCENDING",desc:"DESCENDING"},UI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Xo{constructor(e,t){this.databaseId=e,this.N=t}}function tc(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qy(n,e){return n.N?e.toBase64():e.toUint8Array()}function gw(n,e){return tc(n,e.toTimestamp())}function Sr(n){return Ct(!!n),Et.fromTimestamp(function(e){const t=Zo(e);return new tr(t.seconds,t.nanos)}(n))}function yg(n,e){return(t=n,new zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mw(n){const e=zt.fromString(n);return Ct(Iw(e)),e}function Cf(n,e){return yg(n.databaseId,e.path)}function ea(n,e){const t=mw(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(e_(t))}function Jy(n,e){return yg(n.databaseId,e)}function Xy(n){const e=mw(n);return 4===e.length?zt.emptyPath():e_(e)}function _g(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e_(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yw(n,e,t){return{name:Cf(n,e),fields:t.value.mapValue.fields}}function _w(n,e,t){const r=ea(n,e.name),o=Sr(e.updateTime),u=new Ci({mapValue:{fields:e.fields}}),d=Mn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function nc(n,e){let t;if(e instanceof Ef)t={update:yw(n,e.key,e.value)};else if(e instanceof Jd)t={delete:Cf(n,e.key)};else if(e instanceof ju)t={update:yw(n,e.key,e.data),updateMask:r_(e.fieldMask)};else{if(!(e instanceof _o))return nt();t={verify:Cf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Wd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ec)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Kd)return{fieldPath:u.field.canonicalString(),increment:d.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:gw(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function t_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?dr.updateTime(Sr(o.updateTime)):void 0!==o.exists?dr.exists(o.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Ct("REQUEST_TIME"===d.setToServerValue),m=new Wd):"appendMissingElements"in d?m=new Zd(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ec(d.removeAllFromArray.values||[]):"increment"in d?m=new Kd(u,d.increment):nt();const w=lr.fromServerFormat(d.fieldPath);return new wf(w,m)}(n,o)):[];var o;if(e.update){const o=ea(n,e.update.name),u=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new La((e.updateMask.fieldPaths||[]).map(C=>lr.fromServerFormat(C)));return new ju(o,u,d,t,r)}return new Ef(o,u,t,r)}if(e.delete){const o=ea(n,e.delete);return new Jd(o,t)}if(e.verify){const o=ea(n,e.verify);return new _o(o,t)}return nt()}function n_(n,e){return{documents:[Jy(n,e.path)]}}function BI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Jy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Jy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(x=>function(O){if("=="===O.op){if(sg(O.value))return{unaryFilter:{field:rc(O.field),op:"IS_NAN"}};if(G0(O.value))return{unaryFilter:{field:rc(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(sg(O.value))return{unaryFilter:{field:rc(O.field),op:"IS_NOT_NAN"}};if(G0(O.value))return{unaryFilter:{field:rc(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rc(O.field),op:Ew(O.op),value:O.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:rc((x=C).field),direction:ww(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||Lu(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Bs(n){let e=Xy(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ct(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=jI(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Gd(nh((O=x).field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(x){let O;return O="object"==typeof x?x.value:x,Lu(O)?null:O}(t.limit));let w=null;var x;t.startAt&&(w=new ja((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new ja(x.values||[],!x.before)}(t.endAt)),J0(e,o,d,u,m,"F",w,C)}function jI(n){return n?void 0!==n.unaryFilter?[bw(n)]:void 0!==n.fieldFilter?[dA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>jI(e)).reduce((e,t)=>e.concat(t)):nt():[]}function ww(n){return VI[n]}function Ew(n){return UI[n]}function rc(n){return{fieldPath:n.canonicalString()}}function nh(n){return lr.fromServerFormat(n.fieldPath)}function dA(n){return Ur.create(nh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function bw(n){switch(n.unaryFilter.op){case"IS_NAN":const e=nh(n.unaryFilter.field);return Ur.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=nh(n.unaryFilter.field);return Ur.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=nh(n.unaryFilter.field);return Ur.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=nh(n.unaryFilter.field);return Ur.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function r_(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Iw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Jr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cw(e)),e=$I(n.get(t),e);return Cw(e)}function $I(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Cw(n){return n+"\x01\x01"}function ta(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:nt()}u=d+2}return new zt(r)}const Dw=["userId","batchId"];function vg(n,e){return[n,Jr(e)]}function Tw(n,e,t){return[n,Jr(e),t]}const wg={},rh=["prefixPath","collectionGroup","readTime","documentId"],HI=["prefixPath","collectionGroup","documentId"],Df=["collectionGroup","readTime","prefixPath","documentId"],GI=["canonicalId","targetId"],qI=["targetId","path"],i_=["path","targetId"],na=["collectionId","parent"],Tf=["indexId","uid"],pi=["uid","sequenceNumber"],ic=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Eg=["indexId","uid","orderedDocumentKey"],js=["userId","collectionPath","documentId"],s_=["userId","collectionPath","largestBatchId"],ih=["userId","collectionGroup","largestBatchId"],sc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sh=[...sc,"documentOverlays"],oc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oh=[...oc,"indexConfiguration","indexState","indexEntries"],ac="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(o=>o?ue.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Ga{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Vr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new ah(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=bg(r.target.error);this.At.reject(new ah(e,o))}}static open(e,t,r,o){try{return new Ga(t,e.transaction(o,r))}catch(u){throw new ah(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sw(t)}}class $s{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===$s.Vt((0,dt.z$)())&&$n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Hu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,dt.hl)())return!1;if($s.St())return!0;const e=(0,dt.z$)(),t=$s.Vt(e),r=0<t&&t<10,o=$s.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new ah(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ah(e,m))},u.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,pe.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Ga.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(x=>(w.bt(),x)).catch(x=>(w.abort(x),ue.reject(x))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Aw{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Hu(this.Ft.delete())}}class ah extends xe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $u(n){return"IndexedDbTransactionError"===n.name}class Sw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hu(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Hu(this.store.add(e))}get(e){return Hu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Hu(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Hu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ue((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new ue((r,o)=>{t.onerror=u=>{const d=bg(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new ue((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new Aw(m),C=t(m.primaryKey,m.value,w);if(C instanceof ue){const x=C.catch(O=>(w.done(),ue.reject(O)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hu(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=bg(r.target.error);t(o)}})}let o_=!1;function bg(n){const e=$s.Vt((0,dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o_||(o_=!0,setTimeout(()=>{throw r},0)),r}}return n}class a_ extends uc{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Br(n,e){const t=We(n);return $s.xt(t.Ht,e)}class Ig{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&aw(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&uw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&uw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Ud(this.mutations,e.mutations,(t,r)=>fg(t,r))&&Ud(this.baseMutations,e.baseMutations,(t,r)=>fg(t,r))}}class u_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ct(e.mutations.length===r.length);let o=lw;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new u_(e,t,r,o)}}class l_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qa{constructor(e,t,r,o,u=Et.min(),d=Et.min(),m=cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new qa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xw{constructor(e){this.Jt=e}}function c_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Cf(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:tc(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gu(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:Gu(e.version)}}var o,u;return r}function Cg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lc(n){const e=new tr(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function uh(n,e){const t=(e.baseMutations||[]).map(u=>t_(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>t_(n.Jt,u)),o=tr.fromMillis(e.localWriteTimeMs);return new Ig(e.batchId,o,t,r)}function Dg(n){const e=lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lc(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(Ct(1===(o=n.query).documents.length),r=Gi(qd(Xy(o.documents[0])))):r=Gi(Bs(n.query)),new qa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,cr.fromBase64String(n.resumeToken))}function Mw(n,e){const t=Gu(e.snapshotVersion),r=Gu(e.lastLimboFreeSnapshotVersion);let o;o=Bu(e.target)?n_(n.Jt,e.target):BI(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Us(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Af(n){const e=Bs({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ly(e,e.limit,"L"):e}function Sf(n,e){return new l_(e.largestBatchId,t_(n.Jt,e.overlayMutation))}function Rw(n,e){const t=e.path.lastSegment();return[n,Jr(e.path.popLast()),t]}class hA{getBundleMetadata(e,t){return WI(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:lc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return WI(e).put({bundleId:(r=t).id,createTime:Gu(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ZI(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Af(o.bundledQuery),readTime:lc(o.readTime)};var o})}saveNamedQuery(e,t){return ZI(e).put({name:(r=t).name,readTime:Gu(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function WI(n){return Br(n,"bundles")}function ZI(n){return Br(n,"namedQueries")}class d_{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new d_(e,t.uid||"")}getOverlay(e,t){return lh(e).get(Rw(this.userId,t)).next(r=>r?Sf(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new l_(t,d);o.push(this.Xt(e,m))}),ue.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Jr(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(lh(e).Qt("collectionPathOverlayIndex",m))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Xd(),u=Jr(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return lh(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=Sf(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Xd();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lh(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,x)=>{const O=Sf(this.M,C);u.size()<o||O.largestBatchId===d?(u.set(O.getKey(),O),d=O.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return lh(e).put(function(r,o,u){const[d,m,w]=Rw(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:nc(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function lh(n){return Br(n,"documentOverlays")}class ch{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(an(e.integerValue));else if("doubleValue"in e){const r=an(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Vu(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Va(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?SI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function KI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function cc(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=KI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ch.fe=new ch;class YI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=cc(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=cc(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Ow{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class QI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class dh{constructor(){this.De=new YI,this.Ce=new Ow(this.De),this.xe=new QI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ra{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ra(this.indexId,this.documentKey,this.arrayValue,r)}}function dc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=h_(n.arrayValue,e.arrayValue),0!==t?t:(t=h_(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function h_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class JI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=mf(e);if(void 0!==t&&!this.Be(t))return!1;const r=Jl(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class XI{constructor(){this.qe=new f_}addToCollectionParentIndex(e,t){return this.qe.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(yo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class f_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new vn(zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new vn(zt.comparator)).toArray()}}const Tg=new Uint8Array(0);class eC{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new f_,this.Ge=new $a(r=>Us(r),(r,o)=>Qo(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Jr(o)};return p_(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[U0(t),""],!1,!0);return p_(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ta(d.parent))}return r})}addFieldIndex(e,t){const r=Mf(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Mf(e),o=Rf(e),u=xf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xf(e);let o=!0;const u=new Map;return ue.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=un();const m=[];return ue.forEach(u,(w,C)=>{var x;Ne("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(vt=>`${vt.fieldPath}:${vt.kind}`).join(",")}`} to execute ${Us(t)}`);const O=function(vt,at){const Rt=mf(at);if(void 0===Rt)return null;for(const Gt of Ba(vt,Rt.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(C,w),U=function(vt,at){const Rt=new Map;for(const Gt of Jl(at))for(const Hr of Ba(vt,Gt.fieldPath))switch(Hr.op){case"==":case"in":Rt.set(Gt.fieldPath.canonicalString(),Hr.value);break;case"not-in":case"!=":return Rt.set(Gt.fieldPath.canonicalString(),Hr.value),Array.from(Rt.values())}return null}(C,w),Z=function(vt,at){const Rt=[];let Gt=!0;for(const Hr of Jl(at)){const nu=0===Hr.kind?q0(vt,Hr.fieldPath,vt.startAt):Ny(vt,Hr.fieldPath,vt.startAt);Rt.push(nu.value),Gt&&(Gt=nu.inclusive)}return new ja(Rt,Gt)}(C,w),ie=function(vt,at){const Rt=[];let Gt=!0;for(const Hr of Jl(at)){const nu=0===Hr.kind?Ny(vt,Hr.fieldPath,vt.endAt):q0(vt,Hr.fieldPath,vt.endAt);Rt.push(nu.value),Gt&&(Gt=nu.inclusive)}return new ja(Rt,Gt)}(C,w),Oe=this.We(w,C,Z),Ve=this.We(w,C,ie),At=this.ze(w,C,U),St=this.He(w.indexId,O,Oe,Z.inclusive,Ve,ie.inclusive,At);return ue.forEach(St,vt=>r.Gt(vt,t.limit).next(at=>{at.forEach(Rt=>{const Gt=je.fromSegments(Rt.documentKey);d.has(Gt)||(d=d.add(Gt),m.push(Gt))})}))}).next(()=>m)}return ue.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),x=[];for(let O=0;O<w;++O){const U=t?this.Je(t[O/C]):Tg,Z=this.Ye(e,U,r[O%C],o),ie=this.Xe(e,U,u[O%C],d),Oe=m.map(Ve=>this.Ye(e,U,Ve,!0));x.push(...this.createRange(Z,ie,Oe))}return x}Ye(e,t,r,o){const u=new ra(e,je.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new ra(e,je.empty(),t,r);return o?u.ke():u}je(e,t){const r=new JI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return ue.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new vn(lr.comparator),w=!1;for(const C of d.filters){const x=C;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:m=m.add(x.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new dh;for(const o of Jl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);ch.fe.Zt(u,d)}return r.Se()}Je(e){const t=new dh;return ch.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new dh;return ch.fe.Zt(Bd(this.databaseId,t),r.Ne(function(o){const u=Jl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new dh);let u=0;for(const d of Jl(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&jd(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);ch.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new dh;w.seed(m.Se()),ch.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Ur&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Mf(e),o=Rf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return ue.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,x){const O=x?new Xl(x.sequenceNumber,new yo(lc(x.readTime),new je(ta(x.documentKey)),x.largestBatchId)):Xl.empty(),U=C.fields.map(([Z,ie])=>new yf(lr.fromServerFormat(Z),ie));return new mo(C.indexId,C.collectionGroup,U,O)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ot(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Mf(e),u=Rf(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ue.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Gu((U=r).readTime),documentKey:Jr(U.documentKey.path),largestBatchId:U.largestBatchId});var U})))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ue.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ue.forEach(m,w=>this.on(e,o,w).next(C=>{const x=this.un(u,w);return C.isEqual(x)?ue.resolve():this.an(e,u,w,C,x)}))))})}cn(e,t,r,o){return xf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return xf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=xf(e);let u=new vn(dc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new ra(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new vn(dc);const o=this.Ze(t,e);if(null==o)return r;const u=mf(t);if(null!=u){const d=e.data.field(u.fieldPath);if(jd(d))for(const m of d.arrayValue.values||[])r=r.add(new ra(t.indexId,e.key,this.Je(m),o))}else r=r.add(new ra(t.indexId,e.key,Tg,o));return r}an(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,x,O){const U=m.getIterator(),Z=w.getIterator();let ie=$d(U),Oe=$d(Z);for(;ie||Oe;){let Ve=!1,At=!1;if(ie&&Oe){const St=C(ie,Oe);St<0?At=!0:St>0&&(Ve=!0)}else null!=ie?At=!0:Ve=!0;Ve?(x(Oe),Oe=$d(Z)):At?(O(ie),ie=$d(U)):(ie=$d(U),Oe=$d(Z))}}(o,u,dc,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),ue.waitFor(d)}rn(e){let t=1;return Rf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>dc(d,m)).filter((d,m,w)=>!m||0!==dc(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=dc(d,e),w=dc(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Tg,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Tg,[]]));return u}getMinOffset(e,t){let r;return ue.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||Ua(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=yo.min()})).next(()=>r)}}function p_(n){return Br(n,"collectionParents")}function xf(n){return Br(n,"indexEntries")}function Mf(n){return Br(n,"indexConfiguration")}function Rf(n){return Br(n,"indexState")}const Ag={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sg(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,O,U)=>(m++,U.delete()));u.push(w.next(()=>{Ct(1===m)}));const C=[];for(const x of t.mutations){const O=Tw(e,x.key.path,t.batchId);u.push(o.delete(O)),C.push(x.key)}return ue.waitFor(u).next(()=>C)}function xg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class Pw{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Pw(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return za(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=qu(e),d=za(e);return d.add({}).next(m=>{Ct("number"==typeof m);const w=new Ig(m,t,r,o),C=function(U,Z,ie){const Oe=ie.baseMutations.map(At=>nc(U.Jt,At)),Ve=ie.mutations.map(At=>nc(U.Jt,At));return{userId:Z,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:Oe,mutations:Ve}}(this.M,this.userId,w),x=[];let O=new vn((U,Z)=>Ot(U.canonicalString(),Z.canonicalString()));for(const U of o){const Z=Tw(this.userId,U.key.path,m);O=O.add(U.key.path.popLast()),x.push(d.put(C)),x.push(u.put(Z,wg))}return O.forEach(U=>{x.push(this.indexManager.addToCollectionParentIndex(e,U))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),ue.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return za(e).get(t).next(r=>r?(Ct(r.userId===this.userId),uh(this.M,r)):null)}fn(e,t){return this.ln[t]?ue.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return za(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Ct(m.batchId>=r),u=uh(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return za(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return za(e).qt("userMutationsIndex",t).next(r=>r.map(o=>uh(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return qu(e).Wt({range:o},(d,m,w)=>{const[C,x,O]=d,U=ta(x);if(C===this.userId&&t.path.isEqual(U))return za(e).get(O).next(Z=>{if(!Z)throw nt();Ct(Z.userId===this.userId),u.push(uh(this.M,Z))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Ot);const o=[];return t.forEach(u=>{const d=vg(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=qu(e).Wt({range:m},(C,x,O)=>{const[U,Z,ie]=C,Oe=ta(Z);U===this.userId&&u.path.isEqual(Oe)?r=r.add(ie):O.done()});o.push(w)}),ue.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=vg(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new vn(Ot);return qu(e).Wt({range:d},(w,C,x)=>{const[O,U,Z]=w,ie=ta(U);O===this.userId&&r.isPrefixOf(ie)?ie.length===o&&(m=m.add(Z)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(za(e).get(u).next(d=>{if(null===d)throw nt();Ct(d.userId===this.userId),r.push(uh(this.M,d))}))}),ue.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Sg(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ue.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return qu(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=ta(u[1]);o.push(w)}else m.done()}).next(()=>{Ct(0===o.length)})})}containsKey(e,t){return hh(e,this.userId,t)}wn(e){return Mg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function hh(n,e,t){const r=vg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return qu(n).Wt({range:u,jt:!0},(m,w,C)=>{const[x,O,U]=m;x===e&&O===o&&(d=!0),C.done()}).next(()=>d)}function za(n){return Br(n,"mutations")}function qu(n){return Br(n,"documentMutations")}function Mg(n){return Br(n,"mutationQueues")}class hc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new hc(0)}static yn(){return new hc(-1)}}class Rg{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new hc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Et.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wa(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Wa(e).Wt((d,m)=>{const w=Dg(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>ue.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Wa(e).Wt((r,o)=>{const u=Dg(o);t(u)})}pn(e){return Og(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}In(e,t){return Og(e).put("targetGlobalKey",t)}Tn(e,t){return Wa(e).put(Mw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Us(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Wa(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Dg(m);Qo(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=fc(e);return t.forEach(d=>{const m=Jr(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),ue.waitFor(o)}removeMatchingKeys(e,t,r){const o=fc(e);return ue.forEach(t,u=>{const d=Jr(u.path);return ue.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=fc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=fc(e);let u=un();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=ta(d[1]),x=new je(C);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=Jr(t.path),o=IDBKeyRange.bound([r],[U0(r)],!1,!0);let u=0;return fc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Wa(e).get(t).next(r=>r?Dg(r):null)}}function Wa(n){return Br(n,"targets")}function Og(n){return Br(n,"targetGlobal")}function fc(n){return Br(n,"targetDocuments")}function pc(n){return Of.apply(this,arguments)}function Of(){return Of=(0,pe.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==ac)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),Of.apply(this,arguments)}function Pg([n,e],[t,r]){const o=Ot(n,t);return 0===o?Ot(e,r):o}class Nw{constructor(e){this.An=e,this.buffer=new vn(Pg),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Pg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kw{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ne("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,pe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){$u(o)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield pc(o)}yield t.Sn(e)}))}}class g_{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Hn.A);const r=new Nw(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Ag)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ag):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,d=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(C=Date.now(),df()<=Dr.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${O} documents in `+(C-w)+`ms\nTotal Duration: ${C-x}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class Fw{constructor(e,t){this.db=e,this.garbageCollector=new g_(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Pf(e,r)}removeReference(e,t,r){return Pf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pf(e,t)}On(e,t){return function(r,o){let u=!1;return Mg(r).zt(d=>hh(r,d,o).next(m=>(m&&(u=!0),ue.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Et.min()),fc(e).delete([0,Jr(d.path)])))});o.push(w)}}).next(()=>ue.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pf(e,t)}Mn(e,t){const r=fc(e);let o,u=Hn.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==Hn.A&&t(new je(ta(o)),u),u=C,o=w):u=Hn.A}).next(()=>{u!==Hn.A&&t(new je(ta(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pf(n,e){return fc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Jr(e.path),sequenceNumber:r}));var r}class Ng{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Lw{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zu(e).put(r)}removeEntry(e,t,r){return zu(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Cg(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Mn.newInvalidDocument(t);return zu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(gc(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Mn.newInvalidDocument(t)};return zu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(gc(t))},(o,u)=>{r={document:this.$n(t,u),size:xg(u)}}).next(()=>r)}getEntries(e,t){let r=fi();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=fi(),o=new Yn(je.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,xg(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return ue.resolve();let o=new vn(Vw);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(gc(o.first()),gc(o.last())),d=o.getIterator();let m=d.getNext();return zu(e).Wt({index:"documentKeyIndex",range:u},(w,C,x)=>{const O=je.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Vw(m,O)<0;)r(m,null),m=d.getNext();m&&m.isEqual(O)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(gc(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Cg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zu(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=fi();for(const w of d){const C=this.$n(je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=fi();const d=y_(t,r),m=y_(t,yo.max());return zu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,x)=>{const O=this.$n(je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(O.key,O),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new tC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return m_(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Fn(e,t){return m_(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function zI(n,e){let t;if(e.document)t=_w(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=lc(e.noDocument.readTime);t=Mn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=je.fromSegments(e.unknownDocument.path),o=lc(e.unknownDocument.version);t=Mn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new tr(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Mn.newInvalidDocument(e)}}class tC extends Ng{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new $a(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new vn((u,d)=>Ot(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=c_(this.Kn.M,d);o=o.add(u.path.popLast()),r+=xg(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=c_(this.Kn.M,d.convertToNoDocument(Et.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function m_(n){return Br(n,"remoteDocumentGlobal")}function zu(n){return Br(n,"remoteDocumentsV14")}function gc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function y_(n,e){const t=e.documentKey.path.toArray();return[n,Cg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vw(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ot(t[u],r[u]),o)return o;return o=Ot(t.length,r.length),o||(o=Ot(t[t.length-2],r[r.length-2]),o||Ot(t[t.length-1],r[r.length-1]))}class nC{constructor(e){this.M=e}kt(e,t,r,o){const u=new Ga("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dw,{unique:!0}),m.createObjectStore("documentMutations"),Uw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=ue.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Uw(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dw,{unique:!0});const x=w.store("mutations"),O=C.map(U=>x.put(U));return ue.waitFor(O)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:js});w.createIndex("collectionPathOverlayIndex",s_,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",ih,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:rh});w.createIndex("documentKeyIndex",HI),w.createIndex("collectionGroupIndex",Df)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Tf}).createIndex("sequenceNumberIndex",pi,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:ic}).createIndex("documentKeyIndex",Eg,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=xg(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>ue.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>ue.forEach(m,w=>{Ct(w.userId===u.userId);const C=uh(this.M,w);return Sg(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new zt(d),C=[0,Jr(w)];u.push(t.get(C).next(x=>x?ue.resolve():t.put({targetId:0,path:Jr(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:na});const r=t.store("collectionParents"),o=new f_,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Jr(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new zt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const x=ta(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Dg(o),d=Mw(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new je(zt.fromString(C.document.name).popFirst(5)):C.noDocument?je.fromSegments(C.noDocument.path):C.unknownDocument?je.fromSegments(C.unknownDocument.path):nt()).path.toArray();var C;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>ue.waitFor(o))}}function Uw(n){n.createObjectStore("targetDocuments",{keyPath:qI}).createIndex("documentTargetsIndex",i_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",GI,{unique:!0}),n.createObjectStore("targetGlobal")}const Nf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kf{constructor(e,t,r,o,u,d,m,w,C,x,O=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=x,this.ts=O,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=U=>Promise.resolve(),!kf.vt())throw new xe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fw(this,o),this.hs=t+"main",this.M=new xw(w),this.ls=new $s(this.hs,this.ts,new nC(this.M)),this.fs=new Rg(this.referenceDelegate,this.M),this.ds=new Lw(this.M),this._s=new hA,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&$n("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,Nf);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Hn(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,pe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if($u(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return fh(e).get("owner").next(t=>ue.resolve(this.Ps(t)))}Vs(e){return Ff(e).delete(this.clientId)}vs(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Br(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return ue.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ue.resolve(!0):fh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,Nf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ff(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new a_(t,Hn.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ff(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Pw.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new eC(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return d_.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?oh:13===d?oc:12===d?sh:11===d?sc:void nt();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new a_(w,this.es?this.es.next():Hn.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw $n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(de.FAILED_PRECONDITION,ac);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return fh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(de.FAILED_PRECONDITION,Nf)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fh(e).put("owner",t)}static vt(){return $s.vt()}Rs(e){const t=fh(e);return t.get("owner").next(r=>this.Ps(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&($n(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,dt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $n("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){$n("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fh(n){return Br(n,"owner")}function Ff(n){return Br(n,"clientMetadata")}function kg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Bw{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):ew(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new je(t)).next(r=>{let o=bf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=bf();return this.indexManager.getCollectionParents(e,o).next(d=>ue.forEach(d,m=>{const w=(C=t,x=m.child(o),new nr(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.zs(e,w,r).next(C=>{C.forEach((x,O)=>{u=u.insert(x,O)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=Mn.newInvalidDocument(w),o=o.insert(w,C)),uw(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{lg(t,d)||(o=o.remove(u))}),o))}}class Fg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=un(),o=un();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Fg(e,t.fromCache,r,o)}}class __{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return ue.resolve(null)}ei(e,t,r,o){return function oA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(Et.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(df()<=Dr.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vy(t)),this.ri(e,d,t,My(o,-1)))})}si(e,t){let r=new vn(Uy(e));return t.forEach((o,u)=>{lg(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return df()<=Dr.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Vy(t)),this.Zs.Qs(e,t,yo.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class jw{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Yn(Ot),this.ai=new $a(u=>Us(u),Qo),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Bw(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function v_(n,e,t,r){return new jw(n,e,t,r)}function rC(n,e){return w_.apply(this,arguments)}function w_(){return w_=(0,pe.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=un();for(const C of o){d.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}for(const C of u){m.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}return t.fi.Ks(r,w).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),w_.apply(this,arguments)}function iC(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const x=w.batch,O=x.keys();let U=ue.resolve();return O.forEach(Z=>{U=U.next(()=>C.getEntry(m,Z)).next(ie=>{const Oe=w.docVersions.get(Z);Ct(null!==Oe),ie.version.compareTo(Oe)<0&&(x.applyToRemoteDocument(ie,w),ie.isValidDocument()&&(ie.setReadTime(w.commitVersion),C.addEntry(ie)))})}),U.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function E_(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function sC(n,e){const t=We(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,x)=>{const O=o.get(x);if(!O)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,x)));let U=O.withSequenceNumber(u.currentSequenceNumber);var Z,ie,Oe;e.targetMismatches.has(x)?U=U.withResumeToken(cr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(C.resumeToken,r)),o=o.insert(x,U),ie=U,Oe=C,(0===(Z=O).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,U))});let w=fi();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(fr(u,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(Et.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return ue.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function fr(n,e,t){let r=un();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=fi();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Ne("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function $w(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function ph(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,ue.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new qa(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function gh(n,e,t){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,pe.Z)(function*(n,e,t){const r=We(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!$u(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),Lg.apply(this,arguments)}function Vg(n,e,t){const r=We(n);let o=Et.min(),u=un();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const x=We(m),O=x.ai.get(C);return void 0!==O?ue.resolve(x.ui.get(O)):x.fs.getTargetData(w,C)}(r,d,Gi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?o:Et.min(),t?u:un())).next(m=>(mc(r,nw(e),m),{documents:m,_i:u})))}function b_(n,e){const t=We(n),r=We(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function I_(n,e){const t=We(n),r=t.ci.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,My(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(mc(t,e,o),o))}function mc(n,e,t){let r=Et.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function C_(){return C_=(0,pe.Z)(function*(n,e,t,r){const o=We(n);let u=un(),d=fi();for(const C of t){const x=e.wi(C.metadata.name);C.document&&(u=u.add(x));const O=e.mi(C);O.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(x,O)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield ph(o,(C=r,Gi(qd(zt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>fr(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.fi.Gs(C,x)).next(()=>x)))}),C_.apply(this,arguments)}function Hw(n,e){return D_.apply(this,arguments)}function D_(){return D_=(0,pe.Z)(function*(n,e,t=un()){const r=yield ph(n,Gi(Af(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Sr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(cr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),D_.apply(this,arguments)}class Gw{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ue.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Af(r.bundledQuery),readTime:Sr(r.readTime)}),ue.resolve();var r}}class fA{constructor(){this.overlays=new Yn(je.comparator),this.Ii=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const o=Xd(),u=t.length+1,d=new je(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Yn((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=u.get(C.largestBatchId);null===x&&(x=Xd(),u=u.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=Xd(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return ue.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new l_(t,r));let u=this.Ii.get(t);void 0===u&&(u=un(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class Ug{constructor(){this.Ti=new vn(pr.Ei),this.Ai=new vn(pr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new pr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new pr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new je(new zt([])),r=new pr(t,e),o=new pr(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new je(new zt([])),r=new pr(t,e),o=new pr(t,e+1);let u=un();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new pr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return je.comparator(e.key,t.key)||Ot(e.Ci,t.Ci)}static Ri(e,t){return Ot(e.Ci,t.Ci)||je.comparator(e.key,t.key)}}class ia{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new vn(pr.Ei)}checkEmpty(e){return ue.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new Ig(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new pr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(d)}lookupMutationBatch(e,t){return ue.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return ue.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ue.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pr(t,0),o=new pr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Ot);return t.forEach(o=>{const u=new pr(o,0),d=new pr(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),ue.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const d=new pr(new je(u),0);let m=new vn(Ot);return this.Ni.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Ci)),!0)},d),ue.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Ct(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ue.forEach(t.mutations,o=>{const u=new pr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new pr(t,0),o=this.Ni.firstAfterOrEqual(r);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ue.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class aC{constructor(e){this.$i=e,this.docs=new Yn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=fi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Mn.newInvalidDocument(o))}),ue.resolve(r)}getAllFromCollection(e,t,r){let o=fi();const u=new je(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Ua(Ry(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Bi(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uC(this)}getSize(e){return ue.resolve(this.size)}}class uC extends Ng{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class sa{constructor(e){this.persistence=e,this.Li=new $a(t=>Us(t),Qo),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Ug,this.targetCount=0,this.Ki=hc.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),ue.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new hc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Tn(t),ue.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ue.waitFor(u).next(()=>o)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.qi.containsKey(t))}}class vo{constructor(e,t){this.Gi={},this.overlays={},this.es=new Hn(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new sa(this),this.indexManager=new XI,this.ds=new aC(r=>this.referenceDelegate.Qi(r)),this.M=new xw(t),this._s=new Gw(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new ia(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new wo(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return ue.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class wo extends uc{constructor(e){super(),this.currentSequenceNumber=e}}class Bg{constructor(e){this.persistence=e,this.Hi=new Ug,this.Ji=null}static Yi(e){return new Bg(e)}get Xi(){if(this.Ji)return this.Ji;throw nt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Xi,r=>{const o=je.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,Et.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ue.or([()=>ue.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function T_(n,e){return`firestore_clients_${n}_${e}`}function qw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function A_(n,e){return`firestore_targets_${n}_${e}`}class jg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new jg(e,t,o.state,u):($n("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Lf(e,r.state,o):($n("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=mg();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=rg(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new mh(e,u):($n("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yc{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yc(t.clientId,t.onlineState):($n("SharedClientState",`Failed to parse online state: ${e}`),null)}}class S_{constructor(){this.activeTargetIds=mg()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $g{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Yn(Ot),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=T_(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new S_),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(T_(e.persistenceKey,o));if(u){const d=mh.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(A_(this.persistenceKey,e));if(r){const o=Lf.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(A_(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void $n("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=Hn.A;if(null!=u)try{const m=JSON.parse(u);Ct("number"==typeof m),d=m}catch(m){$n("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Hn.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new jg(this.currentUser,e,t,r),u=qw(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=qw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=A_(this.persistenceKey,e),u=new Lf(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return mh.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return jg.tr(new Lr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Lf.tr(o,t)}pr(e){return yc.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=mg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class zw{constructor(){this.Ur=new S_,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new S_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ww{Kr(e){}shutdown(){}}class x_{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lC{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Zw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Ne("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw Vd("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${Hg[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new Xp;m.listenOnce(P0.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Qp.NO_ERROR:const C=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Qp.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case Qp.HTTP_ERROR:const x=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const O=m.getResponseJson().error;if(O&&O.status&&O.message){const U=function(Z){const ie=Z.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ie)>=0?ie:de.UNKNOWN}(O.status);d(new xe(U,O.message))}else d(new xe(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(de.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=bI(),d=II(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new N0({})),this.lo(m.initMessageHeaders,t,r),(0,dt.uI)()||(0,dt.b$)()||(0,dt.d)()||(0,dt.w1)()||(0,dt.Mn)()||(0,dt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Ne("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let x=!1,O=!1;const U=new lC({Jr:ie=>{O?Ne("Connection","Not sending because WebChannel is closed:",ie):(x||(Ne("Connection","Opening WebChannel transport."),C.open(),x=!0),Ne("Connection","WebChannel sending:",ie),C.send(ie))},Yr:()=>C.close()}),Z=(ie,Oe,Ve)=>{ie.listen(Oe,At=>{try{Ve(At)}catch(St){setTimeout(()=>{throw St},0)}})};return Z(C,Jp.EventType.OPEN,()=>{O||Ne("Connection","WebChannel transport opened.")}),Z(C,Jp.EventType.CLOSE,()=>{O||(O=!0,Ne("Connection","WebChannel transport closed"),U.ro())}),Z(C,Jp.EventType.ERROR,ie=>{O||(O=!0,Vd("Connection","WebChannel transport errored:",ie),U.ro(new xe(de.UNAVAILABLE,"The operation could not be completed")))}),Z(C,Jp.EventType.MESSAGE,ie=>{var Oe;if(!O){const Ve=ie.data[0];Ct(!!Ve);const At=Ve,St=At.error||(null===(Oe=At[0])||void 0===Oe?void 0:Oe.error);if(St){Ne("Connection","WebChannel received error:",St);const vt=St.status;let at=function(Gt){const Hr=hr[Gt];if(void 0!==Hr)return gg(Hr)}(vt),Rt=St.message;void 0===at&&(at=de.INTERNAL,Rt="Unknown error status: "+vt+" with message "+St.message),O=!0,U.ro(new xe(at,Rt)),C.close()}else Ne("Connection","WebChannel received:",Ve),U.oo(Ve)}}),Z(d,Zl.STAT_EVENT,ie=>{ie.stat===Ey.PROXY?Ne("Connection","Detected buffering proxy"):ie.stat===Ey.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{U.io()},0),U}}function M_(){return"undefined"!=typeof window?window:null}function yh(){return"undefined"!=typeof document?document:null}function Wu(n){return new Xo(n,!0)}class Vf{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class R_{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Vf(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,pe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?($n(t.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new xe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kw extends R_{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function lA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:nt(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(Ct(void 0===C||"string"==typeof C),cr.fromBase64String(C||"")):(Ct(void 0===C||C instanceof Uint8Array),cr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?de.UNKNOWN:gg(w.code);return new xe(C,w.message||"")}(d);t=new dw(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ea(n,r.document.name),u=Sr(r.document.updateTime),d=new Ci({mapValue:{fields:r.document.fields}}),m=Mn.newFoundDocument(o,u,d);t=new Ha(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ea(n,r.document),u=r.readTime?Sr(r.readTime):Et.min(),d=Mn.newNoDocument(o,u);t=new Ha([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ea(n,r.document);t=new Ha([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new pg(r.count||0);t=new Yy(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?Sr(u.readTime):Et.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=_g(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=Bu(m)?{documents:n_(o,m)}:{query:BI(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Qy(o,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(d.readTime=tc(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function cA(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=_g(this.M),t.removeTarget=e,this.Lo(t)}}class Yw extends R_{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function vw(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,o){let u=Sr(r.updateTime?r.updateTime:o);return u.isEqual(Et.min())&&(u=Sr(o)),new Gy(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.tu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=_g(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nc(this.M,r))};this.Lo(t)}}class Qw extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(de.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(de.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class Jw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?($n(t),this.uu=!1):Ne("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Xw{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;Zu(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(C){const x=We(C);x.wu.add(4),yield vh(x),x.yu.set("Unknown"),x.wu.delete(4),yield _h(x)}),function(C){return w.apply(this,arguments)})(d))}))}),this.yu=new Jw(r,o)}}function _h(n){return O_.apply(this,arguments)}function O_(){return O_=(0,pe.Z)(function*(n){if(Zu(n))for(const e of n.mu)yield e(!0)}),O_.apply(this,arguments)}function vh(n){return P_.apply(this,arguments)}function P_(){return P_=(0,pe.Z)(function*(n){for(const e of n.mu)yield e(!1)}),P_.apply(this,arguments)}function Gg(n,e){const t=We(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),F_(t)?k_(t):Bf(t).Mo()&&N_(t,e))}function Uf(n,e){const t=We(n),r=Bf(t);t._u.delete(e),r.Mo()&&eE(t,e),0===t._u.size&&(r.Mo()?r.$o():Zu(t)&&t.yu.set("Unknown"))}function N_(n,e){n.pu.Z(e.targetId),Bf(n).Ho(e)}function eE(n,e){n.pu.Z(e),Bf(n).Jo(e)}function k_(n){n.pu=new th({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Bf(n).start(),n.yu.au()}function F_(n){return Zu(n)&&!Bf(n).ko()&&n._u.size>0}function Zu(n){return 0===We(n).wu.size}function tE(n){n.pu=void 0}function cC(n){return L_.apply(this,arguments)}function L_(){return L_=(0,pe.Z)(function*(n){n._u.forEach((e,t)=>{N_(n,e)})}),L_.apply(this,arguments)}function dC(n,e){return V_.apply(this,arguments)}function V_(){return V_=(0,pe.Z)(function*(n,e){tE(n),F_(n)?(n.yu.lu(e),k_(n)):n.yu.set("Unknown")}),V_.apply(this,arguments)}function hC(n,e,t){return U_.apply(this,arguments)}function U_(){return U_=(0,pe.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof dw&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qg(n,r)}else if(e instanceof Ha?n.pu.ut(e):e instanceof Yy?n.pu._t(e):n.pu.ht(e),!t.isEqual(Et.min()))try{const r=yield E_(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(w);C&&o._u.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(cr.EMPTY_BYTE_STRING,w.snapshotVersion)),eE(o,m);const C=new qa(w.target,m,1,w.sequenceNumber);N_(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield qg(n,r)}var r}),U_.apply(this,arguments)}function qg(n,e,t){return zg.apply(this,arguments)}function zg(){return zg=(0,pe.Z)(function*(n,e,t){if(!$u(e))throw e;n.wu.add(1),yield vh(n),n.yu.set("Offline"),t||(t=()=>E_(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield _h(n)}))}),zg.apply(this,arguments)}function B_(n,e){return e().catch(t=>qg(n,t,e))}function _c(n){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,pe.Z)(function*(n){const e=We(n),t=ot(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;nE(e);)try{const o=yield $w(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,rE(e,o)}catch(o){yield qg(e,o)}j_(e)&&$_(e)}),Wg.apply(this,arguments)}function nE(n){return Zu(n)&&n.du.length<10}function rE(n,e){n.du.push(e);const t=ot(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function j_(n){return Zu(n)&&!ot(n).ko()&&n.du.length>0}function $_(n){ot(n).start()}function iE(n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,pe.Z)(function*(n){ot(n).nu()}),Zg.apply(this,arguments)}function sE(n){return Za.apply(this,arguments)}function Za(){return Za=(0,pe.Z)(function*(n){const e=ot(n);for(const t of n.du)e.Zo(t.mutations)}),Za.apply(this,arguments)}function fC(n,e,t){return H_.apply(this,arguments)}function H_(){return H_=(0,pe.Z)(function*(n,e,t){const r=n.du.shift(),o=u_.from(r,e,t);yield B_(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield _c(n)}),H_.apply(this,arguments)}function wh(n,e){return oE.apply(this,arguments)}function oE(){return oE=(0,pe.Z)(function*(n,e){var t;e&&ot(n).Xo&&(yield(t=(0,pe.Z)(function*(r,o){if(FI(u=o.code)&&u!==de.ABORTED){const d=r.du.shift();ot(r).Fo(),yield B_(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield _c(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),j_(n)&&$_(n)}),oE.apply(this,arguments)}function Kg(n,e){return aE.apply(this,arguments)}function aE(){return aE=(0,pe.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Zu(t);t.wu.add(3),yield vh(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield _h(t)}),aE.apply(this,arguments)}function Yg(n,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,pe.Z)(function*(n,e){const t=We(n);e?(t.wu.delete(2),yield _h(t)):e||(t.wu.add(2),yield vh(t),t.yu.set("Unknown"))}),Qg.apply(this,arguments)}function Bf(n){return n.Iu||(n.Iu=function(e,t,r){const o=We(e);return o.iu(),new Kw(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:cC.bind(null,n),eo:dC.bind(null,n),zo:hC.bind(null,n)}),n.mu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Fo(),F_(n)?k_(n):n.yu.set("Unknown")):(yield n.Iu.stop(),tE(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function ot(n){return n.Tu||(n.Tu=function(e,t,r){const o=We(e);return o.iu(),new Yw(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:iE.bind(null,n),eo:wh.bind(null,n),eu:sE.bind(null,n),tu:fC.bind(null,n)}),n.mu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Tu.Fo(),yield _c(n)):(yield n.Tu.stop(),n.du.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class G_{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new G_(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eh(n,e){if($n("AsyncQueue",`${e}: ${n}`),$u(n))return new xe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class bh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=bf(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new bh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new bh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jf{constructor(){this.Eu=new Yn(je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):nt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ih{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Ih(e,t,bh.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Jg{constructor(){this.Ru=void 0,this.listeners=[]}}class Xg{constructor(){this.queries=new $a(e=>tw(e),vf),this.onlineState="Unknown",this.bu=new Set}}function Rn(n,e){return uE.apply(this,arguments)}function uE(){return uE=(0,pe.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Jg),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=Eh(d,`Initialization of query '${Vy(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&tm(t)}),uE.apply(this,arguments)}function em(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,pe.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),q_.apply(this,arguments)}function pC(n,e){const t=We(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&tm(t)}function lE(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function tm(n){n.bu.forEach(e=>{e.next()})}class nm{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ih(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ih.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class cE{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class dE{constructor(e){this.M=e}wi(e){return ea(this.M,e)}mi(e){return e.metadata.exists?_w(this.M,e.document,!1):Mn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Sr(e)}}class gC{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hE(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new dE(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||un()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function oC(n,e,t,r){return C_.apply(this,arguments)}(e.localStore,new dE(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield Hw(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function hE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ch{constructor(e){this.key=e}}class fE{constructor(e){this.key=e}}class pE{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=un(),this.mutatedKeys=un(),this.Gu=Uy(e),this.Qu=new bh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new jf,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,O)=>{const U=o.get(x),Z=lg(this.query,O)?O:null,ie=!!U&&this.mutatedKeys.has(U.key),Oe=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ve=!1;U&&Z?U.data.isEqual(Z.data)?ie!==Oe&&(r.track({type:3,doc:Z}),Ve=!0):this.Hu(U,Z)||(r.track({type:2,doc:Z}),Ve=!0,(w&&this.Gu(Z,w)>0||C&&this.Gu(Z,C)<0)&&(m=!0)):!U&&Z?(r.track({type:0,doc:Z}),Ve=!0):U&&!Z&&(r.track({type:1,doc:U}),Ve=!0,(w||C)&&(m=!0)),Ve&&(Z?(d=d.add(Z),u=Oe?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,x)=>function(O,U){const Z=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return Z(O)-Z(U)}(C.type,x.type)||this.Gu(C.doc,x.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new Ih(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new jf,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=un(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new fE(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Ch(r))}),t}ta(e){this.Uu=e._i,this.Ku=un();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Ih.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class mC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rm{constructor(e){this.key=e,this.na=!1}}class gE{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new $a(m=>tw(m),vf),this.ra=new Map,this.oa=new Set,this.ua=new Yn(je.comparator),this.aa=new Map,this.ca=new Ug,this.ha={},this.la=new Map,this.fa=hc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function mE(n,e){return im.apply(this,arguments)}function im(){return im=(0,pe.Z)(function*(n,e){const t=uv(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield ph(t.localStore,Gi(e));t.isPrimaryClient&&Gg(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield z_(t,e,r,"current"===m)}return o}),im.apply(this,arguments)}function z_(n,e,t,r){return vc.apply(this,arguments)}function vc(){return vc=(0,pe.Z)(function*(n,e,t,r){n._a=(x,O,U)=>{return(Z=(0,pe.Z)(function*(ie,Oe,Ve,At){let St=Oe.view.Wu(Ve);St.ii&&(St=yield Vg(ie.localStore,Oe.query,!1).then(({documents:Rt})=>Oe.view.Wu(Rt,St)));const vt=At&&At.targetChanges.get(Oe.targetId),at=Oe.view.applyChanges(St,ie.isPrimaryClient,vt);return um(ie,Oe.targetId,at.Xu),at.snapshot}),function(ie,Oe,Ve,At){return Z.apply(this,arguments)})(n,x,O,U);var Z};const o=yield Vg(n.localStore,e,!0),u=new pE(e,o._i),d=u.Wu(o.documents),m=eh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);um(n,t,w.Xu);const C=new mC(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),vc.apply(this,arguments)}function $f(n,e){return W_.apply(this,arguments)}function W_(){return W_=(0,pe.Z)(function*(n,e){const t=We(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!vf(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Uf(t.remoteStore,r.targetId),Th(t,r.targetId)}).catch(pc))):(Th(t,r.targetId),yield gh(t.localStore,r.targetId,!0))}),W_.apply(this,arguments)}function Z_(){return Z_=(0,pe.Z)(function*(n,e,t){const r=Gf(n);try{const o=yield function(u,d){const m=We(u),w=tr.now(),C=d.reduce((O,U)=>O.add(U.key),un());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",O=>m.fi.Ks(O,C).next(U=>{x=U;const Z=[];for(const ie of d){const Oe=aA(ie,x.get(ie.key));null!=Oe&&Z.push(new ju(ie.key,Oe,RI(Oe.value.mapValue),dr.exists(!0)))}return m.Bs.addMutationBatch(O,w,Z,d)})).then(O=>(O.applyToLocalDocumentSet(x),{batchId:O.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Yn(Ot)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Ka(r,o.changes),yield _c(r.remoteStore)}catch(o){const u=Eh(o,"Failed to persist write");t.reject(u)}}),Z_.apply(this,arguments)}function K_(n,e){return sm.apply(this,arguments)}function sm(){return sm=(0,pe.Z)(function*(n,e){const t=We(n);try{const r=yield sC(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?Ct(d.na):o.removedDocuments.size>0&&(Ct(d.na),d.na=!1))}),yield Ka(t,r,e)}catch(r){yield pc(r)}}),sm.apply(this,arguments)}function Y_(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=We(u);m.onlineState=d;let w=!1;m.queries.forEach((C,x)=>{for(const O of x.listeners)O.Pu(d)&&(w=!0)}),w&&tm(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _C(n,e,t){return om.apply(this,arguments)}function om(){return om=(0,pe.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Yn(je.comparator);d=d.insert(u,Mn.newNoDocument(u,Et.min()));const m=un().add(u),w=new If(Et.min(),new Map,new vn(Ot),d,m);yield K_(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),J_(r)}else yield gh(r.localStore,e,!1).then(()=>Th(r,e,t)).catch(pc)}),om.apply(this,arguments)}function vC(n,e){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,pe.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield iC(t.localStore,e);Dh(t,r,null),am(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ka(t,o)}catch(o){yield pc(o)}}),Q_.apply(this,arguments)}function pA(n,e,t){return yE.apply(this,arguments)}function yE(){return yE=(0,pe.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,d){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(x=>(Ct(null!==x),C=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,C))})}(r.localStore,e);Dh(r,e,t),am(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ka(r,o)}catch(o){yield pc(o)}}),yE.apply(this,arguments)}function _E(){return _E=(0,pe.Z)(function*(n,e){const t=We(n);Zu(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=We(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Eh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),_E.apply(this,arguments)}function am(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Dh(n,e,t){const r=We(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Th(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||vE(n,r)})}function vE(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Uf(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),J_(n))}function um(n,e,t){for(const r of t)r instanceof Ch?(n.ca.addReference(r.key,e),Hf(n,r)):r instanceof fE?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||vE(n,r.key)):nt()}function Hf(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.oa.add(r),J_(n))}function J_(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new je(zt.fromString(e)),r=n.fa.next();n.aa.set(r,new rm(t)),n.ua=n.ua.insert(t,r),Gg(n.remoteStore,new qa(Gi(qd(t.path)),r,2,Hn.A))}}function Ka(n,e,t){return X_.apply(this,arguments)}function X_(){return X_=(0,pe.Z)(function*(n,e,t){const r=We(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=Fg.Ys(w.targetId,C);u.push(x)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,pe.Z)(function*(w,C){const x=We(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>ue.forEach(C,U=>ue.forEach(U.Hs,Z=>x.persistence.referenceDelegate.addReference(O,U.targetId,Z)).next(()=>ue.forEach(U.Js,Z=>x.persistence.referenceDelegate.removeReference(O,U.targetId,Z)))))}catch(O){if(!$u(O))throw O;Ne("LocalStore","Failed to update sequence numbers: "+O)}for(const O of C){const U=O.targetId;if(!O.fromCache){const Z=x.ui.get(U),Oe=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);x.ui=x.ui.insert(U,Oe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),X_.apply(this,arguments)}function wC(n,e){return ev.apply(this,arguments)}function ev(){return ev=(0,pe.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield rC(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new xe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ka(t,r.di)}var o}),ev.apply(this,arguments)}function wE(n,e){const t=We(n),r=t.aa.get(e);if(r&&r.na)return un().add(r.key);{let o=un();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function EC(n,e){return tv.apply(this,arguments)}function tv(){return tv=(0,pe.Z)(function*(n,e){const t=We(n),r=yield Vg(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&um(t,e.targetId,o.Xu),o}),tv.apply(this,arguments)}function Ah(n,e){return nv.apply(this,arguments)}function nv(){return nv=(0,pe.Z)(function*(n,e){const t=We(n);return I_(t.localStore,e).then(r=>Ka(t,r))}),nv.apply(this,arguments)}function EE(n,e,t,r){return rv.apply(this,arguments)}function rv(){return rv=(0,pe.Z)(function*(n,e,t,r){const o=We(n),u=yield function(d,m){const w=We(d),C=We(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.fn(x,m).next(O=>O?w.fi.Ks(x,O):ue.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield _c(o.remoteStore):"acknowledged"===t||"rejected"===t?(Dh(o,e,r||null),am(o,e),m=e,We(We(o.localStore).Bs)._n(m)):nt(),yield Ka(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),rv.apply(this,arguments)}function iv(){return iv=(0,pe.Z)(function*(n,e){const t=We(n);if(uv(t),Gf(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield sv(t,r.toArray());t.da=!0,yield Yg(t.remoteStore,!0);for(const u of o)Gg(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Th(t,d),gh(t.localStore,d,!0))),Uf(t.remoteStore,d)}),yield o,yield sv(t,r),function(u){const d=We(u);d.aa.forEach((m,w)=>{Uf(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new Yn(je.comparator)}(t),t.da=!1,yield Yg(t.remoteStore,!1)}}),iv.apply(this,arguments)}function sv(n,e,t){return ov.apply(this,arguments)}function ov(){return ov=(0,pe.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield ph(r.localStore,Gi(w[0]));for(const C of w){const x=r.ia.get(C),O=yield EC(r,x);O.snapshot&&u.push(O.snapshot)}}else{const C=yield b_(r.localStore,d);m=yield ph(r.localStore,C),yield z_(r,lm(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),ov.apply(this,arguments)}function lm(n){return J0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bC(n){const e=We(n);return We(We(e.localStore).persistence).Fs()}function IE(n,e,t,r){return cm.apply(this,arguments)}function cm(){return cm=(0,pe.Z)(function*(n,e,t,r){const o=We(n);if(o.da)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield I_(o.localStore,nw(u[0])),m=If.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ka(o,d,m);break}case"rejected":yield gh(o.localStore,e,!0),Th(o,e,r);break;default:nt()}}),cm.apply(this,arguments)}function IC(n,e,t){return av.apply(this,arguments)}function av(){return av=(0,pe.Z)(function*(n,e,t){const r=uv(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield b_(r.localStore,o),d=yield ph(r.localStore,u);yield z_(r,lm(u),d.targetId,!1),Gg(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield gh(r.localStore,o,!1).then(()=>{Uf(r.remoteStore,o),Th(r,o)}).catch(pc))}}),av.apply(this,arguments)}function uv(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=K_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_C.bind(null,e),e.sa.zo=pC.bind(null,e.eventManager),e.sa.wa=lE.bind(null,e.eventManager),e}function Gf(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pA.bind(null,e),e}class lv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.M=Wu(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return v_(this.persistence,new __,e.initialUser,this.M)}ya(e){return new vo(Bg.Yi,this.M)}ga(e){return new zw}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class CE extends lv{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Gf(r.Ta.syncEngine),yield _c(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return v_(this.persistence,new __,e.initialUser,this.M)}pa(e){return new kw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=kg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new kf(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,M_(),yh(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new zw}}class DC extends CE{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof $g&&(r.sharedClientState.syncEngine={$r:EE.bind(null,o),Br:IE.bind(null,o),Lr:IC.bind(null,o),Fs:bC.bind(null,o),Fr:Ah.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,pe.Z)(function*(d){yield function bE(n,e){return iv.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=M_();if(!$g.vt(t))throw new xe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $g(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cv{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Y_(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=wC.bind(null,r.syncEngine),yield Yg(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Xg}createDatastore(e){const t=Wu(e.databaseInfo.databaseId),r=new Zw(e.databaseInfo);return new Qw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>Y_(this.syncEngine,m,0),d=x_.vt()?new x_:new Ww,new Xw(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const x=new gE(r,o,u,d,m,w);return C&&(x.da=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=We(t);Ne("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield vh(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function DE(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class TC{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new cE(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,pe.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class AC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,pe.Z)(function*(u,d){const m=We(u),w=_g(m.M)+"/documents",C={documents:d.map(Z=>Cf(m.M,Z))},x=yield m._o("BatchGetDocuments",w,C),O=new Map;x.forEach(Z=>{const ie=function uA(n,e){return"found"in e?function(t,r){Ct(!!r.found);const o=ea(t,r.found.name),u=Sr(r.found.updateTime),d=new Ci({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const o=ea(t,r.missing),u=Sr(r.readTime);return Mn.newNoDocument(o,u)}(n,e):nt()}(m.M,Z);O.set(ie.key.toString(),ie)});const U=[];return d.forEach(Z=>{const ie=O.get(Z.toString());Ct(!!ie),U.push(ie)}),U}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new _o(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(o,u){const d=We(o),m=_g(d.M)+"/documents",w={writes:u.map(C=>nc(d.M,C))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new xe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SC{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new Vf(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,pe.Z)(function*(){const t=new AC(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Lu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!FI(t)}return!1}}class TE{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Lr.UNAUTHENTICATED,this.clientId=Dy.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,pe.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Eh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function dv(n,e){return hv.apply(this,arguments)}function hv(){return hv=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,pe.Z)(function*(u){r.isEqual(u)||(yield rC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),hv.apply(this,arguments)}function AE(n,e){return hm.apply(this,arguments)}function hm(){return hm=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield fv(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Kg(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Kg(e.remoteStore,u)),n.onlineComponents=e}),hm.apply(this,arguments)}function fv(n){return pv.apply(this,arguments)}function pv(){return pv=(0,pe.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield dv(n,new lv)),n.offlineComponents}),pv.apply(this,arguments)}function fm(n){return qf.apply(this,arguments)}function qf(){return qf=(0,pe.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield AE(n,new cv)),n.onlineComponents}),qf.apply(this,arguments)}function pm(n){return fv(n).then(e=>e.persistence)}function gm(n){return fv(n).then(e=>e.localStore)}function mm(n){return fm(n).then(e=>e.remoteStore)}function gv(n){return fm(n).then(e=>e.syncEngine)}function Sh(n){return zf.apply(this,arguments)}function zf(){return zf=(0,pe.Z)(function*(n){const e=yield fm(n),t=e.eventManager;return t.onListen=mE.bind(null,e.syncEngine),t.onUnlisten=$f.bind(null,e.syncEngine),t}),zf.apply(this,arguments)}function mv(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,w){const C=new dm({next:O=>{u.enqueueAndForget(()=>em(o,x));const U=O.docs.has(d);!U&&O.fromCache?w.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&O.fromCache&&m&&"server"===m.source?w.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),x=new nm(qd(d.path),C,{includeMetadataChanges:!0,ku:!0});return Rn(o,x)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}function yv(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,w){const C=new dm({next:O=>{u.enqueueAndForget(()=>em(o,x)),O.fromCache&&"server"===m.source?w.reject(new xe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),x=new nm(d,C,{includeMetadataChanges:!0,ku:!0});return Rn(o,x)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}const wc=new Map;function Ec(n,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xE(n,e,t,r){if(!0===e&&!0===r)throw new xe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NC(n){if(!je.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _v(n){if(je.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _m(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_m(n);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ME(n,e){if(e<=0)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RE({}),this._settingsFrozen=!1,e instanceof Fu?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Iy;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new CI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wc.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),wc.delete(e),t.terminate())}(this),Promise.resolve()}}class gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class xr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class qi extends xr{constructor(e,t,r){super(e,t,qd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new je(e))}withConverter(e){return new qi(this.firestore,e,this._path)}}function PE(n,e,...t){if(n=(0,dt.m9)(n),Ec("collection","path",e),n instanceof xh){const r=zt.fromString(e,...t);return _v(r),new qi(n,null,r)}{if(!(n instanceof gn||n instanceof qi))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return _v(r),new qi(n.firestore,null,r)}}function Wf(n,e,...t){if(n=(0,dt.m9)(n),1===arguments.length&&(e=Dy.R()),Ec("doc","path",e),n instanceof xh){const r=zt.fromString(e,...t);return NC(r),new gn(n,null,new je(r))}{if(!(n instanceof gn||n instanceof qi))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return NC(r),new gn(n.firestore,n instanceof qi?n.converter:null,new je(r))}}function kE(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),(n instanceof gn||n instanceof qi)&&(e instanceof gn||e instanceof qi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function FE(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),n instanceof xr&&e instanceof xr&&n.firestore===e.firestore&&vf(n._query,e._query)&&n.converter===e.converter}class vv{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Vf(this,"async_queue_retry"),this.Qa=()=>{const t=yh();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=yh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=yh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Vr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,pe.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!$u(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,$n("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=G_.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&nt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function wv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class yA{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class On extends xh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new vv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||LC(this),this._firestoreClient.terminate()}}function In(n){return n._firestoreClient||LC(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function LC(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new H0(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new TE(n._authCredentials,n._appCheckCredentials,n._queue,r)}function UC(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield dv(n,t),yield AE(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===de.FAILED_PRECONDITION||u.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function BE(n){if(n._initialized||n._terminated)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ya{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oa(cr.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oa(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bc{constructor(e){this._methodName=e}}class vm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const $C=/^__.*__$/;class Kf{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ju(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ef(e,this.data,t,this.fieldTransforms)}}class bv{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ju(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Iv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class Yf{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Yf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Dc(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Iv(this.ec)&&$C.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class jE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Wu(e)}lc(e,t,r,o=!1){return new Yf({ec:e,methodName:t,hc:r,path:lr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ku(n){const e=n._freezeSettings(),t=Wu(n._databaseId);return new jE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wm(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);Cc("Data must be an object, but it was:",d,r);const m=HE(r,d);let w,C;if(u.merge)w=new La(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const O of u.mergeFields){const U=Tv(e,O,t);if(!d.contains(U))throw new xe(de.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);Jf(x,U)||x.push(U)}w=new La(x),C=d.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,C=d.fieldTransforms;return new Kf(new Ci(m),w,C)}class Qf extends bc{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qf}}function $E(n,e,t){return new Yf({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Cv extends bc{_toFieldTransform(e){return new wf(e.path,new Wd)}isEqual(e){return e instanceof Cv}}class HC extends bc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=$E(this,e,!0),r=this.fc.map(u=>gi(u,t)),o=new Zd(r);return new wf(e.path,o)}isEqual(e){return this===e}}class GC extends bc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=$E(this,e,!0),r=this.fc.map(u=>gi(u,t)),o=new ec(r);return new wf(e.path,o)}isEqual(e){return this===e}}class qC extends bc{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Kd(e.M,jy(e.M,this.dc));return new wf(e.path,t)}isEqual(e){return this===e}}function Ic(n,e,t,r){const o=n.lc(1,e,t);Cc("Data must be an object, but it was:",o,r);const u=[],d=Ci.empty();Yl(r,(w,C)=>{const x=Im(e,w,t);C=(0,dt.m9)(C);const O=o.oc(x);if(C instanceof Qf)u.push(x);else{const U=gi(C,O);null!=U&&(u.push(x),d.set(x,U))}});const m=new La(u);return new bv(d,m,o.fieldTransforms)}function Dv(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[Tv(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let U=0;U<u.length;U+=2)m.push(Tv(e,u[U])),w.push(u[U+1]);const C=[],x=Ci.empty();for(let U=m.length-1;U>=0;--U)if(!Jf(C,m[U])){const Z=m[U];let ie=w[U];ie=(0,dt.m9)(ie);const Oe=d.oc(Z);if(ie instanceof Qf)C.push(Z);else{const Ve=gi(ie,Oe);null!=Ve&&(C.push(Z),x.set(Z,Ve))}}const O=new La(C);return new bv(x,O,d.fieldTransforms)}function Em(n,e,t,r=!1){return gi(t,n.lc(r?4:3,e))}function gi(n,e){if(bm(n=(0,dt.m9)(n)))return Cc("Unsupported field value:",e,n),HE(n,e);if(n instanceof bc)return function(t,r){if(!Iv(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=gi(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jy(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=tr.fromDate(t);return{timestampValue:tc(r.M,o)}}if(t instanceof tr){const o=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:tc(r.M,o)}}if(t instanceof vm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof oa)return{bytesValue:Qy(r.M,t._byteString)};if(t instanceof gn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${_m(t)}`)}(n,e)}function HE(n,e){const t={};return j0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yl(n,(r,o)=>{const u=gi(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function bm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof vm||n instanceof oa||n instanceof gn||n instanceof bc)}function Cc(n,e,t){if(!bm(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_m(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function Tv(n,e,t){if((e=(0,dt.m9)(e))instanceof Ya)return e._internalPath;if("string"==typeof e)return Im(n,e);throw Dc("Field path arguments must be of type string or ",n,!1,void 0,t)}const zC=new RegExp("[~\\*/\\[\\]]");function Im(n,e,t){if(e.search(zC)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ya(...e.split("."))._internalPath}catch(r){throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dc(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(de.INVALID_ARGUMENT,m+n+w)}function Jf(n,e){return n.some(t=>t.isEqual(e))}class Xf{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new WC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ep("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class WC extends Xf{data(){return super.data()}}function ep(n,e){return"string"==typeof e?Im(n,e):e instanceof Ya?e._internalPath:e._delegate._internalPath}class Yu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends Xf{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ep("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Mh extends Eo{data(e={}){return super.data(e)}}class Qu{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Yu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mh(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Mh(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Yu(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Mh(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Yu(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:ZC(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function KC(n,e){return n instanceof Eo&&e instanceof Eo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qu&&e instanceof Qu&&n._firestore===e._firestore&&FE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Cm(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tc{}function Qa(n,...e){for(const t of e)n=t._apply(n);return n}class Av extends Tc{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Ku(e.firestore),r=function(o,u,d,m,w,C,x){let O;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){KE(x,C);const Z=[];for(const ie of x)Z.push(Rv(m,o,ie));O={arrayValue:{values:Z}}}else O=Rv(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||KE(x,C),O=Em(d,"where",x,"in"===C||"not-in"===C);const U=Ur.create(w,C,O);return function(Z,ie){if(ie.S()){const Ve=ug(Z);if(null!==Ve&&!Ve.isEqual(ie.field))throw new xe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${ie.field.toString()}'`);const At=X0(Z);null!==At&&Ov(0,ie.field,At)}const Oe=function(Ve,At){for(const St of Ve.filters)if(At.indexOf(St.op)>=0)return St.op;return null}(Z,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==Oe)throw new xe(de.INVALID_ARGUMENT,Oe===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${Oe.toString()}' filters.`)}(o,U),U}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new xr(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new nr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class YC extends Tc{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Gd(o,u);return function(m,w){if(null===X0(m)){const C=ug(m);null!==C&&Ov(0,C,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new xr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new nr(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class GE extends Tc{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new xr(e.firestore,e.converter,Ly(e._query,this.yc,this.Ic))}}class Dm extends Tc{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Mv(e,this.type,this.Tc,this.Ec);return new xr(e.firestore,e.converter,(o=t,new nr((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class xv extends Tc{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Mv(e,this.type,this.Tc,this.Ec);return new xr(e.firestore,e.converter,(o=t,new nr((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Mv(n,e,t,r){if(t[0]=(0,dt.m9)(t[0]),t[0]instanceof Xf)return function(o,u,d,m,w){if(!m)throw new xe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of zd(o))if(x.field.isKeyField())C.push(Bd(u,m.key));else{const O=m.data.field(x.field);if(eg(O))throw new xe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const U=x.field.canonicalString();throw new xe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}C.push(O)}return new ja(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Ku(n.firestore);return function(u,d,m,w,C,x){const O=u.explicitOrderBy;if(C.length>O.length)throw new xe(de.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let Z=0;Z<C.length;Z++){const ie=C[Z];if(O[Z].field.isKeyField()){if("string"!=typeof ie)throw new xe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ie}`);if(!ew(u)&&-1!==ie.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ie}' contains a slash.`);const Oe=u.path.child(zt.fromString(ie));if(!je.isDocumentKey(Oe))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Ve=new je(Oe);U.push(Bd(d,Ve))}else{const Oe=Em(m,w,ie);U.push(Oe)}}return new ja(U,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Rv(n,e,t){if("string"==typeof(t=(0,dt.m9)(t))){if(""===t)throw new xe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ew(e)&&-1!==t.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!je.isDocumentKey(r))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bd(n,new je(r))}if(t instanceof gn)return Bd(n,t._key);throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_m(t)}.`)}function KE(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ov(n,e,t){if(!t.isEqual(e))throw new xe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const eD={maxAttempts:5};class Xr{convertValue(e,t="none"){switch(Ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Yl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new vm(an(e.latitude),an(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ng(e));default:return null}}convertTimestamp(e){const t=Zo(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Ct(Iw(r));const o=new Fu(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||$n(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Ja(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tD extends Xr{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}class YE{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ku(e)}set(e,t,r){this._verifyNotCommitted();const o=Ac(e,this._firestore),u=Ja(o.converter,t,r),d=wm(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,dr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ac(e,this._firestore);let d;return d="string"==typeof(t=(0,dt.m9)(t))||t instanceof Ya?Dv(this._dataReader,"WriteBatch.update",u._key,t,r,o):Ic(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ac(e,this._firestore);return this._mutations=this._mutations.concat(new Jd(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ac(n,e){if((n=(0,dt.m9)(n)).firestore!==e)throw new xe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Sc extends Xr{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function Tm(n,e,t){n=Wt(n,gn);const r=Wt(n.firestore,On),o=Ja(n.converter,e,t);return xc(r,[wm(Ku(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,dr.none())])}function Nv(n,e,t,...r){n=Wt(n,gn);const o=Wt(n.firestore,On),u=Ku(o);let d;return d="string"==typeof(e=(0,dt.m9)(e))||e instanceof Ya?Dv(u,"updateDoc",n._key,e,t,r):Ic(u,"updateDoc",n._key,e),xc(o,[d.toMutation(n._key,dr.exists(!0))])}function Sm(n,...e){var t,r,o;n=(0,dt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||wv(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(wv(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[d+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let w,C,x;if(n instanceof gn)C=Wt(n.firestore,On),x=qd(n._key.path),w={next:O=>{e[d]&&e[d](kv(C,n,O))},error:e[d+1],complete:e[d+2]};else{const O=Wt(n,xr);C=Wt(O.firestore,On),x=O._query;const U=new Sc(C);w={next:Z=>{e[d]&&e[d](new Qu(C,U,O,Z))},error:e[d+1],complete:e[d+2]},Cm(n._query)}return function(O,U,Z,ie){const Oe=new dm(ie),Ve=new nm(U,Oe,Z);return O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Rn(yield Sh(O),Ve)})),()=>{Oe.Aa(),O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return em(yield Sh(O),Ve)}))}}(In(C),x,m,w)}function xc(n,e){return function(t,r){const o=new Vr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function yC(n,e,t){return Z_.apply(this,arguments)}(yield gv(t),r,o)})),o.promise}(In(n),e)}function kv(n,e,t){const r=t.docs.get(e._key),o=new Sc(n);return new Eo(n,o,e._key,r,new Yu(t.hasPendingWrites,t.fromCache),e.converter)}class XE extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ku(e)}get(e){const t=Ac(e,this._firestore),r=new tD(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new Xf(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Xf(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=Ac(e,this._firestore),u=Ja(o.converter,t,r),d=wm(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Ac(e,this._firestore);let d;return d="string"==typeof(t=(0,dt.m9)(t))||t instanceof Ya?Dv(this._dataReader,"Transaction.update",u._key,t,r,o):Ic(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Ac(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ac(e,this._firestore),r=new Sc(this._firestore);return super.get(e).then(o=>new Eo(this._firestore,r,t._key,o._document,new Yu(!1,!1),t.converter))}}function Mm(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Uv(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function nb(){if(!function go(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Kl=Cr.SDK_VERSION,(0,Cr._registerComponent)(new Ms.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new On(o,new tA(t.getProvider("auth-internal")),new DI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Cr.registerVersion)(k0,"3.4.9",n),(0,Cr.registerVersion)(k0,"3.4.9","esm2017")}();class np{constructor(e){this._delegate=e}static fromBase64String(e){return nb(),new np(oa.fromBase64String(e))}static fromUint8Array(e){return Uv(),new np(oa.fromUint8Array(e))}toBase64(){return nb(),this._delegate.toBase64()}toUint8Array(){return Uv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Rm(n){return function aD(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rb{enableIndexedDbPersistence(e,t){return function LE(n,e){BE(n=Wt(n,On));const t=In(n),r=n._freezeSettings(),o=new cv;return UC(t,o,new CE(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VC(n){BE(n=Wt(n,On));const e=In(n),t=n._freezeSettings(),r=new cv;return UC(e,r,new DC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function VE(n){if(n._initialized&&!n._terminated)throw new xe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!$s.vt())return Promise.resolve();const o=r+"main";yield $s.delete(o)}),function(r){return t.apply(this,arguments)})(kg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Bv{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function OE(n,e,t,r={}){var o;const u=(n=Wt(n,xh))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Vd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Lr.MOCK_USER;else{d=(0,dt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Lr(w)}n._authCredentials=new L0(new by(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function UE(n){return function xC(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield pm(n),t=yield mm(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o.wu.delete(0),_h(o)}(t)}))}(In(n=Wt(n,On)))}(this._delegate)}disableNetwork(){return function Ev(n){return function SE(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield pm(n),t=yield mm(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(o){const u=We(o);u.wu.add(0),yield vh(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(In(n=Wt(n,On)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _A(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function gA(n,e){return _E.apply(this,arguments)}(yield gv(e),t)})),t.promise}(In(n=Wt(n,On)))}(this._delegate)}onSnapshotsInSync(e){return function EA(n,e){return function mA(n,e){const t=new dm(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Sh(n),o=t,We(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Sh(n),o=t,void We(r).bu.delete(o);var r,o}))}}(In(n=Wt(n,On)),wv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xa(this,PE(this._delegate,e))}catch(t){throw zi(t,"collection()","Firestore.collection()")}}doc(e){try{return new gs(this,Wf(this._delegate,e))}catch(t){throw zi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wi(this,function NE(n,e){if(n=Wt(n,xh),Ec("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xr(n,null,(t=e,new nr(zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw zi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function xm(n,e,t){n=Wt(n,On);const r=Object.assign(Object.assign({},eD),t);return function(o){if(o.maxAttempts<1)throw new xe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function OC(n,e,t){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const o=yield(u=n,fm(u).then(d=>d.datastore));var u;new SC(n.asyncQueue,o,t,e,r).run()})),r.promise}(In(n),o=>e(new XE(n,o)),r)}(this._delegate,t=>e(new sb(this,t)))}batch(){return In(this._delegate),new ob(new YE(this._delegate,e=>xc(this._delegate,e)))}loadBundle(e){return function BC(n,e){const t=In(n=Wt(n,On)),r=new yA;return function ym(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return DE(w,C);if(w instanceof ArrayBuffer)return DE(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new TC(w,d);var w}(t,Wu(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function CC(n,e,t){const r=We(n);var o;(o=(0,pe.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(U,Z){const ie=We(U),Oe=Sr(Z.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Ve=>ie._s.getBundleMetadata(Ve,Z.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Oe)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(U=w).totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}),Promise.resolve(new Set);m._updateProgress(hE(w));const C=new gC(w,u.localStore,d.M);let x=yield d.ma();for(;x;){const U=yield C.Fu(x);U&&m._updateProgress(U),x=yield d.ma()}const O=yield C.complete();return yield Ka(u,O.Lu,void 0),yield function(U,Z){const ie=We(U);return ie.persistence.runTransaction("Save bundle","readwrite",Oe=>ie._s.saveBundleMetadata(Oe,Z))}(u.localStore,w),m._completeWith(O.progress),Promise.resolve(O.Bu)}catch(w){return Vd("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var U}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield gv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function jC(n,e){return function PC(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield gm(n),e)}))}(In(n=Wt(n,On)),e).then(t=>t?new xr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Wi(this,t):null)}}class rp extends Xr{constructor(e){super(),this.firestore=e}convertBytes(e){return new np(new oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return gs.forKey(t,this.firestore,null)}}class sb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new rp(e)}get(e){const t=Oh(e);return this._delegate.get(t).then(r=>new Om(this._firestore,new Eo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Oh(e);return r?(Mm("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Oh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Oh(e);return this._delegate.delete(t),this}}class ob{constructor(e){this._delegate=e}set(e,t,r){const o=Oh(e);return r?(Mm("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Oh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Oh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Mh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pm(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Rh.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Rh(e,new rp(e),t),o.set(t,u)),u}}Rh.INSTANCES=new WeakMap;class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rp(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gs(t,new gn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new gs(t,new gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xa(this.firestore,PE(this._delegate,e))}catch(t){throw zi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,dt.m9)(e))instanceof gn&&kE(this._delegate,e)}set(e,t){t=Mm("DocumentReference.set",t);try{return t?Tm(this._delegate,e,t):Tm(this._delegate,e)}catch(r){throw zi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Nv(this._delegate,e):Nv(this._delegate,e,t,...r)}catch(o){throw zi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function JE(n){return xc(Wt(n.firestore,On),[new Jd(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=uD(e),r=lD(e,o=>new Om(this.firestore,new Eo(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Sm(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Pv(n){n=Wt(n,gn);const e=Wt(n.firestore,On),t=In(e),r=new Sc(e);return function MC(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield function(w,C){const x=We(w);return x.persistence.runTransaction("read document","readonly",O=>x.fi.Ls(O,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Eh(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield gm(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Eo(e,r,n._key,o,new Yu(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function nD(n){n=Wt(n,gn);const e=Wt(n.firestore,On);return mv(In(e),n._key,{source:"server"}).then(t=>kv(e,n,t))}(this._delegate):function tp(n){n=Wt(n,gn);const e=Wt(n.firestore,On);return mv(In(e),n._key).then(t=>kv(e,n,t))}(this._delegate),t.then(r=>new Om(this.firestore,new Eo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}function zi(n,e,t){return n.message=n.message.replace(e,t),n}function uD(n){for(const e of n)if("object"==typeof e&&!Rm(e))return e;return{}}function lD(n,e){var t,r;let o;return o=Rm(n[0])?n[0]:Rm(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Om{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return KC(this._delegate,e._delegate)}}class Pm extends Om{data(e){const t=this._delegate.data(e);return function ff(n,e){n||nt()}(void 0!==t),t}}class Wi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rp(e)}where(e,t,r){try{return new Wi(this.firestore,Qa(this._delegate,function Sv(n,e,t){const r=e,o=ep("where",n);return new Av(o,r,t)}(e,t,r)))}catch(o){throw zi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Wi(this.firestore,Qa(this._delegate,function QC(n,e="asc"){const t=e,r=ep("orderBy",n);return new YC(r,t)}(e,t)))}catch(r){throw zi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wi(this.firestore,Qa(this._delegate,function JC(n){return ME("limit",n),new GE("limit",n,"F")}(e)))}catch(t){throw zi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Wi(this.firestore,Qa(this._delegate,function qE(n){return ME("limitToLast",n),new GE("limitToLast",n,"L")}(e)))}catch(t){throw zi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wi(this.firestore,Qa(this._delegate,function zE(...n){return new Dm("startAt",n,!0)}(...e)))}catch(t){throw zi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wi(this.firestore,Qa(this._delegate,function WE(...n){return new Dm("startAfter",n,!1)}(...e)))}catch(t){throw zi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wi(this.firestore,Qa(this._delegate,function ZE(...n){return new xv("endBefore",n,!1)}(...e)))}catch(t){throw zi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wi(this.firestore,Qa(this._delegate,function XC(...n){return new xv("endAt",n,!0)}(...e)))}catch(t){throw zi(t,"endAt()","Query.endAt()")}}isEqual(e){return FE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function rD(n){n=Wt(n,xr);const e=Wt(n.firestore,On),t=In(e),r=new Sc(e);return function RC(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield Vg(o,u,!0),w=new pE(u,m._i),C=w.Wu(m.documents),x=w.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const w=Eh(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield gm(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Qu(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function iD(n){n=Wt(n,xr);const e=Wt(n.firestore,On),t=In(e),r=new Sc(e);return yv(t,n._query,{source:"server"}).then(o=>new Qu(e,r,n,o))}(this._delegate):function QE(n){n=Wt(n,xr);const e=Wt(n.firestore,On),t=In(e),r=new Sc(e);return Cm(n._query),yv(t,n._query).then(o=>new Qu(e,r,n,o))}(this._delegate),t.then(r=>new ab(this.firestore,new Qu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uD(e),r=lD(e,o=>new ab(this.firestore,new Qu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Sm(this._delegate,t,r)}withConverter(e){return new Wi(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}class DA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ab{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Wi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Pm(this._firestore,r))})}isEqual(e){return KC(this._delegate,e._delegate)}}class Xa extends Wi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gs(this.firestore,e):null}doc(e){try{return new gs(this.firestore,void 0===e?Wf(this._delegate):Wf(this._delegate,e))}catch(t){throw zi(t,"doc()","CollectionReference.doc()")}}add(e){return function Am(n,e){const t=Wt(n.firestore,On),r=Wf(n),o=Ja(n.converter,e);return xc(t,[wm(Ku(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new gs(this.firestore,t))}isEqual(e){return kE(this._delegate,e._delegate)}withConverter(e){return new Xa(this.firestore,this._delegate.withConverter(e?Rh.getInstance(this.firestore,e):null))}}function Oh(n){return Wt(n,gn)}class Nm{constructor(...e){this._delegate=new Ya(...e)}static documentId(){return new Nm(lr.keyField().canonicalString())}isEqual(e){return(e=(0,dt.m9)(e))instanceof Ya&&this._delegate._internalPath.isEqual(e._internalPath)}}class eu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sD(){return new Cv("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eu(e)}static delete(){const e=function eb(){return new Qf("deleteField")}();return e._methodName="FieldValue.delete",new eu(e)}static arrayUnion(...e){const t=function Fv(...n){return new HC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eu(t)}static arrayRemove(...e){const t=function Lv(...n){return new GC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eu(t)}static increment(e){const t=function bA(n){return new qC("increment",n)}(e);return t._methodName="FieldValue.increment",new eu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ub={Firestore:Bv,GeoPoint:vm,Timestamp:tr,Blob:np,Transaction:sb,WriteBatch:ob,DocumentReference:gs,DocumentSnapshot:Om,Query:Wi,QueryDocumentSnapshot:Pm,QuerySnapshot:ab,CollectionReference:Xa,FieldPath:Nm,FieldValue:eu,setLogLevel:function ib(n){!function F0(n){Fa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function TA(n){(function lb(n,e){n.INTERNAL.registerComponent(new Ms.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},ub)))})(n,(e,t)=>new Bv(e,t,new rb)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(oo.Z);var jv=P(6451),ip=P(5363),km=P(8421);function jr(n,e){return(0,Vn.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,or.x)(r,w=>{null==o||o.unsubscribe();let C=0;const x=u++;(0,km.Xf)(n(w,x)).subscribe(o=(0,or.x)(r,O=>r.next(e?e(w,O,x,C++):O),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var AA=P(6063);class cD extends ro.x{constructor(e=1/0,t=1/0,r=AA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var dD=P(3099);function Fm(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,dD.B)({connector:()=>new cD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const $v=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var cb=P(5698);function fD(n){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function db(n=pD){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function pD(){return new $v}function Mc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fn((o,u)=>n(o,u,r)):li.y,(0,cb.q)(1),t?fD(e):db(()=>new $v))}var hb=P(576);function fb(n,e){return(0,hb.m)(e)?jr(()=>n,e):jr(()=>n)}var sp=P(9468);P(5867);const vb=new Map,RA={activated:!1,tokenObservers:[]},bD={initialized:!1,enabled:!1};function $r(n){return vb.get(n)||RA}function bo(n,e){vb.set(n,e)}function op(){return bD}class DD{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new dt.BH,yield function wb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ei=new dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Eb(n){if(!$r(n).activated)throw ei.create("use-before-activation",{appName:n.name})}function Zv(n,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const O=yield o.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(O){throw ei.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==d.status)throw ei.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(O){throw ei.create("fetch-parse-error",{originalErrorMessage:O.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}}),Ib.apply(this,arguments)}function TD(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Um="firebase-app-check-store";let Kv=null;function MD(){return Kv||(Kv=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ei.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Um,{keyPath:"compositeKey"})}}catch(t){e(ei.create("storage-open",{originalErrorMessage:t.message}))}}),Kv)}function jm(){return jm=(0,pe.Z)(function*(n,e){const r=(yield MD()).transaction(Um,"readwrite"),u=r.objectStore(Um).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(ei.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),jm.apply(this,arguments)}const Rc=new Dr.Yd("@firebase/app-check");function Gm(n,e){return(0,dt.hl)()?function RD(n,e){return function Db(n,e){return jm.apply(this,arguments)}(function Hm(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ND(){return op().enabled}function kD(){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,pe.Z)(function*(){const n=op();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Ab.apply(this,arguments)}const FD={error:"UNKNOWN_ERROR"};function LD(n){return dt.US.encodeString(JSON.stringify(n),!1)}function zm(n){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,pe.Z)(function*(n,e=!1){const t=n.app;Eb(t);const r=$r(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&lp(w)&&(o=w)}if(!e&&o&&lp(o))return{token:o.token};let m,d=!1;if(ND()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zv(TD(t,yield kD()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield Gm(t,w),bo(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Rc.warn(w.message):Rc.error(w),u=w}return o?(m={token:o.token},bo(t,Object.assign(Object.assign({},r),{token:o})),yield Gm(t,o)):m=Jv(u),d&&xb(t,m),m}),Yv.apply(this,arguments)}function Zm(n,e){const t=$r(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),bo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Qv(n){const{app:e}=n,t=$r(e);let r=t.tokenRefresher;r||(r=function VD(n){const{app:e}=n;return new DD((0,pe.Z)(function*(){let r;if(r=$r(e).token?yield zm(n,!0):yield zm(n),r.error)throw r.error}),()=>!0,()=>{const t=$r(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),bo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xb(n,e){const t=$r(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function lp(n){return n.expireTimeMillis-Date.now()>0}function Jv(n){return{token:LD(FD),error:n}}class kA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$r(this.app);for(const t of e)Zm(this.app,t.next);return Promise.resolve()}}const A="app-check-internal";!function S(){(0,Cr._registerComponent)(new Ms.wA("app-check",n=>function Mb(n,e){return new kA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(A).initialize()})),(0,Cr._registerComponent)(new Ms.wA(A,n=>function Xv(n){return{getToken:e=>zm(n,e),addTokenListener:e=>function Wm(n,e,t,r){const{app:o}=n,u=$r(o),d={next:t,error:r,type:e};if(bo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&lp(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),Qv(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Qv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Zm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cr.registerVersion)("@firebase/app-check","0.5.8")}();class Y{constructor(){return(0,on.vb)("app-check")}}"undefined"!=typeof window&&window,P(127);const Km=new h.OlP("angularfire2.auth.use-emulator"),Ym=new h.OlP("angularfire2.auth.settings"),BA=new h.OlP("angularfire2.auth.tenant-id"),jA=new h.OlP("angularfire2.auth.langugage-code"),$A=new h.OlP("angularfire2.auth.use-device-language"),HA=new h.OlP("angularfire.auth.persistence"),GA=(n,e,t,r,o,u,d,m)=>(0,An.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))w.settings[C]=x;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let Vb=(()=>{class n{constructor(t,r,o,u,d,m,w,C,x,O,U,Z){const ie=new ro.x,Oe=gt(void 0).pipe((0,ip.Q)(d.outsideAngular),jr(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8775)))),(0,Mt.U)(()=>(0,An.on)(t,u,r)),(0,Mt.U)(Ve=>GA(Ve,u,m,C,x,O,w,U)),Fm({bufferSize:1,refCount:!1}));if(Mo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Oe.pipe(Mc()).subscribe();const At=Oe.pipe(jr(at=>at.getRedirectResult().then(Rt=>Rt,()=>null)),on.iC,Fm({bufferSize:1,refCount:!1})),St=Oe.pipe(jr(at=>new Li.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Gt=>Rt.next(Gt),Gt=>Rt.error(Gt),()=>Rt.complete()))})))),vt=Oe.pipe(jr(at=>new Li.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Gt=>Rt.next(Gt),Gt=>Rt.error(Gt),()=>Rt.complete()))}))));this.authState=At.pipe(fb(St),(0,sp.R)(d.outsideAngular),(0,ip.Q)(d.insideAngular)),this.user=At.pipe(fb(vt),(0,sp.R)(d.outsideAngular),(0,ip.Q)(d.insideAngular)),this.idToken=this.user.pipe(jr(at=>at?(0,Lt.D)(at.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(jr(at=>at?(0,Lt.D)(at.getIdTokenResult()):gt(null))),this.credential=(0,jv.T)(At,ie,this.authState.pipe(fn(at=>!at))).pipe((0,Mt.U)(at=>(null==at?void 0:at.user)?at:null),(0,sp.R)(d.outsideAngular),(0,ip.Q)(d.insideAngular))}return(0,An.pX)(this,Oe,u,{spy:{apply:(Ve,At,St)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&St.then(vt=>ie.next(vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(An.Dh),h.LFG(An.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(on.HU),h.LFG(Km,8),h.LFG(Ym,8),h.LFG(BA,8),h.LFG(jA,8),h.LFG($A,8),h.LFG(HA,8),h.LFG(Y,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function qA(n,e){return function eR(n,e=xs.z){return new Li.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function KD(n,e){return qA(n,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function Ub(n,e){return KD(n,e).pipe(ss(void 0),bu(),(0,Mt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function zA(n,e,t){return Ub(n,t).pipe(io((r,o)=>function nR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Lo(n,e=li.y){return n=null!=n?n:so,(0,Vn.e)((t,r)=>{let o,u=!0;t.subscribe((0,or.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Mt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function YD(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function WA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ZA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ub(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ss(void 0),bu(),fn(([r,o])=>o.length>0||!r),(0,Mt.U)(([r,o])=>o),on.iC)}auditTrail(e){return this.stateChanges(e).pipe(io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WA(e);return zA(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return KD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),on.iC)}get(e){return(0,Lt.D)(this.query.get(e)).pipe(on.iC)}add(e){return this.ref.add(e)}doc(e){return new KA(this.ref.doc(e),this.afs)}}class KA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=YA(r,t);return new ZA(o,u,this.afs)}snapshotChanges(){return function tR(n,e){return qA(n,e).pipe(ss(void 0),bu(),(0,Mt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Lt.D)(this.ref.get(e)).pipe(on.iC)}}class iR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ub(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),fn(t=>t.length>0),on.iC):Ub(this.query,this.afs.schedulers.outsideAngular).pipe(on.iC)}auditTrail(e){return this.stateChanges(e).pipe(io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WA(e);return zA(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return KD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),on.iC)}get(e){return(0,Lt.D)(this.query.get(e)).pipe(on.iC)}}const sR=new h.OlP("angularfire2.enableFirestorePersistence"),oR=new h.OlP("angularfire2.firestore.persistenceSettings"),aR=new h.OlP("angularfire2.firestore.settings"),uR=new h.OlP("angularfire2.firestore.use-emulator");function YA(n,e=(t=>t)){return{query:e(n),ref:n}}let lR=(()=>{class n{constructor(t,r,o,u,d,m,w,C,x,O,U,Z,ie,Oe,Ve,At,St){this.schedulers=w;const vt=(0,An.on)(t,m,r),at=x;O&&GA(vt,m,U,ie,Oe,Ve,Z,At),[this.firestore,this.persistenceEnabled$]=(0,An.cc)(`${vt.name}.firestore`,"AngularFirestore",vt.name,()=>{const Rt=m.runOutsideAngular(()=>vt.firestore());if(u&&Rt.settings(u),at&&Rt.useEmulator(...at),o&&!Mo(d)){const Gt=()=>{try{return(0,Lt.D)(Rt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Hr){return"undefined"!=typeof console&&console.warn(Hr),gt(!1)}};return[Rt,m.runOutsideAngular(Gt)]}return[Rt,gt(!1)]},[u,at,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=YA(o,r),m=this.schedulers.ngZone.run(()=>u);return new ZA(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new iR(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new KA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(An.Dh),h.LFG(An.xv,8),h.LFG(sR,8),h.LFG(aR,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(on.HU),h.LFG(oR,8),h.LFG(uR,8),h.LFG(Vb,8),h.LFG(Km,8),h.LFG(Ym,8),h.LFG(BA,8),h.LFG(jA,8),h.LFG($A,8),h.LFG(HA,8),h.LFG(Y,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n0=(()=>{class n{constructor(t){this.firebase=t}Register(t){var r=this;return(0,pe.Z)(function*(){try{return yield r.firebase.createUserWithEmailAndPassword(t.email,t.password)}catch(o){return o}})()}Login(t,r){var o=this;return(0,pe.Z)(function*(){try{return yield o.firebase.signInWithEmailAndPassword(t,r)}catch(u){return null}})()}LogOut(){var t=this;return(0,pe.Z)(function*(){try{return yield t.firebase.signOut()}catch(r){return null}})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QA="firebasestorage.googleapis.com",JA="storageBucket";class gr extends dt.ZR{constructor(e,t){super(QD(e),`Firebase Storage: ${t} (${QD(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}_codeEquals(e){return QD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function QD(n){return"storage/"+n}function JD(){return new gr("unknown","An unknown error occurred, please check the error payload for server response.")}function XA(){return new gr("canceled","User canceled the upload/download.")}function eS(){return new gr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qm(n){return new gr("invalid-argument",n)}function tS(){return new gr("app-deleted","The Firebase app was deleted.")}function nS(n){return new gr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function r0(n,e){return new gr("invalid-format","String does not match format '"+n+"': "+e)}function s0(n){throw new gr("internal-error","Internal error: "+n)}class Ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ki.makeFromUrl(e,t)}catch(o){return new Ki(e,"")}if(""===r.path)return r;throw function wR(n){return new gr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function C(at){at.path_=decodeURIComponent(at.path)}const O=t.replace(/[.]/g,"\\."),vt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${O}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===QA?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let at=0;at<vt.length;at++){const Rt=vt[at],Gt=Rt.regex.exec(e);if(Gt){let nu=Gt[Rt.indices.path];nu||(nu=""),r=new Ki(Gt[Rt.indices.bucket],nu),Rt.postModify(r);break}}if(null==r)throw function vR(n){return new gr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class CR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Bb(n){return"string"==typeof n||n instanceof String}function rS(n){return XD()&&n instanceof Blob}function XD(){return"undefined"!=typeof Blob}function eT(n,e,t,r){if(r<e)throw Qm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Qm(`Invalid value for '${n}'. Expected ${t} or less.`)}function Pc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function iS(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Nh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Nh||(Nh={})),Nh))();class MR{constructor(e,t,r,o,u,d,m,w,C,x,O){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=w,this.timeout_=C,this.progressCallback_=x,this.connectionFactory_=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,Z)=>{this.resolve_=U,this.reject_=Z,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function AR(n){return void 0!==n}(w)?u():u(w)}catch(w){d(w)}else if(null!==m){const w=JD();w.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,w):w)}else d(o.canceled?this.appDelete_?tS():XA():function _R(){return new gr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new jb(!1,null,!0)):this.backoffId_=function DR(n,e,t){let r=1,o=null,u=null,d=!1,m=0;function w(){return 2===m}let C=!1;function x(...Ve){C||(C=!0,e.apply(null,Ve))}function O(Ve){o=setTimeout(()=>{o=null,n(Z,w())},Ve)}function U(){u&&clearTimeout(u)}function Z(Ve,...At){if(C)return void U();if(Ve)return U(),void x.call(null,Ve,...At);if(w()||d)return U(),void x.call(null,Ve,...At);let vt;r<64&&(r*=2),1===m?(m=2,vt=0):vt=1e3*(r+Math.random()),O(vt)}let ie=!1;function Oe(Ve){ie||(ie=!0,U(),!C&&(null!==o?(Ve||(m=2),clearTimeout(o),O(0)):Ve||(m=1)))}return O(0),u=setTimeout(()=>{d=!0,Oe(!0)},t),Oe}((r,o)=>{if(o)return void r(!1,new jb(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===Nh.NO_ERROR,w=u.getStatus();if(!m||this.isRetryStatusCode_(w)){const x=u.getErrorCode()===Nh.ABORT;return void r(!1,new jb(!1,null,x))}const C=-1!==this.successCodes_.indexOf(w);r(!0,new jb(C,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function TR(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class jb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function LR(...n){const e=function FR(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(XD())return new Blob(n);throw new gr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Io={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tT{constructor(e,t){this.data=e,this.contentType=t||null}}function nT(n,e){switch(n){case Io.RAW:return new tT(sS(e));case Io.BASE64:case Io.BASE64URL:return new tT(oS(n,e));case Io.DATA_URL:return new tT(function jR(n){const e=new aS(n);return e.base64?oS(Io.BASE64,e.rest):function BR(n){let e;try{e=decodeURIComponent(n)}catch(t){throw r0(Io.DATA_URL,"Malformed data URL.")}return sS(e)}(e.rest)}(e),function $R(n){return new aS(n).contentType}(e))}throw JD()}function sS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function oS(n,e){switch(n){case Io.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw r0(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Io.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw r0(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function UR(n){return atob(n)}(e)}catch(o){throw r0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class aS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw r0(Io.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function HR(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Xu{constructor(e,t){let r=0,o="";rS(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(rS(this.data_)){const o=function VR(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new Xu(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Xu(r,!0)}}static getBlob(...e){if(XD()){const t=e.map(r=>r instanceof Xu?r.data_:r);return new Xu(LR.apply(null,t))}{const t=e.map(d=>Bb(d)?nT(Io.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[u++]=d[m]}),new Xu(o,!0)}}uploadData(){return this.data_}}function rT(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function xR(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function uS(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function zR(n,e){return e}class ms{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||zR}}let $b=null;function o0(){if($b)return $b;const n=[];n.push(new ms("bucket")),n.push(new ms("generation")),n.push(new ms("metageneration")),n.push(new ms("name","fullPath",!0));const t=new ms("name");t.xform=function e(u,d){return function WR(n){return!Bb(n)||n.length<2?n:uS(n)}(d)},n.push(t);const o=new ms("size");return o.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(o),n.push(new ms("timeCreated")),n.push(new ms("updated")),n.push(new ms("md5Hash",null,!0)),n.push(new ms("cacheControl",null,!0)),n.push(new ms("contentDisposition",null,!0)),n.push(new ms("contentEncoding",null,!0)),n.push(new ms("contentLanguage",null,!0)),n.push(new ms("contentType",null,!0)),n.push(new ms("metadata","customMetadata",!0)),$b=n,$b}function lS(n,e,t){const r=rT(e);return null===r?null:function KR(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function ZR(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Ki(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function iT(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const cS="prefixes";class el{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function tl(n){if(!n)throw JD()}function Hb(n,e){return function t(r,o){const u=lS(n,o,e);return tl(null!==u),u}}function Jm(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function mR(){return new gr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function gR(){return new gr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function pR(n){return new gr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function yR(n){return new gr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function a0(n){const e=Jm(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function fR(n){return new gr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function hS(n,e,t){const o=Pc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new el(o,"GET",Hb(n,t),d);return m.errorHandler=a0(e),m}function t1(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const m=Pc(e.bucketOnlyServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,x=new el(m,"GET",function XR(n,e){return function t(r,o){const u=function JR(n,e,t){const r=rT(t);return null===r?null:function QR(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[cS])for(const o of t[cS]){const u=o.replace(/\/$/,""),d=n._makeStorageReference(new Ki(e,u));r.prefixes.push(d)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Ki(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return tl(null!==u),u}}(n,e.bucket),C);return x.urlParams=u,x.errorHandler=Jm(e),x}function pS(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function s1(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Gb{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function sT(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){tl(!1)}return tl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const l1={STATE_CHANGED:"state_changed"},ys={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oT(n){switch(n){case"running":case"pausing":case"canceling":return ys.RUNNING;case"paused":return ys.PAUSED;case"success":return ys.SUCCESS;case"canceled":return ys.CANCELED;default:return ys.ERROR}}class c1{constructor(e,t,r){if(function SR(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Xm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class h1 extends class d1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw s0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw s0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw s0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw s0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw s0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function tu(){return new h1}class _S{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=o0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function o1(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d=pS(e,r,o),m={name:d.fullPath},w=Pc(u,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},O=iT(d,t),ie=new el(w,"POST",function Z(Oe){let Ve;sT(Oe);try{Ve=Oe.getResponseHeader("X-Goog-Upload-URL")}catch(At){tl(!1)}return tl(Bb(Ve)),Ve},n.maxUploadRetryTime);return ie.urlParams=m,ie.headers=x,ie.body=O,ie.errorHandler=Jm(e),ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,tu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function a1(n,e,t,r){const w=new el(t,"POST",function u(C){const x=sT(C,["active","final"]);let O=null;try{O=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Z){tl(!1)}O||tl(!1);const U=Number(O);return tl(!isNaN(U)),new Gb(U,r.size(),"final"===x)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=Jm(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,tu,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Gb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let d;try{d=function u1(n,e,t,r,o,u,d,m){const w=new Gb(0,0);if(d?(w.current=d.current,w.total=d.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function bR(){return new gr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const C=w.total-w.current;let x=C;o>0&&(x=Math.min(x,o));const O=w.current,ie={"X-Goog-Upload-Command":x===C?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},Oe=r.slice(O,O+x);if(null===Oe)throw eS();const vt=new el(t,"POST",function Ve(at,Rt){const Gt=sT(at,["active","final"]),Hr=w.current+x,nu=r.size();let eA;return eA="final"===Gt?Hb(e,u)(at,Rt):null,new Gb(Hr,nu,"final"===Gt,eA)},e.maxUploadRetryTime);return vt.headers=ie,vt.body=Oe.uploadData(),vt.progressCallback=m||null,vt.errorHandler=Jm(n),vt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(d,tu,o,u);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=hS(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,tu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function gS(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let vt="";for(let at=0;at<2;at++)vt+=Math.random().toString().slice(2);return vt}();d["Content-Type"]="multipart/related; boundary="+w;const C=pS(e,r,o),x=iT(C,t),Z=Xu.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+w+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===Z)throw eS();const ie={name:C.fullPath},Oe=Pc(u,n.host,n._protocol),At=n.maxUploadRetryTime,St=new el(Oe,"POST",Hb(n,t),At);return St.urlParams=ie,St.headers=d,St.body=Z.uploadData(),St.errorHandler=Jm(e),St}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,tu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=XA(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=oT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new c1(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(oT(this._state)){case ys.SUCCESS:Xm(this._resolve.bind(null,this.snapshot))();break;case ys.CANCELED:case ys.ERROR:Xm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(oT(this._state)){case ys.RUNNING:case ys.PAUSED:e.next&&Xm(e.next.bind(e,this.snapshot))();break;case ys.SUCCESS:e.complete&&Xm(e.complete.bind(e))();break;default:e.error&&Xm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cp{constructor(e,t){this._service=e,this._location=t instanceof Ki?t:Ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cp(e,t)}get root(){const e=new Ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uS(this._location.path)}get storage(){return this._service}get parent(){const e=function GR(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ki(this._location.bucket,e);return new cp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw nS(e)}}function wS(n,e,t){return aT.apply(this,arguments)}function aT(){return aT=(0,pe.Z)(function*(n,e,t){const o=yield ES(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield wS(n,e,o.nextPageToken))}),aT.apply(this,arguments)}function ES(n,e){null!=e&&"number"==typeof e.maxResults&&eT("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=t1(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,tu)}function C1(n){n._throwIfRoot("getDownloadURL");const e=function n1(n,e,t){const o=Pc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new el(o,"GET",function e1(n,e){return function t(r,o){const u=lS(n,o,e);return tl(null!==u),function YR(n,e,t,r){const o=rT(e);if(null===o||!Bb(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(C=>{const O=n.fullPath;return Pc("/b/"+d(n.bucket)+"/o/"+d(O),t,r)+iS({alt:"media",token:C})})[0]}(u,o,n.host,n._protocol)}}(n,t),d);return m.errorHandler=a0(e),m}(n.storage,n._location,o0());return n.storage.makeRequestWithTokens(e,tu).then(t=>{if(null===t)throw function IR(){return new gr("no-download-url","The given file does not have any download URLs.")}();return t})}function bS(n,e){const t=function qR(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ki(n._location.bucket,t);return new cp(n.storage,r)}function IS(n,e){if(n instanceof uT){const t=n;if(null==t._bucket)throw function ER(){return new gr("no-default-bucket","No default bucket found. Did you set the '"+JA+"' property when initializing the app?")}();const r=new cp(t,t._bucket);return null!=e?IS(r,e):r}return void 0!==e?bS(n,e):n}function S1(n,e){if(e&&function T1(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof uT)return function A1(n,e){return new cp(n,e)}(n,e);throw Qm("To use ref(service, url), the first argument must be a Storage instance.")}return IS(n,e)}function CS(n,e){const t=null==e?void 0:e[JA];return null==t?null:Ki.makeFromBucketSpec(t,n)}class uT{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=QA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Ki.makeFromBucketSpec(o,this._host):CS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ki.makeFromBucketSpec(this._url,e):CS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cp(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new CR(tS());{const u=function kR(n,e,t,r,o,u){const d=iS(n.urlParams),m=n.url+d,w=Object.assign({},n.headers);return function PR(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function RR(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function OR(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(w,u),function NR(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new MR(m,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const DS="@firebase/storage";function SS(n,e){return S1(n=(0,dt.m9)(n),e)}function U1(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new uT(t,r,o,e,Cr.SDK_VERSION)}!function B1(){(0,Cr._registerComponent)(new Ms.wA("storage",U1,"PUBLIC").setMultipleInstances(!0)),(0,Cr.registerVersion)(DS,"0.9.6",""),(0,Cr.registerVersion)(DS,"0.9.6","esm2017")}();class qb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class xS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new qb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new qb(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?d=>t(new qb(d,this,this._ref)):{next:t.next?d=>t.next(new qb(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class MS{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Nc(e,this._service))}get items(){return this._delegate.items.map(e=>new Nc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Nc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function L1(n,e){return bS(n,e)}(this._delegate,e);return new Nc(t,this.storage)}get root(){return new Nc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Nc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new xS(function M1(n,e,t){return function v1(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new _S(n,new Xu(e),t)}(n=(0,dt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Io.RAW,r){this._throwIfRoot("putString");const o=nT(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new xS(new _S(this._delegate,new Xu(o.data,!0),u),this)}listAll(){return function N1(n){return function E1(n){const e={prefixes:[],items:[]};return wS(n,e).then(()=>e)}(n=(0,dt.m9)(n))}(this._delegate).then(e=>new MS(e,this.storage))}list(e){return function P1(n,e){return ES(n=(0,dt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new MS(t,this.storage))}getMetadata(){return function R1(n){return function b1(n){n._throwIfRoot("getMetadata");const e=hS(n.storage,n._location,o0());return n.storage.makeRequestWithTokens(e,tu)}(n=(0,dt.m9)(n))}(this._delegate)}updateMetadata(e){return function O1(n,e){return function I1(n,e){n._throwIfRoot("updateMetadata");const t=function r1(n,e,t,r){const u=Pc(e.fullServerUrl(),n.host,n._protocol),m=iT(t,r),C=n.maxOperationRetryTime,x=new el(u,"PATCH",Hb(n,r),C);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=m,x.errorHandler=a0(e),x}(n.storage,n._location,e,o0());return n.storage.makeRequestWithTokens(t,tu)}(n=(0,dt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function k1(n){return C1(n=(0,dt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function F1(n){return function D1(n){n._throwIfRoot("deleteObject");const e=function i1(n,e){const r=Pc(e.fullServerUrl(),n.host,n._protocol),m=new el(r,"DELETE",function d(w,C){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=a0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,tu)}(n=(0,dt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw nS(e)}}class RS{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(OS(e))throw Qm("ref() expected a child path but got a URL, use refFromURL instead.");return new Nc(SS(this._delegate,e),this)}refFromURL(e){if(!OS(e))throw Qm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ki.makeFromUrl(e,this._delegate.host)}catch(t){throw Qm("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nc(SS(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function V1(n,e,t,r={}){!function x1(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,dt.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function OS(n){return/^[A-Za-z]+:\/\//.test(n)}function G1(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new RS(t,r)}function PS(n){const e=function z1(n){return new Li.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function cR(n,e=xs.z){return(0,Vn.e)((t,r)=>{let o=null,u=null,d=null;const m=()=>{if(o){o.unsubscribe(),o=null;const C=u;u=null,r.next(C)}};function w(){const C=d+n,x=e.now();if(x<C)return o=this.schedule(void 0,C-x),void r.add(o);m()}t.subscribe((0,or.x)(r,C=>{u=C,d=e.now(),o||(o=e.schedule(w,n),r.add(o))},()=>{m(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function zb(n){return{getDownloadURL:()=>gt(void 0).pipe(on.fc,jr(()=>n.getDownloadURL()),on.iC),getMetadata:()=>gt(void 0).pipe(on.fc,jr(()=>n.getMetadata()),on.iC),delete:()=>(0,Lt.D)(n.delete()),child:e=>zb(n.child(e)),updateMetadata:e=>(0,Lt.D)(n.updateMetadata(e)),put:(e,t)=>PS(n.put(e,t)),putString:(e,t,r)=>PS(n.putString(e,t,r)),list:e=>(0,Lt.D)(n.list(e)),listAll:()=>(0,Lt.D)(n.listAll())}}!function q1(n){const e={TaskState:ys,TaskEvent:l1,StringFormat:Io,Storage:RS,Reference:Nc};n.INTERNAL.registerComponent(new Ms.wA("storage-compat",G1,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(oo.Z);const W1=new h.OlP("angularfire2.storageBucket"),Z1=new h.OlP("angularfire2.storage.maxUploadRetryTime"),K1=new h.OlP("angularfire2.storage.maxOperationRetryTime"),Y1=new h.OlP("angularfire2.storage.use-emulator");let Q1=(()=>{class n{constructor(t,r,o,u,d,m,w,C,x,O){const U=(0,An.on)(t,d,r);this.storage=(0,An.cc)(`${U.name}.storage.${o}`,"AngularFireStorage",U.name,()=>{const Z=d.runOutsideAngular(()=>U.storage(o||void 0)),ie=x;return ie&&Z.useEmulator(...ie),w&&Z.setMaxUploadRetryTime(w),C&&Z.setMaxOperationRetryTime(C),Z},[w,C])}ref(t){return zb(this.storage.ref(t))}refFromURL(t){return zb(this.storage.refFromURL(t))}upload(t,r,o){return zb(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(An.Dh),h.LFG(An.xv,8),h.LFG(W1,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(on.HU),h.LFG(Z1,8),h.LFG(K1,8),h.LFG(Y1,8),h.LFG(Y,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),u0=(()=>{class n{constructor(t,r,o,u){this.aFStore=t,this.aFAuth=r,this.AFAuthService=o,this.storage=u,this.usuario=new yn(null)}setPaciente(t){return this.aFStore.collection("users").add(t)}getPaciente(t){return this.aFStore.collection("users",r=>r.where("email","==",t)).valueChanges()}uploadImage(t,r){var o=this;return(0,pe.Z)(function*(){try{return yield(yield o.storage.ref("/users/"+t).putString(r,"data_url")).ref.getDownloadURL()}catch(u){return console.error(u),null}})()}getPacientes(){return this.aFStore.collection("users").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lR),h.LFG(Vb),h.LFG(n0),h.LFG(Q1))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const{isArray:J1}=Array,{getPrototypeOf:X1,prototype:eO,keys:tO}=Object;function NS(n){if(1===n.length){const e=n[0];if(J1(e))return{args:e,keys:null};if(function nO(n){return n&&"object"==typeof n&&X1(n)===eO}(e)){const t=tO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:rO}=Array;function kS(n){return(0,Mt.U)(e=>function iO(n,e){return rO(e)?n(...e):n(e)}(n,e))}function FS(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var sO=P(9672);function LS(n,e,t){n?(0,sO.f)(t,n,e):e()}function Wb(n,e){const t=(0,hb.m)(n)?n:()=>n,r=o=>o.error(t());return new Li.y(e?o=>e.schedule(r,0,o):r)}function VS(n){return new Li.y(e=>{(0,km.Xf)(n()).subscribe(e)})}var ey=P(515),US=P(727);function BS(){return(0,Vn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,or.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uO extends Li.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new US.w0;const t=this.getSubject();e.add(this.source.subscribe((0,or.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=US.w0.EMPTY)}return e}refCount(){return BS()(this)}}function kh(n){return(0,Vn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,or.x)(t,void 0,void 0,d=>{u=(0,km.Xf)(n(d,kh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Yi=P(5577);function l0(n,e){return(0,hb.m)(e)?(0,Yi.z)(n,e,1):(0,Yi.z)(n,1)}function lT(n){return n<=0?()=>ey.E:(0,Vn.e)((e,t)=>{let r=[];e.subscribe((0,or.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var Co=P(8505);class kc{constructor(e,t){this.id=e,this.url=t}}class cT extends kc{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class c0 extends kc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jS extends kc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dO extends kc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hO extends kc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fO extends kc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pO extends kc{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gO extends kc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mO extends kc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $S{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class HS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yO{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _O{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vO{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wO{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class EO{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ty(n){return new EO(n)}const qS="ngNavigationCancelingError";function dT(n){const e=Error("NavigationCancelingError: "+n);return e[qS]=!0,e}function IO(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function nl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!zS(n[o],e[o]))return!1;return!0}function zS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function WS(n){return Array.prototype.concat.apply([],n)}function ZS(n){return n.length>0?n[n.length-1]:null}function Di(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rl(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Lt.D)(Promise.resolve(n)):gt(n)}const TO={exact:function QS(n,e,t){if(!hp(n.segments,e.segments)||!Zb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!QS(n.children[r],e.children[r],t))return!1;return!0},subset:JS},KS={exact:function AO(n,e){return nl(n,e)},subset:function SO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zS(n[t],e[t]))},ignored:()=>!0};function YS(n,e,t){return TO[t.paths](n.root,e.root,t.matrixParams)&&KS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function JS(n,e,t){return XS(n,e,e.segments,t)}function XS(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!hp(o,t)||e.hasChildren()||!Zb(o,t,r))}if(n.segments.length===t.length){if(!hp(n.segments,t)||!Zb(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!JS(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(hp(n.segments,o)&&Zb(n.segments,o,r)&&n.children[Ht])&&XS(n.children[Ht],e,u,r)}}function Zb(n,e,t){return e.every((r,o)=>KS[t](n[o].parameters,r.parameters))}class dp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ty(this.queryParams)),this._queryParamMap}toString(){return RO.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Di(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kb(this)}}class d0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ty(this.parameters)),this._parameterMap}toString(){return ix(this)}}function hp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ex{}class tx{parse(e){const t=new BO(e);return new dp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${h0(e.root,!0)}`,r=function NO(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Yb(t)}=${Yb(o)}`).join("&"):`${Yb(t)}=${Yb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function OO(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const RO=new tx;function Kb(n){return n.segments.map(e=>ix(e)).join("/")}function h0(n,e){if(!n.hasChildren())return Kb(n);if(e){const t=n.children[Ht]?h0(n.children[Ht],!1):"",r=[];return Di(n.children,(o,u)=>{u!==Ht&&r.push(`${u}:${h0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function MO(n,e){let t=[];return Di(n.children,(r,o)=>{o===Ht&&(t=t.concat(e(r,o)))}),Di(n.children,(r,o)=>{o!==Ht&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ht?[h0(n.children[Ht],!1)]:[`${o}:${h0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ht]?`${Kb(n)}/${t[0]}`:`${Kb(n)}/(${t.join("//")})`}}function nx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yb(n){return nx(n).replace(/%3B/gi,";")}function hT(n){return nx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qb(n){return decodeURIComponent(n)}function rx(n){return Qb(n.replace(/\+/g,"%20"))}function ix(n){return`${hT(n.path)}${function PO(n){return Object.keys(n).map(e=>`;${hT(e)}=${hT(n[e])}`).join("")}(n.parameters)}`}const kO=/^[^\/()?;=#]+/;function Jb(n){const e=n.match(kO);return e?e[0]:""}const FO=/^[^=?&#]+/,VO=/^[^&#]+/;class BO{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ht]=new Kt(e,t)),r}parseSegment(){const e=Jb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new d0(Qb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Jb(this.remaining);o&&(r=o,this.capture(r))}e[Qb(t)]=Qb(r)}parseQueryParam(e){const t=function LO(n){const e=n.match(FO);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function UO(n){const e=n.match(VO);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=rx(t),u=rx(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Jb(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ht);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Ht]:new Kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class sx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return pT(e,this._root).map(t=>t.value)}}function fT(n,e){if(n===e.value)return e;for(const t of e.children){const r=fT(n,t);if(r)return r}return null}function pT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pT(n,t);if(r.length)return r.unshift(e),r}return[]}class Fc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ny(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ox extends sx{constructor(e,t){super(e),this.snapshot=t,gT(this,e)}toString(){return this.snapshot.toString()}}function ax(n,e){const t=function jO(n,e){const d=new Xb([],{},{},"",{},Ht,e,null,n.root,-1,{});return new lx("",new Fc(d,[]))}(n,e),r=new yn([new d0("",{})]),o=new yn({}),u=new yn({}),d=new yn({}),m=new yn(""),w=new ry(r,o,d,m,u,Ht,e,t.root);return w.snapshot=t.root,new ox(new Fc(w,[]),t)}class ry{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>ty(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>ty(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ux(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function $O(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Xb{constructor(e,t,r,o,u,d,m,w,C,x,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=x,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ty(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ty(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lx extends sx{constructor(e,t){super(t),this.url=e,gT(this,t)}toString(){return cx(this._root)}}function gT(n,e){e.value._routerState=n,e.children.forEach(t=>gT(n,t))}function cx(n){const e=n.children.length>0?` { ${n.children.map(cx).join(", ")} } `:"";return`${n.value}${e}`}function mT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),nl(e.params,t.params)||n.params.next(t.params),function CO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),nl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yT(n,e){const t=nl(n.params,e.params)&&function xO(n,e){return hp(n,e)&&n.every((t,r)=>nl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yT(n.parent,e.parent))}function f0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function GO(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return f0(n,r,o);return f0(n,r)})}(n,e,t);return new Fc(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>f0(n,m)),d}}const r=function qO(n){return new ry(new yn(n.url),new yn(n.params),new yn(n.queryParams),new yn(n.fragment),new yn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>f0(n,u));return new Fc(r,o)}}function eI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function p0(n){return"object"==typeof n&&null!=n&&n.outlets}function _T(n,e,t,r,o){let u={};if(r&&Di(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new dp(t,u,o);const d=dx(n,e,t);return new dp(d,u,o)}function dx(n,e,t){const r={};return Di(n.children,(o,u)=>{r[u]=o===e?t:dx(o,e,t)}),new Kt(n.segments,r)}class hx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&eI(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(p0);if(o&&o!==ZS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fx(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return tI(n,e,t);const r=function QO(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(p0(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!gx(w,C,d))return u;r+=2}else{if(!gx(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[Ht]=new Kt(n.segments.slice(r.pathIndex),n.children),tI(u,0,o)}return r.match&&0===o.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?wT(n,e,t):r.match?tI(n,0,o):wT(n,e,t)}function tI(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function YO(n){return p0(n[0])?n[0].outlets:{[Ht]:n}}(t),o={};return Di(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=fx(n.children[d],e,u))}),Di(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Kt(n.segments,o)}}function wT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(p0(u)){const w=JO(u.outlets);return new Kt(r,w)}if(0===o&&eI(t[0])){r.push(new d0(n.segments[e].path,px(t[0]))),o++;continue}const d=p0(u)?u.outlets[Ht]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&eI(m)?(r.push(new d0(d,px(m))),o+=2):(r.push(new d0(d,{})),o++)}return new Kt(r,{})}function JO(n){const e={};return Di(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wT(new Kt([],{}),0,t))}),e}function px(n){const e={};return Di(n,(t,r)=>e[r]=`${t}`),e}function gx(n,e,t){return n==t.path&&nl(e,t.parameters)}class eP{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ny(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Di(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ny(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ny(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ny(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new wO(u.value.snapshot))}),e.children.length&&this.forwardEvent(new _O(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(mT(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),mT(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function tP(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class ET{constructor(e,t){this.routes=e,this.module=t}}function Fh(n){return"function"==typeof n}function fp(n){return n instanceof dp}const g0=Symbol("INITIAL_VALUE");function m0(){return jr(n=>function oO(...n){const e=(0,Vi.yG)(n),t=(0,Vi.jO)(n),{args:r,keys:o}=NS(n);if(0===r.length)return(0,Lt.D)([],e);const u=new Li.y(function aO(n,e,t=li.y){return r=>{LS(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)LS(e,()=>{const C=(0,Lt.D)(n[w],e);let x=!1;C.subscribe((0,or.x)(r,O=>{u[w]=O,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>FS(o,d):li.y));return t?u.pipe(kS(t)):u}(n.map(e=>e.pipe((0,cb.q)(1),ss(g0)))).pipe(io((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==g0?o:(u===g0&&(r=!0),r||!1!==u&&d!==t.length-1&&!fp(u)?o:u),e)},g0),fn(e=>e!==g0),(0,Mt.U)(e=>fp(e)?e:!0===e),(0,cb.q)(1)))}class aP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new y0,this.attachRef=null}}class y0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new aP,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let nI=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||Ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new uP(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(y0),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class uP{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ry?this.route:e===y0?this.childContexts:this.parent.get(e,t)}}let mx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[nI],encapsulation:2}),n})();function yx(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];lP(r,cP(e,r))}}function lP(n,e){n.children&&yx(n.children,e)}function cP(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function bT(n){const e=n.children&&n.children.map(bT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=mx),t}function aa(n){return n.outlet||Ht}function _x(n,e){const t=n.filter(r=>aa(r)===e);return t.push(...n.filter(r=>aa(r)!==e)),t}const vx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rI(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},vx):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||IO)(t,n,e);if(!u)return Object.assign({},vx);const d={};Di(u.posParams,(w,C)=>{d[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function iI(n,e,t,r,o="corrected"){if(t.length>0&&function fP(n,e,t){return t.some(r=>sI(n,e,r)&&aa(r)!==Ht)}(n,t,r)){const d=new Kt(e,function hP(n,e,t,r){const o={};o[Ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&aa(u)!==Ht){const d=new Kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[aa(u)]=d}return o}(n,e,r,new Kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function pP(n,e,t){return t.some(r=>sI(n,e,r))}(n,t,r)){const d=new Kt(n.segments,function dP(n,e,t,r,o,u){const d={};for(const m of r)if(sI(n,t,m)&&!o[aa(m)]){const w=new Kt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[aa(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function sI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wx(n,e,t,r){return!!(aa(n)===r||r!==Ht&&sI(e,t,n))&&("**"===n.path||rI(e,n,t).matched)}function Ex(n,e,t){return 0===e.length&&!n.children[t]}class oI{constructor(e){this.segmentGroup=e||null}}class bx{constructor(e){this.urlTree=e}}function _0(n){return Wb(new oI(n))}function Ix(n){return Wb(new bx(n))}function gP(n){return Wb(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class _P{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=iI(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ht).pipe((0,Mt.U)(u=>this.createUrlTree(IT(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(kh(u=>{if(u instanceof bx)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof oI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ht).pipe((0,Mt.U)(o=>this.createUrlTree(IT(o),e.queryParams,e.fragment))).pipe(kh(o=>{throw o instanceof oI?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Kt([],{[Ht]:e}):e;return new dp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Mt.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Lt.D)(o).pipe(l0(u=>{const d=r.children[u],m=_x(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Mt.U)(w=>({segment:w,outlet:u})))}),io((u,d)=>(u[d.outlet]=d.segment,u),{}),function lO(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fn((o,u)=>n(o,u,r)):li.y,lT(1),t?fD(e):db(()=>new $v))}())}expandSegment(e,t,r,o,u,d){return(0,Lt.D)(r).pipe(l0(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(kh(C=>{if(C instanceof oI)return gt(null);throw C}))),Mc(m=>!!m),kh((m,w)=>{if(m instanceof $v||"EmptyError"===m.name)return Ex(t,o,u)?gt(new Kt([],{})):_0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return wx(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):_0(t):_0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ix(u):this.lineralizeSegments(r,u).pipe((0,Yi.z)(d=>{const m=new Kt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:x}=rI(t,o,u);if(!m)return _0(t);const O=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?Ix(O):this.lineralizeSegments(o,O).pipe((0,Yi.z)(U=>this.expandSegment(e,t,r,U.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Mt.U)(O=>(r._loadedConfig=O,new Kt(o,{})))):gt(new Kt(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=rI(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Yi.z)(x=>{const O=x.module,U=x.routes,{segmentGroup:Z,slicedSegments:ie}=iI(t,m,w,U),Oe=new Kt(Z.segments,Z.children);if(0===ie.length&&Oe.hasChildren())return this.expandChildren(O,U,Oe).pipe((0,Mt.U)(vt=>new Kt(m,vt)));if(0===U.length&&0===ie.length)return gt(new Kt(m,{}));const Ve=aa(r)===u;return this.expandSegment(O,Oe,U,ie,Ve?Ht:u,!0).pipe((0,Mt.U)(St=>new Kt(m.concat(St.segments),St.children)))})):_0(t)}getChildConfig(e,t,r){return t.children?gt(new ET(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Yi.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Mt.U)(u=>(t._loadedConfig=u,u))):function mP(n){return Wb(dT(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new ET([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return gt(!0);const u=o.map(d=>{const m=e.get(d);let w;if(function rP(n){return n&&Fh(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Fh(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return rl(w)});return gt(u).pipe(m0(),(0,Co.b)(d=>{if(!fp(d))return;const m=dT(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Mt.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[Ht])return gP(e.redirectTo);o=o.children[Ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new dp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Di(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Di(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Kt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function IT(n){const e={};for(const r of Object.keys(n.children)){const u=IT(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function vP(n){if(1===n.numberOfChildren&&n.children[Ht]){const e=n.children[Ht];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class Cx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class aI{constructor(e,t){this.component=e,this.route=t}}function EP(n,e,t){const r=n._root;return v0(r,e?e._root:null,t,[r.value])}function uI(n,e,t){const r=function IP(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function v0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ny(e);return n.children.forEach(d=>{(function CP(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function DP(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!hp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hp(n.url,e.url)||!nl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yT(n,e)||!nl(n.queryParams,e.queryParams);default:return!yT(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Cx(r)):(u.data=d.data,u._resolvedData=d._resolvedData),v0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new aI(m.outlet.component,d))}else d&&w0(e,m,o),o.canActivateChecks.push(new Cx(r)),v0(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Di(u,(d,m)=>w0(d,t.getContext(m),o)),o}function w0(n,e,t){const r=ny(n),o=n.value;Di(r,(u,d)=>{w0(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new aI(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class NP{}function Dx(n){return new Li.y(e=>e.error(n))}class FP{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=iI(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ht);if(null===t)return null;const r=new Xb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Fc(r,t),u=new lx(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=ux(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=_x(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=Tx(r);return function LP(n){n.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Ex(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!wx(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Z=r.length>0?ZS(r).parameters:{};u=new Xb(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xx(e),aa(e),e.component,e,Ax(t),Sx(t)+r.length,Mx(e))}else{const Z=rI(t,e,r);if(!Z.matched)return null;d=Z.consumedSegments,m=Z.remainingSegments,u=new Xb(d,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xx(e),aa(e),e.component,e,Ax(t),Sx(t)+d.length,Mx(e))}const w=function VP(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=iI(t,d,m,w.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const Z=this.processChildren(w,C);return null===Z?null:[new Fc(u,Z)]}if(0===w.length&&0===x.length)return[new Fc(u,[])];const O=aa(e)===o,U=this.processSegment(w,C,x,O?Ht:o);return null===U?null:[new Fc(u,U)]}}function UP(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Tx(n){const e=[],t=new Set;for(const r of n){if(!UP(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Tx(r.children);e.push(new Fc(r.value,o))}return e.filter(r=>!t.has(r))}function Ax(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Sx(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function xx(n){return n.data||{}}function Mx(n){return n.resolve||{}}function Rx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function CT(n){return jr(e=>{const t=n(e);return t?(0,Lt.D)(t).pipe((0,Mt.U)(()=>e)):gt(e)})}class WP extends class zP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const DT=new h.OlP("ROUTES");class Ox{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Mt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new ET(WS(d.injector.get(DT,void 0,h.XFs.Self|h.XFs.Optional)).map(bT),d)}),kh(u=>{throw t._loader$=void 0,u}));return t._loader$=new uO(o,()=>new ro.x).pipe(BS()),t._loader$}loadModuleFactory(e){return rl(e()).pipe((0,Yi.z)(t=>t instanceof h.YKP?gt(t):(0,Lt.D)(this.compiler.compileModuleAsync(t))))}}class KP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function YP(n){throw n}function QP(n,e,t){return e.parse("/")}function Px(n,e){return gt(null)}const JP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ti=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ro.x,this.errorHandler=YP,this.malformedUriErrorHandler=QP,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Px,afterPreactivation:Px},this.urlHandlingStrategy=new KP,this.routeReuseStrategy=new WP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const O=d.get(h.R0b);this.isNgZoneEnabled=O instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function DO(){return new dp(new Kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ox(d,m,U=>this.triggerEvent(new $S(U)),U=>this.triggerEvent(new HS(U))),this.routerState=ax(this.currentUrlTree,this.rootComponentType),this.transitions=new yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(fn(o=>0!==o.id),(0,Mt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),jr(o=>{let u=!1,d=!1;return gt(o).pipe((0,Co.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),jr(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Nx(m.source)&&(this.browserUrlTree=m.extractedUrl),gt(m).pipe(jr(O=>{const U=this.transitions.getValue();return r.next(new cT(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),U!==this.transitions.getValue()?ey.E:Promise.resolve(O)}),function wP(n,e,t,r){return jr(o=>function yP(n,e,t,r,o){return new _P(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Mt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Co.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function BP(n,e,t,r,o){return(0,Yi.z)(u=>function kP(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new FP(n,e,t,r,o,u).recognize();return null===d?Dx(new NP):gt(d)}catch(d){return Dx(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Mt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Co.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(Z,O)}this.browserUrlTree=O.urlAfterRedirects}const U=new hO(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(U)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:U,extractedUrl:Z,source:ie,restoredState:Oe,extras:Ve}=m,At=new cT(U,this.serializeUrl(Z),ie,Oe);r.next(At);const St=ax(Z,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},m),{targetSnapshot:St,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},Ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ey.E}),CT(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:U,replaceUrl:Z}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!U,replaceUrl:!!Z})}),(0,Co.b)(m=>{const w=new fO(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Mt.U)(m=>Object.assign(Object.assign({},m),{guards:EP(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function TP(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function AP(n,e,t,r){return(0,Lt.D)(n).pipe((0,Yi.z)(o=>function PP(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(m=>{const w=uI(m,e,o);let C;if(function oP(n){return n&&Fh(n.canDeactivate)}(w))C=rl(w.canDeactivate(n,e,t,r));else{if(!Fh(w))throw new Error("Invalid CanDeactivate guard");C=rl(w(n,e,t,r))}return C.pipe(Mc())})).pipe(m0()):gt(!0)}(o.component,o.route,t,e,r)),Mc(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Yi.z)(m=>m&&function nP(n){return"boolean"==typeof n}(m)?function SP(n,e,t,r){return(0,Lt.D)(e).pipe(l0(o=>Ui(function MP(n,e){return null!==n&&e&&e(new yO(n)),gt(!0)}(o.route.parent,r),function xP(n,e){return null!==n&&e&&e(new vO(n)),gt(!0)}(o.route,r),function OP(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function bP(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>VS(()=>gt(d.guards.map(w=>{const C=uI(w,d.node,t);let x;if(function sP(n){return n&&Fh(n.canActivateChild)}(C))x=rl(C.canActivateChild(r,n));else{if(!Fh(C))throw new Error("Invalid CanActivateChild guard");x=rl(C(r,n))}return x.pipe(Mc())})).pipe(m0())));return gt(u).pipe(m0())}(n,o.path,t),function RP(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const o=r.map(u=>VS(()=>{const d=uI(u,e,t);let m;if(function iP(n){return n&&Fh(n.canActivate)}(d))m=rl(d.canActivate(e,n));else{if(!Fh(d))throw new Error("Invalid CanActivate guard");m=rl(d(e,n))}return m.pipe(Mc())}));return gt(o).pipe(m0())}(n,o.route,t))),Mc(o=>!0!==o,!0))}(r,u,n,e):gt(m)),(0,Mt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Co.b)(m=>{if(fp(m.guardsResult)){const C=dT(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new pO(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),fn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),CT(m=>{if(m.guards.canActivateChecks.length)return gt(m).pipe((0,Co.b)(w=>{const C=new gO(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),jr(w=>{let C=!1;return gt(w).pipe(function jP(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return gt(t);let u=0;return(0,Lt.D)(o).pipe(l0(d=>function $P(n,e,t,r){return function HP(n,e,t,r){const o=Rx(n);if(0===o.length)return gt({});const u={};return(0,Lt.D)(o).pipe((0,Yi.z)(d=>function GP(n,e,t,r){const o=uI(n,e,r);return rl(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Co.b)(m=>{u[d]=m}))),lT(1),(0,Yi.z)(()=>Rx(u).length===o.length?gt(u):ey.E))}(n._resolve,n,e,r).pipe((0,Mt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),ux(n,t).resolve),null)))}(d.route,r,n,e)),(0,Co.b)(()=>u++),lT(1),(0,Yi.z)(d=>u===o.length?gt(t):ey.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Co.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Co.b)(w=>{const C=new mO(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),CT(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:U,replaceUrl:Z}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!U,replaceUrl:!!Z})}),(0,Mt.U)(m=>{const w=function HO(n,e,t){const r=f0(n,e._root,t?t._root:void 0);return new ox(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Co.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Mt.U)(r=>(new eP(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Co.b)({next(){u=!0},complete(){u=!0}}),function cO(n){return(0,Vn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),kh(m=>{if(d=!0,function bO(n){return n&&n[qS]}(m)){const w=fp(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new jS(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nx(o.source)};this.scheduleNavigation(x,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new dO(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return ey.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){yx(t),this.config=t.map(bT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let O=null;switch(m){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),function zO(n,e,t,r,o){if(0===t.length)return _T(e.root,e.root,e.root,r,o);const u=function WO(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hx(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Di(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new hx(t,e,r)}(t);if(u.toRoot())return _T(e.root,e.root,new Kt([],{}),r,o);const d=function ZO(n,e,t){if(n.isAbsolute)return new vT(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new vT(u,u===e.root,0)}const r=eI(n.commands[0])?0:1;return function KO(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new vT(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?tI(d.segmentGroup,d.index,u.commands):fx(d.segmentGroup,d.index,u.commands);return _T(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,O,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=fp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function eN(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},JP):!1===r?Object.assign({},XP):r,fp(t))return YS(this.currentUrlTree,t,o);const u=this.parseUrl(t);return YS(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new c0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,x,O;d?(C=d.resolve,x=d.reject,O=d.promise):O=new Promise((ie,Oe)=>{C=ie,x=Oe});const U=++this.navigationId;let Z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Z=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Z=0,this.setTransition({id:U,targetPageId:Z,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:x,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(ie=>Promise.reject(ie))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new jS(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Nx(n){return"imperative"!==n}let E0=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new ro.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:sy(this.skipLocationChange),replaceUrl:sy(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sy(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti),h.Y36(ry),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})(),iy=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new ro.x,this.subscription=t.events.subscribe(u=>{u instanceof c0&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:sy(this.skipLocationChange),replaceUrl:sy(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sy(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti),h.Y36(ry),h.Y36(fe))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function sy(n){return""===n||!!n}class kx{}class Fx{preload(e,t){return gt(null)}}let Lx=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Ox(o,r,w=>t.triggerEvent(new $S(w)),w=>t.triggerEvent(new HS(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(fn(t=>t instanceof c0),l0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Lt.D)(o).pipe((0,Ei.J)(),(0,Mt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Yi.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ti),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(kx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),TT=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof c0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof GS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new GS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const pp=new h.OlP("ROUTER_CONFIGURATION"),Vx=new h.OlP("ROUTER_FORROOT_GUARD"),iN=[ve,{provide:ex,useClass:tx},{provide:Ti,useFactory:function lN(n,e,t,r,o,u,d={},m,w){const C=new Ti(null,n,e,t,r,o,WS(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function cN(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var O,U;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(U=console.groupEnd)||void 0===U||U.call(console)}),C},deps:[ex,y0,ve,h.zs3,h.Sil,DT,pp,[class ZP{},new h.FiY],[class qP{},new h.FiY]]},y0,{provide:ry,useFactory:function dN(n){return n.routerState.root},deps:[Ti]},Lx,Fx,class rN{preload(e,t){return t().pipe(kh(()=>gt(null)))}},{provide:pp,useValue:{enableTracing:!1}}];function sN(){return new h.PXZ("Router",Ti)}let Ux=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[iN,Bx(t),{provide:Vx,useFactory:uN,deps:[[Ti,new h.FiY,new h.tp0]]},{provide:pp,useValue:r||{}},{provide:fe,useFactory:aN,deps:[se,[new h.tBr(Ge),new h.FiY],pp]},{provide:TT,useFactory:oN,deps:[Ti,ul,pp]},{provide:kx,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Fx},{provide:h.PXZ,multi:!0,useFactory:sN},[AT,{provide:h.ip1,multi:!0,useFactory:hN,deps:[AT]},{provide:jx,useFactory:fN,deps:[AT]},{provide:h.tb,multi:!0,useExisting:jx}]]}}static forChild(t){return{ngModule:n,providers:[Bx(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vx,8),h.LFG(Ti,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function oN(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new TT(n,e,t)}function aN(n,e,t={}){return t.useHash?new Ce(n,e):new Ze(n,e)}function uN(n){return"guarded"}function Bx(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:DT,multi:!0,useValue:n}]}let AT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ro.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Ti),d=this.injector.get(pp);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(pp),o=this.injector.get(Lx),u=this.injector.get(TT),d=this.injector.get(Ti),m=this.injector.get(h.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function hN(n){return n.appInitializer.bind(n)}function fN(n){return n.bootstrapListener.bind(n)}const jx=new h.OlP("Router Initializer");let gN=(()=>{class n{constructor(t,r,o){this.firestore=t,this.auth=r,this.router=o,this.title="clinica"}ngOnInit(){var t,r;let o=window.localStorage.getItem("usuario");o&&(this.firestore.usuario.next(JSON.parse(o)),this.auth.Login(null===(t=this.firestore.usuario.value)||void 0===t?void 0:t.email,null===(r=this.firestore.usuario.value)||void 0===r?void 0:r.password))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(u0),h.Y36(n0),h.Y36(Ti))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[nI],styles:[""]}),n})(),$x=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),gp=(()=>{class n extends $x{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const il=new h.OlP("NgValueAccessor"),_N={provide:il,useExisting:(0,h.Gpc)(()=>b0),multi:!0},wN=new h.OlP("CompositionEventMode");let b0=(()=>{class n extends $x{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vN(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(wN,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([_N]),h.qOj]}),n})();function Lh(n){return null==n||0===n.length}function Gx(n){return null!=n&&"number"==typeof n.length}const Qi=new h.OlP("NgValidators"),Vh=new h.OlP("NgAsyncValidators"),EN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mr{static min(e){return function qx(n){return e=>{if(Lh(e.value)||Lh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function zx(n){return e=>{if(Lh(e.value)||Lh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Wx(n){return Lh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Zx(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Kx(n){return Lh(n.value)||EN.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Yx(n){return e=>Lh(e.value)||!Gx(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Qx(n){return e=>Gx(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Jx(n){if(!n)return lI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Lh(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return iM(e)}static composeAsync(e){return sM(e)}}function lI(n){return null}function Xx(n){return null!=n}function eM(n){const e=(0,h.QGY)(n)?(0,Lt.D)(n):n;return(0,h.CqO)(e),e}function tM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function nM(n,e){return e.map(t=>t(n))}function rM(n){return n.map(e=>function bN(n){return!n.validate}(e)?e:t=>e.validate(t))}function iM(n){if(!n)return null;const e=n.filter(Xx);return 0==e.length?null:function(t){return tM(nM(t,e))}}function ST(n){return null!=n?iM(rM(n)):null}function sM(n){if(!n)return null;const e=n.filter(Xx);return 0==e.length?null:function(t){return function mN(...n){const e=(0,Vi.jO)(n),{args:t,keys:r}=NS(n),o=new Li.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let x=0;x<d;x++){let O=!1;(0,km.Xf)(t[x]).subscribe((0,or.x)(u,U=>{O||(O=!0,C--),m[x]=U},()=>w--,void 0,()=>{(!w||!O)&&(C||u.next(r?FS(r,m):m),u.complete())}))}});return e?o.pipe(kS(e)):o}(nM(t,e).map(eM)).pipe((0,Mt.U)(tM))}}function xT(n){return null!=n?sM(rM(n)):null}function oM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aM(n){return n._rawValidators}function uM(n){return n._rawAsyncValidators}function MT(n){return n?Array.isArray(n)?n:[n]:[]}function cI(n,e){return Array.isArray(n)?n.includes(e):n===e}function lM(n,e){const t=MT(e);return MT(n).forEach(o=>{cI(t,o)||t.push(o)}),t}function cM(n,e){return MT(e).filter(t=>!cI(n,t))}class dM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ST(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Uh extends dM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _s extends dM{get formDirective(){return null}get path(){return null}}class hM{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let RT=(()=>{class n extends hM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Uh,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),OT=(()=>{class n extends hM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_s,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function I0(n,e){kT(n,e),e.valueAccessor.writeValue(n.value),function MN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pM(n,e)})}(n,e),function ON(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function RN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function xN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function pI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kT(n,e){const t=aM(n);null!==e.validator?n.setValidators(oM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=uM(n);null!==e.asyncValidator?n.setAsyncValidators(oM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();pI(e._rawValidators,o),pI(e._rawAsyncValidators,o)}function gI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=aM(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=uM(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return pI(e._rawValidators,r),pI(e._rawAsyncValidators,r),t}function pM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const C0="VALID",mI="INVALID",oy="PENDING",D0="DISABLED";function BT(n){return(yI(n)?n.validators:n)||null}function _M(n){return Array.isArray(n)?ST(n):n||null}function jT(n,e){return(yI(e)?e.asyncValidators:n)||null}function vM(n){return Array.isArray(n)?xT(n):n||null}function yI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const $T=n=>n instanceof T0,_I=n=>n instanceof vI,wM=n=>n instanceof CM;function EM(n){return $T(n)?n.value:n.getRawValue()}function bM(n,e){const t=_I(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function IM(n,e){_I(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new h.vHH(1002,"")})}class HT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_M(this._rawValidators),this._composedAsyncValidatorFn=vM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===C0}get invalid(){return this.status===mI}get pending(){return this.status==oy}get disabled(){return this.status===D0}get enabled(){return this.status!==D0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_M(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=vM(e)}addValidators(e){this.setValidators(lM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cM(e,this._rawAsyncValidators))}hasValidator(e){return cI(this._rawValidators,e)}hasAsyncValidator(e){return cI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=oy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=C0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===C0||this.status===oy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?D0:C0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=oy,this._hasOwnPendingAsyncValidator=!0;const t=eM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function FN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=_I(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:wM(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?D0:this.errors?mI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oy)?oy:this._anyControlsHaveStatus(mI)?mI:C0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class T0 extends HT{constructor(e=null,t,r){super(BT(t),jT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class vI extends HT{constructor(e,t,r){super(BT(t),jT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){IM(this,e),Object.keys(e).forEach(r=>{bM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=EM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class CM extends HT{constructor(e,t,r){super(BT(t),jT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){IM(this,e),e.forEach((r,o)=>{bM(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>EM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let qT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const BN={provide:il,useExisting:(0,h.Gpc)(()=>zT),multi:!0};let zT=(()=>{class n extends gp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([BN]),h.qOj]}),n})(),xM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const WT=new h.OlP("NgModelWithFormControlWarning"),qN={provide:_s,useExisting:(0,h.Gpc)(()=>S0)};let S0=(()=>{class n extends _s{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return I0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){fI(t.control||null,t,!1),VT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function yM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(fI(r||null,t),$T(o)&&(I0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function gM(n,e){kT(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function PN(n,e){return gI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kT(this.form,this),this._oldForm&&gI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qi,10),h.Y36(Vh,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([qN]),h.qOj,h.TTD]}),n})();const ZN={provide:Uh,useExisting:(0,h.Gpc)(()=>wI)};let wI=(()=>{class n extends Uh{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function LT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===b0?t=u:function kN(n){return Object.getPrototypeOf(n.constructor)===gp}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function FT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function hI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(_s,13),h.Y36(Qi,10),h.Y36(Vh,10),h.Y36(il,10),h.Y36(WT,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([ZN]),h.qOj,h.TTD]}),n})(),qM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[xM]]}),n})(),ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[qM]}),n})(),zM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:WT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[qM]}),n})(),WM=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function dk(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new vI(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new T0(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new CM(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return $T(t)||_I(t)||wM(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:zM}),n})(),XT=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"loading-overlay"],["src","../../../assets/heart-loading2.gif","alt","Loading..."]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"img",1),h.qZA())},styles:[".loading-overlay[_ngcontent-%COMP%]{display:flex;background:rgba(255,255,255,.7);position:fixed;bottom:0;left:0;right:0;top:0;z-index:9998;align-items:center;justify-content:center}"]}),n})();const hk=["file"];function fk(n,e){1&n&&h._UZ(0,"app-loading")}function pk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",5)(1,"div",6)(2,"label",7),h._uU(3,"Paciente"),h.qZA(),h.TgZ(4,"button",8)(5,"img",9),h.NdJ("click",function(){return h.CHM(t),h.oxw().obtenerRol("paciente")}),h.qZA()()(),h.TgZ(6,"div",6)(7,"label",10),h._uU(8,"Especialista"),h.qZA(),h.TgZ(9,"button",11)(10,"img",12),h.NdJ("click",function(){return h.CHM(t),h.oxw().obtenerRol("especialista")}),h.qZA()()()()}}function gk(n,e){if(1&n&&(h.TgZ(0,"div",16),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.getErrorMessage("nombre"))}}function mk(n,e){if(1&n&&(h.TgZ(0,"div",16),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.getErrorMessage("apellido"))}}function yk(n,e){if(1&n&&(h.TgZ(0,"div",16),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.getErrorMessage("edad"))}}function _k(n,e){if(1&n&&h._UZ(0,"input",30),2&n){const t=h.oxw(2);h.ekj("is-invalid",t.isNotValidField("obraSocial"))("is-valid",!t.isNotValidField("obraSocial")&&t.f.obraSocial.touched)}}function vk(n,e){if(1&n&&(h.TgZ(0,"div",16),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.getErrorMessage("obraSocial"))}}function wk(n,e){if(1&n&&h._UZ(0,"input",31),2&n){const t=h.oxw(2);h.ekj("is-invalid",t.isNotValidField("especialidad"))("is-valid",!t.isNotValidField("especialidad")&&t.f.especialidad.touched)}}function Ek(n,e){if(1&n&&(h.TgZ(0,"div",16),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("",t.getErrorMessage("especialidad")," ")}}function bk(n,e){if(1&n&&(h.TgZ(0,"div",16),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.getErrorMessage("email"))}}function Ik(n,e){if(1&n&&(h.TgZ(0,"div",16),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.getErrorMessage("password"))}}function Ck(n,e){if(1&n&&(h.TgZ(0,"div",32),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.error)}}function Dk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"form",13)(1,"span",14),h._uU(2,"Register"),h.qZA(),h._UZ(3,"input",15),h.TgZ(4,"div",16),h._uU(5),h.qZA(),h._UZ(6,"input",17),h.YNc(7,gk,2,1,"div",18),h._UZ(8,"input",19),h.YNc(9,mk,2,1,"div",18),h._UZ(10,"input",20),h.YNc(11,yk,2,1,"div",18),h.YNc(12,_k,1,4,"input",21),h.YNc(13,vk,2,1,"div",18),h.YNc(14,wk,1,4,"input",22),h.YNc(15,Ek,2,1,"div",18),h._UZ(16,"input",23),h.YNc(17,bk,2,1,"div",18),h._UZ(18,"input",24),h.YNc(19,Ik,2,1,"div",18),h.TgZ(20,"input",25,26),h.NdJ("change",function(){return h.CHM(t),h.oxw().onChangeFile()}),h.qZA(),h.TgZ(22,"div",16),h._uU(23),h.qZA(),h.YNc(24,Ck,2,1,"div",27),h.TgZ(25,"button",28),h.NdJ("click",function(){return h.CHM(t),h.oxw().submit()}),h._uU(26,"Register"),h.qZA(),h.TgZ(27,"a",29),h._uU(28,"Already have an account?"),h.qZA()()}if(2&n){const t=h.oxw();h.Q6J("formGroup",t.registerForm),h.xp6(3),h.ekj("is-invalid",t.isNotValidField("DNI"))("is-valid",!t.isNotValidField("DNI")&&t.f.DNI.touched),h.xp6(2),h.Oqu(t.getErrorMessage("DNI")),h.xp6(1),h.ekj("is-invalid",t.isNotValidField("nombre"))("is-valid",!t.isNotValidField("nombre")&&t.f.nombre.touched),h.xp6(1),h.Q6J("ngIf",t.isNotValidField("nombre")),h.xp6(1),h.ekj("is-invalid",t.isNotValidField("apellido"))("is-valid",!t.isNotValidField("apellido")&&t.f.apellido.touched),h.xp6(1),h.Q6J("ngIf",t.isNotValidField("apellido")),h.xp6(1),h.ekj("is-invalid",t.isNotValidField("edad"))("is-valid",!t.isNotValidField("edad")&&t.f.edad.touched),h.xp6(1),h.Q6J("ngIf",t.isNotValidField("edad")),h.xp6(1),h.Q6J("ngIf","paciente"==t.rol),h.xp6(1),h.Q6J("ngIf",t.isNotValidField("obraSocial")),h.xp6(1),h.Q6J("ngIf","especialista"==t.rol),h.xp6(1),h.Q6J("ngIf",t.isNotValidField("especialidad")),h.xp6(1),h.ekj("is-invalid",t.isNotValidField("email"))("is-valid",!t.isNotValidField("email")&&t.f.email.touched),h.xp6(1),h.Q6J("ngIf",t.isNotValidField("email")),h.xp6(1),h.ekj("is-invalid",t.isNotValidField("password"))("is-valid",!t.isNotValidField("password")&&t.f.password.touched),h.xp6(1),h.Q6J("ngIf",t.isNotValidField("password")),h.xp6(4),h.Oqu(t.getErrorMessage("")),h.xp6(1),h.Q6J("ngIf",""!=t.error),h.xp6(1),h.Q6J("disabled",t.registerForm.invalid)}}let Tk=(()=>{class n{constructor(t,r,o,u){this.formBuilder=t,this.auth=r,this.firestore=o,this.router=u,this.rolSelected=!1,this.error="",this.cargando=!1,this.registerForm=this.formBuilder.group({DNI:["",[mr.minLength(7),mr.maxLength(8),mr.required]],nombre:["",[mr.minLength(3),mr.required]],apellido:["",[mr.minLength(3),mr.required]],edad:["",[mr.required]],obraSocial:["",[mr.minLength(3),mr.required]],rol:["",[mr.minLength(3),mr.required]],email:["",[mr.email,mr.required]],password:["",[mr.minLength(7),mr.required]]})}ngOnInit(){}get f(){return this.registerForm.controls}isNotValidField(t){return!!this.f[t]&&(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}submit(){console.log("Entre"),this.cargando=!0,this.registerForm.invalid?(this.error="Formulario invalido",console.log("error")):(this.paciente=this.registerForm.value,this.auth.Register(this.paciente).then(t=>{var r;(null===(r=t.user)||void 0===r?void 0:r.email)?this.firestore.uploadImage(this.paciente.email,this.archivo).then(o=>{null!=o?(this.paciente.imageURL1=o,this.paciente.rol=this.rol,this.paciente.activo="true",this.firestore.setPaciente(this.paciente).then(()=>{this.cargando=!1,this.firestore.usuario.next(this.paciente),window.localStorage.setItem("usuario",JSON.stringify(this.firestore.usuario.value)),this.router.navigateByUrl("home")})):(this.error="Cant upload image.",this.cargando=!1)}):(this.error="Cant resolve register, try later.",this.cargando=!1)}))}getErrorMessage(t){let r="";return""!=t&&(this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="At least "+this.f[t].getError("minlength").requiredLength+" characters")),r}onChangeFile(){let t=this.file.nativeElement.files[0],r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{this.archivo=r.result}}obtenerRol(t){this.rolSelected=!0,this.rol=t,this.f.rol.setValue(this.rol),"especialista"==this.f.rol.value?(this.registerForm.addControl("especialidad",new T0("",mr.required)),this.registerForm.removeControl("obraSocial")):"paciente"==this.f.rol.value&&(this.registerForm.addControl("obraSocial",new T0("",mr.required)),this.registerForm.removeControl("especialidad"))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(WM),h.Y36(n0),h.Y36(u0),h.Y36(Ti))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&h.Gf(hk,5),2&t){let o;h.iGM(o=h.CRH())&&(r.file=o.first)}},decls:5,vars:3,consts:[[1,"login"],[4,"ngIf"],[1,"form"],["class","row container-img",4,"ngIf"],["class","login-form",3,"formGroup",4,"ngIf"],[1,"row","container-img"],[1,"col-6"],["for","paciente"],["id","paciente"],["src","../../../assets/logo-paciente.jpg","alt","",1,"btn-img1",3,"click"],["for","especialista"],["id","especialista"],["src","../../../assets/logo-espcialista.png","alt","",1,"btn-img2",3,"click"],[1,"login-form",3,"formGroup"],[1,"material-icons"],["type","text","placeholder","DNI","formControlName","DNI"],[1,"invalid-feedback"],["type","text","placeholder","Nombre","formControlName","nombre"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Apellido","formControlName","apellido"],["type","number","placeholder","Edad","formControlName","edad"],["type","text","placeholder","Obra Social","formControlName","obraSocial",3,"is-invalid","is-valid",4,"ngIf"],["type","text","placeholder","Especialidad","formControlName","especialidad",3,"is-invalid","is-valid",4,"ngIf"],["type","text","placeholder","Email","formControlName","email"],["type","password","placeholder","Contrase\xf1a","formControlName","password"],["type","file","accept","image/*","placeholder","Seleccione una imagen",3,"change"],["file",""],["Class","form","style","color: red;",4,"ngIf"],[3,"disabled","click"],["routerLink","/login",1,"register"],["type","text","placeholder","Obra Social","formControlName","obraSocial"],["type","text","placeholder","Especialidad","formControlName","especialidad"],["Class","form",2,"color","red"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,fk,1,0,"app-loading",1),h.TgZ(2,"div",2),h.YNc(3,pk,11,0,"div",3),h.YNc(4,Dk,29,38,"form",4),h.qZA()()),2&t&&(h.xp6(1),h.Q6J("ngIf",r.cargando),h.xp6(2),h.Q6J("ngIf",!r.rolSelected),h.xp6(1),h.Q6J("ngIf",r.rolSelected))},directives:[kn,XT,qT,OT,S0,b0,RT,wI,zT,iy],styles:['@import"https://fonts.googleapis.com/css2?family=Comfortaa&display=swap";body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b6cb7 0%,#182848 100%)}.login[_ngcontent-%COMP%]{width:360px;padding-top:3%;margin:auto;font-family:Comfortaa,cursive}.container-img[_ngcontent-%COMP%]{margin-top:60%}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#FFFFFF;border-radius:10px;max-width:360px;text-align:center}.btn-img1[_ngcontent-%COMP%], .btn-img2[_ngcontent-%COMP%]{width:100px;height:100px;background-size:cover;background-repeat:no-repeat;border-radius:10px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0;background:#f2f2f2;width:100%;border:0;border-radius:5px;margin:0 0 15px;padding:15px;box-sizing:border-box;font-size:14px;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#dbdbdb}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Comfortaa,cursive;text-transform:uppercase;outline:0;background:#4b6cb7;width:100%;border:0;border-radius:5px;padding:15px;color:#fff;font-size:14px;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#395591}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:75px;color:#4b6cb7}.register[_ngcontent-%COMP%]{top:200px}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.is-valid[_ngcontent-%COMP%]{border-color:#35dc75;box-shadow:0 0 0 .25rem #44e04440}.invalid-feedback[_ngcontent-%COMP%]{top:1;bottom:100}']}),n})();function Ak(n,e){1&n&&(h.TgZ(0,"div",18)(1,"button",19),h._uU(2,"Log in"),h.qZA(),h.TgZ(3,"button",20),h._uU(4,"Register"),h.qZA()())}function Sk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"span",21),h._uU(2),h.qZA(),h.TgZ(3,"button",22),h.NdJ("click",function(){return h.CHM(t),h.oxw().onClickLogOut()}),h._UZ(4,"i",23),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(2),h.AsE("",t.usuario.value.nombre," ",t.usuario.value.apellido," ")}}let xk=(()=>{class n{constructor(t,r,o){this.firestore=t,this.auth=r,this.router=o,this.usuario=this.firestore.usuario}ngOnInit(){}onClickLogOut(){this.auth.LogOut(),this.firestore.usuario.next(null),window.localStorage.removeItem("usuario"),this.router.navigateByUrl("login")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(u0),h.Y36(n0),h.Y36(Ti))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:32,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","gap-2"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["src","../../../assets/clinica-logo2.jpg","alt","",1,"logo"],[1,"nav-item","rounded"],[1,"bi","bi-house-fill","me-2"],[1,"nav-link"],[1,"bi","bi-people-fill","me-2"],[1,"bi","bi-telephone-fill","me-2"],["routerLink","/home/usuarios",1,"nav-link"],["class","buttons-login-container",4,"ngIf"],[4,"ngIf"],[1,"buttons-login-container"],["role","button","routerLink","/login",1,"button-24"],["role","button","routerLink","/register",1,"button-24"],[1,"logout-text"],[1,"button-login",3,"click"],[1,"fa","fa-power-off"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1),h._UZ(2,"a",2),h.TgZ(3,"button",3),h._UZ(4,"span",4),h.qZA(),h.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),h._UZ(9,"img",9),h.qZA()(),h.TgZ(10,"li",10)(11,"a",8),h._UZ(12,"i",11),h._uU(13,"Home "),h.qZA()(),h.TgZ(14,"li",10)(15,"a",12),h._UZ(16,"i",13),h._uU(17,"About"),h.qZA()(),h.TgZ(18,"li",10)(19,"a",12),h._UZ(20,"i",14),h._uU(21,"Contact"),h.qZA()(),h.TgZ(22,"li",10)(23,"a",15),h._UZ(24,"i",14),h._uU(25,"Usuarios"),h.qZA()(),h.TgZ(26,"li",10)(27,"a",12),h._UZ(28,"i",14),h._uU(29,"Perfil"),h.qZA()()()(),h.YNc(30,Ak,5,0,"div",16),h.YNc(31,Sk,5,2,"div",17),h.qZA()()),2&t&&(h.xp6(30),h.Q6J("ngIf",null==r.usuario.value),h.xp6(1),h.Q6J("ngIf",null!=r.usuario.value))},directives:[iy,kn,E0],styles:[".navbar[_ngcontent-%COMP%]{z-index:1001;background-color:#212121}.logo[_ngcontent-%COMP%]{height:3rem;width:3rem;border-radius:10px}.buttons-login-container[_ngcontent-%COMP%]{margin-left:200px}.button-24[_ngcontent-%COMP%]{background:#426eff;border:1px solid #426eff;border-radius:6px;box-shadow:#0000001a 1px 2px 4px;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:nunito,roboto,proxima-nova,proxima nova,sans-serif;font-size:16px;font-weight:800;line-height:16px;min-height:40px;outline:0;padding:12px 14px;text-align:center;text-rendering:geometricprecision;text-transform:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:middle}.button-24[_ngcontent-%COMP%]:hover, .button-24[_ngcontent-%COMP%]:active{background-color:initial;background-position:0 0;color:#42ffff}.button-24[_ngcontent-%COMP%]:active{opacity:.5}.button-login[_ngcontent-%COMP%]{background-color:red;color:#fff;font-size:x-large;border-radius:30px;width:50px;height:50px}.button-login[_ngcontent-%COMP%]:hover{background-color:#fc020277}.logout-text[_ngcontent-%COMP%]{margin-right:10px;font-size:x-large;color:#fff}"]}),n})(),Mk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-dashboard"]],decls:18,vars:0,consts:[[1,"main-menu"],["href",""],[1,"fa","fa-home","fa-2x"],[1,"nav-text"],[1,"has-subnav"],["href","#"],[1,"fa","fa-laptop","fa-2x"],[1,"logout"],[1,"fa","fa-power-off","fa-2x"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"ul")(2,"li")(3,"a",1),h._UZ(4,"i",2),h.TgZ(5,"span",3),h._uU(6," Componente 1 "),h.qZA()()(),h.TgZ(7,"li",4)(8,"a",5),h._UZ(9,"i",6),h.TgZ(10,"span",3),h._uU(11," Componente 2 "),h.qZA()()()(),h.TgZ(12,"ul",7)(13,"li")(14,"a",5),h._UZ(15,"i",8),h.TgZ(16,"span",3),h._uU(17," Logout "),h.qZA()()()()())},styles:['@import"//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css";@import"https://fonts.googleapis.com/css?family=Titillium+Web:300";.fa-2x[_ngcontent-%COMP%]{font-size:2em}.fa[_ngcontent-%COMP%]{position:relative;display:table-cell;width:60px;height:36px;text-align:center;vertical-align:middle;font-size:20px}.main-menu[_ngcontent-%COMP%]:hover, nav.main-menu.expanded[_ngcontent-%COMP%]{width:250px;overflow:visible}.main-menu[_ngcontent-%COMP%]{background:#212121;position:absolute;top:7.5%;bottom:0;height:92.5%;left:0;width:60px;overflow:hidden;transition:width .05s linear;z-index:1000}.main-menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin:7px 0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;display:block;width:250px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:relative;display:table;border-collapse:collapse;border-spacing:0;color:#999;font-family:arial;font-size:14px;text-decoration:none;transition:all .1s linear}.main-menu[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{position:relative;display:table-cell;width:60px;height:36px;text-align:center;vertical-align:middle;font-size:18px}.main-menu[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{position:relative;display:table-cell;vertical-align:middle;width:190px;font-family:Titillium Web,sans-serif}.main-menu[_ngcontent-%COMP%] > ul.logout[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0}.no-touch[_ngcontent-%COMP%]   .scrollable.hover[_ngcontent-%COMP%]{overflow-y:hidden}.no-touch[_ngcontent-%COMP%]   .scrollable.hover[_ngcontent-%COMP%]:hover{overflow-y:auto;overflow:visible}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{text-decoration:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{outline:0;margin:10;padding:0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%], nav.main-menu[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .no-touch[_ngcontent-%COMP%]   .dashboard-page[_ngcontent-%COMP%]   nav.dashboard-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .dashboard-page[_ngcontent-%COMP%]   nav.dashboard-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;background-color:#5d6e7c}@font-face{font-family:Titillium Web;font-style:normal;font-weight:300;src:local("Titillium WebLight"),local("TitilliumWeb-Light"),url(http://themes.googleusercontent.com/static/fonts/titilliumweb/v2/anMUvcNT0H1YN4FII8wpr24bNCNEoFTpS2BTjF6FB5E.woff) format("woff")}']}),n})(),Rk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-navbar")(1,"app-dashboard")(2,"router-outlet")},directives:[xk,Mk,nI],styles:[".container[_ngcontent-%COMP%]{position:relative;top:10 .container;left:5%}"]}),n})();function Ok(n,e){1&n&&h._UZ(0,"app-loading")}function Pk(n,e){if(1&n&&(h.TgZ(0,"div",19),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.error)}}let Nk=(()=>{class n{constructor(t,r,o,u){this.formBuilder=t,this.auth=r,this.router=o,this.fireStore=u,this.cargando=!1,this.error="",this.fotos=[],this.loginForm=this.formBuilder.group({email:["",[mr.required,mr.email]],pass:["",[mr.required,mr.minLength(7)]]})}ngOnInit(){}get f(){return this.loginForm.controls}isNotValidField(t){return(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}getImagen(t){console.log(t)}submit(){this.auth.Login(this.f.email.value,this.f.pass.value).then(t=>{if(null!=t){console.log(t);let r=this.fireStore.getPaciente(this.f.email.value).subscribe(o=>{null!=o&&0!=o.length?(this.fireStore.usuario.next(o[0]),window.localStorage.setItem("usuario",JSON.stringify(o[0])),r.unsubscribe(),this.router.navigateByUrl("home")):this.error="error al iniciar sesion"})}else this.error="usuario o constrase\xf1a invalidos"})}getErrorMessage(t){let r="";return this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="at least 7 characters"),r}autocompletado(t,r){this.f.email.setValue(t),this.f.pass.setValue(r),this.submit()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(WM),h.Y36(n0),h.Y36(Ti),h.Y36(u0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:31,vars:14,consts:[[1,"login"],[4,"ngIf"],[1,"form"],[1,"login-form",3,"formGroup"],[1,"material-icons"],["type","text","placeholder","email","formControlName","email"],[1,"invalid-feedback"],["type","password","placeholder","password","formControlName","pass"],["style","color: red;",4,"ngIf"],[3,"disabled","click"],["routerLink","/register",1,"register"],[1,"row"],[1,"col-4",3,"click"],["src","../../../assets/espcialista-2.png","alt","",1,"btn-img"],["src","../../../assets/espcialista-1.png","alt","",1,"btn-img"],["src","../../../assets/admin.png","alt","",1,"btn-img"],["src","../../../assets/paciente-1.png","alt","",1,"btn-img"],["src","../../../assets/paciente-2.png","alt","",1,"btn-img"],["src","../../../assets/paciente-3.png","alt","",1,"btn-img"],[2,"color","red"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,Ok,1,0,"app-loading",1),h.TgZ(2,"div",2)(3,"form",3)(4,"span",4),h._uU(5,"Log in"),h.qZA(),h._UZ(6,"input",5),h.TgZ(7,"div",6),h._uU(8),h.qZA(),h._UZ(9,"input",7),h.TgZ(10,"div",6),h._uU(11),h.qZA(),h.YNc(12,Pk,2,1,"div",8),h.TgZ(13,"button",9),h.NdJ("click",function(){return r.submit()}),h._uU(14,"login"),h.qZA(),h.TgZ(15,"a",10),h._uU(16,"Dont have an account?"),h.qZA()()(),h.TgZ(17,"div",11)(18,"button",12),h.NdJ("click",function(){return r.autocompletado("CarlosBaute@gmail.com","1234567")}),h._UZ(19,"img",13),h.qZA(),h.TgZ(20,"button",12),h.NdJ("click",function(){return r.autocompletado("AilenGomez@gmail.com","1234567")}),h._UZ(21,"img",14),h.qZA(),h.TgZ(22,"button",12),h.NdJ("click",function(){return r.autocompletado("irismontaner@gmail.com","1234567")}),h._UZ(23,"img",15),h.qZA()(),h.TgZ(24,"div",11)(25,"button",12),h.NdJ("click",function(){return r.autocompletado("BrunoGoffredo@gmail.com","1234567")}),h._UZ(26,"img",16),h.qZA(),h.TgZ(27,"button",12),h.NdJ("click",function(){return r.autocompletado("CamilaPerez@gmail.com","1234567")}),h._UZ(28,"img",17),h.qZA(),h.TgZ(29,"button",12),h.NdJ("click",function(){return r.autocompletado("SolMartinez@gmail.com","1234567")}),h._UZ(30,"img",18),h.qZA()()()),2&t&&(h.xp6(1),h.Q6J("ngIf",r.cargando),h.xp6(2),h.Q6J("formGroup",r.loginForm),h.xp6(3),h.ekj("is-invalid",r.isNotValidField("email"))("is-valid",!r.isNotValidField("email")&&r.f.email.touched),h.xp6(2),h.Oqu(r.getErrorMessage("email")),h.xp6(1),h.ekj("is-invalid",r.isNotValidField("pass"))("is-valid",!r.isNotValidField("pass")&&r.f.pass.touched),h.xp6(2),h.Oqu(r.getErrorMessage("pass")),h.xp6(1),h.Q6J("ngIf",""!=r.error),h.xp6(1),h.Q6J("disabled",r.loginForm.invalid))},directives:[kn,XT,qT,OT,S0,b0,RT,wI,iy],styles:['@import"https://fonts.googleapis.com/css2?family=Comfortaa&display=swap";body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b6cb7 0%,#182848 100%)}.login[_ngcontent-%COMP%]{width:360px;padding:8% 0 0;margin:auto;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#FFFFFF;border-radius:10px;max-width:360px;margin:0 auto 100px;padding:45px;text-align:center}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0;background:#f2f2f2;width:100%;border:0;border-radius:5px;margin:0 0 15px;padding:15px;box-sizing:border-box;font-size:14px;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#dbdbdb}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Comfortaa,cursive;text-transform:uppercase;outline:0;background:#4b6cb7;width:100%;border:0;border-radius:5px;padding:15px;color:#fff;font-size:14px;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#395591}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:75px;color:#4b6cb7}.register[_ngcontent-%COMP%]{top:200px}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.is-valid[_ngcontent-%COMP%]{border-color:#35dc75;box-shadow:0 0 0 .25rem #44e04440}.invalid-feedback[_ngcontent-%COMP%]{top:1;bottom:100}.btn-img[_ngcontent-%COMP%]{width:100px;height:100px;background-size:cover;background-repeat:no-repeat;border-radius:10px}']}),n})(),kk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-bienvenido"]],decls:5,vars:0,consts:[[1,"img"],["src","../../../assets/bienvenido-imagen.jpg","alt",""],[1,"container"],["role","button","routerLink","/login",1,"button-63"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"img",1),h.qZA(),h.TgZ(2,"div",2)(3,"button",3),h._uU(4,"Comenzar"),h.qZA()())},directives:[E0],styles:[".contenedor[_ngcontent-%COMP%]{width:100vw;height:100vh}.img[_ngcontent-%COMP%]{position:absolute;width:100vw;height:600px;margin-top:7%;z-index:-1000}.button-63[_ngcontent-%COMP%]{align-items:center;background-image:linear-gradient(144deg,#AF40FF,#5B42F3 50%,#00DDEB);border:0;border-radius:8px;box-shadow:#9741fc33 0 15px 30px -5px;box-sizing:border-box;color:#fff;font-family:Phantomsans,sans-serif;font-size:20px;justify-content:center;line-height:1em;max-width:100%;min-width:140px;padding:19px 24px;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;cursor:pointer;font-size:xx-large;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif;margin-top:30%;margin-left:80%;z-index:1000}.button-63[_ngcontent-%COMP%]:active, .button-63[_ngcontent-%COMP%]:hover{outline:0}@media (min-width: 768px){.button-63[_ngcontent-%COMP%]{font-size:24px;min-width:196px}}"]}),n})(),Fk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-toggle-button"]],inputs:{activo:"activo"},decls:4,vars:1,consts:[[1,"switch"],["type","checkbox",3,"checked"]],template:function(t,r){1&t&&(h.TgZ(0,"label",0),h._UZ(1,"input",1),h.TgZ(2,"div"),h._UZ(3,"span"),h.qZA()()),2&t&&(h.xp6(1),h.Q6J("checked","true"==r.activo))},styles:['.switch[_ngcontent-%COMP%]{--line: #E8EBFB;--dot: #275EFE;--circle: #D3D4EC;--background: #fff;--duration: .3s;--text: #9EA0BE;--shadow: 0 1px 3px rgba(0, 9, 61, .08);cursor:pointer;position:relative}.switch[_ngcontent-%COMP%]:before{content:"";width:60px;height:32px;border-radius:16px;background:var(--background);position:absolute;left:0;top:0;box-shadow:var(--shadow)}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before, .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{--s: 1;content:"";position:absolute;height:4px;top:14px;width:24px;background:var(--line);transform:scaleX(var(--s));transition:transform var(--duration) ease}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{--s: 0;left:4px;transform-origin:0 50%;border-radius:2px 0 0 2px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{left:32px;transform-origin:100% 50%;border-radius:0 2px 2px 0}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:60px;line-height:28px;color:var(--text)}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{--x: 0;--b: var(--circle);--s: 4px;content:"";position:absolute;left:4px;top:4px;width:24px;height:24px;border-radius:50%;box-shadow:inset 0 0 0 var(--s) var(--b);transform:translate(var(--x));transition:box-shadow var(--duration) ease,transform var(--duration) ease}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:empty){padding-left:68px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{--s: 1}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{--s: 0}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{--x: 28px;--s: 12px;--b: var(--dot)}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative;background:#E8EBFB}body[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%] + .switch[_ngcontent-%COMP%]{margin-top:32px}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]{position:fixed;display:block;right:20px;bottom:20px}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;height:28px}']}),n})();function Lk(n,e){1&n&&h._UZ(0,"app-loading")}function Vk(n,e){if(1&n&&(h.TgZ(0,"li",7)(1,"div",8),h._UZ(2,"img",9),h.qZA(),h.TgZ(3,"div",8),h._uU(4),h.qZA(),h.TgZ(5,"div",10),h._uU(6),h.qZA(),h.TgZ(7,"div",11),h._UZ(8,"img"),h._uU(9),h.qZA(),h._UZ(10,"app-toggle-button",12),h.qZA()),2&n){const t=e.$implicit;h.xp6(2),h.s9C("src",t.imageURL1,h.LSH),h.xp6(2),h.Oqu(t.rol),h.xp6(2),h.AsE("",t.nombre," ",t.apellido,""),h.xp6(3),h.Oqu(t.email),h.xp6(1),h.Q6J("activo",t.activo)}}function Uk(n,e){if(1&n&&(h.TgZ(0,"div",0)(1,"h2"),h._uU(2,"Usuarios registrados"),h.qZA(),h.TgZ(3,"button",3),h._UZ(4,"i",4),h.qZA(),h.TgZ(5,"ul",5),h.YNc(6,Vk,11,6,"li",6),h.qZA()()),2&n){const t=h.oxw();h.xp6(6),h.Q6J("ngForOf",t.users)}}let ZM=(()=>{class n{constructor(t){this.firestore=t,this.cargando=!1,this.users=[]}ngOnInit(){this.getUsers().then(()=>this.cargando=!0)}getUsers(){var t=this;return(0,pe.Z)(function*(){yield t.firestore.getPacientes().subscribe(r=>{r.forEach(o=>{t.users.push(o)}),t.cargando=!1})})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(u0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-listado"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"button-add-Admin"],[1,"fa","fa-plus"],[1,"responsive-table"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"col","col-2"],[1,"img",3,"src"],[1,"col","col-2",2,"padding-left","10%"],[1,"col","col-3"],[1,"col","col-2",3,"activo"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,Lk,1,0,"app-loading",1),h.YNc(2,Uk,7,1,"div",2),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",r.cargando),h.xp6(1),h.Q6J("ngIf",0==r.cargando))},directives:[kn,XT,Jn,Fk],styles:["body[_ngcontent-%COMP%]{font-family:lato,sans-serif}.container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:10px;padding-right:10px;width:4000px}h2[_ngcontent-%COMP%]{font-size:26px;margin:20px 0;text-align:center}h2[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.5em}.img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10%}.button-add-Admin[_ngcontent-%COMP%]{background-color:#00f;color:#fff;font-size:large;border-radius:10px;width:40px;height:40px;margin-left:3%}.responsive-table[_ngcontent-%COMP%]{max-height:850px;overflow-y:scroll}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:3px;padding:25px 15px;display:flex;justify-content:space-between;margin-top:10px;margin-bottom:25px;font-family:Verdana,Geneva,Tahoma,sans-serif;width:98%}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 9px #0000001a}.responsive-table[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{flex-basis:10%;justify-content:center}@media all and (max-width: 767px){.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:none}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{flex-basis:100%}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;padding:10px 0}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:before{color:#6c7a89;padding-right:10px;content:attr(data-label);flex-basis:50%;text-align:right}}"]}),n})();const Bk=[{path:"",component:kk},{path:"home",component:Rk,children:[{path:"usuarios",component:ZM,canActivate:[(()=>{class n{canActivate(t,r){let o=window.localStorage.getItem("usuario");return null!=o&&"admin"==JSON.parse(o).rol}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"usuario",component:ZM}]},{path:"login",component:Nk},{path:"register",component:Tk},{path:"**",redirectTo:"home"}];let jk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ux.forRoot(Bk)],Ux]}),n})();const KM_firebase={projectId:"tp-final-3e4ef",appId:"1:617002588097:web:fd0739fe851e0e012f8140",storageBucket:"tp-final-3e4ef.appspot.com",locationId:"southamerica-east1",apiKey:"AIzaSyBEBxf5TwgW6jUgqlCmUTT4K0Pg0XE4ZHA",authDomain:"tp-final-3e4ef.firebaseapp.com",messagingSenderId:"617002588097"};let $k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[gN]}),n.\u0275inj=h.cJS({providers:[],imports:[[_a,jk,ck,An.hO,zM,An.hO.initializeApp(KM_firebase)]]}),n})();(0,h.G48)(),gu().bootstrapModule($k).catch(n=>console.error(n))},5867:(Je,we,P)=>{P.d(we,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=P(9681);(0,h.registerVersion)("firebase","9.8.2","app")},127:(Je,we,P)=>{P.d(we,{Z:()=>h.Z});var h=P(3942);h.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Je,we,P)=>{P.r(we);var h=P(5861),J=P(3942),N=P(2090),ae=P(9681),te=P(655),ge=P(1877),le=P(4859);const Re=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new ge.Yd("@firebase/auth");function Ze(y,...f){Ge.logLevel<=ge.in.ERROR&&Ge.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function Ce(y,...f){throw Ue(y,...f)}function ve(y,...f){return Ue(y,...f)}function Ee(y,f,g){const v=Object.assign(Object.assign({},Le()),{[f]:g});return new N.LL("auth","Firebase",v).create(f,{appName:y.name})}function Be(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ce(y,"argument-error"),Ee(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return fe.create(y,...f)}function j(y,f,...g){if(!y)throw Ue(f,...g)}function ye(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ze(f),new Error(f)}function W(y,f){y||ye(f)}const ne=new Map;function X(y){W(y instanceof Function,"Expected a class definition");let f=ne.get(y);return f?(W(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ne.set(y,f),f)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===jt()||"https:"===jt()}function jt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Jt{constructor(f,g){this.shortDelay=f,this.longDelay=g,W(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function kt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cn(y,f){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class nn{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Mr=new Jt(3e4,6e4);function qt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Pt(y,f,g,v){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(y,f,g,v,T={}){return ti(y,T,(0,h.Z)(function*(){let R={},z={};v&&("GET"===f?z=v:R={body:JSON.stringify(v)});const ce=(0,N.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),nn.fetch()(vs(y,y.config.apiHost,g,ce),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ti(y,f,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Yt),f);try{const T=new ni(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw mi(y,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const ce=R.ok?z.errorMessage:z.error.message,[Fe,Ye]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw mi(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Fe)throw mi(y,"email-already-in-use",z);if("USER_DISABLED"===Fe)throw mi(y,"user-disabled",z);const it=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ee(y,it,Ye);Ce(y,it)}}catch(T){if(T instanceof N.ZR)throw T;Ce(y,"network-request-failed")}})).apply(this,arguments)}function Rr(y,f,g,v){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(y,f,g,v,T={}){const R=yield Pt(y,f,g,v,T);return"mfaPendingCredential"in R&&Ce(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function vs(y,f,g,v){const T=`${f}${g}?${v}`;return y.config.emulator?Cn(y.config,T):`${y.config.apiScheme}://${T}`}class ni{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),Mr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mi(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=ve(y,f,v);return T.customData._tokenResponse=g,T}function ri(){return(ri=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function wn(y,f){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Gs(y,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Qn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Do(){return(Do=(0,h.Z)(function*(y,f=!1){const g=(0,N.m9)(y),v=yield g.getIdToken(f),T=rt(v);j(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,z=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:Qn($t(T.auth_time)),issuedAtTime:Qn($t(T.iat)),expirationTime:Qn($t(T.exp)),signInProvider:z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function rt(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,N.tV)(g);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T),null}}function _r(y,f){return si.apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof N.ZR&&Ft(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ft({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class qs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class vr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qn(this.lastLoginAt),this.creationTime=Qn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wr(y){return L.apply(this,arguments)}function L(){return(L=(0,h.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),T=yield _r(y,Gs(g,{idToken:v}));j(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const z=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?H(R.providerUserInfo):[],ce=Ie(y.providerData,z),it=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ce?void 0:ce.length)),lt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ce,metadata:new vr(R.createdAt,R.lastLoginAt),isAnonymous:it};Object.assign(y,lt)})).apply(this,arguments)}function q(){return(q=(0,h.Z)(function*(y){const f=(0,N.m9)(y);yield wr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ie(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function H(y){return y.map(f=>{var{providerId:g}=f,v=(0,te._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Se(){return(Se=(0,h.Z)(function*(y,f){const g=yield ti(y,{},(0,h.Z)(function*(){const v=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,z=vs(y,T,"/v1/token",`key=${R}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(z,{method:"POST",headers:ce,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(void 0!==f.idToken,"internal-error"),j(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function yt(y){const f=rt(y);return j(f,"internal-error"),j(void 0!==f.exp,"internal-error"),j(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,h.Z)(function*(){return j(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:z}=yield function Q(y,f){return Se.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(T,R,Number(z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:T,expirationTime:R}=g,z=new Qe;return v&&(j("string"==typeof v,"internal-error",{appName:f}),z.refreshToken=v),T&&(j("string"==typeof T,"internal-error",{appName:f}),z.accessToken=T),R&&(j("number"==typeof R,"internal-error",{appName:f}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return ye("not implemented")}}function ct(y,f){j("string"==typeof y||void 0===y,"internal-error",{appName:f})}class bt{constructor(f){var{uid:g,auth:v,stsTokenManager:T}=f,R=(0,te._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new vr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const v=yield _r(g,g.stsTokenManager.getToken(g.auth,f));return j(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function yi(y){return Do.apply(this,arguments)}(this,f)}reload(){return function G(y){return q.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new bt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield wr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield _r(f,function ft(y,f){return ri.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,T,R,z,ce,Fe,Ye,it;const lt=null!==(v=g.displayName)&&void 0!==v?v:void 0,jn=null!==(T=g.email)&&void 0!==T?T:void 0,Tr=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Na=null!==(z=g.photoURL)&&void 0!==z?z:void 0,kd=null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,Fd=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,fo=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,zl=null!==(it=g.lastLoginAt)&&void 0!==it?it:void 0,{uid:ka,emailVerified:lf,isAnonymous:Wl,providerData:po,stsTokenManager:cf}=g;j(ka&&cf,f,"internal-error");const Wp=Qe.fromJSON(this.name,cf);j("string"==typeof ka,f,"internal-error"),ct(lt,f.name),ct(jn,f.name),j("boolean"==typeof lf,f,"internal-error"),j("boolean"==typeof Wl,f,"internal-error"),ct(Tr,f.name),ct(Na,f.name),ct(kd,f.name),ct(Fd,f.name),ct(fo,f.name),ct(zl,f.name);const Ld=new bt({uid:ka,auth:f,email:jn,emailVerified:lf,displayName:lt,isAnonymous:Wl,photoURL:Na,phoneNumber:Tr,tenantId:kd,stsTokenManager:Wp,createdAt:fo,lastLoginAt:zl});return po&&Array.isArray(po)&&(Ld.providerData=po.map(Zp=>Object.assign({},Zp))),Fd&&(Ld._redirectEventId=Fd),Ld}static _fromIdTokenResponse(f,g,v=!1){return(0,h.Z)(function*(){const T=new Qe;T.updateFromServerResponse(g);const R=new bt({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield wr(R),R})()}}const wt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,h.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,h.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function Gn(y,f,g){return`firebase:${y}:${f}:${g}`}class Or{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=Gn(this.userKey,T.apiKey,R),this.fullPersistenceKey=Gn("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?bt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,h.Z)(function*(){if(!g.length)return new Or(X(wt),f,v);const T=(yield Promise.all(g.map(function(){var Ye=(0,h.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=T[0]||X(wt);const z=Gn(v,f.config.apiKey,f.name);let ce=null;for(const Ye of g)try{const it=yield Ye._get(z);if(it){const lt=bt._fromJSON(f,it);Ye!==R&&(ce=lt),R=Ye;break}}catch(it){}const Fe=T.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],ce&&(yield R._set(z,ce.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,h.Z)(function*(it){if(it!==R)try{yield it._remove(z)}catch(lt){}});return function(it){return Ye.apply(this,arguments)}}())),new Or(R,f,v)):new Or(R,f,v)})()}}function ru(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(qn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ua(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Xi(f))return"Blackberry";if(zn(f))return"Webos";if(iu(f))return"Safari";if((f.includes("chrome/")||la(f))&&!f.includes("edge/"))return"Chrome";if(Pr(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ua(y=(0,N.z$)()){return/firefox\//i.test(y)}function iu(y=(0,N.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function la(y=(0,N.z$)()){return/crios\//i.test(y)}function qn(y=(0,N.z$)()){return/iemobile/i.test(y)}function Pr(y=(0,N.z$)()){return/android/i.test(y)}function Xi(y=(0,N.z$)()){return/blackberry/i.test(y)}function zn(y=(0,N.z$)()){return/webos/i.test(y)}function Gr(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)}function ws(y=(0,N.z$)()){return Gr(y)||Pr(y)||zn(y)||Xi(y)||/windows phone/i.test(y)||qn(y)}function To(y,f=[]){let g;switch(y){case"Browser":g=ru((0,N.z$)());break;case"Worker":g=`${ru((0,N.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${v}`}class qr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=R=>new Promise((z,ce)=>{try{z(f(R))}catch(Fe){ce(Fe)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const T of g.queue)yield T(f),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class qe{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new en(this),this.idTokenSubscription=new en(this),this.beforeStateQueue=new qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=X(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Or.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let R=T,z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ce=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=null==R?void 0:R._redirectEventId,Ye=yield g.tryRedirectSignIn(f);(!ce||ce===Fe)&&(null==Ye?void 0:Ye.user)&&(R=Ye.user,z=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ce){R=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ce))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield wr(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ze(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const v=f?(0,N.m9)(f):null;return v&&j(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,h.Z)(function*(){if(!v._deleted)return f&&j(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,h.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(X(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,h.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&X(f)||g._popupRedirectResolver;j(v,g,"argument-error"),g.redirectPersistenceManager=yield Or.create(g,[X(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=To(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function st(y){return(0,N.m9)(y)}class en{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function xi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class _i{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ye("not implemented")}_getIdTokenResponse(f){return ye("not implemented")}_linkToIdToken(f,g){return ye("not implemented")}_getReauthenticationResolver(f){return ye("not implemented")}}function Tn(y,f){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:resetPassword",qt(y,f))})).apply(this,arguments)}function da(y,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function su(y,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",qt(y,f))})).apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPassword",qt(y,f))})).apply(this,arguments)}function Is(y,f){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendOobCode",qt(y,f))})).apply(this,arguments)}function rn(y,f){return ou.apply(this,arguments)}function ou(){return(ou=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function ha(y,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function Mi(y,f){return au.apply(this,arguments)}function au(){return(au=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function Vc(y,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,h.Z)(function*(y,f){return Is(y,f)})).apply(this,arguments)}function sl(){return(sl=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}function Uc(){return(Uc=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}class Er extends _i{constructor(f,g,v,T=null){super("password",v),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new Er(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new Er(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function Jn(y,f){return Ws.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Oi(y,f){return sl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ce(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,h.Z)(function*(){switch(v.signInMethod){case"password":return da(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function yp(y,f){return Uc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Ce(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Cs(y,f){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithIdp",qt(y,f))})).apply(this,arguments)}class es extends _i{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new es(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=g,R=(0,te._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const z=new es(v,T);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(f){return Cs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Cs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Cs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,N.xO)(g)}return f}}function vp(y,f){return jc.apply(this,arguments)}function jc(){return(jc=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,f))})).apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f))})).apply(this,arguments)}function $c(){return($c=(0,h.Z)(function*(y,f){const g=yield Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f));if(g.temporaryProof)throw mi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ep={USER_NOT_FOUND:"user-not-found"};function Hc(){return(Hc=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ep)})).apply(this,arguments)}class Ao extends _i{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ao({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ao({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function ol(y,f){return Ds.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function wp(y,f){return $c.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function bp(y,f){return Hc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}=f;return v||g||T||R?new Ao({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class uu{constructor(f){var g,v,T,R,z,ce;const Fe=(0,N.zd)((0,N.pd)(f)),Ye=null!==(g=Fe.apiKey)&&void 0!==g?g:null,it=null!==(v=Fe.oobCode)&&void 0!==v?v:null,lt=function Bh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);j(Ye&&it&&lt,"argument-error"),this.apiKey=Ye,this.operation=lt,this.code=it,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Fe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ce=Fe.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const g=function fa(y){const f=(0,N.zd)((0,N.pd)(y)).link,g=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,v=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(v?(0,N.zd)((0,N.pd)(v)).link:null)||v||g||f||y}(f);try{return new uu(g)}catch(v){return null}}}let qc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return Er._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=uu.parseLink(v);return j(T,"argument-error"),Er._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class br{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Zs extends br{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Pi extends Zs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return j("providerId"in g&&"signInMethod"in g,"argument-error"),es._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Pi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Pi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:z,providerId:ce}=f;if(!v&&!T&&!g&&!R||!ce)return null;try{return new Pi(ce)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:R})}catch(Fe){return null}}}let So=(()=>{class y extends Zs{constructor(){super("facebook.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),zc=(()=>{class y extends Zs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),jh=(()=>{class y extends Zs{constructor(){super("github.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ks extends _i{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Cs(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Cs(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Cs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:R}=g;return v&&T&&R&&v===T?new Ks(v,R):null}static _create(f,g){return new Ks(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends br{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Nr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Nr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Ks.fromJSON(f);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Ks._create(v,g)}catch(T){return null}}}let Zc=(()=>{class y extends Zs{constructor(){super("twitter.com")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function kr(y,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signUp",qt(y,f))})).apply(this,arguments)}class oi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,T=!1){return(0,h.Z)(function*(){const R=yield bt._fromIdTokenResponse(f,v,T),z=al(v);return new oi({user:R,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=al(v);return new oi({user:f,providerId:T,_tokenResponse:v,operationType:g})})()}}function al(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ul(){return(ul=(0,h.Z)(function*(y){var f;const g=st(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new oi({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield kr(g,{returnSecureToken:!0}),T=yield oi._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ro extends N.ZR{constructor(f,g,v,T){var R;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Ro.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,T){return new Ro(f,g,v,T)}}function ll(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ro._fromErrorAndOperation(y,R,f,v):R})}function Ni(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function sn(){return(sn=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y);yield Qt(!0,g,f);const{providerUserInfo:v}=yield wn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Ni(v||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function pa(y,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(y,f,g=!1){const v=yield _r(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return oi._forOperation(y,"link",v)})).apply(this,arguments)}function Qt(y,f,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(y,f,g){yield wr(f);const T=!1===y?"provider-already-linked":"no-such-provider";j(Ni(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function lu(y,f){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(y,f,g=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield _r(y,ll(v,T,f,y),g);j(R.idToken,v,"internal-error");const z=rt(R.idToken);j(z,v,"internal-error");const{sub:ce}=z;return j(y.uid===ce,v,"user-mismatch"),oi._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Ce(v,"user-mismatch"),R}})).apply(this,arguments)}function ir(y,f){return cl.apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(y,f,g=!1){const v="signIn",T=yield ll(y,v,f),R=yield oi._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function mn(y,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,h.Z)(function*(y,f){return ir(st(y),f)})).apply(this,arguments)}function sr(y,f){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y);return yield Qt(!1,g,f.providerId),pa(g,f)})).apply(this,arguments)}function ts(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(y,f){return lu((0,N.m9)(y),f)})).apply(this,arguments)}function vi(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,f))})).apply(this,arguments)}function pt(){return(pt=(0,h.Z)(function*(y,f){const g=st(y),v=yield vi(g,{token:f,returnSecureToken:!0}),T=yield oi._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class As{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?dl._fromServerResponse(f,g):Ce(f,"internal-error")}}class dl extends As{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new dl(g)}}function ya(y,f,g){var v;j((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),j(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function cu(){return(cu=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&ya(v,T,g),yield ha(v,T)})).apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(y,f,g){yield Tn((0,N.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function De(){return(De=(0,h.Z)(function*(y,f){yield su((0,N.m9)(y),{oobCode:f})})).apply(this,arguments)}function Nt(y,f){return No.apply(this,arguments)}function No(){return(No=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y),v=yield Tn(g,{oobCode:f}),T=v.requestType;switch(j(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(v.mfaInfo,g,"internal-error");default:j(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=As._fromServerResponse(st(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(y,f){const{data:g}=yield Nt((0,N.m9)(y),f);return g.email})).apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(y,f,g){const v=st(y),T=yield kr(v,{returnSecureToken:!0,email:f,password:g}),R=yield oi._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function ml(){return(ml=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};j(g.handleCodeInApp,v,"argument-error"),g&&ya(v,T,g),yield Mi(v,T)})).apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y),T=qc.credentialWithLink(f,g||Pe());return j(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),mn(v,T)})).apply(this,arguments)}function Ir(y,f){return ui.apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:createAuthUri",qt(y,f))})).apply(this,arguments)}function Ss(){return(Ss=(0,h.Z)(function*(y,f){const v={identifier:f,continueUri:ut()?Pe():"http://localhost"},{signinMethods:T}=yield Ir((0,N.m9)(y),v);return T||[]})).apply(this,arguments)}function yl(){return(yl=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ya(g.auth,T,f);const{email:R}=yield rn(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ya(v.auth,R,g);const{email:z}=yield Vc(v.auth,R);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function _l(y,f){return _a.apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function yu(){return(yu=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,N.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield _r(v,_l(v.auth,R));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const ce=v.providerData.find(({providerId:Fe})=>"password"===Fe);ce&&(ce.displayName=v.displayName,ce.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function _u(y,f,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const z=yield _r(y,da(v,R));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class ko{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class ed extends ko{constructor(f,g,v,T){super(f,g,v),this.username=T}}class vu extends ko{constructor(f,g){super(f,"facebook.com",g)}}class Zr extends ed{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Hh extends ko{constructor(f,g){super(f,"google.com",g)}}class vl extends ed{constructor(f,g,v){super(f,"twitter.com",g,v)}}function Xn(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Xc(y){var f,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const z=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new ko(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new vu(R,T);case"github.com":return new Zr(R,T);case"google.com":return new Hh(R,T);case"twitter.com":return new vl(R,T,y.screenName||null);case"custom":case"anonymous":return new ko(R,null);default:return new ko(R,v,T)}}(g)}class rs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new rs("enroll",f)}static _fromMfaPendingCredential(f){return new rs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return rs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return rs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class to{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=st(f),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(ce=>As._fromServerResponse(v,ce));j(T.mfaPendingCredential,v,"internal-error");const z=rs._fromMfaPendingCredential(T.mfaPendingCredential);return new to(z,R,function(){var ce=(0,h.Z)(function*(Fe){const Ye=yield Fe._process(v,z);delete T.mfaInfo,delete T.mfaPendingCredential;const it=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const lt=yield oi._fromIdTokenResponse(v,g.operationType,it);return yield v._updateCurrentUser(lt.user),lt;case"reauthenticate":return j(g.user,v,"internal-error"),oi._forOperation(g.user,g.operationType,it);default:Ce(v,"internal-error")}});return function(Fe){return ce.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function nd(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,f))}class Fo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>As._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Fo(f)}getSession(){var f=this;return(0,h.Z)(function*(){return rs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,h.Z)(function*(){const T=f,R=yield v.getSession(),z=yield _r(v.user,T._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),R=yield _r(g.user,function no(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const wu=new WeakMap,is="__sak";class Eu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(is,"1"),this.storage.removeItem(is),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const xs=(()=>{class y extends Eu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ap(){const y=(0,N.z$)();return iu(y)||Gr(y)}()&&function rr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&g(v,R,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((ce,Fe,Ye)=>{this.notifyListeners(ce,Ye)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(T);if(g.newValue!==ce)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const R=()=>{const ce=this.storage.getItem(T);!v&&this.localCache[T]===ce||this.notifyListeners(T,ce)},z=this.storage.getItem(T);!function ca(){return(0,N.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,R=this;return(0,h.Z)(function*(){yield T().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,h.Z)(function*(){const R=yield v().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,T=this;return(0,h.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),Lt=(()=>{class y extends Eu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let gt=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,h.Z)(function*(){const T=g,{eventId:R,eventType:z,data:ce}=T.data,Fe=v.handlersMap[z];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const Ye=Array.from(Fe).map(function(){var lt=(0,h.Z)(function*(jn){return jn(T.origin,ce)});return function(jn){return lt.apply(this,arguments)}}()),it=yield function Vi(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:it})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function on(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Ei{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var T=this;return(0,h.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,ce;return new Promise((Fe,Ye)=>{const it=on("",20);R.port1.start();const lt=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);ce={messageChannel:R,onMessage(jn){const Tr=jn;if(Tr.data.eventId===it)switch(Tr.data.status){case"ack":clearTimeout(lt),z=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Fe(Tr.data.response);break;default:clearTimeout(lt),clearTimeout(z),Ye(new Error("invalid_response"))}}},T.handlers.add(ce),R.port1.addEventListener("message",ce.onMessage),T.target.postMessage({eventType:f,eventId:it,data:g},[R.port2])}).finally(()=>{ce&&T.removeMessageHandler(ce)})})()}}function Ln(){return window}function Vn(){return void 0!==Ln().WorkerGlobalScope&&"function"==typeof Ln().importScripts}function or(){return(or=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const rd="firebaseLocalStorageDb",li="firebaseLocalStorage",Lo="fbase_key";class so{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function fn(y,f){return y.transaction([li],f?"readwrite":"readonly").objectStore(li)}function wl(){const y=indexedDB.open(rd,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(li,{keyPath:Lo})}catch(T){g(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const v=y.result;v.objectStoreNames.contains(li)?f(v):(v.close(),yield function An(){const y=indexedDB.deleteDatabase(rd);return new so(y).toPromise()}(),f(yield wl()))}))})}function oo(y,f,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(y,f,g){const v=fn(y,!0).put({[Lo]:f,value:g});return new so(v).toPromise()})).apply(this,arguments)}function Dr(){return(Dr=(0,h.Z)(function*(y,f){const g=fn(y,!1).get(f),v=yield new so(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function dt(y,f){const g=fn(y,!0).delete(f);return new so(g).toPromise()}const Rs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield wl()),g.db})()}_withRetries(g){var v=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Vn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=gt._getInstance(function Mt(){return Vn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,h.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,h.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function ss(){return or.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ei(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,h.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function bu(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield wl();return yield oo(g,is,"1"),yield dt(g,is),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,h.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(R=>oo(R,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,h.Z)(function*(){const T=yield v._withRetries(R=>function Ms(y,f){return Dr.apply(this,arguments)}(R,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,h.Z)(function*(){return v._withPendingWrite((0,h.Z)(function*(){return yield v._withRetries(T=>dt(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const v=yield g._withRetries(z=>{const ce=fn(z,!1).getAll();return new so(ce).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:z,value:ce}of v)R.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(ce)&&(g.notifyListeners(z,ce),T.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!R.has(z)&&(g.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function _t(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,f))}function Os(){return(Os=(0,h.Z)(function*(y){return(yield Pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vo(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const R=ve("internal-error");R.customData=T,g(R)},v.type="text/javascript",v.charset="UTF-8",function Ea(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function os(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Sn=1e12;class Bo{constructor(f){this.auth=f,this.counter=Sn,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new _n(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||Sn;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Sn))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var v;return null===(v=g._widgets.get(f||Sn))||void 0===v||v.execute(),""})()}}class _n{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;j(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function as(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const id=os("rcb"),En=new Jt(3e4,6e4);class xp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ln().grecaptcha}load(f,g=""){return j(function Mp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Ln().grecaptcha):new Promise((v,T)=>{const R=Ln().setTimeout(()=>{T(ve(f,"network-request-failed"))},En.get());Ln()[id]=()=>{Ln().clearTimeout(R),delete Ln()[id];const ce=Ln().grecaptcha;if(!ce)return void T(ve(f,"internal-error"));const Fe=ce.render;ce.render=(Ye,it)=>{const lt=Fe(Ye,it);return this.counter++,lt},this.hostLanguage=g,v(ce)},Vo(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:id,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Ln().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sd{load(f){return(0,h.Z)(function*(){return new Bo(f)})()}clearedOneInstance(){}}const Iu="recaptcha",El={theme:"light",type:"image"};class zh{constructor(f,g=Object.assign({},El),v){this.parameters=g,this.type=Iu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=st(v),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;j(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sd:new xp,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const z=ce=>{!ce||(f.tokenChangeListeners.delete(z),R(ce))};f.tokenChangeListeners.add(z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=Ln()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){j(ut()&&!Vn(),f.auth,"internal-error"),yield function Un(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Bi(y){return Os.apply(this,arguments)}(f.auth);j(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cu{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ao._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function jo(){return(jo=(0,h.Z)(function*(y,f,g){const v=st(y),T=yield Fr(v,f,(0,N.m9)(g));return new Cu(T,R=>mn(v,R))})).apply(this,arguments)}function Du(){return(Du=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y);yield Qt(!1,v,"phone");const T=yield Fr(v.auth,f,(0,N.m9)(g));return new Cu(T,R=>sr(v,R))})).apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y),T=yield Fr(v.auth,f,(0,N.m9)(g));return new Cu(T,R=>ts(v,R))})).apply(this,arguments)}function Fr(y,f,g){return $o.apply(this,arguments)}function $o(){return($o=(0,h.Z)(function*(y,f,g){var v;const T=yield g.verify();try{let R;if(j("string"==typeof T,y,"argument-error"),j(g.type===Iu,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const z=R.session;if("phoneNumber"in R)return j("enroll"===z.type,y,"internal-error"),(yield nd(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{j("signin"===z.type,y,"internal-error");const ce=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return j(ce,y,"missing-multi-factor-info"),(yield _t(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield vp(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return z}}finally{g._reset()}})).apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(y,f){yield pa((0,N.m9)(y),f)})).apply(this,arguments)}let Kr=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=st(g)}verifyPhoneNumber(g,v){return Fr(this.auth,g,(0,N.m9)(v))}static credential(g,v){return Ao._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?Ao._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ji(y,f){return f?X(f):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ao extends _i{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Cs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Cs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Cs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function bl(y){return ir(y.auth,new ao(y),y.bypassAuthState)}function ad(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),lu(g,new ao(y),y.bypassAuthState)}function ud(y){return er.apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),pa(g,new ao(y),y.bypassAuthState)})).apply(this,arguments)}class Ia{constructor(f,g,v,T,R=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:z,error:ce,type:Fe}=f;if(ce)return void g.reject(ce);const Ye={auth:g.auth,requestUri:v,sessionId:T,tenantId:z||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Ye))}catch(it){g.reject(it)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return bl;case"linkViaPopup":case"linkViaRedirect":return ud;case"reauthViaPopup":case"reauthViaRedirect":return ad;default:Ce(this.auth,"internal-error")}}resolve(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ns=new Jt(2e3,1e4);function ls(){return(ls=(0,h.Z)(function*(y,f,g){const v=st(y);Be(y,f,br);const T=ji(v,g);return new Il(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y);Be(v.auth,f,br);const T=ji(v.auth,g);return new Il(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y);Be(v.auth,f,br);const T=ji(v.auth,g);return new Il(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let Il=(()=>{class y extends Ia{constructor(g,v,T,R,z){super(g,v,R,z),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const v=yield g.execute();return j(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,h.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const v=on();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ns.get())};g()}}return y.currentPopupAction=null,y})();const bi=new Map;class Cl extends Ia{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let v=bi.get(g.auth._key());if(!v){try{const R=(yield function Da(y,f){return uo.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}bi.set(g.auth._key(),v)}return g.bypassAuthState||bi.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function uo(){return(uo=(0,h.Z)(function*(y,f){const g=F(f),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function Ta(y,f){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(y,f){return M(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){bi.set(y._key(),f)}function M(y){return X(y._redirectPersistence)}function F(y){return Gn("pendingRedirect",y.config.apiKey,y.name)}function Me(){return(Me=(0,h.Z)(function*(y,f,g){const v=st(y);Be(y,f,br);const T=ji(v,g);return yield Ta(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y);Be(v.auth,f,br);const T=ji(v.auth,g);yield Ta(T,v.auth);const R=yield Xt(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(y,f,g){const v=(0,N.m9)(y);Be(v.auth,f,br);const T=ji(v.auth,g);yield Qt(!1,v,f.providerId),yield Ta(T,v.auth);const R=yield Xt(v);return T._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(y,f){return yield st(y)._initializationPromise,Ls(y,f,!1)})).apply(this,arguments)}function Ls(y,f){return tn.apply(this,arguments)}function tn(){return(tn=(0,h.Z)(function*(y,f,g=!1){const v=st(y),T=ji(v,f),z=yield new Cl(v,T,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,f)),z})).apply(this,arguments)}function Xt(y){return di.apply(this,arguments)}function di(){return(di=(0,h.Z)(function*(y){const f=on(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Rp{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function hd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dl(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Dl(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wh(f))}saveEventToCache(f){this.cachedEventUids.add(Wh(f)),this.lastProcessedEventTime=Date.now()}}function Wh(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Dl({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Zh(y){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,h.Z)(function*(y,f={}){return Pt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Kh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tu=/^https?/;function fd(){return(fd=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Zh(y);for(const g of f)try{if(M0(g))return}catch(v){}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function M0(y){const f=Pe(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!Tu.test(g))return!1;if(Kh.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Al=new Jt(3e4,6e4);function pd(){const y=Ln().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Sl=null;function ly(y){return Sl=Sl||function Op(y){return new Promise((f,g)=>{var v,T,R;function z(){pd(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{pd(),g(ve(y,"network-request-failed"))},timeout:Al.get()})}if(null===(T=null===(v=Ln().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=Ln().gapi)||void 0===R?void 0:R.load)){const ce=os("iframefcb");return Ln()[ce]=()=>{gapi.load?z():g(ve(y,"network-request-failed"))},Vo(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Fe=>g(Fe))}z()}}).catch(f=>{throw Sl=null,f})}(y),Sl}const xl=new Jt(5e3,15e3),Sa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},md=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cy(y){const f=y.config;j(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?Cn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},T=md.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,N.xO)(v).slice(1)}`}function ds(){return ds=(0,h.Z)(function*(y){const f=yield ly(y),g=Ln().gapi;return j(g,y,"internal-error"),f.open({where:document.body,url:cy(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sa,dontclear:!0},v=>new Promise(function(){var T=(0,h.Z)(function*(R,z){yield v.restyle({setHideOnLeave:!1});const ce=ve(y,"network-request-failed"),Fe=Ln().setTimeout(()=>{z(ce)},xl.get());function Ye(){Ln().clearTimeout(Fe),R(v)}v.ping(Ye).then(Ye,()=>{z(ce)})});return function(R,z){return T.apply(this,arguments)}}()))}),ds.apply(this,arguments)}const Yh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jh{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function hi(y,f,g,v,T,R){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ae.SDK_VERSION,eventId:T};if(f instanceof br){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Ye]of Object.entries(R||{}))z[Fe]=Ye}if(f instanceof Zs){const Fe=f.getScopes().filter(Ye=>""!==Ye);Fe.length>0&&(z.scopes=Fe.join(","))}y.tenantId&&(z.tid=y.tenantId);const ce=z;for(const Fe of Object.keys(ce))void 0===ce[Fe]&&delete ce[Fe];return`${function qo({config:y}){return y.emulator?Cn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(ce).slice(1)}`}const yd="webStorageSupport";class Au extends class dy{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Au(f)}_finalizeEnroll(f,g,v){return function Dp(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function wa(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vp=(()=>{class y{constructor(){}static assertion(g){return Au._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Pl="@firebase/auth";class vd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lo(){return window}function Ii(){return(Ii=(0,h.Z)(function*(y,f,g){var v;const{BuildInfo:T}=lo();W(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Ed(f.sessionId),z={};return Gr()?z.ibi=T.packageName:Pr()?z.apn=T.packageName:Ce(y,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=R,hi(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function kl(){return(kl=(0,h.Z)(function*(y){const{BuildInfo:f}=lo(),g={};Gr()?g.iosBundleId=f.packageName:Pr()?g.androidPackageName=f.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield Zh(y,g)})).apply(this,arguments)}function Xh(){return(Xh=(0,h.Z)(function*(y,f,g){const{cordova:v}=lo();let T=()=>{};try{yield new Promise((R,z)=>{let ce=null;function Fe(){var lt;R();const jn=null===(lt=v.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof jn&&jn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ye(){ce||(ce=window.setTimeout(()=>{z(ve(y,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}f.addPassiveListener(Fe),document.addEventListener("resume",Ye,!1),Pr()&&document.addEventListener("visibilitychange",it,!1),T=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",it,!1),ce&&window.clearTimeout(ce)}})}finally{T()}})).apply(this,arguments)}function Ed(y){return hs.apply(this,arguments)}function hs(){return(hs=(0,h.Z)(function*(y){const f=Fl(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fl(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function Up(y){(0,ae._registerComponent)(new le.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:z}=v.options;return((ce,Fe)=>{j(R&&!R.includes(":"),"invalid-api-key",{appName:ce.name}),j(!(null==z?void 0:z.includes(":")),"argument-error",{appName:ce.name});const Ye={apiKey:R,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:To(y)},it=new qe(ce,Fe,Ye);return function oe(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(X);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(it,g),it})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new le.wA("auth-internal",f=>{const g=st(f.getProvider("auth").getImmediate());return new vd(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Pl,"0.20.2",function Nl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Pl,"0.20.2","esm2017")}("Browser");class jp extends Rp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function zo(y){return Id.apply(this,arguments)}function Id(){return(Id=(0,h.Z)(function*(y){const f=yield $i()._get(co(y));return f&&(yield $i()._remove(co(y))),f})).apply(this,arguments)}function Ma(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function $i(){return X(xs)}function co(y){return Gn("authEvent",y.config.apiKey,y.name)}function Vl(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,N.zd)(g.join("?"))}function Td(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Bl(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function my(y=(0,N.z$)()){return!("file:"!==Bl()&&"ionic:"!==Bl()&&"capacitor:"!==Bl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sd(){try{const y=self.localStorage,f=on();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ad(y=(0,N.z$)()){return function ho(){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)}()||function xn(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch(y){return jl()&&(0,N.hl)()}return!1}function jl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function bn(){return(function gy(){return"http:"===Bl()||"https:"===Bl()}()||(0,N.ru)()||my())&&!function O0(){return(0,N.b$)()||(0,N.UG)()}()&&Sd()&&!jl()}function Ou(){return my()&&"undefined"!=typeof document}function xd(){return(xd=(0,h.Z)(function*(){return!!Ou()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Qr={LOCAL:"local",NONE:"none",SESSION:"session"},Pu=j,$l="persistence";function Hl(y){return Md.apply(this,arguments)}function Md(){return(Md=(0,h.Z)(function*(y){yield y._initializationPromise;const f=Rd(),g=Gn($l,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Rd(){var y;try{return(null===(y=function yy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const _y=j;class Wo{constructor(){this.browserResolver=X(class Fp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lt,this._completeRedirectFn=Ls,this._overrideRedirectResult=D}_openPopup(f,g,v,T){var R=this;return(0,h.Z)(function*(){var z;W(null===(z=R.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ce=hi(f,g,v,Pe(),T);return function Ol(y,f,g,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let ce="";const Fe=Object.assign(Object.assign({},Yh),{width:v.toString(),height:T.toString(),top:R,left:z}),Ye=(0,N.z$)().toLowerCase();g&&(ce=la(Ye)?"_blank":g),ua(Ye)&&(f=f||"http://localhost",Fe.scrollbars="yes");const it=Object.entries(Fe).reduce((jn,[Tr,Na])=>`${jn}${Tr}=${Na},`,"");if(function zs(y=(0,N.z$)()){var f;return Gr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ye)&&"_self"!==ce)return function Np(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",ce),new Jh(null);const lt=window.open(f||"",ce,it);j(lt,y,"popup-blocked");try{lt.focus()}catch(jn){}return new Jh(lt)}(f,ce,on())})()}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function Ui(y){Ln().location.href=y}(hi(f,g,v,Pe(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(W(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const v=yield function R0(y){return ds.apply(this,arguments)}(f),T=new Rp(f);return v.register("authEvent",R=>(j(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(yd,{type:yd},T=>{var R;const z=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[yd];void 0!==z&&g(!!z),Ce(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Aa(y){return fd.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ws()||iu()||Gr()}}),this.cordovaResolver=X(class Dd{constructor(){this._redirectPersistence=Lt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ls,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){const v=f._key();let T=g.eventManagers.get(v);return T||(T=new jp(f),g.eventManagers.set(v,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ce(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){!function ef(y){var f,g,v,T,R,z,ce,Fe,Ye,it;const lt=lo();j("function"==typeof(null===(f=null==lt?void 0:lt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(g=null==lt?void 0:lt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(R=null===(T=null===(v=null==lt?void 0:lt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Fe=null===(ce=null===(z=null==lt?void 0:lt.cordova)||void 0===z?void 0:z.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(it=null===(Ye=null==lt?void 0:lt.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===it?void 0:it.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield R._initialize(f);yield z.initialized(),z.resetRedirect(),function I(){bi.clear()}(),yield R._originValidation(f);const ce=function Ll(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Ma(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(f,v,T);yield function bd(y,f){return $i()._set(co(y),f)}(f,ce);const Fe=yield function wd(y,f,g){return Ii.apply(this,arguments)}(f,ce,g),Ye=yield function Bp(y){const{cordova:f}=lo();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function Lc(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Fe);return function xu(y,f,g){return Xh.apply(this,arguments)}(f,z,Ye)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Su(y){return kl.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=lo(),z=setTimeout((0,h.Z)(function*(){yield zo(f),g.onEvent(Td())}),500),ce=function(){var it=(0,h.Z)(function*(lt){clearTimeout(z);const jn=yield zo(f);let Tr=null;jn&&(null==lt?void 0:lt.url)&&(Tr=function hy(y,f){var g,v;const T=function Mu(y){const f=Vl(y),g=f.link?decodeURIComponent(f.link):void 0,v=Vl(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Vl(T).link||T||v||g||y}(f);if(T.includes("/__/auth/callback")){const R=Vl(T),z=R.firebaseError?function Cd(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,ce=null===(v=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Fe=ce?ve(ce):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(jn,lt.url)),g.onEvent(Tr||Td())});return function(jn){return it.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ce);const Fe=T,Ye=`${R.packageName.toLowerCase()}://`;lo().handleOpenURL=function(){var it=(0,h.Z)(function*(lt){if(lt.toLowerCase().startsWith(Ye)&&ce({url:lt}),"function"==typeof Fe)try{Fe(lt)}catch(jn){console.error(jn)}});return function(lt){return it.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Lt,this._completeRedirectFn=Ls,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,T)})()}_openRedirect(f,g,v,T){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ou()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _y(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function nf(){return xd.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Ra(y){return y.unwrap()}function Od(y){return af(y)}function af(y){const{_tokenResponse:f}=y instanceof N.ZR?y.customData:y;if(!f)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Kr.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=zc;break;case"facebook.com":v=So;break;case"github.com":v=jh;break;case"twitter.com":v=Zc;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:ce,nonce:Fe}=f;return R||z||T||ce?ce?g.startsWith("saml.")?Ks._create(g,ce):es._fromParams({providerId:g,signInMethod:g,pendingToken:ce,idToken:T,accessToken:R}):new Pi(g).credential({idToken:T,accessToken:R,rawNonce:Fe}):null}return y instanceof N.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ur(y,f){return f.catch(g=>{throw g instanceof N.ZR&&function Nu(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Kn(y,function Wn(y,f){var g;const v=(0,N.m9)(y),T=f;return j(f.customData.operationType,v,"argument-error"),j(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),to._fromError(v,T)}(y,f));else if(v){const T=af(f),R=f;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Od(g),additionalUserInfo:Xn(g),user:fs.getOrCreate(T)}})}function Oa(y,f){return uf.apply(this,arguments)}function uf(){return(uf=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>ur(y,g.confirm(v))}})).apply(this,arguments)}class Kn{constructor(f,g){this.resolver=g,this.auth=function Gl(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ur(Ra(this.auth),this.resolver.resolveSignIn(f))}}class fs{constructor(f){this._delegate=f,this.multiFactor=function Tp(y){const f=(0,N.m9)(y);return wu.has(f)||wu.set(f,Fo._fromUser(f)),wu.get(f)}(f)}static getOrCreate(f){return fs.USER_MAP.has(f)||fs.USER_MAP.set(f,new fs(f)),fs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return ur(g.auth,sr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,h.Z)(function*(){return Oa(v.auth,function ba(y,f,g){return Du.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return ur(g.auth,function dd(y,f,g){return cs.apply(this,arguments)}(g._delegate,f,Wo))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Hl(st(g.auth)),function Vt(y,f,g){return function It(y,f,g){return Zn.apply(this,arguments)}(y,f,g)}(g._delegate,f,Wo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return ur(g.auth,ts(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Oa(this.auth,function od(y,f,g){return ar.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ur(this.auth,function cd(y,f,g){return Ca.apply(this,arguments)}(this._delegate,f,Wo))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Hl(st(g.auth)),function Xe(y,f,g){return function et(y,f,g){return mt.apply(this,arguments)}(y,f,g)}(g._delegate,f,Wo)})()}sendEmailVerification(f){return function wi(y,f){return yl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function $h(y,f){return sn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Qc(y,f){return _u((0,N.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Jc(y,f){return _u((0,N.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Ho(y,f){return us.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function mu(y,f){return yu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function pu(y,f,g){return gu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fs.USER_MAP=new WeakMap;const ql=j;let Hp=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;ql(T,"invalid-api-key",{appName:g.name}),ql(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?Wo:void 0;this._delegate=v.initialize({options:{persistence:vy(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function zr(y,f,g){const v=st(y);j(v._canInitEmulator,v,"emulator-config-failed"),j(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=Si(f),{host:z,port:ce}=function Nn(y){const f=Si(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:xi(v.substr(R.length+1))}}{const[R,z]=v.split(":");return{host:R,port:xi(z)}}}(f);v.config.emulator={url:`${R}//${z}${null===ce?"":`:${ce}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function dn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Po(y,f){return De.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Nt(this._delegate,g)}confirmPasswordReset(g,v){return function du(y,f,g){return fl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,h.Z)(function*(){return ur(T._delegate,function Js(y,f,g){return ai.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function fu(y,f){return Ss.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Yc(y,f){const g=uu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){ql(bn(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Bn(y,f){return Fs.apply(this,arguments)}(g._delegate,Wo);return v?ur(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ru(y,f){st(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:R,error:z,complete:ce}=Gp(g,v,T);return this._delegate.onAuthStateChanged(R,z,ce)}onIdTokenChanged(g,v,T){const{next:R,error:z,complete:ce}=Gp(g,v,T);return this._delegate.onIdTokenChanged(R,z,ce)}sendSignInLinkToEmail(g,v){return function gl(y,f,g){return ml.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function hl(y,f,g){return cu.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,h.Z)(function*(){let T;switch(function rf(y,f){Pu(Object.values(Qr).includes(f),y,"invalid-persistence-type"),(0,N.b$)()?Pu(f!==Qr.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?Pu(f===Qr.NONE,y,"unsupported-persistence-type"):jl()?Pu(f===Qr.NONE||f===Qr.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):Pu(f===Qr.NONE||Sd(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Qr.SESSION:T=Lt;break;case Qr.LOCAL:T=(yield X(Rs)._isAvailable())?Rs:xs;break;case Qr.NONE:T=wt;break;default:return Ce("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ur(this._delegate,function Kc(y){return ul.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ur(this._delegate,mn(this._delegate,g))}signInWithCustomToken(g){return ur(this._delegate,function Oo(y,f){return pt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return ur(this._delegate,function pl(y,f,g){return mn((0,N.m9)(y),qc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return ur(this._delegate,function Ip(y,f,g){return ns.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Oa(this._delegate,function Ut(y,f,g){return jo.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,h.Z)(function*(){return ql(bn(),v._delegate,"operation-not-supported-in-this-environment"),ur(v._delegate,function ld(y,f,g){return ls.apply(this,arguments)}(v._delegate,g,Wo))})()}signInWithRedirect(g){var v=this;return(0,h.Z)(function*(){return ql(bn(),v._delegate,"operation-not-supported-in-this-environment"),yield Hl(v._delegate),function K(y,f,g){return function re(y,f,g){return Me.apply(this,arguments)}(y,f,g)}(v._delegate,g,Wo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function hn(y,f){return hu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Qr,y})();function Gp(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const T=v;return{next:z=>T(z&&fs.getOrCreate(z)),error:f,complete:g}}function vy(y,f){const g=function sf(y,f){const g=Rd();if(!g)return[];const v=Gn($l,y,f);switch(g.getItem(v)){case Qr.NONE:return[wt];case Qr.LOCAL:return[Rs,Lt];case Qr.SESSION:return[Lt];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Rs)&&g.push(Rs),"undefined"!=typeof window)for(const v of[xs,Lt])g.includes(v)||g.push(v);return g.includes(wt)||g.push(wt),g}class Pd{constructor(){this.providerId="phone",this._delegate=new Kr(Ra(J.Z.auth()))}static credential(f,g){return Kr.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Pd.PHONE_SIGN_IN_METHOD=Kr.PHONE_SIGN_IN_METHOD,Pd.PROVIDER_ID=Kr.PROVIDER_ID;const qp=j;class zp{constructor(f,g,v=J.Z.app()){var T;qp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new zh(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pa(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Hp(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:qc,FacebookAuthProvider:So,GithubAuthProvider:jh,GoogleAuthProvider:zc,OAuthProvider:Pi,SAMLAuthProvider:Nr,PhoneAuthProvider:Pd,PhoneMultiFactorGenerator:Vp,RecaptchaVerifier:zp,TwitterAuthProvider:Zc,Auth:Hp,AuthCredential:_i,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},8306:(Je,we,P)=>{P.d(we,{y:()=>$});var h=P(2961),J=P(727),N=P(8822),ae=P(4671);var le=P(2416),se=P(576),he=P(2806);let $=(()=>{class Te{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const fe=new Te;return fe.source=this,fe.operator=Le,fe}subscribe(Le,fe,be){const Ge=function He(Te){return Te&&Te instanceof h.Lv||function ee(Te){return Te&&(0,se.m)(Te.next)&&(0,se.m)(Te.error)&&(0,se.m)(Te.complete)}(Te)&&(0,J.Nn)(Te)}(Le)?Le:new h.Hp(Le,fe,be);return(0,he.x)(()=>{const{operator:Ze,source:Ce}=this;Ge.add(Ze?Ze.call(Ge,Ce):Ce?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Le){try{return this._subscribe(Le)}catch(fe){Le.error(fe)}}forEach(Le,fe){return new(fe=B(fe))((be,Ge)=>{const Ze=new h.Hp({next:Ce=>{try{Le(Ce)}catch(ve){Ge(ve),Ze.unsubscribe()}},error:Ge,complete:be});this.subscribe(Ze)})}_subscribe(Le){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Le)}[N.L](){return this}pipe(...Le){return function ge(Te){return 0===Te.length?ae.y:1===Te.length?Te[0]:function(Le){return Te.reduce((fe,be)=>be(fe),Le)}}(Le)(this)}toPromise(Le){return new(Le=B(Le))((fe,be)=>{let Ge;this.subscribe(Ze=>Ge=Ze,Ze=>be(Ze),()=>fe(Ge))})}}return Te.create=Re=>new Te(Re),Te})();function B(Te){var Re;return null!==(Re=null!=Te?Te:le.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Je,we,P)=>{P.d(we,{x:()=>le});var h=P(8306),J=P(727);const ae=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(8737),ge=P(2806);let le=(()=>{class he extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const ee=new se(this,this);return ee.operator=B,ee}_throwIfClosed(){if(this.closed)throw new ae}next(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(B)}})}error(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:ee}=this;for(;ee.length;)ee.shift().error(B)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:ee,isStopped:He,observers:Te}=this;return ee||He?J.Lc:(this.currentObservers=null,Te.push(B),new J.w0(()=>{this.currentObservers=null,(0,te.P)(Te,B)}))}_checkFinalizedStatuses(B){const{hasError:ee,thrownError:He,isStopped:Te}=this;ee?B.error(He):Te&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return he.create=($,B)=>new se($,B),he})();class se extends le{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,ee;null===(ee=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===ee||ee.call(B,$)}error($){var B,ee;null===(ee=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===ee||ee.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,ee;return null!==(ee=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==ee?ee:J.Lc}}},2961:(Je,we,P)=>{P.d(we,{Hp:()=>Le,Lv:()=>ee});var h=P(576),J=P(727),N=P(2416),ae=P(7849);function te(){}const ge=he("C",void 0,void 0);function he(Ce,ve,Ee){return{kind:Ce,value:ve,error:Ee}}var $=P(3410),B=P(2806);class ee extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=Ze}static create(ve,Ee,Be){return new Le(ve,Ee,Be)}next(ve){this.isStopped?Ge(function se(Ce){return he("N",Ce,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ge(function le(Ce){return he("E",void 0,Ce)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ge(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(Ce,ve){return He.call(Ce,ve)}class Re{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(ve)}catch(Be){fe(Be)}}error(ve){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(ve)}catch(Be){fe(Be)}else fe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ee){fe(Ee)}}}class Le extends ee{constructor(ve,Ee,Be){let Ue;if(super(),(0,h.m)(ve)||!ve)Ue={next:null!=ve?ve:void 0,error:null!=Ee?Ee:void 0,complete:null!=Be?Be:void 0};else{let j;this&&N.v.useDeprecatedNextContext?(j=Object.create(ve),j.unsubscribe=()=>this.unsubscribe(),Ue={next:ve.next&&Te(ve.next,j),error:ve.error&&Te(ve.error,j),complete:ve.complete&&Te(ve.complete,j)}):Ue=ve}this.destination=new Re(Ue)}}function fe(Ce){N.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ce):(0,ae.h)(Ce)}function Ge(Ce,ve){const{onStoppedNotification:Ee}=N.v;Ee&&$.z.setTimeout(()=>Ee(Ce,ve))}const Ze={closed:!0,next:te,error:function be(Ce){throw Ce},complete:te}},727:(Je,we,P)=>{P.d(we,{Lc:()=>ge,w0:()=>te,Nn:()=>le});var h=P(576);const N=(0,P(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((ee,He)=>`${He+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ae=P(8737);class te{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Te of B)Te.remove(this);else B.remove(this);const{initialTeardown:ee}=this;if((0,h.m)(ee))try{ee()}catch(Te){$=Te instanceof N?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{se(Te)}catch(Re){$=null!=$?$:[],Re instanceof N?$=[...$,...Re.errors]:$.push(Re)}}if($)throw new N($)}}add($){var B;if($&&$!==this)if(this.closed)se($);else{if($ instanceof te){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ae.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ae.P)(B,$),$ instanceof te&&$._removeParent(this)}}te.EMPTY=(()=>{const he=new te;return he.closed=!0,he})();const ge=te.EMPTY;function le(he){return he instanceof te||he&&"closed"in he&&(0,h.m)(he.remove)&&(0,h.m)(he.add)&&(0,h.m)(he.unsubscribe)}function se(he){(0,h.m)(he)?he():he.unsubscribe()}},2416:(Je,we,P)=>{P.d(we,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,P)=>{P.d(we,{E:()=>J});const J=new(P(8306).y)(te=>te.complete())},8996:(Je,we,P)=>{P.d(we,{D:()=>ve});var h=P(8421),J=P(5363),N=P(9468),ge=P(8306),se=P(2202),he=P(576),$=P(9672);function ee(Ee,Be){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(Ue=>{(0,$.f)(Ue,Be,()=>{const j=Ee[Symbol.asyncIterator]();(0,$.f)(Ue,Be,()=>{j.next().then(ye=>{ye.done?Ue.complete():Ue.next(ye.value)})},0,!0)})})}var He=P(3670),Te=P(8239),Re=P(1144),Le=P(6495),fe=P(2206),be=P(4532),Ge=P(3260);function ve(Ee,Be){return Be?function Ce(Ee,Be){if(null!=Ee){if((0,He.c)(Ee))return function ae(Ee,Be){return(0,h.Xf)(Ee).pipe((0,N.R)(Be),(0,J.Q)(Be))}(Ee,Be);if((0,Re.z)(Ee))return function le(Ee,Be){return new ge.y(Ue=>{let j=0;return Be.schedule(function(){j===Ee.length?Ue.complete():(Ue.next(Ee[j++]),Ue.closed||this.schedule())})})}(Ee,Be);if((0,Te.t)(Ee))return function te(Ee,Be){return(0,h.Xf)(Ee).pipe((0,N.R)(Be),(0,J.Q)(Be))}(Ee,Be);if((0,fe.D)(Ee))return ee(Ee,Be);if((0,Le.T)(Ee))return function B(Ee,Be){return new ge.y(Ue=>{let j;return(0,$.f)(Ue,Be,()=>{j=Ee[se.h](),(0,$.f)(Ue,Be,()=>{let ye,W;try{({value:ye,done:W}=j.next())}catch(ne){return void Ue.error(ne)}W?Ue.complete():Ue.next(ye)},0,!0)}),()=>(0,he.m)(null==j?void 0:j.return)&&j.return()})}(Ee,Be);if((0,Ge.L)(Ee))return function Ze(Ee,Be){return ee((0,Ge.Q)(Ee),Be)}(Ee,Be)}throw(0,be.z)(Ee)}(Ee,Be):(0,h.Xf)(Ee)}},8421:(Je,we,P)=>{P.d(we,{Xf:()=>He});var h=P(655),J=P(1144),N=P(8239),ae=P(8306),te=P(3670),ge=P(2206),le=P(4532),se=P(6495),he=P(3260),$=P(576),B=P(7849),ee=P(8822);function He(Ce){if(Ce instanceof ae.y)return Ce;if(null!=Ce){if((0,te.c)(Ce))return function Te(Ce){return new ae.y(ve=>{const Ee=Ce[ee.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,J.z)(Ce))return function Re(Ce){return new ae.y(ve=>{for(let Ee=0;Ee<Ce.length&&!ve.closed;Ee++)ve.next(Ce[Ee]);ve.complete()})}(Ce);if((0,N.t)(Ce))return function Le(Ce){return new ae.y(ve=>{Ce.then(Ee=>{ve.closed||(ve.next(Ee),ve.complete())},Ee=>ve.error(Ee)).then(null,B.h)})}(Ce);if((0,ge.D)(Ce))return be(Ce);if((0,se.T)(Ce))return function fe(Ce){return new ae.y(ve=>{for(const Ee of Ce)if(ve.next(Ee),ve.closed)return;ve.complete()})}(Ce);if((0,he.L)(Ce))return function Ge(Ce){return be((0,he.Q)(Ce))}(Ce)}throw(0,le.z)(Ce)}function be(Ce){return new ae.y(ve=>{(function Ze(Ce,ve){var Ee,Be,Ue,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,h.KL)(Ce);!(Be=yield Ee.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(ye){Ue={error:ye}}finally{try{Be&&!Be.done&&(j=Ee.return)&&(yield j.call(Ee))}finally{if(Ue)throw Ue.error}}ve.complete()})})(Ce,ve).catch(Ee=>ve.error(Ee))})}},6451:(Je,we,P)=>{P.d(we,{T:()=>ge});var h=P(8189),J=P(8421),N=P(515),ae=P(7669),te=P(8996);function ge(...le){const se=(0,ae.yG)(le),he=(0,ae._6)(le,1/0),$=le;return $.length?1===$.length?(0,J.Xf)($[0]):(0,h.J)(he)((0,te.D)($,se)):N.E}},5403:(Je,we,P)=>{P.d(we,{x:()=>J});var h=P(2961);function J(ae,te,ge,le,se){return new N(ae,te,ge,le,se)}class N extends h.Lv{constructor(te,ge,le,se,he,$){super(te),this.onFinalize=he,this.shouldUnsubscribe=$,this._next=ge?function(B){try{ge(B)}catch(ee){te.error(ee)}}:super._next,this._error=se?function(B){try{se(B)}catch(ee){te.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(B){te.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(Je,we,P)=>{P.d(we,{U:()=>N});var h=P(4482),J=P(5403);function N(ae,te){return(0,h.e)((ge,le)=>{let se=0;ge.subscribe((0,J.x)(le,he=>{le.next(ae.call(te,he,se++))}))})}},8189:(Je,we,P)=>{P.d(we,{J:()=>N});var h=P(5577),J=P(4671);function N(ae=1/0){return(0,h.z)(J.y,ae)}},5577:(Je,we,P)=>{P.d(we,{z:()=>se});var h=P(4004),J=P(8421),N=P(4482),ae=P(9672),te=P(5403),le=P(576);function se(he,$,B=1/0){return(0,le.m)($)?se((ee,He)=>(0,h.U)((Te,Re)=>$(ee,Te,He,Re))((0,J.Xf)(he(ee,He))),B):("number"==typeof $&&(B=$),(0,N.e)((ee,He)=>function ge(he,$,B,ee,He,Te,Re,Le){const fe=[];let be=0,Ge=0,Ze=!1;const Ce=()=>{Ze&&!fe.length&&!be&&$.complete()},ve=Be=>be<ee?Ee(Be):fe.push(Be),Ee=Be=>{Te&&$.next(Be),be++;let Ue=!1;(0,J.Xf)(B(Be,Ge++)).subscribe((0,te.x)($,j=>{null==He||He(j),Te?ve(j):$.next(j)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(be--;fe.length&&be<ee;){const j=fe.shift();Re?(0,ae.f)($,Re,()=>Ee(j)):Ee(j)}Ce()}catch(j){$.error(j)}}))};return he.subscribe((0,te.x)($,ve,()=>{Ze=!0,Ce()})),()=>{null==Le||Le()}}(ee,He,he,B)))}},5363:(Je,we,P)=>{P.d(we,{Q:()=>ae});var h=P(9672),J=P(4482),N=P(5403);function ae(te,ge=0){return(0,J.e)((le,se)=>{le.subscribe((0,N.x)(se,he=>(0,h.f)(se,te,()=>se.next(he),ge),()=>(0,h.f)(se,te,()=>se.complete(),ge),he=>(0,h.f)(se,te,()=>se.error(he),ge)))})}},3099:(Je,we,P)=>{P.d(we,{B:()=>ge});var h=P(8996),J=P(5698),N=P(7579),ae=P(2961),te=P(4482);function ge(se={}){const{connector:he=(()=>new N.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:ee=!0}=se;return He=>{let Te=null,Re=null,Le=null,fe=0,be=!1,Ge=!1;const Ze=()=>{null==Re||Re.unsubscribe(),Re=null},Ce=()=>{Ze(),Te=Le=null,be=Ge=!1},ve=()=>{const Ee=Te;Ce(),null==Ee||Ee.unsubscribe()};return(0,te.e)((Ee,Be)=>{fe++,!Ge&&!be&&Ze();const Ue=Le=null!=Le?Le:he();Be.add(()=>{fe--,0===fe&&!Ge&&!be&&(Re=le(ve,ee))}),Ue.subscribe(Be),Te||(Te=new ae.Hp({next:j=>Ue.next(j),error:j=>{Ge=!0,Ze(),Re=le(Ce,$,j),Ue.error(j)},complete:()=>{be=!0,Ze(),Re=le(Ce,B),Ue.complete()}}),(0,h.D)(Ee).subscribe(Te))})(He)}}function le(se,he,...$){return!0===he?(se(),null):!1===he?null:he(...$).pipe((0,J.q)(1)).subscribe(()=>se())}},9468:(Je,we,P)=>{P.d(we,{R:()=>J});var h=P(4482);function J(N,ae=0){return(0,h.e)((te,ge)=>{ge.add(N.schedule(()=>te.subscribe(ge),ae))})}},5698:(Je,we,P)=>{P.d(we,{q:()=>ae});var h=P(515),J=P(4482),N=P(5403);function ae(te){return te<=0?()=>h.E:(0,J.e)((ge,le)=>{let se=0;ge.subscribe((0,N.x)(le,he=>{++se<=te&&(le.next(he),te<=se&&le.complete())}))})}},8505:(Je,we,P)=>{P.d(we,{b:()=>te});var h=P(576),J=P(4482),N=P(5403),ae=P(4671);function te(ge,le,se){const he=(0,h.m)(ge)||le||se?{next:ge,error:le,complete:se}:ge;return he?(0,J.e)(($,B)=>{var ee;null===(ee=he.subscribe)||void 0===ee||ee.call(he);let He=!0;$.subscribe((0,N.x)(B,Te=>{var Re;null===(Re=he.next)||void 0===Re||Re.call(he,Te),B.next(Te)},()=>{var Te;He=!1,null===(Te=he.complete)||void 0===Te||Te.call(he),B.complete()},Te=>{var Re;He=!1,null===(Re=he.error)||void 0===Re||Re.call(he,Te),B.error(Te)},()=>{var Te,Re;He&&(null===(Te=he.unsubscribe)||void 0===Te||Te.call(he)),null===(Re=he.finalize)||void 0===Re||Re.call(he)}))}):ae.y}},4408:(Je,we,P)=>{P.d(we,{o:()=>te});var h=P(727);class J extends h.w0{constructor(le,se){super()}schedule(le,se=0){return this}}const N={setInterval(ge,le,...se){const{delegate:he}=N;return(null==he?void 0:he.setInterval)?he.setInterval(ge,le,...se):setInterval(ge,le,...se)},clearInterval(ge){const{delegate:le}=N;return((null==le?void 0:le.clearInterval)||clearInterval)(ge)},delegate:void 0};var ae=P(8737);class te extends J{constructor(le,se){super(le,se),this.scheduler=le,this.work=se,this.pending=!1}schedule(le,se=0){if(this.closed)return this;this.state=le;const he=this.id,$=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId($,he,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId($,this.id,se),this}requestAsyncId(le,se,he=0){return N.setInterval(le.flush.bind(le,this),he)}recycleAsyncId(le,se,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return se;N.clearInterval(se)}execute(le,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(le,se);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,se){let $,he=!1;try{this.work(le)}catch(B){he=!0,$=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:se}=this,{actions:he}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(he,this),null!=le&&(this.id=this.recycleAsyncId(se,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,P)=>{P.d(we,{v:()=>N});var h=P(6063);class J{constructor(te,ge=J.now){this.schedulerActionCtor=te,this.now=ge}schedule(te,ge=0,le){return new this.schedulerActionCtor(this,te).schedule(le,ge)}}J.now=h.l.now;class N extends J{constructor(te,ge=J.now){super(te,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:ge}=this;if(this._active)return void ge.push(te);let le;this._active=!0;do{if(le=te.execute(te.state,te.delay))break}while(te=ge.shift());if(this._active=!1,le){for(;te=ge.shift();)te.unsubscribe();throw le}}}},4986:(Je,we,P)=>{P.d(we,{z:()=>N});var h=P(4408);const N=new(P(7565).v)(h.o)},6063:(Je,we,P)=>{P.d(we,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Je,we,P)=>{P.d(we,{z:()=>h});const h={setTimeout(J,N,...ae){const{delegate:te}=h;return(null==te?void 0:te.setTimeout)?te.setTimeout(J,N,...ae):setTimeout(J,N,...ae)},clearTimeout(J){const{delegate:N}=h;return((null==N?void 0:N.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Je,we,P)=>{P.d(we,{h:()=>J});const J=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,P)=>{P.d(we,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,P)=>{P.d(we,{_6:()=>ge,jO:()=>ae,yG:()=>te});var h=P(576);function N(le){return le[le.length-1]}function ae(le){return(0,h.m)(N(le))?le.pop():void 0}function te(le){return function J(le){return le&&(0,h.m)(le.schedule)}(N(le))?le.pop():void 0}function ge(le,se){return"number"==typeof N(le)?le.pop():se}},8737:(Je,we,P)=>{function h(J,N){if(J){const ae=J.indexOf(N);0<=ae&&J.splice(ae,1)}}P.d(we,{P:()=>h})},3888:(Je,we,P)=>{function h(J){const ae=J(te=>{Error.call(te),te.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(we,{d:()=>h})},2806:(Je,we,P)=>{P.d(we,{O:()=>ae,x:()=>N});var h=P(2416);let J=null;function N(te){if(h.v.useDeprecatedSynchronousErrorHandling){const ge=!J;if(ge&&(J={errorThrown:!1,error:null}),te(),ge){const{errorThrown:le,error:se}=J;if(J=null,le)throw se}}else te()}function ae(te){h.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=te)}},9672:(Je,we,P)=>{function h(J,N,ae,te=0,ge=!1){const le=N.schedule(function(){ae(),ge?J.add(this.schedule(null,te)):this.unsubscribe()},te);if(J.add(le),!ge)return le}P.d(we,{f:()=>h})},4671:(Je,we,P)=>{function h(J){return J}P.d(we,{y:()=>h})},1144:(Je,we,P)=>{P.d(we,{z:()=>h});const h=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Je,we,P)=>{P.d(we,{D:()=>J});var h=P(576);function J(N){return Symbol.asyncIterator&&(0,h.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(Je,we,P)=>{function h(J){return"function"==typeof J}P.d(we,{m:()=>h})},3670:(Je,we,P)=>{P.d(we,{c:()=>N});var h=P(8822),J=P(576);function N(ae){return(0,J.m)(ae[h.L])}},6495:(Je,we,P)=>{P.d(we,{T:()=>N});var h=P(2202),J=P(576);function N(ae){return(0,J.m)(null==ae?void 0:ae[h.h])}},8239:(Je,we,P)=>{P.d(we,{t:()=>J});var h=P(576);function J(N){return(0,h.m)(null==N?void 0:N.then)}},3260:(Je,we,P)=>{P.d(we,{L:()=>ae,Q:()=>N});var h=P(655),J=P(576);function N(te){return(0,h.FC)(this,arguments,function*(){const le=te.getReader();try{for(;;){const{value:se,done:he}=yield(0,h.qq)(le.read());if(he)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(se)}}finally{le.releaseLock()}})}function ae(te){return(0,J.m)(null==te?void 0:te.getReader)}},4482:(Je,we,P)=>{P.d(we,{A:()=>J,e:()=>N});var h=P(576);function J(ae){return(0,h.m)(null==ae?void 0:ae.lift)}function N(ae){return te=>{if(J(te))return te.lift(function(ge){try{return ae(ge,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,we,P)=>{P.d(we,{h:()=>N});var h=P(2416),J=P(3410);function N(ae){J.z.setTimeout(()=>{const{onUnhandledError:te}=h.v;if(!te)throw ae;te(ae)})}},4532:(Je,we,P)=>{function h(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(we,{z:()=>h})},655:(Je,we,P)=>{function ae(W,ne){var X={};for(var me in W)Object.prototype.hasOwnProperty.call(W,me)&&ne.indexOf(me)<0&&(X[me]=W[me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(me=Object.getOwnPropertySymbols(W);oe<me.length;oe++)ne.indexOf(me[oe])<0&&Object.prototype.propertyIsEnumerable.call(W,me[oe])&&(X[me[oe]]=W[me[oe]])}return X}function se(W,ne,X,me){return new(X||(X=Promise))(function(Pe,ut){function jt(Jt){try{ze(me.next(Jt))}catch(Cn){ut(Cn)}}function kt(Jt){try{ze(me.throw(Jt))}catch(Cn){ut(Cn)}}function ze(Jt){Jt.done?Pe(Jt.value):function oe(Pe){return Pe instanceof X?Pe:new X(function(ut){ut(Pe)})}(Jt.value).then(jt,kt)}ze((me=me.apply(W,ne||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function be(W,ne,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,me=X.apply(W,ne||[]),Pe=[];return oe={},ut("next"),ut("throw"),ut("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function ut(nn){me[nn]&&(oe[nn]=function(Yt){return new Promise(function(Mr,qt){Pe.push([nn,Yt,Mr,qt])>1||jt(nn,Yt)})})}function jt(nn,Yt){try{!function kt(nn){nn.value instanceof fe?Promise.resolve(nn.value.v).then(ze,Jt):Cn(Pe[0][2],nn)}(me[nn](Yt))}catch(Mr){Cn(Pe[0][3],Mr)}}function ze(nn){jt("next",nn)}function Jt(nn){jt("throw",nn)}function Cn(nn,Yt){nn(Yt),Pe.shift(),Pe.length&&jt(Pe[0][0],Pe[0][1])}}function Ze(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,ne=W[Symbol.asyncIterator];return ne?ne.call(W):(W=function ee(W){var ne="function"==typeof Symbol&&Symbol.iterator,X=ne&&W[ne],me=0;if(X)return X.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&me>=W.length&&(W=void 0),{value:W&&W[me++],done:!W}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),X={},me("next"),me("throw"),me("return"),X[Symbol.asyncIterator]=function(){return this},X);function me(Pe){X[Pe]=W[Pe]&&function(ut){return new Promise(function(jt,kt){!function oe(Pe,ut,jt,kt){Promise.resolve(kt).then(function(ze){Pe({value:ze,done:jt})},ut)}(jt,kt,(ut=W[Pe](ut)).done,ut.value)})}}}P.d(we,{FC:()=>be,KL:()=>Ze,_T:()=>ae,mG:()=>se,qq:()=>fe})},5e3:(Je,we,P)=>{P.d(we,{$8M:()=>Vo,$Z:()=>za,AFp:()=>ub,AaK:()=>se,AsE:()=>Vf,CHM:()=>No,CRH:()=>ZE,CZH:()=>eu,CqO:()=>Pf,EJc:()=>hD,EpF:()=>kw,F4k:()=>Fw,FYo:()=>_v,FiY:()=>Xt,G48:()=>Zv,Gf:()=>WE,GfV:()=>xh,Gpc:()=>B,JOm:()=>R,LFG:()=>et,LSH:()=>Td,Lbi:()=>km,NdJ:()=>Ng,OlP:()=>En,Oqu:()=>yh,PXZ:()=>$r,Q6J:()=>qu,QGY:()=>g_,Qsj:()=>_m,R0b:()=>Zi,RDi:()=>ll,Rgc:()=>Cc,SBq:()=>Ec,Sil:()=>pD,Suo:()=>xv,TTD:()=>Pi,TgZ:()=>Rg,VLi:()=>MA,X6Q:()=>Vm,XFs:()=>ft,Xpm:()=>ct,Y36:()=>hh,YKP:()=>FC,YNc:()=>Ig,Yjl:()=>la,Yz7:()=>Yt,ZZ4:()=>Jv,_Bn:()=>SE,_UZ:()=>Og,_Vd:()=>ym,_c5:()=>jD,_uU:()=>M_,aQg:()=>Xv,c2e:()=>cD,cJS:()=>qt,cg1:()=>Kg,dDg:()=>vD,deG:()=>qh,dqk:()=>Ft,eFA:()=>op,ekj:()=>pr,g9A:()=>ip,h0i:()=>Zf,hGG:()=>$D,hij:()=>Wu,iGM:()=>zE,ifc:()=>$t,ip1:()=>Nm,kL8:()=>Yg,lG2:()=>iu,n5z:()=>Os,oAB:()=>Or,oxw:()=>y_,q4F:()=>OE,qLn:()=>Nu,qOj:()=>r_,qZA:()=>Wa,s9C:()=>Nf,sBO:()=>TD,sIi:()=>Df,s_b:()=>Jf,soG:()=>Fm,tBr:()=>tn,tb:()=>jr,tp0:()=>Vs,uIk:()=>s_,vHH:()=>Re,vpe:()=>gi,wAp:()=>ot,xp6:()=>zt,z2F:()=>Wv,zSh:()=>Zy,zs3:()=>Xo});var h=P(7579),J=P(727),N=P(8306),ae=P(6451),te=P(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ge({__forward_ref__:ge});function B(i){return i.__forward_ref__=B,i.toString=function(){return se(this())},i}function ee(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class Re extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function ve(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${be(i)} found${a}`)}function kt(i,s){null==i&&function ze(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pt(i){return Ji(i,Ai)||Ji(i,ni)}function Ji(i,s){return i.hasOwnProperty(s)?i[s]:null}function Rr(i){return i&&(i.hasOwnProperty(vs)||i.hasOwnProperty(mi))?i[vs]:null}const Ai=ge({\u0275prov:ge}),vs=ge({\u0275inj:ge}),ni=ge({ngInjectableDef:ge}),mi=ge({ngInjectorDef:ge});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let ri;function Dn(i){const s=ri;return ri=i,s}function Gs(i,s,a){const l=Pt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==s?s:void ve(se(i),"Injector")}function Qn(i){return{toString:i}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),$t=(()=>{return(i=$t||($t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",$t;var i})();const rt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,_r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=rt||"undefined"!=typeof global&&global||yt||_r,wr={},L=[],G=ge({\u0275cmp:ge}),q=ge({\u0275dir:ge}),Ie=ge({\u0275pipe:ge}),H=ge({\u0275mod:ge}),Q=ge({\u0275fac:ge}),Se=ge({__NG_ELEMENT_ID__:ge});let Qe=0;function ct(i){return Qn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||$t.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Qe++,l.inputs=ua(i.inputs,a),l.outputs=ua(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(cn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(wt):null,l})}function cn(i){return qn(i)||function Pr(i){return i[q]||null}(i)}function wt(i){return function Xi(i){return i[Ie]||null}(i)}const Gn={};function Or(i){return Qn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Gn[i.id]=i.type),s})}function ua(i,s){if(null==i)return wr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const iu=ct;function la(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function qn(i){return i[G]||null}function zn(i,s){const a=i[H]||null;if(!a&&!0===s)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function Wr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Mi(i){return Array.isArray(i)&&!0===i[1]}function au(i){return 0!=(8&i.flags)}function Vc(i){return 2==(2&i.flags)}function Ri(i){return 1==(1&i.flags)}function Oi(i){return null!==i.template}function sl(i){return 0!=(512&i[2])}function br(i,s){return i.hasOwnProperty(Q)?i[Q]:null}class Zs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Pi(){return So}function So(i){return i.type.prototype.ngOnChanges&&(i.setInput=jh),zc}function zc(){const i=Ks(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===wr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function jh(i,s,a,l){const c=Ks(i)||function xo(i,s){return i[Wc]=s}(i,{previous:wr,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],b=_[E];p[E]=new Zs(b&&b.currentValue,s,_===wr),i[l]=s}Pi.ngInherit=!0;const Wc="__ngSimpleChanges__";function Ks(i){return i[Wc]||null}let Ro;function ll(i){Ro=i}function sn(i){return!!i.listen}const pa={createRenderer:(i,s)=>function Ni(){return void 0!==Ro?Ro:"undefined"!=typeof document?document:void 0}()};function Qt(i){for(;Array.isArray(i);)i=i[0];return i}function Ts(i,s){return Qt(s[i])}function ir(i,s){return Qt(s[i.index])}function mn(i,s){return i.data[s]}function sr(i,s){const a=s[i];return Wr(a)?a:a[0]}function Qs(i){return 4==(4&i[2])}function ts(i){return 128==(128&i[2])}function vi(i,s){return null==s?null:i[s]}function Fi(i){i[18]=0}function Oo(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const pt={lFrame:ko(null),bindingsEnabled:!0};function du(){return pt.bindingsEnabled}function De(){return pt.lFrame.lView}function Nt(){return pt.lFrame.tView}function No(i){return pt.lFrame.contextLView=i,i[8]}function hn(){let i=hu();for(;null!==i&&64===i.type;)i=i.parent;return i}function hu(){return pt.lFrame.currentTNode}function ai(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function pl(){return pt.lFrame.isParent}function Ss(){return pt.lFrame.bindingIndex++}function wi(i){const s=pt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function gu(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,_a(s)}function _a(i){pt.lFrame.currentDirectiveIndex=i}function yu(){return pt.lFrame.currentQueryIndex}function Qc(i){pt.lFrame.currentQueryIndex=i}function Jc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function _u(i,s,a){if(a&ft.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ft.Host||(c=Jc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=pt.lFrame=Xc();return l.currentTNode=s,l.lView=i,!0}function Xs(i){const s=Xc(),a=i[1];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Xc(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?ko(i):s}function ko(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function ed(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const vu=ed;function Zr(){const i=ed();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Xn(){return pt.lFrame.selectedIndex}function eo(i){pt.lFrame.selectedIndex=i}function Fn(){const i=pt.lFrame;return mn(i.tView,i.selectedIndex)}function va(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function rs(i,s,a){nd(i,s,3,a)}function to(i,s,a,l){(3&i[2])===a&&nd(i,s,a,l)}function Wn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function nd(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let E=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=l&&E>=l)break}else s[b]<0&&(i[18]+=65536),(E<p||-1==p)&&(Dp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Dp(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Fo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function xs(i,s,a){const l=sn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],b=a[c++];l?i.setAttribute(s,E,b,_):s.setAttributeNS(_,E,b)}else{const _=p,E=a[++c];Lt(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Li(i){return 3===i||4===i||6===i}function Lt(i){return 64===i.charCodeAt(0)}function Vi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||gt(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function gt(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function on(i){return-1!==i}function Ei(i){return 32767&i}function Ui(i,s){let a=function Ln(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Vn=!0;function ss(i){const s=Vn;return Vn=i,s}let rd=0;function li(i,s){const a=so(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Lo(l.data,i),Lo(s,null),Lo(l.blueprint,null));const c=fn(i,s),p=i.injectorIndex;if(on(c)){const _=Ei(c),E=Ui(c,s),b=E[1].data;for(let A=0;A<8;A++)s[p+A]=E[_+A]|b[_+A]}return s[p+8]=c,p}function Lo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function so(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function fn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function An(i,s,a){!function io(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Se)&&(l=a[Se]),null==l&&(l=a[Se]=rd++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function oo(i,s,a){if(a&ft.Optional)return i;ve(s,"NodeInjector")}function Cr(i,s,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const c=i[9],p=Dn(void 0);try{return c?c.get(s,l,a&ft.Optional):Gs(s,l,a&ft.Optional)}finally{Dn(p)}}return oo(l,s,a)}function Ms(i,s,a,l=ft.Default,c){if(null!==i){const p=function Rs(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Se)?i[Se]:void 0;return"number"==typeof s?s>=0?255&s:dt:s}(a);if("function"==typeof p){if(!_u(s,i,l))return l&ft.Host?oo(c,a,l):Cr(s,a,l,c);try{const _=p(l);if(null!=_||l&ft.Optional)return _;ve(a)}finally{vu()}}else if("number"==typeof p){let _=null,E=so(i,s),b=-1,A=l&ft.Host?s[16][6]:null;for((-1===E||l&ft.SkipSelf)&&(b=-1===E?fn(i,s):s[E+8],-1!==b&&wa(l,!1)?(_=s[1],E=Ei(b),s=Ui(b,s)):E=-1);-1!==E;){const S=s[1];if(_t(p,E,S.data)){const k=Sp(E,s,a,_,l,A);if(k!==Dr)return k}b=s[E+8],-1!==b&&wa(l,s[1].data[E+8]===A)&&_t(p,E,s)?(_=S,E=Ei(b),s=Ui(b,s)):E=-1}}}return Cr(s,a,l,c)}const Dr={};function dt(){return new Bi(hn(),De())}function Sp(i,s,a,l,c,p){const _=s[1],E=_.data[i+8],S=ci(E,_,a,null==l?Vc(E)&&Vn:l!=_&&0!=(3&E.type),c&ft.Host&&p===E);return null!==S?Ke(s,_,S,E):Dr}function ci(i,s,a,l,c){const p=i.providerIndexes,_=s.data,E=1048575&p,b=i.directiveStart,S=p>>20,V=c?E+S:i.directiveEnd;for(let Y=l?E:E+S;Y<V;Y++){const _e=_[Y];if(Y<b&&a===_e||Y>=b&&_e.type===a)return Y}if(c){const Y=_[b];if(Y&&Oi(Y)&&Y.type===a)return b}return null}function Ke(i,s,a,l){let c=i[a];const p=s.data;if(function wu(i){return i instanceof Fo}(c)){const _=c;_.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(p[a]));const E=ss(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Dn(_.injectImpl):null;_u(i,l,ft.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function uy(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=So(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&Dn(b),ss(E),_.resolving=!1,vu()}}return c}function _t(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function wa(i,s){return!(i&ft.Self||i&ft.Host&&s)}class Bi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ms(this._tNode,this._lView,s,l,a)}}function Os(i){return Qn(()=>{const s=i.prototype.constructor,a=s[Q]||Ea(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Q]||Ea(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function Ea(i){return He(i)?()=>{const s=Ea(ee(i));return s&&s()}:br(i)}function Vo(i){return function wl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(Li(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(hn(),i)}const Uo="__parameters__";function _n(i,s,a){return Qn(()=>{const l=function Bo(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(b,A,S){const k=b.hasOwnProperty(Uo)?b[Uo]:Object.defineProperty(b,Uo,{value:[]})[Uo];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),b}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class En{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qh=new En("AnalyzeForEntryComponents");function ar(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),ar(l,s)):s!==i&&s.push(l)}return s}function Fr(i,s){i.forEach(a=>Array.isArray(a)?Fr(a,s):s(a))}function $o(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ho(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function er(i,s,a){let l=Ns(i,s);return l>=0?i[1|l]=a:(l=~l,function ao(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Ia(i,s){const a=Ns(i,s);if(a>=0)return i[1|a]}function Ns(i,s){return function ls(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const uo={},Ta="__NG_DI_FLAG__",ks="ngTempTokenPath",D=/\n/gm,F="__source",K=ge({provide:String,useValue:ge});let re;function Me(i){const s=re;return re=i,s}function Xe(i,s=ft.Default){if(void 0===re)throw new Re(203,"");return null===re?Gs(i,void 0,s):re.get(i,s&ft.Optional?null:void 0,s)}function et(i,s=ft.Default){return(function wn(){return ri}()||Xe)(ee(i),s)}const Vt=et;function It(i){const s=[];for(let a=0;a<i.length;a++){const l=ee(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,p=ft.Default;for(let _=0;_<l.length;_++){const E=l[_],b=Bn(E);"number"==typeof b?-1===b?c=E.token:p|=b:c=E}s.push(et(c,p))}else s.push(et(l))}return s}function Zn(i,s){return i[Ta]=s,i.prototype[Ta]=s,i}function Bn(i){return i[Ta]}const tn=Zn(_n("Inject",i=>({token:i})),-1),Xt=Zn(_n("Optional"),8),Vs=Zn(_n("SkipSelf"),4);class Rl{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function hi(i){return i instanceof Rl?i.changingThisBreaksApplicationSecurity:i}const Up=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,lo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var xt=(()=>((xt=xt||{})[xt.NONE=0]="NONE",xt[xt.HTML=1]="HTML",xt[xt.STYLE=2]="STYLE",xt[xt.SCRIPT=3]="SCRIPT",xt[xt.URL=4]="URL",xt[xt.RESOURCE_URL=5]="RESOURCE_URL",xt))();function Td(i){const s=function ho(){const i=De();return i&&i[12]}();return s?s.sanitize(xt.URL,i)||"":function qo(i,s){const a=function yd(i){return i instanceof Rl&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?hi(i):function xa(i){return(i=String(i)).match(Up)||i.match(lo)?i:"unsafe:"+i}(fe(i))}const jl="__ngContext__";function bn(i,s){i[jl]=s}function nf(i){const s=function Ou(i){return i[jl]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ra(i){return i.ngOriginalError}function Od(i,...s){i.error(...s)}class Nu{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Gl(i){return i&&i.ngErrorLogger||Od}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ra(s);for(;a&&Ra(a);)a=Ra(a);return a||null}}const Pd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function y(i){return i instanceof Function?i():i}var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();function ce(i,s){return undefined(i,s)}function it(i){const s=i[3];return Mi(s)?s[3]:s}function Tr(i){return kd(i[13])}function Na(i){return kd(i[4])}function kd(i){for(;null!==i&&!Mi(i);)i=i[4];return i}function fo(i,s,a,l,c){if(null!=l){let p,_=!1;Mi(l)?p=l:Wr(l)&&(_=!0,l=l[0]);const E=Qt(l);0===i&&null!==a?null==c?Ey(s,a,E):Zl(s,a,E,c||null,!0):1===i&&null!==a?Zl(s,a,E,c||null,!0):2===i?function nt(i,s,a){const l=Xp(i,s);l&&function Jp(i,s,a,l){sn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function xe(i,s,a,l,c){const p=a[7];p!==Qt(a)&&fo(s,i,l,p,c);for(let E=10;E<a.length;E++){const b=a[E];ff(b[1],b,i,s,l,p)}}(s,i,p,a,c)}}function Wl(i,s,a){if(sn(i))return i.createElement(s,a);{const l=null!==a?function ul(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function Hi(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Oo(c,-1)),a.splice(l,1)}function Yp(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&Hi(c,l),s>0&&(i[a-1][4]=l[4]);const p=Ho(i,10+s);!function po(i,s){ff(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function wy(i,s){if(!(256&s[2])){const a=s[11];sn(a)&&a.destroyNode&&ff(i,s,a,3,null,null),function Ld(i){let s=i[13];if(!s)return ku(i[1],i);for(;s;){let a=null;if(Wr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Wr(s)&&ku(s[1],s),s=s[3];null===s&&(s=i),Wr(s)&&ku(s[1],s),a=s&&s[4]}s=a}}(s)}}function ku(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function II(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Fo)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function bI(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):Qt(s[_]),b=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?E.removeEventListener(a[p],b,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&sn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Mi(s[3])){a!==s[3]&&Hi(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Qp(i,s,a){return function P0(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===$t.None||c===$t.Emulated)return null}return ir(l,a)}(i,s.parent,a)}function Zl(i,s,a,l,c){sn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function Ey(i,s,a){sn(i)?i.appendChild(s,a):s.appendChild(a)}function N0(i,s,a,l,c){null!==l?Zl(i,s,a,l,c):Ey(i,s,a)}function Xp(i,s){return sn(i)?i.parentNode(s):s.parentNode}let Fa=function Kl(i,s,a){return 40&i.type?ir(i,a):null};function Ne(i,s,a,l){const c=Qp(i,l,s),p=s[11],E=function Lr(i,s,a){return Fa(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let b=0;b<a.length;b++)N0(p,c,a[b],E,!1);else N0(p,c,a,E,!1)}function $n(i,s){if(null!==s){const a=s.type;if(3&a)return ir(s,i);if(4&a)return hf(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return $n(i,l);{const c=i[s.index];return Mi(c)?hf(-1,c):Qt(c)}}if(32&a)return ce(s,i)()||Qt(i[s.index]);{const l=Vd(i,s);return null!==l?Array.isArray(l)?l[0]:$n(it(i[16]),l):$n(i,s.next)}}return null}function Vd(i,s){return null!==s?i[16][6].projection[s.projection]:null}function hf(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return $n(l,c)}return s[7]}function Ct(i,s,a,l,c,p,_){for(;null!=a;){const E=l[a.index],b=a.type;if(_&&0===s&&(E&&bn(Qt(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)Ct(i,s,a.child,l,c,p,!1),fo(s,i,c,E,p);else if(32&b){const A=ce(a,l);let S;for(;S=A();)fo(s,i,c,S,p);fo(s,i,c,E,p)}else 16&b?de(i,s,l,a,c,p):fo(s,i,c,E,p);a=_?a.projectionNext:a.next}}function ff(i,s,a,l,c,p){Ct(a,l,i.firstChild,s,c,p,!1)}function de(i,s,a,l,c,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)fo(s,i,c,b[A],p);else Ct(i,s,b,_[3],c,p,!0)}function by(i,s,a){sn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Iy(i,s,a){sn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function L0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const V0="ng-template";function CI(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==L0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Cy(i){return 4===i.type&&i.value!==V0}function DI(i,s,a){return s===(4!==i.type||a?i.value:V0)}function nA(i,s,a){let l=4;const c=i.attrs||[],p=function Ud(i){for(let s=0;s<i.length;s++)if(Li(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!DI(i,b,a)||""===b&&1===s.length){if(Hn(l))return!1;_=!0}}else{const A=8&l?b:s[++E];if(8&l&&null!==i.attrs){if(!CI(i.attrs,A,a)){if(Hn(l))return!1;_=!0}continue}const k=TI(8&l?"class":b,c,Cy(i),a);if(-1===k){if(Hn(l))return!1;_=!0;continue}if(""!==A){let V;V=k>p?"":c[k+1].toLowerCase();const Y=8&l?V:null;if(Y&&-1!==L0(Y,A,0)||2&l&&A!==V){if(Hn(l))return!1;_=!0}}}}else{if(!_&&!Hn(l)&&!Hn(b))return!1;if(_&&Hn(b))continue;_=!1,l=b|1&l}}return Hn(l)||_}function Hn(i){return 0==(1&i)}function TI(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function U0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Dy(i,s,a=!1){for(let l=0;l<s.length;l++)if(nA(i,s[l],a))return!0;return!1}function Et(i,s){return i?":not("+s.trim()+")":s}function B0(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!Hn(_)&&(s+=Et(p,c),c=""),l=_,p=p||!Hn(l);a++}return""!==c&&(s+=Et(p,c)),s}const Dt={};function zt(i){$0(Nt(),De(),Xn()+i,!1)}function $0(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&rs(s,p,a)}else{const p=i.preOrderHooks;null!==p&&to(s,p,0,a)}eo(a)}function La(i,s){return i<<17|s<<2}function go(i){return i>>17&32767}function Zo(i){return 2|i}function an(i){return(131068&i)>>2}function Va(i,s){return-131069&i|s<<2}function tg(i){return 1|i}function Oy(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Qc(c),_.contentQueries(2,s[p],p)}}}function Hd(i,s,a,l,c,p,_,E,b,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Fi(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function Us(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Py(i,s,a,l,c){const p=hu(),_=pl(),b=i.data[s]=function Gd(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,s,a,l,c),function yl(){return pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function Js(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ai(p,!0),p}function Qo(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Bu(i,s,a){Xs(s);try{const l=i.viewQuery;null!==l&&fg(1,l,a);const c=i.template;null!==c&&Ny(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Oy(i,s),i.staticViewQueries&&fg(2,i.viewQuery,a);const p=i.components;null!==p&&function OI(i,s){for(let a=0;a<s.length;a++)ow(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Zr()}}function Ba(i,s,a,l){const c=s[2];if(256!=(256&c)){Xs(s);try{Fi(s),function fu(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ny(i,s,a,2,l);const _=3==(3&c);if(_){const A=i.preOrderCheckHooks;null!==A&&rs(s,A,null)}else{const A=i.preOrderHooks;null!==A&&to(s,A,0,null),Wn(s,0)}if(function sw(i){for(let s=Tr(i);null!==s;s=Na(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Oo(p,1),c[2]|=1024}}}(s),function ec(i){for(let s=Tr(i);null!==s;s=Na(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];ts(l)&&Ba(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Oy(i,s),_){const A=i.contentCheckHooks;null!==A&&rs(s,A)}else{const A=i.contentHooks;null!==A&&to(s,A,1),Wn(s,1)}!function vn(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)eo(~c);else{const p=c,_=a[++l],E=a[++l];gu(_,p),E(2,s[p])}}}finally{eo(-1)}}(i,s);const E=i.components;null!==E&&function $d(i,s){for(let a=0;a<s.length;a++)Kd(i,s[a])}(s,E);const b=i.viewQuery;if(null!==b&&fg(2,b,l),_){const A=i.viewCheckHooks;null!==A&&rs(s,A)}else{const A=i.viewHooks;null!==A&&to(s,A,2),Wn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Oo(s[3],-1))}finally{Zr()}}}function q0(i,s,a,l){const c=s[10],_=Qs(s);try{!_&&c.begin&&c.begin(),_&&Bu(i,s,l),Ba(i,s,a,l)}finally{!_&&c.end&&c.end()}}function Ny(i,s,a,l,c){const p=Xn(),_=2&l;try{eo(-1),_&&s.length>20&&$0(i,s,20,!1),a(l,c)}finally{eo(p)}}function ky(i,s,a){!du()||(function tw(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||li(a,s),bn(l,s);const _=a.initialInputs;for(let E=c;E<p;E++){const b=i.data[E],A=Oi(b);A&&cg(s,a,b);const S=Ke(s,i,E,a);bn(S,s),null!==_&&iw(0,E-c,S,b,0,_),A&&(sr(a.index,s)[8]=S)}}(i,s,a,ir(a,s)),128==(128&a.flags)&&function Vy(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function _l(){return pt.lFrame.currentDirectiveIndex}();try{eo(_);for(let b=l;b<c;b++){const A=i.data[b],S=s[b];_a(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&lg(A,S)}}finally{eo(-1),_a(E)}}(i,s,a))}function Fy(i,s,a=ir){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function z0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=_f(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function _f(i,s,a,l,c,p,_,E,b,A){const S=20+l,k=S+c,V=function PI(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(S,k),Y="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Y,incompleteFirstPass:!1}}function ja(i,s,a,l){const c=ju(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&qy(i).push(l,c.length-1))}function K0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function nr(i,s,a,l,c,p,_,E){const b=ir(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(Jd(i,a,S,l,c),Vc(s)&&function J0(i,s){const a=sr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Q0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,sn(p)?p.setProperty(b,l,c):Lt(l)||(b.setProperty?b.setProperty(l,c):b[l]=c))}function Gi(i,s,a,l){let c=!1;if(du()){const p=function nw(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];Dy(a,_.selectors,!1)&&(c||(c=[]),An(li(a,s),i,_.type),Oi(_)?(Uy(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,By(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let E=!1,b=!1,A=Qo(i,s,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];a.mergedAttrs=Vi(a.mergedAttrs,k.hostAttrs),jy(i,a,s,A,k),rw(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function Y0(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,b=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,V=null===p||Cy(s)?null:Wd(k,p);_.push(V),E=K0(k,A,E),b=K0(S.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=b}(i,a)}_&&function NI(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Re(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=Vi(a.mergedAttrs,a.attrs),c}function Ly(i,s,a,l,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~s.index;(function vf(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,c,_)}}function lg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Uy(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function rw(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Oi(s)&&(a[""]=i)}}function By(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function jy(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=br(c.type)),_=new Fo(p,Oi(c),null);i.blueprint[l]=_,a[l]=_,Ly(i,s,0,l,Qo(i,a,c.hostVars,Dt),c)}function cg(i,s,a){const l=ir(s,i),c=z0(a),p=i[10],_=hg(i,Hd(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function Jo(i,s,a,l,c,p){const _=ir(i,s);!function $y(i,s,a,l,c,p,_){if(null==p)sn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?fe(p):_(p,l||"",c);sn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,l,c)}function iw(i,s,a,l,c,p){const _=p[s];if(null!==_){const E=l.setInput;for(let b=0;b<_.length;){const A=_[b++],S=_[b++],k=_[b++];null!==E?l.setInput(a,k,A,S):a[S]=k}}}function Wd(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Hy(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Kd(i,s){const a=sr(s,i);if(ts(a)){const l=a[1];80&a[2]?Ba(l,a,l.template,a[8]):a[5]>0&&dg(a)}}function dg(i){for(let l=Tr(i);null!==l;l=Na(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Ba(_,p,_.template,p[8])}else p[5]>0&&dg(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=sr(a[l],i);ts(c)&&c[5]>0&&dg(c)}}function ow(i,s){const a=sr(s,i),l=a[1];(function wf(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Bu(l,a,a[8])}function hg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Gy(i){for(;i;){i[2]|=64;const s=it(i);if(sl(i)&&!s)return i;i=s}return null}function aw(i){!function Yd(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=nf(a),c=l[1];q0(c,l,c.template,a)}}(i[8])}function fg(i,s,a){Qc(0),s(i,a)}const Ef=(()=>Promise.resolve(null))();function ju(i){return i[7]||(i[7]=[])}function qy(i){return i.cleanup||(i.cleanup=[])}function Wy(i,s){const a=i[9],l=a?a.get(Nu,null):null;l&&l.handleError(s)}function Jd(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,c,l,E):b[E]=c}}function _o(i,s,a){const l=Ts(s,i);!function ka(i,s,a){sn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function pg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=he(c,E):2==p&&(l=he(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const gg=new En("INJECTOR",-1);class $a{get(s,a=uo){if(a===uo){const l=new Error(`NullInjectorError: No provider for ${se(s)}!`);throw l.name="NullInjectorError",l}return a}}const Zy=new En("Set Injector scope."),fi={},LI={};let bf;function Xd(){return void 0===bf&&(bf=new $a),bf}function lw(i,s=null,a=null,l){const c=cw(i,s,a,l);return c._resolveInjectorDefTypes(),c}function cw(i,s=null,a=null,l){return new un(i,a,s||Xd(),l)}class un{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Fr(a,E=>this.processProvider(E,s,a)),Fr([s],E=>this.processInjectorType(E,[],p)),this.records.set(gg,Ha(void 0,this));const _=this.records.get(Zy);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:se(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=uo,l=ft.Default){this.assertNotDestroyed();const c=Me(this),p=Dn(void 0);try{if(!(l&ft.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function UI(i){return"function"==typeof i||"object"==typeof i&&i instanceof En}(s)&&Pt(s);E=b&&this.injectableDefInScope(b)?Ha(Ky(s),fi):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ft.Self?Xd():this.parent).get(s,a=l&ft.Optional&&a===uo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[ks]=_[ks]||[]).unshift(se(s)),c)throw _;return function Fs(i,s,a,l){const c=i[ks];throw s[F]&&c.unshift(s[F]),i.message=function Ls(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=se(s);if(Array.isArray(s))c=s.map(se).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):se(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[ks]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Dn(p),Me(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(se(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=ee(s)))return!1;let c=Rr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==l.indexOf(_);if(void 0!==p&&(c=Rr(p)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{Fr(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:Y}=S[k];Fr(Y,_e=>this.processProvider(_e,V,Y||L))}}this.injectorDefTypes.add(_);const b=br(_)||(()=>new _);this.records.set(_,Ha(b,fi));const A=c.providers;if(null!=A&&!E){const S=s;Fr(A,k=>this.processProvider(k,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=th(s=ee(s))?s:ee(s&&s.provide);const p=function If(i,s,a){return Yy(i)?Ha(void 0,i.useValue):Ha(eh(i),fi)}(s);if(th(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Ha(void 0,fi,!0),_.factory=()=>It(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===fi&&(a.value=LI,a.value=a.factory()),"object"==typeof a.value&&a.value&&function VI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Ky(i){const s=Pt(i),a=null!==s?s.factory:br(i);if(null!==a)return a;if(i instanceof En)throw new Re(204,!1);if(i instanceof Function)return function mg(i){const s=i.length;if(s>0)throw function us(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function ti(i){const s=i&&(i[Ai]||i[ni]);if(s){const a=function yr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function eh(i,s,a){let l;if(th(i)){const c=ee(i);return br(c)||Ky(c)}if(Yy(i))l=()=>ee(i.useValue);else if(function hw(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...It(i.deps||[]));else if(function dw(i){return!(!i||!i.useExisting)}(i))l=()=>et(ee(i.useExisting));else{const c=ee(i&&(i.useClass||i.provide));if(!function pw(i){return!!i.deps}(i))return br(c)||Ky(c);l=()=>new c(...It(i.deps))}return l}function Ha(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Yy(i){return null!==i&&"object"==typeof i&&K in i}function th(i){return"function"==typeof i}let Xo=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return lw({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return lw({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=uo,i.NULL=new $a,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>et(gg)}),i.__NG_ELEMENT_ID__=-1,i})();function nh(i,s){va(nf(i)[1],hn())}function r_(i){let s=function bw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Oi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Jr(i.inputs),_.declaredInputs=Jr(i.declaredInputs),_.outputs=Jr(i.outputs);const E=c.hostBindings;E&&ta(i,E);const b=c.viewQuery,A=c.contentQueries;if(b&&$I(i,b),A&&Cw(i,A),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),Oi(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===r_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Iw(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Vi(c.hostAttrs,a=Vi(a,c.hostAttrs))}}(l)}function Jr(i){return i===wr?{}:i===L?[]:i}function $I(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Cw(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function ta(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let wg=null;function rh(){if(!wg){const i=Ft.Symbol;if(i&&i.iterator)wg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(wg=l)}}}return wg}function Df(i){return!!i_(i)&&(Array.isArray(i)||!(i instanceof Map)&&rh()in i)}function i_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function pi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function s_(i,s,a,l){const c=De();return pi(c,Ss(),s)&&(Nt(),Jo(Fn(),c,i,s,a,l)),s_}function sc(i,s,a,l){return pi(i,Ss(),a)?s+fe(a)+l:Dt}function sh(i,s,a,l,c,p){const E=function ic(i,s,a,l){const c=pi(i,s,a);return pi(i,s+1,l)||c}(i,function ui(){return pt.lFrame.bindingIndex}(),a,c);return wi(2),E?s+fe(a)+l+fe(c)+p:Dt}function Ig(i,s,a,l,c,p,_,E){const b=De(),A=Nt(),S=i+20,k=A.firstCreatePass?function Br(i,s,a,l,c,p,_,E,b){const A=s.consts,S=Us(s,i,4,_||null,vi(A,E));Gi(s,a,S,vi(A,b)),va(s,S);const k=S.tViews=_f(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,b,s,a,l,c,p,_):A.data[S];ai(k,!1);const V=b[11].createComment("");Ne(A,b,V,k),bn(V,b),hg(b,b[S]=Hy(V,b,V,k)),Ri(k)&&ky(A,b,k),null!=_&&Fy(b,k,E)}function hh(i,s=ft.Default){const a=De();return null===a?et(i,s):Ms(hn(),a,ee(i),s)}function za(){throw new Error("invalid")}function qu(i,s,a){const l=De();return pi(l,Ss(),s)&&nr(Nt(),Fn(),l,i,s,l[11],a,!1),qu}function Mg(i,s,a,l,c){const _=c?"class":"style";Jd(i,a,s.inputs[_],_,l)}function Rg(i,s,a,l){const c=De(),p=Nt(),_=20+i,E=c[11],b=c[_]=Wl(E,s,function Cp(){return pt.lFrame.currentNamespace}()),A=p.firstCreatePass?function hc(i,s,a,l,c,p,_){const E=s.consts,A=Us(s,i,2,c,vi(E,p));return Gi(s,a,A,vi(E,_)),null!==A.attrs&&pg(A,A.attrs,!1),null!==A.mergedAttrs&&pg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];ai(A,!0);const S=A.mergedAttrs;null!==S&&xs(E,b,S);const k=A.classes;null!==k&&Iy(E,b,k);const V=A.styles;return null!==V&&by(E,b,V),64!=(64&A.flags)&&Ne(p,c,b,A),0===function ya(){return pt.lFrame.elementDepthCount}()&&bn(b,c),function hl(){pt.lFrame.elementDepthCount++}(),Ri(A)&&(ky(p,c,A),function Ur(i,s,a){if(au(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,A,c)),null!==l&&Fy(c,A),Rg}function Wa(){let i=hn();pl()?function gl(){pt.lFrame.isParent=!1}():(i=i.parent,ai(i,!1));const s=i;!function cu(){pt.lFrame.elementDepthCount--}();const a=Nt();return a.firstCreatePass&&(va(a,i),au(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Ap(i){return 0!=(16&i.flags)}(s)&&Mg(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function pe(i){return 0!=(32&i.flags)}(s)&&Mg(a,s,De(),s.stylesWithoutHost,!1),Wa}function Og(i,s,a,l){return Rg(i,s,a,l),Wa(),Og}function kw(){return De()}function g_(i){return!!i&&"function"==typeof i.then}function Fw(i){return!!i&&"function"==typeof i.subscribe}const Pf=Fw;function Ng(i,s,a,l){const c=De(),p=Nt(),_=hn();return function m_(i,s,a,l,c,p,_,E){const b=Ri(l),S=i.firstCreatePass&&qy(i),k=s[8],V=ju(s);let Y=!0;if(3&l.type||E){const $e=ir(l,s),tt=E?E($e):$e,Ae=V.length,ht=E?Bt=>E(Qt(Bt[l.index])):l.index;if(sn(a)){let Bt=null;if(!E&&b&&(Bt=function tC(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const E=s[7],b=c[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=p,Bt.__ngLastListenerFn__=p,Y=!1;else{p=gc(l,s,k,p,!1);const ln=a.listen(tt,c,p);V.push(p,ln),S&&S.push(c,ht,Ae,Ae+1)}}else p=gc(l,s,k,p,!0),tt.addEventListener(c,p,_),V.push(p),S&&S.push(c,ht,Ae,_)}else p=gc(l,s,k,p,!1);const _e=l.outputs;let ke;if(Y&&null!==_e&&(ke=_e[c])){const $e=ke.length;if($e)for(let tt=0;tt<$e;tt+=2){const Hs=s[ke[tt]][ke[tt+1]].subscribe(p),Oc=V.length;V.push(p,Hs),S&&S.push(c,l.index,Oc,-(Oc+1))}}}(p,c,c[11],_,i,s,!!a,l),Ng}function zu(i,s,a,l){try{return!1!==a(l)}catch(c){return Wy(i,c),!1}}function gc(i,s,a,l,c){return function p(_){if(_===Function)return l;const E=2&i.flags?sr(i.index,s):s;0==(32&s[2])&&Gy(E);let b=zu(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)b=zu(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return c&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function y_(i=1){return function Hh(i){return(pt.lFrame.contextLView=function vl(i,s){for(;i>0;)s=s[15],i--;return s}(i,pt.lFrame.contextLView))[8]}(i)}function Nf(i,s,a){return kf(i,"",s,"",a),Nf}function kf(i,s,a,l,c){const p=De(),_=sc(p,s,a,l);return _!==Dt&&nr(Nt(),Fn(),p,i,_,p[11],c,!1),kf}function E_(i,s,a,l,c){const p=i[a+1],_=null===s;let E=l?go(p):an(p),b=!1;for(;0!==E&&(!1===b||_);){const S=i[E+1];sC(i[E],s)&&(b=!0,i[E+1]=l?tg(S):Zo(S)),E=l?go(S):an(S)}b&&(i[a+1]=l?Zo(p):tg(p))}function sC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ns(i,s)>=0}function pr(i,s){return function vo(i,s,a,l){const c=De(),p=Nt(),_=wi(2);p.firstUpdatePass&&function T_(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Xn()],_=function Bg(i,s){return s>=i.expandoStartIndex}(i,a);(function Zw(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function qw(i,s,a,l){const c=function mu(i){const s=pt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=yc(a=mh(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=mh(c,i,s,a,l),null===p){let b=function A_(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==an(l))return i[go(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=mh(null,i,s,b[1],l),b=yc(b,s.attrs,l),function jg(i,s,a,l){i[go(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else p=function Lf(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=yc(l,i[p].hostAttrs,a);return yc(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function w_(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,E=go(_),b=an(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||Ns(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==b){const V=go(i[E+1]);i[l+1]=La(V,E),0!==V&&(i[V+1]=Va(i[V+1],l)),i[E+1]=function AI(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=La(E,0),0!==E&&(i[E+1]=Va(i[E+1],l)),E=l;else i[l+1]=La(b,0),0===E?E=l:i[b+1]=Va(i[b+1],l),b=l;A&&(i[l+1]=Zo(i[l+1])),E_(i,S,l,!0),E_(i,S,l,!1),function iC(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Ns(p,s)>=0&&(a[l+1]=tg(a[l+1]))}(s,S,i,l,p),_=La(E,b),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==Dt&&pi(c,_,s)&&function Ww(i,s,a,l,c,p,_,E){if(!(3&s.type))return;const b=i.data,A=b[E+1];Hg(function eg(i){return 1==(1&i)}(A)?x_(b,s,a,c,an(A),_):void 0)||(Hg(p)||function cr(i){return 2==(2&i)}(A)&&(p=x_(b,null,a,c,E,_)),function Vr(i,s,a,l,c){const p=sn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:R.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=R.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,Ts(Xn(),a),c,p))}(p,p.data[Xn()],c,c[11],i,c[_+1]=function lC(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=se(hi(i)))),i}(s,a),l,_)}(i,s,null,!0),pr}function mh(i,s,a,l,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],l=yc(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function yc(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),er(i,_,!!a||s[++p]))}return void 0===i?null:i}function x_(i,s,a,l,c,p){const _=null===s;let E;for(;c>0;){const b=i[c],A=Array.isArray(b),S=A?b[1]:b,k=null===S;let V=a[c+1];V===Dt&&(V=k?L:void 0);let Y=k?Ia(V,l):S===l?V:void 0;if(A&&!Hg(Y)&&(Y=Ia(b,l)),Hg(Y)&&(E=Y,_))return E;const _e=i[c+1];c=_?go(_e):an(_e)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(E=Ia(b,l))}return E}function Hg(i){return void 0!==i}function M_(i,s=""){const a=De(),l=Nt(),c=i+20,p=l.firstCreatePass?Us(l,c,1,s,null):l.data[c],_=a[c]=function zl(i,s){return sn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ne(l,a,_,p),ai(p,!1)}function yh(i){return Wu("",i,""),yh}function Wu(i,s,a){const l=De(),c=sc(l,i,s,a);return c!==Dt&&_o(l,Xn(),c),Wu}function Vf(i,s,a,l,c){const p=De(),_=sh(p,i,s,a,l,c);return _!==Dt&&_o(p,Xn(),_),Vf}const Za=void 0;var H_=["en",[["a","p"],["AM","PM"],Za],[["AM","PM"],Za,Za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Za,"{1} 'at' {0}",Za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let wh={};function Kg(i){const s=function G_(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Qg(s);if(a)return a;const l=s.split("-")[0];if(a=Qg(l),a)return a;if("en"===l)return H_;throw new Error(`Missing locale data for the locale "${i}".`)}function Yg(i){return Kg(i)[ot.PluralCase]}function Qg(i){return i in wh||(wh[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),wh[i]}var ot=(()=>((ot=ot||{})[ot.LocaleId=0]="LocaleId",ot[ot.DayPeriodsFormat=1]="DayPeriodsFormat",ot[ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",ot[ot.DaysFormat=3]="DaysFormat",ot[ot.DaysStandalone=4]="DaysStandalone",ot[ot.MonthsFormat=5]="MonthsFormat",ot[ot.MonthsStandalone=6]="MonthsStandalone",ot[ot.Eras=7]="Eras",ot[ot.FirstDayOfWeek=8]="FirstDayOfWeek",ot[ot.WeekendRange=9]="WeekendRange",ot[ot.DateFormat=10]="DateFormat",ot[ot.TimeFormat=11]="TimeFormat",ot[ot.DateTimeFormat=12]="DateTimeFormat",ot[ot.NumberSymbols=13]="NumberSymbols",ot[ot.NumberFormats=14]="NumberFormats",ot[ot.CurrencyCode=15]="CurrencyCode",ot[ot.CurrencySymbol=16]="CurrencySymbol",ot[ot.CurrencyName=17]="CurrencyName",ot[ot.Currencies=18]="Currencies",ot[ot.Directionality=19]="Directionality",ot[ot.PluralCase=20]="PluralCase",ot[ot.ExtraData=21]="ExtraData",ot))();const jf="en-US";let em=jf;function qf(i,s,a,l,c){if(i=ee(i),Array.isArray(i))for(let p=0;p<i.length;p++)qf(i[p],s,a,l,c);else{const p=Nt(),_=De();let E=th(i)?i:ee(i.provide),b=eh(i);const A=hn(),S=1048575&A.providerIndexes,k=A.directiveStart,V=A.providerIndexes>>20;if(th(i)||!i.multi){const Y=new Fo(b,c,hh),_e=mm(E,s,c?S:S+V,k);-1===_e?(An(li(A,_),p,E),pm(p,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[_e]=Y,_[_e]=Y)}else{const Y=mm(E,s,S+V,k),_e=mm(E,s,S,S+V),ke=Y>=0&&a[Y],$e=_e>=0&&a[_e];if(c&&!$e||!c&&!ke){An(li(A,_),p,E);const tt=function xC(i,s,a,l,c){const p=new Fo(i,a,hh);return p.multi=[],p.index=s,p.componentProviders=0,gm(p,c,l&&!a),p}(c?Sh:gv,a.length,c,l,b);!c&&$e&&(a[_e].providerFactory=tt),pm(p,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(tt),_.push(tt)}else pm(p,i,Y>-1?Y:_e,gm(a[c?_e:Y],b,!c&&l));!c&&l&&$e&&a[_e].componentProviders++}}}function pm(i,s,a,l){const c=th(s),p=function fw(i){return!!i.useClass}(s);if(c||p){const b=(p?ee(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,b]):A[S+1].push(l,b)}else A.push(a,b)}}}function gm(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function mm(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function gv(i,s,a,l){return zf(this.multi,[])}function Sh(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Ke(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),zf(c,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],zf(c,p);return p}function zf(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function SE(i,s=[]){return a=>{a.providersResolver=(l,c)=>function fm(i,s,a){const l=Nt();if(l.firstCreatePass){const c=Oi(i);qf(a,l.data,l.blueprint,c,!0),qf(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class mv{}class OC{resolveComponentFactory(s){throw function RC(i){const s=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let ym=(()=>{class i{}return i.NULL=new OC,i})();function PC(){return wc(hn(),De())}function wc(i,s){return new Ec(ir(i,s))}let Ec=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=PC,i})();function xE(i){return i instanceof Ec?i.nativeElement:i}class _v{}let _m=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ME(){const i=De(),a=sr(hn().index,i);return function Wt(i){return i[11]}(Wr(a)?a:i)}(),i})(),RE=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class xh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const OE=new xh("13.3.11"),gn={};function xr(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Qt(p)),Mi(p))for(let E=10;E<p.length;E++){const b=p[E],A=b[1].firstChild;null!==A&&xr(b[1],b,A,l)}const _=a.type;if(8&_)xr(i,s,a.child,l);else if(32&_){const E=ce(a,s);let b;for(;b=E();)l.push(b)}else if(16&_){const E=Vd(s,a);if(Array.isArray(E))l.push(...E);else{const b=it(s[16]);xr(b[1],b,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class qi{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return xr(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Mi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Yp(s,l),Ho(a,l))}this._attachedToViewContainer=!1}wy(this._lView[1],this._lView)}onDestroy(s){ja(this._lView[1],this._lView,null,s)}markForCheck(){Gy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Qd(i,s,a){const l=s[10];l.begin&&l.begin();try{Ba(i,s,i.template,a)}catch(c){throw Wy(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wp(i,s){ff(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class PE extends qi{constructor(s){super(s),this._view=s}detectChanges(){aw(this._view)}checkNoChanges(){}get context(){return null}}class NE extends ym{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=qn(s);return new vv(a,this.ngModule)}}function Wf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class vv extends mv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Yl(i){return i.map(B0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Wf(this.componentDef.inputs)}get outputs(){return Wf(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function FE(i,s){return{get:(a,l,c)=>{const p=i.get(a,gn,c);return p!==gn||l===gn?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(_v,pa),E=p.get(RE,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function Z0(i,s,a){if(sn(i))return i.selectRootElement(s,a===$t.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Wl(_.createRenderer(null,this.componentDef),A,function kE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function rc(i,s){return{components:[],scheduler:i||Pd,clean:Ef,playerHandler:s||null,flags:0}}(),Y=_f(0,null,null,1,0,null,null,null,null,null),_e=Hd(null,Y,V,k,null,null,_,b,E,p);let ke,$e;Xs(_e);try{const tt=function ww(i,s,a,l,c,p){const _=a[1];a[20]=i;const b=Us(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(pg(b,A,!0),null!==i&&(xs(c,i,A),null!==b.classes&&Iy(c,i,b.classes),null!==b.styles&&by(c,i,b.styles)));const S=l.createRenderer(i,s),k=Hd(a,z0(s),null,s.onPush?64:16,a[20],b,l,S,p||null,null);return _.firstCreatePass&&(An(li(b,a),_,s.type),Uy(_,b),By(b,a.length,1)),hg(a,k),a[20]=k}(S,this.componentDef,_e,_,b);if(S)if(l)xs(b,S,["ng-version",OE.full]);else{const{attrs:Ae,classes:ht}=function j0(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!Hn(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ae&&xs(b,S,Ae),ht&&ht.length>0&&Iy(b,S,ht.join(" "))}if($e=mn(Y,20),void 0!==a){const Ae=$e.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const Bt=a[ht];Ae.push(null!=Bt?Array.from(Bt):null)}}ke=function Ew(i,s,a,l,c){const p=a[1],_=function zd(i,s,a){const l=hn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),jy(i,l,s,Qo(i,s,1,null),a));const c=Ke(s,i,l.directiveStart,l);bn(c,s);const p=ir(l,s);return p&&bn(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(b=>b(_,s)),s.contentQueries){const b=hn();s.contentQueries(1,_,b.directiveStart)}const E=hn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(eo(E.index),Ly(a[1],E,0,E.directiveStart,E.directiveEnd,s),lg(s,_)),_}(tt,this.componentDef,_e,V,[nh]),Bu(Y,_e,null)}finally{Zr()}return new kC(this.componentType,ke,wc($e,_e),_e,$e)}}class kC extends class MC{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new PE(c),this.componentType=s}get injector(){return new Bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Zf{}class FC{}const In=new Map;class UE extends Zf{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new NE(this);const l=zn(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=cw(s,a,[{provide:Zf,useValue:this},{provide:ym,useValue:this.componentFactoryResolver}],se(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Xo.THROW_IF_NOT_FOUND,l=ft.Default){return s===Xo||s===Zf||s===gg?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Ev extends FC{constructor(s){super(),this.moduleType=s,null!==zn(s)&&function VC(i){const s=new Set;!function a(l){const c=zn(l,!0),p=c.id;null!==p&&(function LE(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${se(s)} vs ${se(s.name)}`)}(p,In.get(p),l),In.set(p,l));const _=y(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new UE(this.moduleType,s)}}function Em(i){return s=>{setTimeout(i,void 0,s)}}const gi=class Dv extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let E=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),b=null===(p=k.error)||void 0===p?void 0:p.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(b=Em(b),E&&(E=Em(E)),A&&(A=Em(A)));const S=super.subscribe({next:E,error:b,complete:A});return s instanceof J.w0&&s.add(S),S}};function HE(){return this._results[rh()]()}class bm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=rh(),l=bm.prototype;l[a]||(l[a]=HE)}get changes(){return this._changes||(this._changes=new gi)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=ar(s);(this._changesDetected=!function od(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Cc=(()=>{class i{}return i.__NG_ELEMENT_ID__=Im,i})();const Tv=Cc,zC=class extends Tv{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Hd(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Bu(a,l,s),new qi(l)}};function Im(){return Dc(hn(),De())}function Dc(i,s){return 4&i.type?new zC(s,i,wc(i,s)):null}let Jf=(()=>{class i{}return i.__NG_ELEMENT_ID__=Xf,i})();function Xf(){return Mh(hn(),De())}const WC=Jf,ep=class extends WC{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return wc(this._hostTNode,this._hostLView)}get injector(){return new Bi(this._hostTNode,this._hostLView)}get parentInjector(){const s=fn(this._hostTNode,this._hostLView);if(on(s)){const a=Ui(s,this._hostLView),l=Ei(s);return new Bi(a[1].data[l+8],a)}return new Bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Yu(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function ba(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,c=k.projectableNodes,p=k.ngModuleRef}const b=_?s:new vv(qn(s)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const V=(_?A:this.parentInjector).get(Zf,null);V&&(p=V)}const S=b.create(A,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function ma(i){return Mi(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],V=new ep(k,k[6],k[3]);V.detach(V.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function Zp(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],$o(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function Kp(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,p);const E=hf(p,_),b=l[11],A=Xp(b,_[7]);return null!==A&&function cf(i,s,a,l,c,p){l[0]=c,l[6]=s,ff(i,l,a,1,c,p)}(c,_[6],b,l,A,E),s.attachToViewContainerRef(),$o(Eo(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Yu(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Yp(this._lContainer,a);l&&(Ho(Eo(this._lContainer),a),wy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Yp(this._lContainer,a);return l&&null!=Ho(Eo(this._lContainer),a)?new qi(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Yu(i){return i[8]}function Eo(i){return i[8]||(i[8]=[])}function Mh(i,s){let a;const l=s[i.index];if(Mi(l))a=l;else{let c;if(8&i.type)c=Qt(l);else{const p=s[11];c=p.createComment("");const _=ir(i,s);Zl(p,Xp(p,_),c,function k0(i,s){return sn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=Hy(l,s,c,i),hg(s,a)}return new ep(a,i,s)}class Cm{constructor(s){this.queryList=s,this.matches=null}clone(){return new Cm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tc{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new Tc(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ov(s,a).matches&&this.queries[a].setDirty()}}class Qa{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Av{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Av(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Sv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Sv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,YC(a,p)),this.matchTNodeWithReadOption(s,a,ci(a,s,p,!1,!1))}else l===Cc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ci(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Ec||c===Jf||c===Cc&&4&a.type)this.addMatch(a.index,-2);else{const p=ci(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function YC(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function GE(i,s,a,l){return-1===a?function QC(i,s){return 11&i.type?wc(i,s):4&i.type?Dc(i,s):null}(s,i):-2===a?function JC(i,s,a){return a===Ec?wc(s,i):a===Cc?Dc(s,i):a===Jf?Mh(s,i):void 0}(i,s,l):Ke(i,i[1],a,s)}function qE(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const A=_[b];E.push(A<0?null:GE(s,p[A],_[b+1],a.metadata.read))}c.matches=E}return c.matches}function Dm(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=qE(i,s,c,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)l.push(_[E/2]);else{const A=p[E+1],S=s[-b];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&Dm(V[1],V,A,l)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const Y=k[V];Dm(Y[1],Y,A,l)}}}}}return l}function zE(i){const s=De(),a=Nt(),l=yu();Qc(l+1);const c=Ov(a,l);if(i.dirty&&Qs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?Dm(a,s,l,[]):qE(a,s,c,l);i.reset(p,xE),i.notifyOnChanges()}return!0}return!1}function WE(i,s,a){const l=Nt();l.firstCreatePass&&(Rv(l,new Qa(i,s,a),-1),2==(2&s)&&(l.staticViewQueries=!0)),Mv(l,De(),s)}function xv(i,s,a,l){const c=Nt();if(c.firstCreatePass){const p=hn();Rv(c,new Qa(s,a,l),p.index),function KE(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}Mv(c,De(),a)}function ZE(){return function XC(i,s){return i[19].queries[s].queryList}(De(),yu())}function Mv(i,s,a){const l=new bm(4==(4&a));ja(i,s,l,l.destroy),null===s[19]&&(s[19]=new Tc),s[19].queries.push(new Cm(l))}function Rv(i,s,a){null===i.queries&&(i.queries=new Av),i.queries.track(new Sv(s,a))}function Ov(i,s){return i.queries.getByIndex(s)}function Xa(...i){}const Nm=new En("Application Initializer");let eu=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Xa,this.reject=Xa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(g_(p))a.push(p);else if(Pf(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(et(Nm,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ub=new En("AppId",{providedIn:"root",factory:function lb(){return`${jv()}${jv()}${jv()}`}});function jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ip=new En("Platform Initializer"),km=new En("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),jr=new En("appBootstrapListener");let cD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Fm=new En("LocaleId",{providedIn:"root",factory:()=>Vt(Fm,ft.Optional|ft.SkipSelf)||function dD(){return"undefined"!=typeof $localize&&$localize.locale||jf}()}),hD=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class db{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let pD=(()=>{class i{compileModuleSync(a){return new Ev(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(zn(a).declarations).reduce((_,E)=>{const b=qn(E);return b&&_.push(new vv(b)),_},[]);return new db(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const fb=(()=>Promise.resolve(0))();function sp(i){"undefined"==typeof Zone?fb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Zi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gi(!1),this.onMicrotaskEmpty=new gi(!1),this.onStable=new gi(!1),this.onError=new gi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function pb(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Hv(i){const s=()=>{!function mD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,mb(i),i.isCheckStableRunning=!0,gb(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),mb(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,E)=>{try{return yD(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),yb(i)}},onInvoke:(a,l,c,p,_,E,b)=>{try{return yD(i),a.invoke(c,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),yb(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,mb(i),gb(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,gD,Xa,Xa);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const gD={};function gb(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function mb(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function yD(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function yb(i){i._nesting--,gb(i)}class _D{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gi,this.onMicrotaskEmpty=new gi,this.onStable=new gi,this.onError=new gi}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let vD=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zi.assertNotInAngularZone(),sp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(et(Zi))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),SA=(()=>{class i{constructor(){this._applications=new Map,_b.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return _b.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class xA{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function MA(i){_b=i}let _b=new xA,Ph=null;const wD=new En("AllowMultipleToken"),ED=new En("PlatformOnDestroy");class $r{constructor(s,a){this.name=s,this.token=a}}function op(i,s,a=[]){const l=`Platform: ${s}`,c=new En(l);return(p=[])=>{let _=qv();if(!_||_.injector.get(wD,!1)){const E=[...a,...p,{provide:c,useValue:!0}];i?i(E):function bo(i){if(Ph&&!Ph.get(wD,!1))throw new Re(400,"");Ph=i;const s=i.get(zv),a=i.get(ip,null);a&&a.forEach(l=>l())}(function ID(i=[],s){return Xo.create({name:s,providers:[{provide:Zy,useValue:"platform"},{provide:ED,useValue:()=>Ph=null},...i]})}(E,l))}return function Gv(i){const s=qv();if(!s)throw new Re(401,"");return s}()}}function qv(){var i;return null!==(i=null==Ph?void 0:Ph.get(zv))&&void 0!==i?i:null}let zv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function CD(i,s){let a;return a="noop"===i?new _D:("zone.js"===i?void 0:i)||new Zi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Zi,useValue:E}];return E.run(()=>{const A=Xo.create({providers:b,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(Nu,null);if(!k)throw new Re(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:Y=>{k.handleError(Y)}});S.onDestroy(()=>{ei(this._modules,S),V.unsubscribe()})}),function DD(i,s,a){try{const l=a();return g_(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const V=S.injector.get(eu);return V.runInitializers(),V.donePromise.then(()=>(function q_(i){kt(i,"Expected localeId to be defined"),"string"==typeof i&&(em=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Fm,jf)||jf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=wb({},l);return function vb(i,s,a){const l=new Ev(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(Wv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(ED,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(et(Xo))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function wb(i,s){return Array.isArray(s)?s.reduce(wb,i):Object.assign(Object.assign({},i),s)}let Wv=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new N.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new N.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Zi.assertNotInAngularZone(),sp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Zi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(_,E.pipe((0,te.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof mv?a:this._injector.get(ym).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function bD(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Zf),E=c.create(Xo.NULL,[],l||c.selector,p),b=E.location.nativeElement,A=E.injector.get(vD,null),S=A&&E.injector.get(SA);return A&&S&&S.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),ei(this.components,E),S&&S.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;ei(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(jr,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(et(Zi),et(Xo),et(Nu),et(eu))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ei(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let bb=!0,Lm=!1;function Vm(){return Lm=!0,bb}function Zv(){if(Lm)throw new Error("Cannot enable prod mode after platform setup.");bb=!1}let TD=(()=>{class i{}return i.__NG_ELEMENT_ID__=AD,i})();function AD(i){return function SD(i,s,a){if(Vc(i)&&!a){const l=sr(i.index,s);return new qi(l,l)}return 47&i.type?new qi(s[16],s):null}(hn(),De(),16==(16&i))}class Sb{constructor(){}supports(s){return Df(s)}create(s){return new LD(s)}}const FD=(i,s)=>s;class LD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||FD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Zm(l,c,p)?a:l,E=Zm(_,c,p),b=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=E-c,S=b-c;if(A!=S){for(let V=0;V<A;V++){const Y=V<p.length?p[V]:p[V]=0,_e=Y+V;S<=_e&&_e<A&&(p[V]=Y+1)}p[_.previousIndex]=S-A}}E!==b&&s(_,E,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Df(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else c=0,function qI(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[rh()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new zm(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Wm),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class zm{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Wm{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Yv,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zm(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Qv{constructor(){}supports(s){return s instanceof Map||i_(s)}create(){return new VD}}class VD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||i_(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new xb(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class xb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lp(){return new Jv([new Sb])}let Jv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||lp()),deps:[[i,new Vs,new Xt]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:lp}),i})();function Mb(){return new Xv([new Qv])}let Xv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Mb()),deps:[[i,new Vs,new Xt]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:Mb}),i})();const jD=op(null,"core",[]);let $D=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(et(Wv))},i.\u0275mod=Or({type:i}),i.\u0275inj=qt({}),i})()},3942:(Je,we,P)=>{P.d(we,{Z:()=>Re});var h=P(2090),J=P(4859),N=P(9681),ae=P(1877);class te{constructor(fe,be){this._delegate=fe,this.firebase=be,(0,N._addComponent)(fe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(fe,be=N._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Ge=Ze.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:be})}_removeServiceInstance(fe,be=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(be)}_addComponent(fe){(0,N._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,N._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function he(){const Le=function se(Le){const fe={},be={__esModule:!0,initializeApp:function Ce(Ue,j={}){const ye=N.initializeApp(Ue,j);if((0,h.r3)(fe,ye.name))return fe[ye.name];const W=new Le(ye,be);return fe[ye.name]=W,W},app:Ze,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Ue){const j=Ue.name,ye=j.replace("-compat","");if(N._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(ne=Ze())=>{if("function"!=typeof ne[ye])throw le.create("invalid-app-argument",{appName:j});return ne[ye]()};void 0!==Ue.serviceProps&&(0,h.ZB)(W,Ue.serviceProps),be[ye]=W,Le.prototype[ye]=function(...ne){return this._getService.bind(this,j).apply(this,Ue.multipleInstances?ne:[])}}return"PUBLIC"===Ue.type?be[ye]:null},removeApp:function Ge(Ue){delete fe[Ue]},useAsService:function Be(Ue,j){return"serverAuth"===j?null:j},modularAPIs:N}};function Ze(Ue){if(!(0,h.r3)(fe,Ue=Ue||N._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Ue});return fe[Ue]}return be.default=be,Object.defineProperty(be,"apps",{get:function ve(){return Object.keys(fe).map(Ue=>fe[Ue])}}),Ze.App=Le,be}(te);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function fe(be){(0,h.ZB)(Le,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Le}(),B=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=$;!function Te(Le){(0,N.registerVersion)("@firebase/app-compat","0.1.26",Le)}()},9681:(Je,we,P)=>{P.r(we),P.d(we,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Ai,_DEFAULT_ENTRY_NAME:()=>kt,_addComponent:()=>nn,_addOrOverwriteComponent:()=>Yt,_apps:()=>Jt,_clearComponents:()=>Ji,_components:()=>Cn,_getProvider:()=>qt,_registerComponent:()=>Mr,_removeServiceInstance:()=>Pt,deleteApp:()=>ft,getApp:()=>ni,getApps:()=>mi,initializeApp:()=>vs,onLog:()=>Dn,registerVersion:()=>wn,setLogLevel:()=>Gs});var h=P(5861),J=P(4859),N=P(1877),ae=P(2090),te=P(8766);class ge{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Se=>{if(function le(H){const Q=H.getComponent();return"VERSION"===(null==Q?void 0:Q.type)}(Se)){const Qe=Se.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Se=>Se).join(" ")}}const se="@firebase/app",$=new N.Yd("@firebase/app"),kt="[DEFAULT]",ze={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,Cn=new Map;function nn(H,Q){try{H.container.addComponent(Q)}catch(Se){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${H.name}`,Se)}}function Yt(H,Q){H.container.addOrOverwriteComponent(Q)}function Mr(H){const Q=H.name;if(Cn.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;Cn.set(Q,H);for(const Se of Jt.values())nn(Se,H);return!0}function qt(H,Q){const Se=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Se&&Se.triggerHeartbeat(),H.container.getProvider(Q)}function Pt(H,Q,Se=kt){qt(H,Q).clearInstance(Se)}function Ji(){Cn.clear()}const yr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Rr{constructor(Q,Se,Qe){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Se),this._name=Se.name,this._automaticDataCollectionEnabled=Se.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const Ai="9.8.2";function vs(H,Q={}){"object"!=typeof Q&&(Q={name:Q});const Se=Object.assign({name:kt,automaticDataCollectionEnabled:!1},Q),Qe=Se.name;if("string"!=typeof Qe||!Qe)throw yr.create("bad-app-name",{appName:String(Qe)});const ct=Jt.get(Qe);if(ct){if((0,ae.vZ)(H,ct.options)&&(0,ae.vZ)(Se,ct.config))return ct;throw yr.create("duplicate-app",{appName:Qe})}const bt=new J.H0(Qe);for(const wt of Cn.values())bt.addComponent(wt);const cn=new Rr(H,Se,bt);return Jt.set(Qe,cn),cn}function ni(H=kt){const Q=Jt.get(H);if(!Q)throw yr.create("no-app",{appName:H});return Q}function mi(){return Array.from(Jt.values())}function ft(H){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(H){const Q=H.name;Jt.has(Q)&&(Jt.delete(Q),yield Promise.all(H.container.getProviders().map(Se=>Se.delete())),H.isDeleted=!0)})).apply(this,arguments)}function wn(H,Q,Se){var Qe;let ct=null!==(Qe=ze[H])&&void 0!==Qe?Qe:H;Se&&(ct+=`-${Se}`);const bt=ct.match(/\s|\//),cn=Q.match(/\s|\//);if(bt||cn){const wt=[`Unable to register library "${ct}" with version "${Q}":`];return bt&&wt.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),bt&&cn&&wt.push("and"),cn&&wt.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(wt.join(" "))}Mr(new J.wA(`${ct}-version`,()=>({library:ct,version:Q}),"VERSION"))}function Dn(H,Q){if(null!==H&&"function"!=typeof H)throw yr.create("invalid-log-argument");(0,N.Am)(H,Q)}function Gs(H){(0,N.Ub)(H)}const Pn="firebase-heartbeat-store";let yi=null;function Do(){return yi||(yi=(0,te.X3)("firebase-heartbeat-database",1,{upgrade:(H,Q)=>{0===Q&&H.createObjectStore(Pn)}}).catch(H=>{throw yr.create("storage-open",{originalErrorMessage:H.message})})),yi}function rt(){return(rt=(0,h.Z)(function*(H){try{return(yield Do()).transaction(Pn).objectStore(Pn).get(si(H))}catch(Q){throw yr.create("storage-get",{originalErrorMessage:Q.message})}})).apply(this,arguments)}function yt(H,Q){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(H,Q){try{const Qe=(yield Do()).transaction(Pn,"readwrite");return yield Qe.objectStore(Pn).put(Q,si(H)),Qe.done}catch(Se){throw yr.create("storage-set",{originalErrorMessage:Se.message})}})).apply(this,arguments)}function si(H){return`${H.name}!${H.options.appId}`}class vr{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Se=this.container.getProvider("app").getImmediate();this._storage=new G(Se),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var Q=this;return(0,h.Z)(function*(){const Qe=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ct=wr();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==ct&&!Q._heartbeatsCache.heartbeats.some(bt=>bt.date===ct))return Q._heartbeatsCache.heartbeats.push({date:ct,agent:Qe}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(bt=>{const cn=new Date(bt.date).valueOf();return Date.now()-cn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,h.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Se=wr(),{heartbeatsToSend:Qe,unsentEntries:ct}=function L(H,Q=1024){const Se=[];let Qe=H.slice();for(const ct of H){const bt=Se.find(cn=>cn.agent===ct.agent);if(bt){if(bt.dates.push(ct.date),q(Se)>Q){bt.dates.pop();break}}else if(Se.push({agent:ct.agent,dates:[ct.date]}),q(Se)>Q){Se.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Se,unsentEntries:Qe}}(Q._heartbeatsCache.heartbeats),bt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Qe}));return Q._heartbeatsCache.lastSentHeartbeatDate=Se,ct.length>0?(Q._heartbeatsCache.heartbeats=ct,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),bt})()}}function wr(){return(new Date).toISOString().substring(0,10)}class G{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,h.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function $t(H){return rt.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Se=this;return(0,h.Z)(function*(){var Qe;if(yield Se._canUseIndexedDBPromise){const bt=yield Se.read();return yt(Se.app,{lastSentHeartbeatDate:null!==(Qe=Q.lastSentHeartbeatDate)&&void 0!==Qe?Qe:bt.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Se=this;return(0,h.Z)(function*(){var Qe;if(yield Se._canUseIndexedDBPromise){const bt=yield Se.read();return yt(Se.app,{lastSentHeartbeatDate:null!==(Qe=Q.lastSentHeartbeatDate)&&void 0!==Qe?Qe:bt.lastSentHeartbeatDate,heartbeats:[...bt.heartbeats,...Q.heartbeats]})}})()}}function q(H){return(0,ae.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Ie(H){Mr(new J.wA("platform-logger",Q=>new ge(Q),"PRIVATE")),Mr(new J.wA("heartbeat",Q=>new vr(Q),"PRIVATE")),wn(se,"0.7.25",H),wn(se,"0.7.25","esm2017"),wn("fire-js","")}("")},4859:(Je,we,P)=>{P.d(we,{H0:()=>se,wA:()=>N});var h=P(5861),J=P(2090);class N{constructor($,B,ee){this.name=$,this.instanceFactory=B,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class te{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const ee=new J.BH;if(this.instancesDeferred.set(B,ee),this.isInitialized(B)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:B});He&&ee.resolve(He)}catch(He){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const ee=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),He=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(he){return"EAGER"===he.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(B){}for(const[B,ee]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(B);try{const Te=this.getOrInitializeService({instanceIdentifier:He});ee.resolve(Te)}catch(Te){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...B.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,ee=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ee,options:B});for(const[Te,Re]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Te)&&Re.resolve(He);return He}onInit($,B){var ee;const He=this.normalizeInstanceIdentifier(B),Te=null!==(ee=this.onInitCallbacks.get(He))&&void 0!==ee?ee:new Set;Te.add($),this.onInitCallbacks.set(He,Te);const Re=this.instances.get(He);return Re&&$(Re,He),()=>{Te.delete($)}}invokeOnInitCallbacks($,B){const ee=this.onInitCallbacks.get(B);if(ee)for(const He of ee)try{He($,B)}catch(Te){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let ee=this.instances.get($);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(he=$,he===ae?void 0:he),options:B}),this.instances.set($,ee),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(ee,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ee)}catch(He){}var he;return ee||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new te($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,P)=>{P.d(we,{Am:()=>he,Ub:()=>se,Yd:()=>le,in:()=>J});const h=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const N={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ae=J.INFO,te={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ge=($,B,...ee)=>{if(B<$.logLevel)return;const He=(new Date).toISOString(),Te=te[B];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Te](`[${He}]  ${$.name}:`,...ee)};class le{constructor(B){this.name=B,this._logLevel=ae,this._logHandler=ge,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?N[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function se($){h.forEach(B=>{B.setLogLevel($)})}function he($,B){for(const ee of h){let He=null;B&&B.level&&(He=N[B.level]),ee.userLogHandler=null===$?null:(Te,Re,...Le)=>{const fe=Le.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(Ge){return null}}).filter(be=>be).join(" ");Re>=(null!=He?He:Te.logLevel)&&$({level:J[Re].toLowerCase(),message:fe,args:Le,type:Te.name})}}}},8766:(Je,we,P)=>{P.d(we,{Lj:()=>Ce,X3:()=>Ze});var h=P(5861);let N,ae;const le=new WeakMap,se=new WeakMap,he=new WeakMap,$=new WeakMap,B=new WeakMap;let Te={get(j,ye,W){if(j instanceof IDBTransaction){if("done"===ye)return se.get(j);if("objectStoreNames"===ye)return j.objectStoreNames||he.get(j);if("store"===ye)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return be(j[ye])},set:(j,ye,W)=>(j[ye]=W,!0),has:(j,ye)=>j instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in j};function fe(j){return"function"==typeof j?function Le(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...ye){return j.apply(Ge(this),ye),be(le.get(this))}:function(...ye){return be(j.apply(Ge(this),ye))}:function(ye,...W){const ne=j.call(Ge(this),ye,...W);return he.set(ne,ye.sort?ye.sort():[ye]),be(ne)}}(j):(j instanceof IDBTransaction&&function He(j){if(se.has(j))return;const ye=new Promise((W,ne)=>{const X=()=>{j.removeEventListener("complete",me),j.removeEventListener("error",oe),j.removeEventListener("abort",oe)},me=()=>{W(),X()},oe=()=>{ne(j.error||new DOMException("AbortError","AbortError")),X()};j.addEventListener("complete",me),j.addEventListener("error",oe),j.addEventListener("abort",oe)});se.set(j,ye)}(j),((j,ye)=>ye.some(W=>j instanceof W))(j,function te(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Te):j)}function be(j){if(j instanceof IDBRequest)return function ee(j){const ye=new Promise((W,ne)=>{const X=()=>{j.removeEventListener("success",me),j.removeEventListener("error",oe)},me=()=>{W(be(j.result)),X()},oe=()=>{ne(j.error),X()};j.addEventListener("success",me),j.addEventListener("error",oe)});return ye.then(W=>{W instanceof IDBCursor&&le.set(W,j)}).catch(()=>{}),B.set(ye,j),ye}(j);if($.has(j))return $.get(j);const ye=fe(j);return ye!==j&&($.set(j,ye),B.set(ye,j)),ye}const Ge=j=>B.get(j);function Ze(j,ye,{blocked:W,upgrade:ne,blocking:X,terminated:me}={}){const oe=indexedDB.open(j,ye),Pe=be(oe);return ne&&oe.addEventListener("upgradeneeded",ut=>{ne(be(oe.result),ut.oldVersion,ut.newVersion,be(oe.transaction))}),W&&oe.addEventListener("blocked",()=>W()),Pe.then(ut=>{me&&ut.addEventListener("close",()=>me()),X&&ut.addEventListener("versionchange",()=>X())}).catch(()=>{}),Pe}function Ce(j,{blocked:ye}={}){const W=indexedDB.deleteDatabase(j);return ye&&W.addEventListener("blocked",()=>ye()),be(W).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Be=new Map;function Ue(j,ye){if(!(j instanceof IDBDatabase)||ye in j||"string"!=typeof ye)return;if(Be.get(ye))return Be.get(ye);const W=ye.replace(/FromIndex$/,""),ne=ye!==W,X=Ee.includes(W);if(!(W in(ne?IDBIndex:IDBObjectStore).prototype)||!X&&!ve.includes(W))return;const me=function(){var oe=(0,h.Z)(function*(Pe,...ut){const jt=this.transaction(Pe,X?"readwrite":"readonly");let kt=jt.store;return ne&&(kt=kt.index(ut.shift())),(yield Promise.all([kt[W](...ut),X&&jt.done]))[0]});return function(ut){return oe.apply(this,arguments)}}();return Be.set(ye,me),me}!function Re(j){Te=j(Te)}(j=>XM(JM({},j),{get:(ye,W,ne)=>Ue(ye,W)||j.get(ye,W,ne),has:(ye,W)=>!!Ue(ye,W)||j.has(ye,W)}))},5861:(Je,we,P)=>{function h(N,ae,te,ge,le,se,he){try{var $=N[se](he),B=$.value}catch(ee){return void te(ee)}$.done?ae(B):Promise.resolve(B).then(ge,le)}function J(N){return function(){var ae=this,te=arguments;return new Promise(function(ge,le){var se=N.apply(ae,te);function he(B){h(se,ge,le,he,$,"next",B)}function $(B){h(se,ge,le,he,$,"throw",B)}he(void 0)})}}P.d(we,{Z:()=>J})}},Je=>{Je(Je.s=8162)}]);