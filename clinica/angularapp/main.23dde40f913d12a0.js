"use strict";var f2=Object.defineProperty,p2=Object.defineProperties,g2=Object.getOwnPropertyDescriptors,fO=Object.getOwnPropertySymbols,m2=Object.prototype.hasOwnProperty,y2=Object.prototype.propertyIsEnumerable,pO=(Xe,Ee,O)=>Ee in Xe?f2(Xe,Ee,{enumerable:!0,configurable:!0,writable:!0,value:O}):Xe[Ee]=O,gO=(Xe,Ee)=>{for(var O in Ee||(Ee={}))m2.call(Ee,O)&&pO(Xe,O,Ee[O]);if(fO)for(var O of fO(Ee))y2.call(Ee,O)&&pO(Xe,O,Ee[O]);return Xe},mO=(Xe,Ee)=>p2(Xe,g2(Ee));(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{2011:(Xe,Ee,O)=>{O.d(Ee,{Dh:()=>se,GT:()=>me,cc:()=>Se,hO:()=>He,on:()=>H,pX:()=>ne,xv:()=>fe});var d=O(5e3),X=O(127),N=O(5813);Xe=O.hmd(Xe);const ae=["ngOnDestroy"],ne=(Ce,Ge,Ke,Te={})=>new Proxy(Ce,{get:(we,be)=>Ke.runOutsideAngular(()=>{var Be;if(Ce[be])return(null===(Be=null==Te?void 0:Te.spy)||void 0===Be?void 0:Be.get)&&Te.spy.get(be,Ce[be]),Ce[be];if(ae.indexOf(be)>-1)return()=>{};const Ue=Ge.toPromise().then($=>{const _e=$&&$[be];return"function"==typeof _e?_e.bind($):_e&&_e.then?_e.then(K=>Ke.run(()=>K)):Ke.run(()=>_e)});return new Proxy(()=>{},{get:($,_e)=>Ue[_e],apply:($,_e,K)=>Ue.then(re=>{var ee;const ye=re&&re(...K);return(null===(ee=null==Te?void 0:Te.spy)||void 0===ee?void 0:ee.apply)&&Te.spy.apply(be,K,ye),ye})})})}),me=(Ce,Ge)=>{Ge.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Te=>{Object.defineProperty(Ce.prototype,Te,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Te))})})};class ue{constructor(Ge){return Ge}}const se=new d.OlP("angularfire2.app.options"),fe=new d.OlP("angularfire2.app.name");function H(Ce,Ge,Ke){const we="object"==typeof Ke&&Ke||{};we.name=we.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const Be=X.Z.apps.filter(Ue=>Ue&&Ue.name===we.name)[0]||Ge.runOutsideAngular(()=>X.Z.initializeApp(Ce,we));try{JSON.stringify(Ce)!==JSON.stringify(Be.options)&&j("error",`${Be.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new ue(Be)}const j=(Ce,...Ge)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ge)},te={provide:ue,useFactory:H,deps:[se,d.R0b,[new d.FiY,fe]]};let He=(()=>{class Ce{constructor(Ke){X.Z.registerVersion("angularfire",N.q4.full,"core"),X.Z.registerVersion("angularfire",N.q4.full,"app-compat"),X.Z.registerVersion("angular",d.q4F.full,Ke.toString())}static initializeApp(Ke,Te){return{ngModule:Ce,providers:[{provide:se,useValue:Ke},{provide:fe,useValue:Te}]}}}return Ce.\u0275fac=function(Ke){return new(Ke||Ce)(d.LFG(d.Lbi))},Ce.\u0275mod=d.oAB({type:Ce}),Ce.\u0275inj=d.cJS({providers:[te]}),Ce})();function Se(Ce,Ge,Ke,Te,we){const[,be,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===Ce)||[];if(be)return function Oe(Ce,Ge){try{return Ce.toString()===Ge.toString()}catch(Ke){return Ce===Ge}}(we,Be)||(pe("error",`${Ge} was already initialized on the ${Ke} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:we,was:Be})),be;{const Ue=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Ue,we]),Ue}}const Ve=!!Xe.hot,pe=(Ce,...Ge)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Xe,Ee,O)=>{O.d(Ee,{q4:()=>na,iC:()=>Ba,fc:()=>xi,HU:()=>Md,vb:()=>Ad,JM:()=>Hs});var d=O(5e3),X=O(5867),N=O(5861),ae=O(9681),ne=O(2090),me=O(4859),ue=O(1877),se=O(8766);const fe="@firebase/installations",H="0.5.9",te=`w:${H}`,He="FIS_v2",Ge=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Te({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function we(I){return{token:I.token,requestStatus:2,expiresIn:re(I.expiresIn),creationTime:Date.now()}}function be(I,T){return Be.apply(this,arguments)}function Be(){return(Be=(0,N.Z)(function*(I,T){const L=(yield T.json()).error;return Ge.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ue({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function $(I,{refreshToken:T}){const R=Ue(I);return R.append("Authorization",function ee(I){return`${He} ${I}`}(T)),R}function _e(I){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function re(I){return Number(I.replace("s","000"))}function ye(I,T){return oe.apply(this,arguments)}function oe(){return(oe=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:R}){const L=Te(I),Y=Ue(I),ie=T.getImmediate({optional:!0});if(ie){const wt=yield ie.getHeartbeatsHeader();wt&&Y.append("x-firebase-client",wt)}const et={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:He,appId:I.appId,sdkVersion:te})},nt=yield _e(()=>fetch(L,et));if(nt.ok){const wt=yield nt.json();return{fid:wt.fid||R,registrationStatus:2,refreshToken:wt.refreshToken,authToken:we(wt.authToken)}}throw yield be("Create Installation",nt)})).apply(this,arguments)}function Ne(I){return new Promise(T=>{setTimeout(T,I)})}const qt=/^[cdef][\w-]{21}$/;function We(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function rn(I){return function ht(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return qt.test(R)?R:""}catch(I){return""}}function xn(I){return`${I.appName}!${I.appId}`}const ln=new Map;function tn(I,T){const R=xn(I);Lt(R,T),function os(I,T){const R=function Ir(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=I=>{Lt(I.data.key,I.data.fid)}),ui}();R&&R.postMessage({key:I,fid:T}),function Ur(){0===ln.size&&ui&&(ui.close(),ui=null)}()}(R,T)}function Lt(I,T){const R=ln.get(I);if(R)for(const L of R)L(T)}let ui=null;const li="firebase-installations-store";let Ii=null;function yt(){return Ii||(Ii=(0,se.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(li)}})),Ii}function ci(I,T){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,N.Z)(function*(I,T){const R=xn(I),Y=(yield yt()).transaction(li,"readwrite"),ie=Y.objectStore(li),Pe=yield ie.get(R);return yield ie.put(T,R),yield Y.done,(!Pe||Pe.fid!==T.fid)&&tn(I,T.fid),T})).apply(this,arguments)}function Rn(I){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,N.Z)(function*(I){const T=xn(I),L=(yield yt()).transaction(li,"readwrite");yield L.objectStore(li).delete(T),yield L.done})).apply(this,arguments)}function di(I,T){return sr.apply(this,arguments)}function sr(){return(sr=(0,N.Z)(function*(I,T){const R=xn(I),Y=(yield yt()).transaction(li,"readwrite"),ie=Y.objectStore(li),Pe=yield ie.get(R),et=T(Pe);return void 0===et?yield ie.delete(R):yield ie.put(et,R),yield Y.done,et&&(!Pe||Pe.fid!==et.fid)&&tn(I,et.fid),et})).apply(this,arguments)}function Bn(I){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,N.Z)(function*(I){let T;const R=yield di(I.appConfig,L=>{const Y=Uo(L),ie=zt(I,Y);return T=ie.registrationPromise,ie.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function Uo(I){return eo(I||{fid:We(),registrationStatus:0})}function zt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ge.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function at(I,T){return Et.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Tr(I)}:{installationEntry:T}}function Et(){return(Et=(0,N.Z)(function*(I,T){try{const R=yield ye(I,T);return ci(I.appConfig,R)}catch(R){throw Ke(R)&&409===R.customData.serverCode?yield Rn(I.appConfig):yield ci(I.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Tr(I){return hi.apply(this,arguments)}function hi(){return(hi=(0,N.Z)(function*(I){let T=yield Bt(I.appConfig);for(;1===T.registrationStatus;)yield Ne(100),T=yield Bt(I.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield Bn(I);return L||R}return T})).apply(this,arguments)}function Bt(I){return di(I,T=>{if(!T)throw Ge.create("installation-not-found");return eo(T)})}function eo(I){return function Dr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ar(I,T){return V.apply(this,arguments)}function V(){return(V=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:T},R){const L=q(I,R),Y=$(I,R),ie=T.getImmediate({optional:!0});if(ie){const wt=yield ie.getHeartbeatsHeader();wt&&Y.append("x-firebase-client",wt)}const et={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:I.appId}})},nt=yield _e(()=>fetch(L,et));if(nt.ok)return we(yield nt.json());throw yield be("Generate Auth Token",nt)})).apply(this,arguments)}function q(I,{fid:T}){return`${Te(I)}/${T}/authTokens:generate`}function W(I){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(I,T=!1){let R;const L=yield di(I.appConfig,ie=>{if(!Dt(ie))throw Ge.create("not-registered");const Pe=ie.authToken;if(!T&&mn(Pe))return ie;if(1===Pe.requestStatus)return R=G(I,T),ie;{if(!navigator.onLine)throw Ge.create("app-offline");const et=Qn(ie);return R=Je(I,et),et}});return R?yield R:L.authToken})).apply(this,arguments)}function G(I,T){return J.apply(this,arguments)}function J(){return(J=(0,N.Z)(function*(I,T){let R=yield xe(I.appConfig);for(;1===R.authToken.requestStatus;)yield Ne(100),R=yield xe(I.appConfig);const L=R.authToken;return 0===L.requestStatus?W(I,T):L})).apply(this,arguments)}function xe(I){return di(I,T=>{if(!Dt(T))throw Ge.create("not-registered");return function Br(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Je(I,T){return pt.apply(this,arguments)}function pt(){return(pt=(0,N.Z)(function*(I,T){try{const R=yield Ar(I,T),L=Object.assign(Object.assign({},T),{authToken:R});return yield ci(I.appConfig,L),R}catch(R){if(!Ke(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield ci(I.appConfig,L)}else yield Rn(I.appConfig);throw R}})).apply(this,arguments)}function Dt(I){return void 0!==I&&2===I.registrationStatus}function mn(I){return 2===I.requestStatus&&!function Ct(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function Qn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Ia(){return(Ia=(0,N.Z)(function*(I){const T=I,{installationEntry:R,registrationPromise:L}=yield Bn(T);return L?L.catch(console.error):W(T).catch(console.error),R.fid})).apply(this,arguments)}function Ta(){return(Ta=(0,N.Z)(function*(I,T=!1){const R=I;return yield Jn(R),(yield W(R,T)).token})).apply(this,arguments)}function Jn(I){return jr.apply(this,arguments)}function jr(){return(jr=(0,N.Z)(function*(I){const{registrationPromise:T}=yield Bn(I);T&&(yield T)})).apply(this,arguments)}function Bo(I){return Ge.create("missing-app-config-values",{valueName:I})}const Jr="installations",ct=I=>{const T=I.getProvider("app").getImmediate(),R=function dr(I){if(!I||!I.options)throw Bo("App Configuration");if(!I.name)throw Bo("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!I.options[R])throw Bo(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},on=I=>{const T=I.getProvider("app").getImmediate(),R=(0,ae._getProvider)(T,Jr).getImmediate();return{getId:()=>function yu(I){return Ia.apply(this,arguments)}(R),getToken:Y=>function _u(I){return Ta.apply(this,arguments)}(R,Y)}};(function Xr(){(0,ae._registerComponent)(new me.wA(Jr,ct,"PUBLIC")),(0,ae._registerComponent)(new me.wA("installations-internal",on,"PRIVATE"))})(),(0,ae.registerVersion)(fe,H),(0,ae.registerVersion)(fe,H,"esm2017");const Fi="@firebase/remote-config",Pn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wp{constructor(T,R,L,Y){this.client=T,this.storage=R,this.storageCache=L,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,Y=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,N.Z)(function*(){const[L,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,L))return Y;T.eTag=Y&&Y.eTag;const ie=yield R.client.fetch(T),Pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Pe.push(R.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Pe),ie})()}}function rd(I=navigator){return I.languages&&I.languages[0]||I.language}class Sr{constructor(T,R,L,Y,ie,Pe){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=L,this.projectId=Y,this.apiKey=ie,this.appId=Pe}fetch(T){var R=this;return(0,N.Z)(function*(){const[L,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},nt={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:Y,app_id:R.appId,language_code:rd()},wt={method:"POST",headers:et,body:JSON.stringify(nt)},$t=fetch(Pe,wt),St=new Promise((sn,_i)=>{T.signal.addEventListener(()=>{const Ws=new Error("The operation was aborted.");Ws.name="AbortError",_i(Ws)})});let nr;try{yield Promise.race([$t,St]),nr=yield $t}catch(sn){let _i="fetch-client-network";throw"AbortError"===sn.name&&(_i="fetch-timeout"),Pn.create(_i,{originalErrorMessage:sn.message})}let zn=nr.status;const qs=nr.headers.get("ETag")||void 0;let zs,an;if(200===nr.status){let sn;try{sn=yield nr.json()}catch(_i){throw Pn.create("fetch-client-parse",{originalErrorMessage:_i.message})}zs=sn.entries,an=sn.state}if("INSTANCE_STATE_UNSPECIFIED"===an?zn=500:"NO_CHANGE"===an?zn=304:("NO_TEMPLATE"===an||"EMPTY_CONFIG"===an)&&(zs={}),304!==zn&&200!==zn)throw Pn.create("fetch-status",{httpStatus:zn});return{status:zn,eTag:qs,config:zs}})()}}class Zp{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,N.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:L}){var Y=this;return(0,N.Z)(function*(){yield function Os(I,T){return new Promise((R,L)=>{const Y=Math.max(T-Date.now(),0),ie=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ie),L(Pn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ie=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function id(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ie))throw ie;const Pe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(Pe),Y.attemptFetch(T,Pe)}})()}}class sd{constructor(T,R,L,Y,ie){this.app=T,this._client=R,this._storageCache=L,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bl(I,T){const R=I.target.error||void 0;return Pn.create(T,{originalErrorMessage:R&&R.message})}const Ns="app_namespace_store";class Jp{constructor(T,R,L,Y=function Qp(){return new Promise((I,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{T(bl(L,"storage-open"))},R.onsuccess=L=>{I(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Ns,{keyPath:"compositeKey"})}}catch(R){T(Pn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,N.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ie)=>{const et=L.transaction([Ns],"readonly").objectStore(Ns),nt=R.createCompositeKey(T);try{const wt=et.get(nt);wt.onerror=$t=>{ie(bl($t,"storage-get"))},wt.onsuccess=$t=>{const St=$t.target.result;Y(St?St.value:void 0)}}catch(wt){ie(Pn.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(T,R){var L=this;return(0,N.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((ie,Pe)=>{const nt=Y.transaction([Ns],"readwrite").objectStore(Ns),wt=L.createCompositeKey(T);try{const $t=nt.put({compositeKey:wt,value:R});$t.onerror=St=>{Pe(bl(St,"storage-set"))},$t.onsuccess=()=>{ie()}}catch($t){Pe(Pn.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(T){var R=this;return(0,N.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ie)=>{const et=L.transaction([Ns],"readwrite").objectStore(Ns),nt=R.createCompositeKey(T);try{const wt=et.delete(nt);wt.onerror=$t=>{ie(bl($t,"storage-delete"))},wt.onsuccess=()=>{Y()}}catch(wt){ie(Pn.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ad{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const R=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),ie=yield R;ie&&(T.lastFetchStatus=ie);const Pe=yield L;Pe&&(T.lastSuccessfulFetchTimestampMillis=Pe);const et=yield Y;et&&(T.activeConfig=et)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function bu(){return ud.apply(this,arguments)}function ud(){return(ud=(0,N.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}!function jo(){(0,ae._registerComponent)(new me.wA("remote-config",function I(T,{instanceIdentifier:R}){const L=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,ne.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Pe,appId:et}=L.options;if(!ie)throw Pn.create("registration-project-id");if(!Pe)throw Pn.create("registration-api-key");if(!et)throw Pn.create("registration-app-id");const nt=new Jp(et,L.name,R=R||"firebase"),wt=new ad(nt),$t=new ue.Yd(Fi);$t.logLevel=ue.in.ERROR;const St=new Sr(Y,ae.SDK_VERSION,R,ie,Pe,et),nr=new Zp(St,nt),zn=new Wp(nr,nt,wt,$t),qs=new sd(L,zn,wt,nt,$t);return function cn(I){const T=(0,ne.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(qs),qs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Fi,"0.3.8"),(0,ae.registerVersion)(Fi,"0.3.8","esm2017")}();const ld="/firebase-messaging-sw.js",Mr="/firebase-cloud-messaging-push-scope",ro="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$o="google.c.a.c_id",cd="google.c.a.c_l",df="google.c.a.ts",dd="google.c.a.e";var Ho=(()=>{return(I=Ho||(Ho={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ho;var I})();function $r(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hd(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),Y=new Uint8Array(L.length);for(let ie=0;ie<L.length;++ie)Y[ie]=L.charCodeAt(ie);return Y}const Hr="fcm_token_details_db",fi="fcm_token_object_Store";function Cl(I){return fd.apply(this,arguments)}function fd(){return fd=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Hr))return null;let T=null;return(yield(0,se.X3)(Hr,5,{upgrade:(L=(0,N.Z)(function*(Y,ie,Pe,et){var nt;if(ie<2||!Y.objectStoreNames.contains(fi))return;const wt=et.objectStore(fi),$t=yield wt.index("fcmSenderId").get(I);if(yield wt.clear(),$t)if(2===ie){const St=$t;if(!St.auth||!St.p256dh||!St.endpoint)return;T={token:St.fcmToken,createTime:null!==(nt=St.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:$r(St.vapidKey)}}}else if(3===ie){const St=$t;T={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:$r(St.auth),p256dh:$r(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:$r(St.vapidKey)}}}else if(4===ie){const St=$t;T={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:$r(St.auth),p256dh:$r(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:$r(St.vapidKey)}}}}),function(ie,Pe,et,nt){return L.apply(this,arguments)})})).close(),yield(0,se.Lj)(Hr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),Il(T)?T:null;var L}),fd.apply(this,arguments)}function Il(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const $i="firebase-messaging-store";let hf=null;function dn(){return hf||(hf=(0,se.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore($i)}})),hf}function xa(I){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(I){const T=hr(I),L=yield(yield dn()).transaction($i).objectStore($i).get(T);if(L)return L;{const Y=yield Cl(I.appConfig.senderId);if(Y)return yield nn(I,Y),Y}})).apply(this,arguments)}function nn(I,T){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,N.Z)(function*(I,T){const R=hr(I),Y=(yield dn()).transaction($i,"readwrite");return yield Y.objectStore($i).put(T,R),yield Y.done,T})).apply(this,arguments)}function Cu(I){return ks.apply(this,arguments)}function ks(){return(ks=(0,N.Z)(function*(I){const T=hr(I),L=(yield dn()).transaction($i,"readwrite");yield L.objectStore($i).delete(T),yield L.done})).apply(this,arguments)}function hr({appConfig:I}){return I.appId}const bn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hi(I,T){return fr.apply(this,arguments)}function fr(){return(fr=(0,N.Z)(function*(I,T){const R=yield zo(I),L=Fs(T),Y={method:"POST",headers:R,body:JSON.stringify(L)};let ie;try{ie=yield(yield fetch(Gi(I.appConfig),Y)).json()}catch(Pe){throw bn.create("token-subscribe-failed",{errorInfo:Pe})}if(ie.error)throw bn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw bn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function oo(I,T){return ls.apply(this,arguments)}function ls(){return(ls=(0,N.Z)(function*(I,T){const R=yield zo(I),L=Fs(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(L)};let ie;try{ie=yield(yield fetch(`${Gi(I.appConfig)}/${T.token}`,Y)).json()}catch(Pe){throw bn.create("token-update-failed",{errorInfo:Pe})}if(ie.error)throw bn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw bn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function Pa(I,T){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,N.Z)(function*(I,T){const L={method:"DELETE",headers:yield zo(I)};try{const ie=yield(yield fetch(`${Gi(I.appConfig)}/${T}`,L)).json();if(ie.error)throw bn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw bn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Gi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function zo(I){return _t.apply(this,arguments)}function _t(){return(_t=(0,N.Z)(function*({appConfig:I,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Fs({p256dh:I,auth:T,endpoint:R,vapidKey:L}){const Y={web:{endpoint:R,auth:T,p256dh:I}};return L!==ro&&(Y.web.applicationPubKey=L),Y}const Al=6048e5;function Oa(I){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,N.Z)(function*(I){const T=yield ao(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:$r(T.getKey("auth")),p256dh:$r(T.getKey("p256dh"))},L=yield xa(I.firebaseDependencies);if(L){if(Du(L.subscriptionOptions,R))return Date.now()>=L.createTime+Al?Ml(I,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield Pa(I.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return Ae(I.firebaseDependencies,R)}return Ae(I.firebaseDependencies,R)})).apply(this,arguments)}function Iu(I){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,N.Z)(function*(I){const T=yield xa(I.firebaseDependencies);T&&(yield Pa(I.firebaseDependencies,T.token),yield Cu(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Ml(I,T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,N.Z)(function*(I,T){try{const R=yield oo(I.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield nn(I.firebaseDependencies,L),R}catch(R){throw yield Iu(I),R}})).apply(this,arguments)}function Ae(I,T){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,N.Z)(function*(I,T){const L={token:yield Hi(I,T),createTime:Date.now(),subscriptionOptions:T};return yield nn(I,L),L.token})).apply(this,arguments)}function ao(I,T){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hd(T)})})).apply(this,arguments)}function Du(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function uo(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function pi(I,T){if(!T.notification)return;I.notification={};const R=T.notification.title;R&&(I.notification.title=R);const L=T.notification.body;L&&(I.notification.body=L);const Y=T.notification.image;Y&&(I.notification.image=Y)}(T,I),function xl(I,T){!T.data||(I.data=T.data)}(T,I),function Rl(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const R=T.fcmOptions.link;R&&(I.fcmOptions.link=R);const L=T.fcmOptions.analytics_label;L&&(I.fcmOptions.analyticsLabel=L)}(T,I),T}function Pl(I){return"object"==typeof I&&!!I&&$o in I}function pd(I,T){const R=[];for(let L=0;L<I.length;L++)R.push(I.charAt(L)),L<T.length&&R.push(T.charAt(L));return R.join("")}function cs(I){return bn.create("missing-app-config-values",{valueName:I})}pd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xr{constructor(T,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Xp(I){if(!I||!I.options)throw cs("App Configuration Object");if(!I.name)throw cs("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const L of T)if(!R[L])throw cs(L);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function gi(I){return Au.apply(this,arguments)}function Au(){return(Au=(0,N.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(ld,{scope:Mr}),I.swRegistration.update().catch(()=>{})}catch(T){throw bn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Ls(I,T){return Si.apply(this,arguments)}function Si(){return(Si=(0,N.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield gi(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw bn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Ol(I,T){return Su.apply(this,arguments)}function Su(){return(Su=(0,N.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=ro)})).apply(this,arguments)}function Nl(){return(Nl=(0,N.Z)(function*(I,T){if(!navigator)throw bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bn.create("permission-blocked");return yield Ol(I,null==T?void 0:T.vapidKey),yield Ls(I,null==T?void 0:T.serviceWorkerRegistration),Oa(I)})).apply(this,arguments)}function Zo(I,T,R){return xu.apply(this,arguments)}function xu(){return(xu=(0,N.Z)(function*(I,T,R){const L=Ru(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[$o],message_name:R[cd],message_time:R[df],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ru(I){switch(I){case Ho.NOTIFICATION_CLICKED:return"notification_open";case Ho.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function md(){return(md=(0,N.Z)(function*(I,T){const R=T.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Ho.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(uo(R)):I.onMessageHandler.next(uo(R)));const L=R.data;Pl(L)&&"1"===L[dd]&&(yield Zo(I,R.messageType,L))})).apply(this,arguments)}const Pu="@firebase/messaging",yd=I=>{const T=new xr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function gd(I,T){return md.apply(this,arguments)}(T,R)),T},Ko=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:L=>function Mu(I,T){return Nl.apply(this,arguments)}(T,L)}};function Ou(){return ti.apply(this,arguments)}function ti(){return(ti=(0,N.Z)(function*(){try{yield(0,ne.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _d(){(0,ae._registerComponent)(new me.wA("messaging",yd,"PUBLIC")),(0,ae._registerComponent)(new me.wA("messaging-internal",Ko,"PRIVATE")),(0,ae.registerVersion)(Pu,"0.9.13"),(0,ae.registerVersion)(Pu,"0.9.13","esm2017")}();const vd="analytics",eg="firebase_id",ds="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ho="https://www.googletagmanager.com/gtag/js",tr=new ue.Yd("@firebase/analytics");function wd(I){return Promise.all(I.map(T=>T.catch(R=>R)))}function tg(I,T){const R=document.createElement("script");R.src=`${ho}?l=${I}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Yo(I,T,R,L,Y,ie){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,N.Z)(function*(I,T,R,L,Y,ie){const Pe=L[Y];try{if(Pe)yield T[Pe];else{const nt=(yield wd(R)).find(wt=>wt.measurementId===Y);nt&&(yield T[nt.appId])}}catch(et){tr.error(et)}I("config",Y,ie)})).apply(this,arguments)}function ng(I,T,R,L,Y){return hs.apply(this,arguments)}function hs(){return(hs=(0,N.Z)(function*(I,T,R,L,Y){try{let ie=[];if(Y&&Y.send_to){let Pe=Y.send_to;Array.isArray(Pe)||(Pe=[Pe]);const et=yield wd(R);for(const nt of Pe){const wt=et.find(St=>St.measurementId===nt),$t=wt&&T[wt.appId];if(!$t){ie=[];break}ie.push($t)}}0===ie.length&&(ie=Object.values(T)),yield Promise.all(ie),I("event",L,Y||{})}catch(ie){tr.error(ie)}})).apply(this,arguments)}function ge(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(ho))return T;return null}const Cn=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zi=new class jt{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function vt(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function hn(I){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,N.Z)(function*(I){var T;const{appId:R,apiKey:L}=I,Y={method:"GET",headers:vt(L)},ie=ds.replace("{app-id}",R),Pe=yield fetch(ie,Y);if(200!==Pe.status&&304!==Pe.status){let et="";try{const nt=yield Pe.json();(null===(T=nt.error)||void 0===T?void 0:T.message)&&(et=nt.error.message)}catch(nt){}throw Cn.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:et})}return Pe.json()})).apply(this,arguments)}function Hn(I){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,N.Z)(function*(I,T=zi,R){const{appId:L,apiKey:Y,measurementId:ie}=I.options;if(!L)throw Cn.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:L};throw Cn.create("no-api-key")}const Pe=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new kt;return setTimeout((0,N.Z)(function*(){et.abort()}),void 0!==R?R:6e4),Gn({appId:L,apiKey:Y,measurementId:ie},Pe,et,T)})).apply(this,arguments)}function Gn(I,T,R){return fs.apply(this,arguments)}function fs(){return(fs=(0,N.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:R},L,Y=zi){const{appId:ie,measurementId:Pe}=I;try{yield pr(L,T)}catch(et){if(Pe)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:ie,measurementId:Pe};throw et}try{const et=yield hn(I);return Y.deleteThrottleMetadata(ie),et}catch(et){if(!Fu(et)){if(Y.deleteThrottleMetadata(ie),Pe)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:ie,measurementId:Pe};throw et}const nt=503===Number(et.customData.httpStatus)?(0,ne.$s)(R,Y.intervalMillis,30):(0,ne.$s)(R,Y.intervalMillis),wt={throttleEndTimeMillis:Date.now()+nt,backoffCount:R+1};return Y.setThrottleMetadata(ie,wt),tr.debug(`Calling attemptFetch again in ${nt} millis`),Gn(I,wt,L,Y)}})).apply(this,arguments)}function pr(I,T){return new Promise((R,L)=>{const Y=Math.max(T-Date.now(),0),ie=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ie),L(Cn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Fu(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class kt{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Ed(){return go.apply(this,arguments)}function go(){return(go=(0,N.Z)(function*(){if(!(0,ne.hl)())return tr.warn(Cn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return tr.warn(Cn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Qo(){return(Qo=(0,N.Z)(function*(I,T,R,L,Y,ie,Pe){var et;const nt=Hn(I);nt.then(zn=>{R[zn.measurementId]=zn.appId,I.options.measurementId&&zn.measurementId!==I.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zn=>tr.error(zn)),T.push(nt);const wt=Ed().then(zn=>{if(zn)return L.getId()}),[$t,St]=yield Promise.all([nt,wt]);ge()||tg(ie,$t.measurementId),Y("js",new Date);const nr=null!==(et=null==Pe?void 0:Pe.config)&&void 0!==et?et:{};return nr.origin="firebase",nr.update=!0,null!=St&&(nr[eg]=St),Y("config",$t.measurementId,nr),$t.measurementId})).apply(this,arguments)}class mo{constructor(T){this.app=T}_delete(){return delete vn[this.app.options.appId],Promise.resolve()}}let vn={},Nn=[];const Fl={};let Us,Pr,yo="dataLayer",gt=!1;function Ye(I,T,R){!function yi(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),R=Cn.create("invalid-analytics-context",{errorInfo:T});tr.warn(R.message)}}();const L=I.options.appId;if(!L)throw Cn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Cn.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vn[L])throw Cn.create("already-exists",{id:L});if(!gt){!function fo(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(yo);const{wrappedGtag:ie,gtagCore:Pe}=function rg(I,T,R,L,Y){let ie=function(...Pe){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function ku(I,T,R,L){function ie(){return(ie=(0,N.Z)(function*(Pe,et,nt){try{"event"===Pe?yield ng(I,T,R,et,nt):"config"===Pe?yield Yo(I,T,R,L,et,nt):I("set",et)}catch(wt){tr.error(wt)}})).apply(this,arguments)}return function Y(Pe,et,nt){return ie.apply(this,arguments)}}(ie,I,T,R),{gtagCore:ie,wrappedGtag:window[Y]}}(vn,Nn,Fl,yo,"gtag");Pr=ie,Us=Pe,gt=!0}return vn[L]=function mi(I,T,R,L,Y,ie,Pe){return Qo.apply(this,arguments)}(I,Nn,Fl,T,Us,yo,R),new mo(I)}function bt(){return(bt=(0,N.Z)(function*(I,T,R,L,Y){if(Y&&Y.global)I("event",R,L);else{const ie=yield T;I("event",R,Object.assign(Object.assign({},L),{send_to:ie}))}})).apply(this,arguments)}function In(){return gs.apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}const Cd="@firebase/analytics";!function Ll(){(0,ae._registerComponent)(new me.wA(vd,(T,{options:R})=>Ye(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new me.wA("analytics-internal",function I(T){try{const R=T.getProvider(vd).getImmediate();return{logEvent:(L,Y,ie)=>function og(I,T,R,L){I=(0,ne.m9)(I),function Bs(I,T,R,L,Y){return bt.apply(this,arguments)}(Pr,vn[I.app.options.appId],T,R,L).catch(Y=>tr.error(Y))}(R,L,Y,ie)}}catch(R){throw Cn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(Cd,"0.7.9"),(0,ae.registerVersion)(Cd,"0.7.9","esm2017")}();var mf=O(4408),Vu=O(7565);const ta=new class Ht extends Vu.v{}(class qn extends mf.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,R,L):T.flush(this)}});var Uu=O(4986),Id=O(8505),gr=O(5363),Gr=O(9468);const na=new d.GfV("7.3.0"),ra="__angularfire_symbol__analyticsIsSupportedValue",ms="__angularfire_symbol__analyticsIsSupported",ni="__angularfire_symbol__remoteConfigIsSupportedValue",Ki="__angularfire_symbol__remoteConfigIsSupported",_o="__angularfire_symbol__messagingIsSupportedValue",Vl="__angularfire_symbol__messagingIsSupported";function Hs(I,T,R){if(T){if(1===T.length)return T[0];const ie=T.filter(Pe=>Pe.app===R);if(1===ie.length)return ie[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[ms]||(globalThis[ms]=In().then(I=>globalThis[ra]=I).catch(()=>globalThis[ra]=!1)),globalThis[Vl]||(globalThis[Vl]=Ou().then(I=>globalThis[_o]=I).catch(()=>globalThis[_o]=!1)),globalThis[Ki]||(globalThis[Ki]=bu().then(I=>globalThis[ni]=I).catch(()=>globalThis[ni]=!1));const Ad=(I,T)=>{const R=T?[T]:(0,X.C6)(),L=[];return R.forEach(Y=>{Y.container.getProvider(I).instances.forEach(Pe=>{L.includes(Pe)||L.push(Pe)})}),L};function ys(){}class Sd{constructor(T,R=ta){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,L){const Y=this.zone;return this.delegate.schedule(function(Pe){Y.runGuarded(()=>{T.apply(this,[Pe])})},R,L)}}class Ua{constructor(T){this.zone=T,this.task=null}call(T,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ys,{},ys,ys)),R.pipe((0,Id.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Md=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Sd(Zone.current)),this.insideAngular=R.run(()=>new Sd(Zone.current,Uu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function _s(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function xi(I){return I.pipe((0,gr.Q)(_s().outsideAngular))}function Ba(I){return _s(),function vo(I){return function(R){return(R=R.lift(new Ua(I.ngZone))).pipe((0,Gr.R)(I.outsideAngular),(0,gr.Q)(I.insideAngular))}}(_s())(I)}},2090:(Xe,Ee,O)=>{O.d(Ee,{$s:()=>Bt,BH:()=>He,G6:()=>Ue,L:()=>se,LL:()=>oe,Mn:()=>be,Sg:()=>Se,UG:()=>pe,US:()=>me,ZB:()=>j,ZR:()=>ye,b$:()=>Ke,d:()=>Te,eu:()=>_e,hl:()=>$,jU:()=>Ce,m9:()=>Ar,ne:()=>Ii,pd:()=>Ss,r3:()=>Vr,ru:()=>Ge,tV:()=>fe,uI:()=>Ve,vZ:()=>ui,w1:()=>we,xO:()=>Ur,xb:()=>Lt,z$:()=>Oe,zI:()=>K,zd:()=>ki});const ae=function(V){const q=[];let W=0;for(let Ie=0;Ie<V.length;Ie++){let G=V.charCodeAt(Ie);G<128?q[W++]=G:G<2048?(q[W++]=G>>6|192,q[W++]=63&G|128):55296==(64512&G)&&Ie+1<V.length&&56320==(64512&V.charCodeAt(Ie+1))?(G=65536+((1023&G)<<10)+(1023&V.charCodeAt(++Ie)),q[W++]=G>>18|240,q[W++]=G>>12&63|128,q[W++]=G>>6&63|128,q[W++]=63&G|128):(q[W++]=G>>12|224,q[W++]=G>>6&63|128,q[W++]=63&G|128)}return q},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,q){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let G=0;G<V.length;G+=3){const J=V[G],xe=G+1<V.length,Je=xe?V[G+1]:0,pt=G+2<V.length,Dt=pt?V[G+2]:0;let Qn=(15&Je)<<2|Dt>>6,Br=63&Dt;pt||(Br=64,xe||(Qn=64)),Ie.push(W[J>>2],W[(3&J)<<4|Je>>4],W[Qn],W[Br])}return Ie.join("")},encodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(V):this.encodeByteArray(ae(V),q)},decodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(V):function(V){const q=[];let W=0,Ie=0;for(;W<V.length;){const G=V[W++];if(G<128)q[Ie++]=String.fromCharCode(G);else if(G>191&&G<224){const J=V[W++];q[Ie++]=String.fromCharCode((31&G)<<6|63&J)}else if(G>239&&G<365){const pt=((7&G)<<18|(63&V[W++])<<12|(63&V[W++])<<6|63&V[W++])-65536;q[Ie++]=String.fromCharCode(55296+(pt>>10)),q[Ie++]=String.fromCharCode(56320+(1023&pt))}else{const J=V[W++],xe=V[W++];q[Ie++]=String.fromCharCode((15&G)<<12|(63&J)<<6|63&xe)}}return q.join("")}(this.decodeStringToByteArray(V,q))},decodeStringToByteArray(V,q){this.init_();const W=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let G=0;G<V.length;){const J=W[V.charAt(G++)],Je=G<V.length?W[V.charAt(G)]:0;++G;const Dt=G<V.length?W[V.charAt(G)]:64;++G;const Ct=G<V.length?W[V.charAt(G)]:64;if(++G,null==J||null==Je||null==Dt||null==Ct)throw Error();Ie.push(J<<2|Je>>4),64!==Dt&&(Ie.push(Je<<4&240|Dt>>2),64!==Ct&&Ie.push(Dt<<6&192|Ct))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},se=function(V){return function(V){const q=ae(V);return me.encodeByteArray(q,!0)}(V).replace(/\./g,"")},fe=function(V){try{return me.decodeString(V,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(V,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return q}for(const W in q)!q.hasOwnProperty(W)||!te(W)||(V[W]=j(V[W],q[W]));return V}function te(V){return"__proto__"!==V}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,W)=>{this.resolve=q,this.reject=W})}wrapCallback(q){return(W,Ie)=>{W?this.reject(W):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(W):q(W,Ie))}}}function Se(V,q){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",G=V.iat||0,J=V.sub||V.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:G,exp:G+3600,auth_time:G,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},V);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(xe)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function Ge(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Oe().indexOf("Electron/")>=0}function we(){const V=Oe();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function be(){return Oe().indexOf("MSAppHost/")>=0}function Ue(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function _e(){return new Promise((V,q)=>{try{let W=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(Ie);G.onsuccess=()=>{G.result.close(),W||self.indexedDB.deleteDatabase(Ie),V(!0)},G.onupgradeneeded=()=>{W=!1},G.onerror=()=>{var J;q((null===(J=G.error)||void 0===J?void 0:J.message)||"")}}catch(W){q(W)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(q,W,Ie){super(W),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(q,W,Ie){this.service=q,this.serviceName=W,this.errors=Ie}create(q,...W){const Ie=W[0]||{},G=`${this.service}/${q}`,J=this.errors[q],xe=J?function Ne(V,q){return V.replace(ht,(W,Ie)=>{const G=q[Ie];return null!=G?String(G):`<${Ie}?>`})}(J,Ie):"Error";return new ye(G,`${this.serviceName}: ${xe} (${G}).`,Ie)}}const ht=/\{\$([^}]+)}/g;function Vr(V,q){return Object.prototype.hasOwnProperty.call(V,q)}function Lt(V){for(const q in V)if(Object.prototype.hasOwnProperty.call(V,q))return!1;return!0}function ui(V,q){if(V===q)return!0;const W=Object.keys(V),Ie=Object.keys(q);for(const G of W){if(!Ie.includes(G))return!1;const J=V[G],xe=q[G];if(Ir(J)&&Ir(xe)){if(!ui(J,xe))return!1}else if(J!==xe)return!1}for(const G of Ie)if(!W.includes(G))return!1;return!0}function Ir(V){return null!==V&&"object"==typeof V}function Ur(V){const q=[];for(const[W,Ie]of Object.entries(V))Array.isArray(Ie)?Ie.forEach(G=>{q.push(encodeURIComponent(W)+"="+encodeURIComponent(G))}):q.push(encodeURIComponent(W)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function ki(V){const q={};return V.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[G,J]=Ie.split("=");q[decodeURIComponent(G)]=decodeURIComponent(J)}}),q}function Ss(V){const q=V.indexOf("?");if(!q)return"";const W=V.indexOf("#",q);return V.substring(q,W>0?W:void 0)}function Ii(V,q){const W=new yt(V,q);return W.subscribe.bind(W)}class yt{constructor(q,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(W=>{W.next(q)})}error(q){this.forEachObserver(W=>{W.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,W,Ie){let G;if(void 0===q&&void 0===W&&void 0===Ie)throw new Error("Missing Observer.");G=function Dn(V,q){if("object"!=typeof V||null===V)return!1;for(const W of q)if(W in V&&"function"==typeof V[W])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:W,complete:Ie},void 0===G.next&&(G.next=Rn),void 0===G.error&&(G.error=Rn),void 0===G.complete&&(G.complete=Rn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(xe){}}),this.observers.push(G),J}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,q)}sendOne(q,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{W(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}function Bt(V,q=1e3,W=2){const Ie=q*Math.pow(W,V),G=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+G)}function Ar(V){return V&&V._delegate?V._delegate:V}},584:(Xe,Ee,O)=>{var d=O(5e3);let X=null;function N(){return X}const ue=new d.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function fe(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const H=new d.OlP("Location Initialized");let j=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function He(){return new j((0,d.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,d.LFG)(ue).location;return new Ke((0,d.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new d.OlP("appBaseHref");let Ke=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(Ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(Ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(Ue(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Se,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(){return new we((0,d.LFG)(pe),(0,d.LFG)(se))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}class Rs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let er=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Rs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),no(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{no(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function no(n,e){n.context.$implicit=e.item}let On=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cn{constructor(){this.$implicit=null,this.ngIf=null}}function wu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let dd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Go(n){return"server"===n}let Il=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new qo((0,d.LFG)(ue),window)}),n})();class qo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $i(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Tl(this.window.history)||Tl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Tl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class so extends class xa extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){X||(X=n)}(new so)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ra(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function ks(n){Cu=Cu||document.createElement("a"),Cu.setAttribute("href",n);const e=Cu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Aa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Cu,nn=null;const hr=new d.OlP("TRANSITION_ID"),bn=[{provide:d.ip1,useFactory:function Dl(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[hr,ue,d.zs3],multi:!0}];class Hi{static init(){(0,d.VLi)(new Hi)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const oo=new d.OlP("EventManagerPlugins");let ls=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Pa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ai=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Gi=(()=>{class n extends Ai{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(zo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zo))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function zo(n){N().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fs=/%COMP%/g;function Wo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Wo(n,i,t):(i=i.replace(Fs,n),t.push(i))}return t}function Ae(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ao=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _n(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new pi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new xl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Wo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ls),d.LFG(Gi),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class _n{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_t[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=_t[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_t[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ae(r)):this.eventManager.addEventListener(e,t,Ae(r))}}class pi extends _n{constructor(e,t,r,i){super(e),this.component=r;const u=Wo(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Tu(n){return"_ngcontent-%COMP%".replace(Fs,n)}(i+"-"+r.id),this.hostAttr=function Ml(n){return"_nghost-%COMP%".replace(Fs,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class xl extends _n{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Wo(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Rl=(()=>{class n extends Pa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Pl=["alt","control","meta","shift"],Xp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gi=(()=>{class n extends Pa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Pl.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function Au(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&cs.hasOwnProperty(e)&&(e=cs[e]))}return Xp[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pl.forEach(u=>{u!=i&&xr[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Mu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Ls(){so.makeCurrent(),Hi.init()},multi:!0},{provide:ue,useFactory:function Ol(){return(0,d.RDi)(document),document},deps:[]}]),Nl=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Si(){return new d.qLn},deps:[]},{provide:oo,useClass:Rl,multi:!0,deps:[ue,d.R0b,d.Lbi]},{provide:oo,useClass:gi,multi:!0,deps:[ue]},{provide:ao,useClass:ao,deps:[ls,Gi,d.AFp]},{provide:d.FYo,useExisting:ao},{provide:Ai,useExisting:Gi},{provide:Gi,useClass:Gi,deps:[ue]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:ls,useClass:ls,deps:[oo,d.R0b]},{provide:class dn{},useClass:fr,deps:[]}];let Zo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:hr,useExisting:d.AFp},bn]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Nl,imports:[dd,d.hGG]}),n})();"undefined"!=typeof window&&window;var ge=O(5861),po=O(7579);class Cn extends po.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Vs=O(4986),qi=O(8306),jt=O(8996),zi=O(7669);function vt(...n){const e=(0,zi.yG)(n);return(0,jt.D)(n,e)}var hn=O(5813),Mi=O(8189);function Wi(...n){return function Hn(){return(0,Mi.J)(1)}()((0,jt.D)(n,(0,zi.yG)(n)))}var Gn=O(4482);function fs(...n){const e=(0,zi.yG)(n);return(0,Gn.e)((t,r)=>{(e?Wi(n,t,e):Wi(n,t)).subscribe(r)})}var pr=O(5403);function Fu(){return(0,Gn.e)((n,e)=>{let t,r=!1;n.subscribe((0,pr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var kt=O(4004);function Ed(n,e,t,r,i){return(u,c)=>{let p=t,_=e,b=0;u.subscribe((0,pr.x)(c,S=>{const M=b++;_=p?n(_,S,M):(p=!0,S),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function go(n,e){return(0,Gn.e)(Ed(n,e,arguments.length>=2,!0))}var mi=O(4671);function mo(n,e){return n===e}function vn(n,e){return(0,Gn.e)((t,r)=>{let i=0;t.subscribe((0,pr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Ye,Nn=O(2011),yo=(O(8775),O(3942)),Rr=O(9681),Us=O(4859),Pr=O(1877),gt=O(2090),ig="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yi={},Bs=Bs||{},bt=ig||self;function ka(){}function Zi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function js(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Jo="closure_uid_"+(1e9*Math.random()>>>0),ps=0;function Xo(n,e,t){return n.call.apply(n.bind,arguments)}function $s(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function kn(n,e,t){return(kn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xo:$s).apply(null,arguments)}function ea(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function In(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function gs(){this.s=this.s,this.o=this.o}var An={};gs.prototype.s=!1,gs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Fa(n){return Object.prototype.hasOwnProperty.call(n,Jo)&&n[Jo]||(n[Jo]=++ps)}(this);delete An[n]}},gs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gf=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},sg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function Cd(n){return Array.prototype.concat.apply([],arguments)}function Lu(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ll(n){return/^[\s\xa0]*$/.test(n)}var Ht,mf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qn(n,e){return-1!=n.indexOf(e)}function Vu(n,e){return n<e?-1:n>e?1:0}e:{var ta=bt.navigator;if(ta){var La=ta.userAgent;if(La){Ht=La;break e}}Ht=""}function Uu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Id(n){const e={};for(const t in n)e[t]=n[t];return e}var gr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gr(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<gr.length;u++)t=gr[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function na(n){return na[" "](n),n}na[" "]=ka;var ar,n,ms=qn(Ht,"Opera"),ni=qn(Ht,"Trident")||qn(Ht,"MSIE"),Ki=qn(Ht,"Edge"),_o=Ki||ni,Vl=qn(Ht,"Gecko")&&!(qn(Ht.toLowerCase(),"webkit")&&!qn(Ht,"Edge"))&&!(qn(Ht,"Trident")||qn(Ht,"MSIE"))&&!qn(Ht,"Edge"),Td=qn(Ht.toLowerCase(),"webkit")&&!qn(Ht,"Edge");function Dd(){var n=bt.document;return n?n.documentMode:void 0}e:{var Va="",Hs=(n=Ht,Vl?/rv:([^\);]+)(\)|;)/.exec(n):Ki?/Edge\/([\d\.]+)/.exec(n):ni?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Td?/WebKit\/(\S+)/.exec(n):ms?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Hs&&(Va=Hs?Hs[1]:""),ni){var Ad=Dd();if(null!=Ad&&Ad>parseFloat(Va)){ar=String(Ad);break e}}ar=Va}var ys={};var _s=bt.document&&ni&&(Dd()||parseInt(ar,10))||void 0,Ul=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{bt.addEventListener("test",ka,e),bt.removeEventListener("test",ka,e)}catch(t){}return n}();function wn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function xi(n,e){if(wn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Vl){e:{try{na(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Bl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&xi.Z.h.call(this)}}wn.prototype.h=function(){this.defaultPrevented=!0},In(xi,wn);var Bl={2:"touch",3:"pen",4:"mouse"};xi.prototype.h=function(){xi.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ba="closure_listenable_"+(1e6*Math.random()|0),vo=0;function ja(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++vo,this.ca=this.fa=!1}function Gs(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function I(n){this.src=n,this.g={},this.h=0}function T(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=gf(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Gs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function R(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}I.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=R(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new ja(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var L="closure_lm_"+(1e6*Math.random()|0),Y={};function ie(n,e,t,r,i){if(r&&r.once)return nt(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ie(n,e[u],t,r,i);return null}return t=zs(t),n&&n[Ba]?n.N(e,t,js(r)?!!r.capture:!!r,i):Pe(n,e,t,!1,r,i)}function Pe(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=js(i)?!!i.capture:!!i,p=zn(n);if(p||(n[L]=p=new I(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function et(){var e=nr;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ul||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(St(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function nt(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)nt(n,e[u],t,r,i);return null}return t=zs(t),n&&n[Ba]?n.O(e,t,js(r)?!!r.capture:!!r,i):Pe(n,e,t,!0,r,i)}function wt(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)wt(n,e[u],t,r,i);else r=js(r)?!!r.capture:!!r,t=zs(t),n&&n[Ba]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=R(u=n.g[e],t,r,i))&&(Gs(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=zn(n))&&(e=n.g[e.toString()],n=-1,e&&(n=R(e,t,r,i)),(t=-1<n?e[n]:null)&&$t(t))}function $t(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ba])T(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(St(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zn(e))?(T(t,n),0==t.h&&(t.src=null,e[L]=null)):Gs(n)}}}function St(n){return n in Y?Y[n]:Y[n]="on"+n}function nr(n,e){if(n.ca)n=!0;else{e=new xi(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&$t(n),n=t.call(r,e)}return n}function zn(n){return(n=n[L])instanceof I?n:null}var qs="__closure_events_fn_"+(1e9*Math.random()>>>0);function zs(n){return"function"==typeof n?n:(n[qs]||(n[qs]=function(e){return n.handleEvent(e)}),n[qs])}function an(){gs.call(this),this.i=new I(this),this.P=this,this.I=null}function sn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wn(e,n);else if(e instanceof wn)e.target=e.target||n;else{var i=e;Gr(e=new wn(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=_i(c,r,!0,e)&&i}if(i=_i(c=e.g=n,r,!0,e)&&i,i=_i(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=_i(c=e.g=t[u],r,!1,e)&&i}function _i(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&T(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}In(an,gs),an.prototype[Ba]=!0,an.prototype.removeEventListener=function(n,e,t,r){wt(this,n,e,t,r)},an.prototype.M=function(){if(an.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Gs(t[r]);delete n.g[e],n.h--}}this.I=null},an.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},an.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ws=bt.JSON.stringify;function ag(){var n=Rd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vf,jl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xd,n=>n.reset());class xd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _f(n){bt.setTimeout(()=>{throw n},0)}function $l(n,e){vf||function Bu(){var n=bt.Promise.resolve(void 0);vf=function(){n.then(dw)}}(),$a||(vf(),$a=!0),Rd.add(n,e)}var $a=!1,Rd=new class yf{constructor(){this.h=this.g=null}add(e,t){const r=jl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function dw(){for(var n;n=ag();){try{n.h.call(n.g)}catch(t){_f(t)}var e=jl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}$a=!1}function Hl(n,e){an.call(this),this.h=n||1,this.g=e||bt,this.j=kn(this.kb,this),this.l=Date.now()}function Pd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ug(n,e,t){if("function"==typeof n)t&&(n=kn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=kn(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function Gl(n){n.g=ug(()=>{n.g=null,n.i&&(n.i=!1,Gl(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}In(Hl,an),(Ye=Hl.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),sn(this,"tick"),this.da&&(Pd(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){Hl.Z.M.call(this),Pd(this),delete this.g};class jy extends gs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gl(this)}M(){super.M(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ql(n){gs.call(this),this.h=n,this.g={}}In(ql,gs);var zl=[];function Od(n,e,t,r){Array.isArray(t)||(t&&(zl[0]=t.toString()),t=zl);for(var i=0;i<t.length;i++){var u=ie(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ha(n){Uu(n.g,function(e,t){this.g.hasOwnProperty(t)&&$t(e)},n),n.g={}}function Nd(){this.g=!0}function vs(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Ws(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}ql.prototype.M=function(){ql.Z.M.call(this),Ha(this)},ql.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nd.prototype.Aa=function(){this.g=!1},Nd.prototype.info=function(){};var ia={},Ef=null;function Wl(){return Ef=Ef||new an}function bf(n){wn.call(this,ia.Ma,n)}function Zl(n){const e=Wl();sn(e,new bf(e,n))}function cg(n,e){wn.call(this,ia.STAT_EVENT,n),this.stat=e}function ri(n){const e=Wl();sn(e,new cg(e,n))}function dg(n,e){wn.call(this,ia.Na,n),this.size=e}function vi(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}ia.Ma="serverreachability",In(bf,wn),ia.STAT_EVENT="statevent",In(cg,wn),ia.Na="timingevent",In(dg,wn);var sa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},kd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hg(){}function Hy(){}hg.prototype.h=null;var Fd,ju={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pg(){wn.call(this,"d")}function Kl(){wn.call(this,"c")}function Ld(){}function Yl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ql(this),this.P=II,this.W=new Hl(n=_o?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}In(pg,wn),In(Kl,wn),In(Ld,hg),Ld.prototype.g=function(){return new XMLHttpRequest},Ld.prototype.i=function(){return{}},Fd=new Ld;var II=45e3,wo={},Ga={};function Vd(n,e,t){n.K=1,n.v=Hd(Yi(e)),n.s=t,n.U=!0,Ri(n,null)}function Ri(n,e){n.F=Date.now(),Hu(n),n.A=Yi(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),rc(t.h,"t",r),n.C=0,t=n.l.H,n.h=new gg,n.g=th(n.l,t?e:null,!n.s),0<n.O&&(n.L=new jy(kn(n.Ia,n,n.g),n.O)),Od(n.V,n.g,"readystatechange",n.gb),e=n.H?Id(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Zl(1),function $y(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function $u(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ql(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=mg(n,t),i==Ga){4==e&&(n.o=4,ri(14),r=!1),vs(n.j,n.m,null,"[Incomplete Response]");break}if(i==wo){n.o=4,ri(15),vs(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}vs(n.j,n.m,i,null),Jl(n,i)}$u(n)&&i!=Ga&&i!=wo&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ri(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Co(e),e.L=!0,ri(11))):(vs(n.j,n.m,t,"[Invalid Chunked Response]"),ws(n),Ud(n))}function mg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ga:(t=Number(e.substring(t,r)),isNaN(t)?wo:(r+=1)+t>e.length?Ga:(e=e.substr(r,t),n.C=r+t,e))}function Hu(n){n.Y=Date.now()+n.P,Cf(n,n.P)}function Cf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=vi(kn(n.eb,n),e)}function If(n){n.B&&(bt.clearTimeout(n.B),n.B=null)}function Ud(n){0==n.l.G||n.I||Rf(n.l,n)}function ws(n){If(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Pd(n.W),Ha(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Jl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ic(t.i,n)))if(t.I=n.N,!n.J&&ic(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=vi(kn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ya(t),de(t)}eh(t),ri(18)}if(1>=Wu(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Io(t,11)}else if((n.J||t.g==n)&&Ya(t),!Ll(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const z=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(qn(z,"spdy")||qn(z,"quic")||qn(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Af(u,u.h),u.h=null))}if(r.D){const ce=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.sa=ce,Nt(r.F,r.D,ce))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Cg(r,r.H?r.la:null,r.W),c.J){sc(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(If(p),Hu(p)),r.g=c}else Xd(r);0<t.l.length&&ut(t)}else"stop"!=b[0]&&"close"!=b[0]||Io(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Io(t,7):Z(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Zl(4)}catch(b){}}function yg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Zi(n)||"string"==typeof n)sg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Zi(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Tf(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Zi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function Xl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Xl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Bd(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];oa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)oa(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function oa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=Yl.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==y(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const S=y(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||_o||this.g&&(this.h.h||this.g.ga()||f(this.g)))){this.I||4!=S||7==e||Zl(8==e||0>=M?3:2),If(this);var t=this.g.ba();this.N=t;t:if($u(this)){var r=f(this.g);n="";var i=r.length,u=4==y(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ws(this),Ud(this);var c="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function hw(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ll(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,ri(12),ws(this),Ud(this);break e}vs(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Jl(this,t)}this.U?(Ql(this,S,c),_o&&this.i&&3==S&&(Od(this.V,this.W,"tick",this.fb),this.W.start())):(vs(this.j,this.m,c,null),Jl(this,c)),4==S&&ws(this),this.i&&!this.I&&(4==S?Rf(this.l,this):(this.i=!1,Hu(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ri(12)):(this.o=0,ri(13)),ws(this),Ud(this)}}}catch(S){}},Ye.fb=function(){if(this.g){var n=y(this.g),e=this.g.ga();this.C<e.length&&(If(this),Ql(this,n,e),this.i&&4!=n&&Hu(this))}},Ye.cancel=function(){this.I=!0,ws(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function wf(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zl(3),ri(17)),ws(this),this.o=2,Ud(this)):Cf(this,this.Y-n)},(Ye=Xl.prototype).R=function(){Bd(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return Bd(this),this.g.concat()},Ye.get=function(n,e){return oa(this.h,n)?this.h[n]:e},Ye.set=function(n,e){oa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var jd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qa(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof qa){this.g=void 0!==e?e:n.g,Eo(this,n.j),this.s=n.s,$d(this,n.i),Gu(this,n.m),this.l=n.l,e=n.h;var t=new bo;t.i=e.i,e.g&&(t.g=new Xl(e.g),t.h=e.h),ec(this,t),this.o=n.o}else n&&(t=String(n).match(jd))?(this.g=!!e,Eo(this,t[1]||"",!0),this.s=qu(t[2]||""),$d(this,t[3]||"",!0),Gu(this,t[4]),this.l=qu(t[5]||"",!0),ec(this,t[6]||"",!0),this.o=qu(t[7]||"")):(this.g=!!e,this.h=new bo(null,this.g))}function Yi(n){return new qa(n)}function Eo(n,e,t){n.j=t?qu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $d(n,e,t){n.i=t?qu(e,!0):e}function Gu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ec(n,e,t){e instanceof bo?(n.h=e,function zu(n,e){e&&!n.j&&(Fn(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(qd(this,r),rc(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=tc(e,Zy)),n.h=new bo(e,n.g))}function Nt(n,e,t){n.h.set(e,t)}function Hd(n){return Nt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zy),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zy(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tc(e,_g,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tc(e,_g,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(tc(t,"/"==t.charAt(0)?Wy:nc,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tc(t,fw)),n.join("")};var _g=/[#\/\?@]/g,nc=/[#\?:]/g,Wy=/[#\?]/g,Zy=/[#\?@]/g,fw=/#/g;function bo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fn(n){n.g||(n.g=new Xl,n.h=0,n.i&&function Gy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qd(n,e){Fn(n),e=Sn(n,e),oa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,oa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Bd(n)))}function zd(n,e){return Fn(n),e=Sn(n,e),oa(n.g.h,e)}function rc(n,e,t){qd(n,e),0<t.length&&(n.i=null,n.g.set(Sn(n,e),Lu(t)),n.h+=t.length)}function Sn(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Wd(n){this.l=n||Ky,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ea&&bt.g.Ea()&&bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=bo.prototype).add=function(n,e){Fn(this),this.i=null,n=Sn(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){Fn(this),this.g.forEach(function(t,r){sg(t,function(i){n.call(e,i,r,this)},this)},this)},Ye.T=function(){Fn(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},Ye.R=function(n){Fn(this);var e=[];if("string"==typeof n)zd(this,n)&&(e=Cd(e,this.g.get(Sn(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Cd(e,n[t])}return e},Ye.set=function(n,e){return Fn(this),this.i=null,zd(this,n=Sn(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Ky=10;function ii(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Wu(n){return n.h?1:n.g?n.g.size:0}function ic(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Af(n,e){n.g?n.g.add(e):n.h=e}function sc(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Zd(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Lu(n.i)}function Sf(){}function Kd(){this.g=new Sf}function Yy(n,e,t){const r=t||"";try{yg(n,function(i,u){let c=i;js(i)&&(c=Ws(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function za(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function oc(n){this.l=n.$b||null,this.j=n.ib||!1}function Yd(n,e){an.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Zu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wd.prototype.cancel=function(){if(this.i=Zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Sf.prototype.stringify=function(n){return bt.JSON.stringify(n,void 0)},Sf.prototype.parse=function(n){return bt.JSON.parse(n,void 0)},In(oc,hg),oc.prototype.g=function(){return new Yd(this.l,this.j)},oc.prototype.i=function(n){return function(){return n}}({}),In(Yd,an);var Zu=0;function Mf(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function mr(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Wa(n)}function Wa(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=Yd.prototype).open=function(n,e){if(this.readyState!=Zu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Wa(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mr(this)),this.readyState=Zu},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mf(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?mr(this):Wa(this),3==this.readyState&&Mf(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,mr(this))},Ye.Ta=function(n){this.g&&(this.response=n,mr(this))},Ye.ha=function(){this.g&&mr(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Yd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xf=bt.JSON.parse;function rr(n){an.call(this),this.headers=new Xl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Es,this.K=this.L=!1}In(rr,an);var Es="",ac=/^https?$/i,vg=["POST","PUT"];function Qy(n){return"content-type"==n.toLowerCase()}function Qd(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Eg(n),Jd(n)}function Eg(n){n.D||(n.D=!0,sn(n,"complete"),sn(n,"error"))}function bg(n){if(n.h&&void 0!==Bs&&(!n.C[1]||4!=y(n)||2!=n.ba()))if(n.v&&4==y(n))ug(n.Fa,0,n);else if(sn(n,"readystatechange"),4==y(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(jd)[1]||null;if(!i&&bt.self&&bt.self.location){var u=bt.self.location.protocol;i=u.substr(0,u.length-1)}r=!ac.test(i?i.toLowerCase():"")}t=r}if(t)sn(n,"complete"),sn(n,"success");else{n.m=6;try{var c=2<y(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",Eg(n)}}finally{Jd(n)}}}function Jd(n,e){if(n.g){Za(n);const t=n.g,r=n.C[0]?ka:null;n.g=null,n.C=null,e||sn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Za(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function y(n){return n.g?n.g.readyState:0}function f(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Es:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function w(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function m(n){let e="";return Uu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Nt(n,e,t))}function D(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function P(n){this.za=0,this.l=[],this.h=new Nd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=D("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=D("baseRetryDelayMs",5e3,n),this.$a=D("retryDelaySeedMs",1e4,n),this.Ya=D("forwardChannelMaxRetries",2,n),this.ra=D("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Wd(n&&n.concurrentRequestLimit),this.Ca=new Kd,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Z(n){if(Le(n),3==n.G){var e=n.V++,t=Yi(n.F);Nt(t,"SID",n.J),Nt(t,"RID",e),Nt(t,"TYPE","terminate"),Or(n,t),(e=new Yl(n,n.h,e,void 0)).K=2,e.v=Hd(Yi(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon&&(t=bt.navigator.sendBeacon(e.v.toString(),"")),!t&&bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=th(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Hu(e)}Pf(n)}function de(n){n.g&&(Co(n),n.g.cancel(),n.g=null)}function Le(n){de(n),n.u&&(bt.clearTimeout(n.u),n.u=null),Ya(n),n.i.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function Qe(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ut(n)}function ut(n){ii(n.i)||n.m||(n.m=!0,$l(n.Ha,n),n.C=0)}function Wn(n,e){var t;t=e?e.m:n.V++;const r=Yi(n.F);Nt(r,"SID",n.J),Nt(r,"RID",t),Nt(r,"AID",n.U),Or(n,r),n.o&&n.s&&w(r,n.o,n.s),t=new Yl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ka(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Af(n.i,t),Vd(t,r,e)}function Or(n,e){n.j&&yg({},function(t,r){Nt(e,r,t)})}function Ka(n,e,t){t=Math.min(n.l.length,t);var r=n.j?kn(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let b=i[_].h;const S=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),p=!1;else try{Yy(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Xd(n){n.g||n.u||(n.Y=1,$l(n.Ga,n),n.A=0)}function eh(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=vi(kn(n.Ga,n),lc(n,n.A)),n.A++,0))}function Co(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function uc(n){n.g=new Yl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Yi(n.oa);Nt(e,"RID","rpc"),Nt(e,"SID",n.J),Nt(e,"CI",n.N?"0":"1"),Nt(e,"AID",n.U),Or(n,e),Nt(e,"TYPE","xmlhttp"),n.o&&n.s&&w(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Hd(Yi(e)),t.s=null,t.U=!0,Ri(t,n)}function Ya(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function Rf(n,e){var t=null;if(n.g==e){Ya(n),Co(n),n.g=null;var r=2}else{if(!ic(n.i,e))return;t=e.D,sc(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;sn(r=Wl(),new dg(r,t,e,i)),ut(n)}else Xd(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function ft(n,e){return!(Wu(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=vi(kn(n.Ha,n,e),lc(n,n.C)),n.C++,0)))}(n,e)||2==r&&eh(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Io(n,5);break;case 4:Io(n,10);break;case 3:Io(n,6);break;default:Io(n,2)}}function lc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Io(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=kn(n.jb,n);t||(t=new qa("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||Eo(t,"https"),Hd(t)),function aa(n,e){const t=new Nd;if(bt.Image){const r=new Image;r.onload=ea(za,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ea(za,t,r,"TestLoadImage: error",!1,e),r.onabort=ea(za,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ea(za,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ri(2);n.G=0,n.j&&n.j.va(e),Pf(n),Le(n)}function Pf(n){n.G=0,n.I=-1,n.j&&((0!=Zd(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Lu(n.l),n.l.length=0),n.j.ua())}function Cg(n,e,t){let r=function qy(n){return n instanceof qa?Yi(n):new qa(n,void 0)}(t);if(""!=r.i)e&&$d(r,e+"."+r.i),Gu(r,r.m);else{const i=bt.location;r=function Gd(n,e,t,r){var i=new qa(null,void 0);return n&&Eo(i,n),e&&$d(i,e),t&&Gu(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Uu(n.aa,function(i,u){Nt(r,u,i)}),t=n.sa,(e=n.D)&&t&&Nt(r,e,t),Nt(r,"VER",n.ma),Or(n,r),r}function th(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rr(t&&n.Ba&&!n.qa?new oc({ib:!0}):n.qa)).L=n.H,e}function Ig(){}function Tg(){if(ni&&!(10<=Number(_s)))throw Error("Environmental error: no available transport.")}function Qi(n,e){an.call(this),this.g=new P(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ll(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ll(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ku(this)}function Dg(n){pg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Jy(){Kl.call(this),this.status=1}function Ku(n){this.g=n}(Ye=rr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fd.g(),this.C=function fg(n){return n.h||(n.h=n.i())}(this.u?this.u:Fd),this.g.onreadystatechange=kn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Qd(this,u)}n=t||"";const i=new Xl(this.headers);r&&yg(r,function(u,c){i.set(c,u)}),r=function og(n){e:{var e=Qy;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=bt.FormData&&n instanceof bt.FormData,!(0<=gf(vg,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Za(this),0<this.B&&((this.K=function wg(n){return ni&&function Sd(){return function ra(n){var e=ys;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mf(String(ar)).split("."),t=mf("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=Vu(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||Vu(0==i[2].length,0==u[2].length)||Vu(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kn(this.pa,this)):this.A=ug(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Qd(this,u)}},Ye.pa=function(){void 0!==Bs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sn(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,sn(this,"complete"),sn(this,"abort"),Jd(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jd(this,!0)),rr.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?bg(this):this.cb())},Ye.cb=function(){bg(this)},Ye.ba=function(){try{return 2<y(this)?this.g.status:-1}catch(n){return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xf(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=P.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Yl(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Id(u),Gr(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ka(this,i,e),Nt(t=Yi(this.F),"RID",n),Nt(t,"CVER",22),this.D&&Nt(t,"X-HTTP-Session-Id",this.D),Or(this,t),this.o&&u&&w(t,this.o,u),Af(this.i,i),this.Ra&&Nt(t,"TYPE","init"),this.ja?(Nt(t,"$req",e),Nt(t,"SID","null"),i.$=!0,Vd(i,t,null)):Vd(i,t,e),this.G=2}}else 3==this.G&&(n?Wn(this,n):0==this.l.length||ii(this.i)||Wn(this))},Ye.Ga=function(){if(this.u=null,uc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=vi(kn(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ri(10),de(this),uc(this))},Ye.ab=function(){null!=this.v&&(this.v=null,de(this),eh(this),ri(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ri(2)):(this.h.info("Failed to ping google.com"),ri(1))},(Ye=Ig.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},Tg.prototype.g=function(n,e){return new Qi(n,e)},In(Qi,an),Qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),$l(kn(n.hb,n,e))),ri(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Cg(n,null,n.W),ut(n)},Qi.prototype.close=function(){Z(this.g)},Qi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Qe(this.g,e)}else this.v?((e={}).__data__=Ws(n),Qe(this.g,e)):Qe(this.g,n)},Qi.prototype.M=function(){this.g.j=null,delete this.j,Z(this.g),delete this.g,Qi.Z.M.call(this)},In(Dg,pg),In(Jy,Kl),In(Ku,Ig),Ku.prototype.xa=function(){sn(this.g,"a")},Ku.prototype.wa=function(n){sn(this.g,new Dg(n))},Ku.prototype.va=function(n){sn(this.g,new Jy(n))},Ku.prototype.ua=function(){sn(this.g,"b")},Tg.prototype.createWebChannel=Tg.prototype.g,Qi.prototype.send=Qi.prototype.u,Qi.prototype.open=Qi.prototype.m,Qi.prototype.close=Qi.prototype.close,sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,kd.COMPLETE="complete",Hy.EventType=ju,ju.OPEN="a",ju.CLOSE="b",ju.ERROR="c",ju.MESSAGE="d",an.prototype.listen=an.prototype.N,rr.prototype.listenOnce=rr.prototype.O,rr.prototype.getLastError=rr.prototype.La,rr.prototype.getLastErrorCode=rr.prototype.Da,rr.prototype.getStatus=rr.prototype.ba,rr.prototype.getResponseJson=rr.prototype.Qa,rr.prototype.getResponseText=rr.prototype.ga,rr.prototype.send=rr.prototype.ea;var TI=yi.createWebChannelTransport=function(){return new Tg},DI=yi.getStatEventTarget=function(){return Wl()},Ag=yi.ErrorCode=sa,pw=yi.EventType=kd,cc=yi.Event=ia,Xy=yi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gw=yi.FetchXmlHttpFactory=oc,Sg=yi.WebChannel=Hy,Mg=yi.XhrIo=rr;const mw="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let dc="9.8.0";const Qa=new Pr.Yd("@firebase/firestore");function Of(){return Qa.logLevel}function ke(n,...e){if(Qa.logLevel<=Pr.in.DEBUG){const t=e.map(Nf);Qa.debug(`Firestore (${dc}): ${n}`,...t)}}function Zn(n,...e){if(Qa.logLevel<=Pr.in.ERROR){const t=e.map(Nf);Qa.error(`Firestore (${dc}): ${n}`,...t)}}function nh(n,...e){if(Qa.logLevel<=Pr.in.WARN){const t=e.map(Nf);Qa.warn(`Firestore (${dc}): ${n}`,...t)}}function Nf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+n;throw Zn(e),new Error(e)}function Mt(n,e){n||st()}function Ze(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class e_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class _w{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AS{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new zr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,ge.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new zr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new e_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new qr(e)}}class vw{constructor(e,t,r){this.type="FirstParty",this.user=qr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class AI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new vw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.p=t.token,new n_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function MI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Kn.A=-1;class r_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=MI(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function rh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ww(n){return n+"\0"}class ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new ur(0,0))}static max(){return new It(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ew(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xt{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends xt{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const Cw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends xt{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return Cw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class Ja{constructor(e){this.fields=e,e.sort(yr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const xI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ua(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=xI.exec(n);if(Mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xa(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function xg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Rg(n){const e=n.mapValue.fields.__previous_value__;return xg(e)?Rg(e):e}function Pg(n){const e=ua(n.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}class Iw{constructor(e,t,r,i,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yu&&e.projectId===this.projectId&&e.database===this.database}}function Qu(n){return null==n}function Ju(n){return 0===n&&1/n==-1/0}function Og(n){return"number"==typeof n&&Number.isInteger(n)&&!Ju(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(Kt.fromString(e))}static fromName(e){return new je(Kt.fromString(e).popFirst(5))}static empty(){return new je(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Kt(e.slice()))}}const la={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},i_={nullValue:"NULL_VALUE"};function fc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xg(n)?4:RI(n)?9007199254740991:10:st()}function ca(n,e){if(n===e)return!0;const t=fc(n);if(t!==fc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pg(n).isEqual(Pg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=ua(r.timestampValue),c=ua(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Xa(n.bytesValue).isEqual(Xa(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fn(r.geoPointValue.latitude)===fn(i.geoPointValue.latitude)&&fn(r.geoPointValue.longitude)===fn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fn(r.integerValue)===fn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=fn(r.doubleValue),c=fn(i.doubleValue);return u===c?Ju(u)===Ju(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return rh(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Ew(u)!==Ew(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!ca(u[p],c[p])))return!1;return!0}(n,e);default:return st()}var i}function Ff(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function Xu(n,e){if(n===e)return 0;const t=fc(n),r=fc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=fn(i.integerValue||i.doubleValue),p=fn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return s_(n.timestampValue,e.timestampValue);case 4:return s_(Pg(n),Pg(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Xa(i),p=Xa(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const b=Ft(c[_],p[_]);if(0!==b)return b}return Ft(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Ft(fn(i.latitude),fn(u.latitude));return 0!==c?c:Ft(fn(i.longitude),fn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const b=Xu(c[_],p[_]);if(b)return b}return Ft(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===la.mapValue&&u===la.mapValue)return 0;if(i===la.mapValue)return 1;if(u===la.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=u.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const M=Ft(p[S],b[S]);if(0!==M)return M;const F=Xu(c[p[S]],_[b[S]]);if(0!==F)return F}return Ft(p.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function s_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=ua(n),r=ua(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function Lf(n){return o_(n)}function o_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ua(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xa(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=o_(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${o_(r.fields[p])}`;return u+"}"}(n.mapValue):st();var e}function ih(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ng(n){return!!n&&"integerValue"in n}function sh(n){return!!n&&"arrayValue"in n}function Tw(n){return!!n&&"nullValue"in n}function kg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function a_(n){return!!n&&"mapValue"in n}function Fg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function MS(n){return"nullValue"in n?i_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ih(Yu.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function xS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ih(Yu.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?la:st()}function PI(n,e){const t=Xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function OI(n,e){const t=Xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!a_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fg(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Fg(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());a_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];a_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Pi(Fg(this.value))}}function NI(n){const e=[];return hc(n.fields,(t,r)=>{const i=new yr([t]);if(a_(r)){const u=NI(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Ja(e)}class Ln{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Ln(e,0,It.min(),It.min(),Pi.empty(),0)}static newFoundDocument(e,t,r){return new Ln(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new Ln(e,2,t,It.min(),Pi.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,It.min(),Pi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Do{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Vf(n){return n.fields.find(e=>2===e.kind)}function pc(n){return n.fields.filter(e=>2!==e.kind)}Do.UNKNOWN_ID=-1;class Uf{constructor(e,t){this.fieldPath=e,this.kind=t}}class gc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gc(0,Ao.min())}}function u_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new ur(t+1,0):new ur(t,r));return new Ao(i,je.empty(),e)}function l_(n){return new Ao(n.readTime,n.key,-1)}class Ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ao(It.min(),je.empty(),-1)}static max(){return new Ao(It.max(),je.empty(),-1)}}function eu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class ir{constructor(e,t){this.comparator=e,this.root=t||Nr.EMPTY}insert(e,t){return new ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lg(this.root,e,this.comparator,!0)}}class Lg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Nr.RED,this.left=null!=i?i:Nr.EMPTY,this.right=null!=u?u:Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Nr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1,Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Nr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tn{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new c_(this.data.getIterator())}getIteratorFrom(e){return new c_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class c_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function oh(n){return n.hasNext()?n.getNext():void 0}class kI{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function ah(n,e=null,t=[],r=[],i=null,u=null,c=null){return new kI(n,e,t,r,i,u,c)}function Zs(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Lf(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Qu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lf(r)).join(",")),e.P=t}return e.P}function da(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xw(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pw(n.startAt,e.startAt)&&Pw(n.endAt,e.endAt)}function el(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tu(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function Dw(n,e,t){let r=i_,i=!0;for(const u of tu(n,e)){let c=i_,p=!0;switch(u.op){case"<":case"<=":c=MS(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=i_}PI({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];PI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function h_(n,e,t){let r=la,i=!0;for(const u of tu(n,e)){let c=la,p=!0;switch(u.op){case">=":case">":c=xS(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=la}OI({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];OI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new f_(e,t,r):"array-contains"===t?new FI(e,r):"in"===t?new Sw(e,r):"not-in"===t?new RS(e,r):"array-contains-any"===t?new Mw(e,r):new Wr(e,t,r)}static V(e,t,r){return"in"===t?new p_(e,r):new Aw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xu(t,this.value)):null!==t&&fc(this.value)===fc(t)&&this.v(Xu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class f_ extends Wr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class p_ extends Wr{constructor(e,t){super(e,"in",t),this.keys=Bf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Aw extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=Bf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bf(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class FI extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sh(t)&&Ff(t.arrayValue,this.value)}}class Sw extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ff(this.value.arrayValue,t)}}class RS extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ff(this.value.arrayValue,t)}}class Mw extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ff(this.value.arrayValue,r))}}class nu{constructor(e,t){this.position=e,this.inclusive=t}}class uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function xw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Rw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?je.comparator(je.fromName(c.referenceValue),t.key):Xu(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Pw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class lr{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function Ow(n,e,t,r,i,u,c,p){return new lr(n,e,t,r,i,u,c,p)}function lh(n){return new lr(n)}function Nw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vg(n){for(const e of n.filters)if(e.S())return e.field;return null}function kw(n){return null!==n.collectionGroup}function ch(n){const e=Ze(n);if(null===e.D){e.D=[];const t=Vg(e),r=Nw(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new uh(t)),e.D.push(new uh(yr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new uh(yr.keyField(),u))}}}return e.D}function Ji(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=ah(e.path,e.collectionGroup,ch(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ch(e))t.push(new uh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new nu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new nu(e.startAt.position,e.startAt.inclusive):null;e.C=ah(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function g_(n,e,t){return new lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jf(n,e){return da(Ji(n),Ji(e))&&n.limitType===e.limitType}function Fw(n){return`${Zs(Ji(n))}|lt:${n.limitType}`}function m_(n){return`Query(target=${function d_(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Lf(r.value)}`;var r}).join(", ")}]`),Qu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Lf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Lf(t)).join(",")),`Target(${e})`}(Ji(n))}; limitType=${n.limitType})`}function Ug(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=Rw(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,ch(t),r)||t.endAt&&!function(i,u,c){const p=Rw(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,ch(t),r)));var t,r}function Lw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y_(n){return(e,t)=>{let r=!1;for(const i of ch(n)){const u=LI(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function LI(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),_=c.data.field(i);return null!==p&&null!==_?Xu(p,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Vw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function __(n){return{integerValue:""+n}}function v_(n,e){return Og(e)?__(e):Vw(n,e)}class Bg{constructor(){this._=void 0}}function ha(n,e,t){return n instanceof dh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof hh?E_(n,e):n instanceof mc?Bw(n,e):function(r,i){const u=Uw(r,i),c=jg(u)+jg(r.k);return Ng(u)&&Ng(r.k)?__(c):Vw(r.M,c)}(n,e)}function w_(n,e,t){return n instanceof hh?E_(n,e):n instanceof mc?Bw(n,e):t}function Uw(n,e){return n instanceof fh?Ng(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class dh extends Bg{}class hh extends Bg{constructor(e){super(),this.elements=e}}function E_(n,e){const t=jw(e);for(const r of n.elements)t.some(i=>ca(i,r))||t.push(r);return{arrayValue:{values:t}}}class mc extends Bg{constructor(e){super(),this.elements=e}}function Bw(n,e){let t=jw(e);for(const r of n.elements)t=t.filter(i=>!ca(i,r));return{arrayValue:{values:t}}}class fh extends Bg{constructor(e,t){super(),this.M=e,this.k=t}}function jg(n){return fn(n.integerValue||n.doubleValue)}function jw(n){return sh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $f{constructor(e,t){this.field=e,this.transform=t}}class b_{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ph(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gh{}function $w(n,e,t){n instanceof Hf?function(r,i,u){const c=r.value.clone(),p=I_(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof tl?function(r,i,u){if(!ph(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=I_(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(C_(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hw(n,e,t){var i;n instanceof Hf?function(r,i,u){if(!ph(r.precondition,i))return;const c=r.value.clone(),p=T_(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(VI(i),c).setHasLocalMutations()}(n,e,t):n instanceof tl?function(r,i,u){if(!ph(r.precondition,i))return;const c=T_(r.fieldTransforms,u,i),p=i.data;p.setAll(C_(r)),p.setAll(c),i.convertToFoundDocument(VI(i),p).setHasLocalMutations()}(n,e,t):ph(n.precondition,i=e)&&i.convertToNoDocument(It.min())}function OS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=Uw(r.transform,i||null);null!=u&&(null==t&&(t=Pi.empty()),t.set(r.field,u))}return t||null}function Hg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rh(t,r,(i,u)=>function $g(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof hh&&r instanceof hh||t instanceof mc&&r instanceof mc?rh(t.elements,r.elements,ca):t instanceof fh&&r instanceof fh?ca(t.k,r.k):t instanceof dh&&r instanceof dh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function VI(n){return n.isFoundDocument()?n.version:It.min()}class Hf extends gh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class tl extends gh{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function C_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function I_(n,e,t){const r=new Map;Mt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,w_(c,p,t[i]))}return r}function T_(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,ha(u,c,e))}return r}class mh extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class So extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Gg{constructor(e){this.count=e}}var wr,Qt;function UI(n){switch(n){default:return st();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function qg(n){if(void 0===n)return Zn("GRPC error has no .code"),he.UNKNOWN;switch(n){case wr.OK:return he.OK;case wr.CANCELLED:return he.CANCELLED;case wr.UNKNOWN:return he.UNKNOWN;case wr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case wr.INTERNAL:return he.INTERNAL;case wr.UNAVAILABLE:return he.UNAVAILABLE;case wr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case wr.NOT_FOUND:return he.NOT_FOUND;case wr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case wr.ABORTED:return he.ABORTED;case wr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case wr.DATA_LOSS:return he.DATA_LOSS;default:return st()}}(Qt=wr||(wr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class ru{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return bw(this.inner)}size(){return this.innerSize}}const D_=new ir(je.comparator);function wi(){return D_}const BI=new ir(je.comparator);function Gf(...n){let e=BI;for(const t of n)e=e.insert(t.key,t);return e}function yh(){return new ru(n=>n.toString(),(n,e)=>n.isEqual(e))}const Gw=new ir(je.comparator),qw=new Tn(je.comparator);function pn(...n){let e=qw;for(const t of n)e=e.add(t);return e}const A_=new Tn(Ft);function zg(){return A_}class qf{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,t)),new qf(It.min(),r,zg(),wi(),pn())}}class _h{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new _h(_r.EMPTY_BYTE_STRING,t,pn(),pn(),pn())}}class iu{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class S_{constructor(e,t){this.targetId=e,this.$=t}}class zw{constructor(e,t,r=_r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ww{constructor(){this.B=0,this.L=Kw(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=pn(),t=pn(),r=pn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new _h(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Kw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class vh{constructor(e){this.nt=e,this.st=new Map,this.it=wi(),this.rt=Zw(),this.ot=new Tn(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(el(u))if(0===r){const c=new je(u.path);this.ct(t,c,Ln.newNoDocument(c,It.min()))}else Mt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&el(p.target)){const _=new je(p.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,Ln.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=pn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new qf(e,t,this.ot,this.it,r);return this.it=wi(),this.rt=Zw(),this.ot=new Tn(Ft),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ww,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Tn(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ww),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Zw(){return new ir(je.comparator)}function Kw(){return new ir(je.comparator)}const jI={asc:"ASCENDING",desc:"DESCENDING"},$I={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fa{constructor(e,t){this.databaseId=e,this.N=t}}function yc(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(n,e){return n.N?e.toBase64():e.toUint8Array()}function Yw(n,e){return yc(n,e.toTimestamp())}function kr(n){return Mt(!!n),It.fromTimestamp(function(e){const t=ua(e);return new ur(t.seconds,t.nanos)}(n))}function Wg(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Qw(n){const e=Kt.fromString(n);return Mt(iE(e)),e}function zf(n,e){return Wg(n.databaseId,e.path)}function pa(n,e){const t=Qw(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(P_(t))}function x_(n,e){return Wg(n.databaseId,e)}function R_(n){const e=Qw(n);return 4===e.length?Kt.emptyPath():P_(e)}function Zg(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function P_(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Jw(n,e,t){return{name:zf(n,e),fields:t.value.mapValue.fields}}function Xw(n,e,t){const r=pa(n,e.name),i=kr(e.updateTime),u=new Pi({mapValue:{fields:e.fields}}),c=Ln.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function _c(n,e){let t;if(e instanceof Hf)t={update:Jw(n,e.key,e.value)};else if(e instanceof mh)t={delete:zf(n,e.key)};else if(e instanceof tl)t={update:Jw(n,e.key,e.data),updateMask:k_(e.fieldMask)};else{if(!(e instanceof So))return st();t={verify:zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof dh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof hh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof mc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof fh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Yw(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function O_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?vr.updateTime(kr(i.updateTime)):void 0!==i.exists?vr.exists(i.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Mt("REQUEST_TIME"===c.setToServerValue),p=new dh):"appendMissingElements"in c?p=new hh(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new mc(c.removeAllFromArray.values||[]):"increment"in c?p=new fh(u,c.increment):st();const _=yr.fromServerFormat(c.fieldPath);return new $f(_,p)}(n,i)):[];var i;if(e.update){const i=pa(n,e.update.name),u=new Pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Ja((e.updateMask.fieldPaths||[]).map(b=>yr.fromServerFormat(b)));return new tl(i,u,c,t,r)}return new Hf(i,u,t,r)}if(e.delete){const i=pa(n,e.delete);return new mh(i,t)}if(e.verify){const i=pa(n,e.verify);return new So(i,t)}return st()}function N_(n,e){return{documents:[x_(n,e.path)]}}function HI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=x_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=x_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(S=>function(M){if("=="===M.op){if(kg(M.value))return{unaryFilter:{field:vc(M.field),op:"IS_NAN"}};if(Tw(M.value))return{unaryFilter:{field:vc(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(kg(M.value))return{unaryFilter:{field:vc(M.field),op:"IS_NOT_NAN"}};if(Tw(M.value))return{unaryFilter:{field:vc(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vc(M.field),op:nE(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:vc((S=b).field),direction:tE(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Qu(b)?b:{value:b});var b,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Ks(n){let e=R_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=GI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new uh(wh((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(S){let M;return M="object"==typeof S?S.value:S,Qu(M)?null:M}(t.limit));let _=null;var S;t.startAt&&(_=new nu((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new nu(S.values||[],!S.before)}(t.endAt)),Ow(e,i,c,u,p,"F",_,b)}function GI(n){return n?void 0!==n.unaryFilter?[rE(n)]:void 0!==n.fieldFilter?[LS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>GI(e)).reduce((e,t)=>e.concat(t)):st():[]}function tE(n){return jI[n]}function nE(n){return $I[n]}function vc(n){return{fieldPath:n.canonicalString()}}function wh(n){return yr.fromServerFormat(n.fieldPath)}function LS(n){return Wr.create(wh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function rE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=wh(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=wh(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wh(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=wh(n.unaryFilter.field);return Wr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function k_(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sE(e)),e=qI(n.get(t),e);return sE(e)}function qI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function sE(n){return n+"\x01\x01"}function ga(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:st()}u=c+2}return new Kt(r)}const oE=["userId","batchId"];function Kg(n,e){return[n,si(e)]}function aE(n,e,t){return[n,si(e),t]}const Yg={},Eh=["prefixPath","collectionGroup","readTime","documentId"],zI=["prefixPath","collectionGroup","documentId"],Wf=["collectionGroup","readTime","prefixPath","documentId"],WI=["canonicalId","targetId"],ZI=["targetId","path"],F_=["path","targetId"],ma=["collectionId","parent"],Zf=["indexId","uid"],Ei=["uid","sequenceNumber"],wc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qg=["indexId","uid","orderedDocumentKey"],Ys=["userId","collectionPath","documentId"],L_=["userId","collectionPath","largestBatchId"],bh=["userId","collectionGroup","largestBatchId"],Ec=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ch=[...Ec,"documentOverlays"],bc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ih=[...bc,"indexConfiguration","indexState","indexEntries"],Cc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ic{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class su{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new zr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Th(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Jg(r.target.error);this.At.reject(new Th(e,i))}}static open(e,t,r,i){try{return new su(t,e.transaction(i,r))}catch(u){throw new Th(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lE(t)}}class Qs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Qs.Vt((0,gt.z$)())&&Zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),rl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,gt.hl)())return!1;if(Qs.St())return!0;const e=(0,gt.z$)(),t=Qs.Vt(e),r=0<t&&t<10,i=Qs.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ge.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Re(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Th(e,p))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ge.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const _=su.open(u.db,e,c?"readonly":"readwrite",r),b=i(_).next(S=>(_.bt(),S)).catch(S=>(_.abort(S),le.reject(S))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),u.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uE{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return rl(this.Ft.delete())}}class Th extends Re{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nl(n){return"IndexedDbTransactionError"===n.name}class lE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),rl(this.store.add(e))}get(e){return rl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),rl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),rl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new le((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=u=>{const c=Jg(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new le((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new uE(p),b=t(p.primaryKey,p.value,_);if(b instanceof le){const S=b.catch(M=>(_.done(),le.reject(M)));r.push(S)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rl(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Jg(r.target.error);t(i)}})}let V_=!1;function Jg(n){const e=Qs.Vt((0,gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return V_||(V_=!0,setTimeout(()=>{throw r},0)),r}}return n}class U_ extends Ic{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Ze(n);return Qs.xt(t.Ht,e)}class Xg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&$w(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Hw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Hw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pn())}isEqual(e){return this.batchId===e.batchId&&rh(this.mutations,e.mutations,(t,r)=>Hg(t,r))&&rh(this.baseMutations,e.baseMutations,(t,r)=>Hg(t,r))}}class B_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mt(e.mutations.length===r.length);let i=Gw;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new B_(e,t,r,i)}}class j_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ou{constructor(e,t,r,i,u=It.min(),c=It.min(),p=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class cE{constructor(e){this.Jt=e}}function $_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:em(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:zf(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:yc(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:il(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:il(e.version)}}var i,u;return r}function em(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function il(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tc(n){const e=new ur(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Dh(n,e){const t=(e.baseMutations||[]).map(u=>O_(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>O_(n.Jt,u)),i=ur.fromMillis(e.localWriteTimeMs);return new Xg(e.batchId,i,t,r)}function tm(n){const e=Tc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tc(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(Mt(1===(i=n.query).documents.length),r=Ji(lh(R_(i.documents[0])))):r=Ji(Ks(n.query)),new ou(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function dE(n,e){const t=il(e.snapshotVersion),r=il(e.lastLimboFreeSnapshotVersion);let i;i=el(e.target)?N_(n.Jt,e.target):HI(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zs(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kf(n){const e=Ks({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?g_(e,e.limit,"L"):e}function Yf(n,e){return new j_(e.largestBatchId,O_(n.Jt,e.overlayMutation))}function hE(n,e){const t=e.path.lastSegment();return[n,si(e.path.popLast()),t]}class VS{getBundleMetadata(e,t){return YI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Tc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return YI(e).put({bundleId:(r=t).id,createTime:il(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return QI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Kf(i.bundledQuery),readTime:Tc(i.readTime)};var i})}saveNamedQuery(e,t){return QI(e).put({name:(r=t).name,readTime:il(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function YI(n){return Zr(n,"bundles")}function QI(n){return Zr(n,"namedQueries")}class H_{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new H_(e,t.uid||"")}getOverlay(e,t){return Ah(e).get(hE(this.userId,t)).next(r=>r?Yf(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new j_(t,c);i.push(this.Xt(e,p))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(si(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Ah(e).Qt("collectionPathOverlayIndex",p))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const i=yh(),u=si(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ah(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const b=Yf(this.M,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=yh();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ah(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,b,S)=>{const M=Yf(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return Ah(e).put(function(r,i,u){const[c,p,_]=hE(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:_c(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Ah(n){return Zr(n,"documentOverlays")}class Sh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(fn(e.integerValue));else if("doubleValue"in e){const r=fn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ju(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Xa(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?RI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function JI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Dc(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=JI(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Sh.fe=new Sh;class XI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Dc(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Dc(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class fE{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class eT{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Mh{constructor(){this.De=new XI,this.Ce=new fE(this.De),this.xe=new eT(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ya{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ya(this.indexId,this.documentKey,this.arrayValue,r)}}function Ac(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=G_(n.arrayValue,e.arrayValue),0!==t?t:(t=G_(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function G_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class tT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Vf(e);if(void 0!==t&&!this.Be(t))return!1;const r=pc(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class nT{constructor(){this.qe=new q_}addToCollectionParentIndex(e,t){return this.qe.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ao.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class q_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(Kt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(Kt.comparator)).toArray()}}const nm=new Uint8Array(0);class rT{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new q_,this.Ge=new ru(r=>Zs(r),(r,i)=>da(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:si(i)};return z_(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ww(t),""],!1,!0);return z_(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ga(c.parent))}return r})}addFieldIndex(e,t){const r=Jf(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Jf(e),i=Xf(e),u=Qf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Qf(e);let i=!0;const u=new Map;return le.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=pn();const p=[];return le.forEach(u,(_,b)=>{var S;ke("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Zs(t)}`);const M=function(tt,qe){const At=Vf(qe);if(void 0===At)return null;for(const Rt of tu(tt,At.fieldPath))switch(Rt.op){case"array-contains-any":return Rt.value.arrayValue.values||[];case"array-contains":return[Rt.value]}return null}(b,_),F=function(tt,qe){const At=new Map;for(const Rt of pc(qe))for(const en of tu(tt,Rt.fieldPath))switch(en.op){case"==":case"in":At.set(Rt.fieldPath.canonicalString(),en.value);break;case"not-in":case"!=":return At.set(Rt.fieldPath.canonicalString(),en.value),Array.from(At.values())}return null}(b,_),B=function(tt,qe){const At=[];let Rt=!0;for(const en of pc(qe)){const Lr=0===en.kind?Dw(tt,en.fieldPath,tt.startAt):h_(tt,en.fieldPath,tt.startAt);At.push(Lr.value),Rt&&(Rt=Lr.inclusive)}return new nu(At,Rt)}(b,_),z=function(tt,qe){const At=[];let Rt=!0;for(const en of pc(qe)){const Lr=0===en.kind?h_(tt,en.fieldPath,tt.endAt):Dw(tt,en.fieldPath,tt.endAt);At.push(Lr.value),Rt&&(Rt=Lr.inclusive)}return new nu(At,Rt)}(b,_),ce=this.We(_,b,B),De=this.We(_,b,z),it=this.ze(_,b,F),ot=this.He(_.indexId,M,ce,B.inclusive,De,z.inclusive,it);return le.forEach(ot,tt=>r.Gt(tt,t.limit).next(qe=>{qe.forEach(At=>{const Rt=je.fromSegments(At.documentKey);c.has(Rt)||(c=c.add(Rt),p.push(Rt))})}))}).next(()=>p)}return le.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),S=[];for(let M=0;M<_;++M){const F=t?this.Je(t[M/b]):nm,B=this.Ye(e,F,r[M%b],i),z=this.Xe(e,F,u[M%b],c),ce=p.map(De=>this.Ye(e,F,De,!0));S.push(...this.createRange(B,z,ce))}return S}Ye(e,t,r,i){const u=new ya(e,je.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new ya(e,je.empty(),t,r);return i?u.ke():u}je(e,t){const r=new tT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return le.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new Tn(yr.comparator),_=!1;for(const b of c.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?_=!0:p=p.add(S.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Mh;for(const i of pc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);Sh.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Mh;return Sh.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Mh;return Sh.fe.Zt(ih(this.databaseId,t),r.Ne(function(i){const u=pc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Mh);let u=0;for(const c of pc(e)){const p=r[u++];for(const _ of i)if(this.en(t,c.fieldPath)&&sh(p))i=this.nn(i,c,p);else{const b=_.Ne(c.kind);Sh.fe.Zt(p,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new Mh;_.seed(p.Se()),Sh.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Jf(e),i=Xf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return le.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(b,S){const M=S?new gc(S.sequenceNumber,new Ao(Tc(S.readTime),new je(ga(S.documentKey)),S.largestBatchId)):gc.empty(),F=b.fields.map(([B,z])=>new Uf(yr.fromServerFormat(B),z));return new Do(b.indexId,b.collectionGroup,F,M)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Jf(e),u=Xf(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>le.forEach(p,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:il((F=r).readTime),documentKey:si(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?le.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),le.forEach(p,_=>this.on(e,i,_).next(b=>{const S=this.un(u,_);return b.isEqual(S)?le.resolve():this.an(e,u,_,b,S)}))))})}cn(e,t,r,i){return Qf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Qf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Qf(e);let u=new Tn(Ac);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new ya(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new Tn(Ac);const i=this.Ze(t,e);if(null==i)return r;const u=Vf(t);if(null!=u){const c=e.data.field(u.fieldPath);if(sh(c))for(const p of c.arrayValue.values||[])r=r.add(new ya(t.indexId,e.key,this.Je(p),i))}else r=r.add(new ya(t.indexId,e.key,nm,i));return r}an(e,t,r,i,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,b,S,M){const F=p.getIterator(),B=_.getIterator();let z=oh(F),ce=oh(B);for(;z||ce;){let De=!1,it=!1;if(z&&ce){const ot=b(z,ce);ot<0?it=!0:ot>0&&(De=!0)}else null!=z?it=!0:De=!0;De?(S(ce),ce=oh(B)):it?(M(z),z=oh(F)):(z=oh(F),ce=oh(B))}}(i,u,Ac,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),le.waitFor(c)}rn(e){let t=1;return Xf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Ac(c,p)).filter((c,p,_)=>!p||0!==Ac(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=Ac(c,e),_=Ac(c,t);if(0===p)i[0]=e.ke();else if(p>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,nm,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,nm,[]]));return u}getMinOffset(e,t){let r;return le.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||eu(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Ao.min()})).next(()=>r)}}function z_(n){return Zr(n,"collectionParents")}function Qf(n){return Zr(n,"indexEntries")}function Jf(n){return Zr(n,"indexConfiguration")}function Xf(n){return Zr(n,"indexState")}const rm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bs(e,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function im(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:c},(S,M,F)=>(p++,F.delete()));u.push(_.next(()=>{Mt(1===p)}));const b=[];for(const S of t.mutations){const M=aE(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return le.waitFor(u).next(()=>b)}function sm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class pE{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new pE(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return au(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=sl(e),c=au(e);return c.add({}).next(p=>{Mt("number"==typeof p);const _=new Xg(p,t,r,i),b=function(F,B,z){const ce=z.baseMutations.map(it=>_c(F.Jt,it)),De=z.mutations.map(it=>_c(F.Jt,it));return{userId:B,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ce,mutations:De}}(this.M,this.userId,_),S=[];let M=new Tn((F,B)=>Ft(F.canonicalString(),B.canonicalString()));for(const F of i){const B=aE(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(B,Yg))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[p]=_.keys()}),le.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return au(e).get(t).next(r=>r?(Mt(r.userId===this.userId),Dh(this.M,r)):null)}fn(e,t){return this.ln[t]?le.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return au(e).Wt({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(Mt(p.batchId>=r),u=Dh(this.M,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return au(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return au(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Dh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return sl(e).Wt({range:i},(c,p,_)=>{const[b,S,M]=c,F=ga(S);if(b===this.userId&&t.path.isEqual(F))return au(e).get(M).next(B=>{if(!B)throw st();Mt(B.userId===this.userId),u.push(Dh(this.M,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Ft);const i=[];return t.forEach(u=>{const c=Kg(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=sl(e).Wt({range:p},(b,S,M)=>{const[F,B,z]=b,ce=ga(B);F===this.userId&&u.path.isEqual(ce)?r=r.add(z):M.done()});i.push(_)}),le.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Kg(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Tn(Ft);return sl(e).Wt({range:c},(_,b,S)=>{const[M,F,B]=_,z=ga(F);M===this.userId&&r.isPrefixOf(z)?z.length===i&&(p=p.add(B)):S.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(au(e).get(u).next(c=>{if(null===c)throw st();Mt(c.userId===this.userId),r.push(Dh(this.M,c))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return im(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return sl(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=ga(u[1]);i.push(_)}else p.done()}).next(()=>{Mt(0===i.length)})})}containsKey(e,t){return xh(e,this.userId,t)}wn(e){return om(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xh(n,e,t){const r=Kg(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return sl(n).Wt({range:u,jt:!0},(p,_,b)=>{const[S,M,F]=p;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function au(n){return Zr(n,"mutations")}function sl(n){return Zr(n,"documentMutations")}function om(n){return Zr(n,"mutationQueues")}class Sc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Sc(0)}static yn(){return new Sc(-1)}}class am{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Sc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>It.fromTimestamp(new ur(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>uu(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return uu(e).Wt((c,p)=>{const _=tm(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(u)).next(()=>i)}forEachTarget(e,t){return uu(e).Wt((r,i)=>{const u=tm(i);t(u)})}pn(e){return um(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}In(e,t){return um(e).put("targetGlobalKey",t)}Tn(e,t){return uu(e).put(dE(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zs(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return uu(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const b=tm(p);da(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Mc(e);return t.forEach(c=>{const p=si(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Mc(e);return le.forEach(t,u=>{const c=si(u.path);return le.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Mc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Mc(e);let u=pn();return i.Wt({range:r,jt:!0},(c,p,_)=>{const b=ga(c[1]),S=new je(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=si(t.path),i=IDBKeyRange.bound([r],[ww(r)],!1,!0);let u=0;return Mc(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return uu(e).get(t).next(r=>r?tm(r):null)}}function uu(n){return Zr(n,"targets")}function um(n){return Zr(n,"targetGlobal")}function Mc(n){return Zr(n,"targetDocuments")}function xc(n){return ep.apply(this,arguments)}function ep(){return ep=(0,ge.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==Cc)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),ep.apply(this,arguments)}function lm([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class gE{constructor(e){this.An=e,this.buffer=new Tn(lm),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mE{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ge.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){nl(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield xc(i)}yield t.Sn(e)}))}}class W_{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Kn.A);const r=new gE(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(rm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rm):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,p,_,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Of()<=Pr.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${M} documents in `+(b-_)+`ms\nTotal Duration: ${b-S}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class yE{constructor(e,t){this.db=e,this.garbageCollector=new W_(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return tp(e,r)}removeReference(e,t,r){return tp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tp(e,t)}On(e,t){return function(r,i){let u=!1;return om(r).zt(c=>xh(r,c,i).next(p=>(p&&(u=!0),le.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const _=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,It.min()),Mc(e).delete([0,si(c.path)])))});i.push(_)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tp(e,t)}Mn(e,t){const r=Mc(e);let i,u=Kn.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:b})=>{0===c?(u!==Kn.A&&t(new je(ga(i)),u),u=b,i=_):u=Kn.A}).next(()=>{u!==Kn.A&&t(new je(ga(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tp(n,e){return Mc(n).put((r=n.currentSequenceNumber,{targetId:0,path:si(e.path),sequenceNumber:r}));var r}class cm{constructor(){this.changes=new ru(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _E{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ol(e).put(r)}removeEntry(e,t,r){return ol(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],em(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Ln.newInvalidDocument(t);return ol(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rc(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Ln.newInvalidDocument(t)};return ol(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rc(t))},(i,u)=>{r={document:this.$n(t,u),size:sm(u)}}).next(()=>r)}getEntries(e,t){let r=wi();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=wi(),i=new ir(je.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),i=i.insert(u,sm(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return le.resolve();let i=new Tn(vE);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Rc(i.first()),Rc(i.last())),c=i.getIterator();let p=c.getNext();return ol(e).Wt({index:"documentKeyIndex",range:u},(_,b,S)=>{const M=je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&vE(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?S.Ut(Rc(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),em(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ol(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=wi();for(const _ of c){const b=this.$n(je.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=wi();const c=K_(t,r),p=K_(t,Ao.max());return ol(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,b,S)=>{const M=this.$n(je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new iT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Z_(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}Fn(e,t){return Z_(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function KI(n,e){let t;if(e.document)t=Xw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),i=Tc(e.noDocument.readTime);t=Ln.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=je.fromSegments(e.unknownDocument.path),i=Tc(e.unknownDocument.version);t=Ln.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ur(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Ln.newInvalidDocument(e)}}class iT extends cm{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new ru(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Tn((u,c)=>Ft(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=$_(this.Kn.M,c);i=i.add(u.path.popLast()),r+=sm(_)-p.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=$_(this.Kn.M,c.convertToNoDocument(It.min()));t.push(this.Kn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Z_(n){return Zr(n,"remoteDocumentGlobal")}function ol(n){return Zr(n,"remoteDocumentsV14")}function Rc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function K_(n,e){const t=e.documentKey.path.toArray();return[n,em(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Ft(t[u],r[u]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class sT{constructor(e){this.M=e}kt(e,t,r,i){const u=new su("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oE,{unique:!0}),p.createObjectStore("documentMutations"),wE(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=le.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),wE(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oE,{unique:!0});const S=_.store("mutations"),M=b.map(F=>S.put(F));return le.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:Ys});_.createIndex("collectionPathOverlayIndex",L_,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",bh,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:Eh});_.createIndex("documentKeyIndex",zI),_.createIndex("collectionGroupIndex",Wf)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:Zf}).createIndex("sequenceNumberIndex",Ei,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:wc}).createIndex("documentKeyIndex",Qg,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=sm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>le.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>le.forEach(p,_=>{Mt(_.userId===u.userId);const b=Dh(this.M,_);return im(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const _=new Kt(c),b=[0,si(_)];u.push(t.get(b).next(S=>S?le.resolve():t.put({targetId:0,path:si(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:ma});const r=t.store("collectionParents"),i=new q_,u=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:si(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const _=new Kt(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,_],b)=>{const S=ga(p);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=tm(i),c=dE(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(b=c,b.document?new je(Kt.fromString(b.document.name).popFirst(5)):b.noDocument?je.fromSegments(b.noDocument.path):b.unknownDocument?je.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(S))}).next(()=>le.waitFor(i))}}function wE(n){n.createObjectStore("targetDocuments",{keyPath:ZI}).createIndex("documentTargetsIndex",F_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WI,{unique:!0}),n.createObjectStore("targetGlobal")}const np="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rp{constructor(e,t,r,i,u,c,p,_,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=S,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!rp.vt())throw new Re(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yE(this,i),this.hs=t+"main",this.M=new cE(_),this.ls=new Qs(this.hs,this.ts,new sT(this.M)),this.fs=new am(this.referenceDelegate,this.M),this.ds=new _E(this.M),this._s=new VS,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&Zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,np);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Kn(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ip(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(nl(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Rh(e).get("owner").next(t=>le.resolve(this.Ps(t)))}Vs(e){return ip(e).delete(this.clientId)}vs(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Zr(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return le.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?le.resolve(!0):Rh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,np);return!1}}return!(!this.networkEnabled||!this.inForeground)||ip(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new U_(t,Kn.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>ip(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return pE.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new rT(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return H_.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?Ih:13===c?bc:12===c?Ch:11===c?Ec:void st();var c;let p;return this.ls.runTransaction(e,i,u,_=>(p=new U_(_,this.es?this.es.next():Kn.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw Zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(he.FAILED_PRECONDITION,Cc);return r(p)}).next(b=>this.bs(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}$s(e){return Rh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(he.FAILED_PRECONDITION,np)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rh(e).put("owner",t)}static vt(){return Qs.vt()}Rs(e){const t=Rh(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Zn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,gt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Zn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Zn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rh(n){return Zr(n,"owner")}function ip(n){return Zr(n,"clientMetadata")}function dm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class EE{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):kw(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new je(t)).next(r=>{let i=Gf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=Gf();return this.indexManager.getCollectionParents(e,i).next(c=>le.forEach(c,p=>{const _=(b=t,S=p.child(i),new lr(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,_,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const _=p.key;let b=i.get(_);null==b&&(b=Ln.newInvalidDocument(_),i=i.insert(_,b)),Hw(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,c)=>{Ug(t,c)||(i=i.remove(u))}),i))}}class hm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=pn(),i=pn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new hm(e,t.fromCache,r,i)}}class Y_{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return le.resolve(null)}ei(e,t,r,i){return function PS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(It.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(Of()<=Pr.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),m_(t)),this.ri(e,c,t,u_(i,-1)))})}si(e,t){let r=new Tn(y_(e));return t.forEach((i,u)=>{Ug(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return Of()<=Pr.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",m_(t)),this.Zs.Qs(e,t,Ao.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class bE{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new ir(Ft),this.ai=new ru(u=>Zs(u),da),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new EE(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Q_(n,e,t,r){return new bE(n,e,t,r)}function oT(n,e){return J_.apply(this,arguments)}function J_(){return J_=(0,ge.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=pn();for(const b of i){c.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}return t.fi.Ks(r,_).next(b=>({di:b,removedBatchIds:c,addedBatchIds:p}))})})}),J_.apply(this,arguments)}function aT(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,b){const S=_.batch,M=S.keys();let F=le.resolve();return M.forEach(B=>{F=F.next(()=>b.getEntry(p,B)).next(z=>{const ce=_.docVersions.get(B);Mt(null!==ce),z.version.compareTo(ce)<0&&(S.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),b.addEntry(z)))})}),F.next(()=>c.Bs.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function X_(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function uT(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const p=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var B,z,ce;e.targetMismatches.has(S)?F=F.withResumeToken(_r.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),z=F,ce=b,(0===(B=M).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,F))});let _=wi();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(Er(u,c,e.documentUpdates).next(b=>{_=b})),!r.isEqual(It.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return le.waitFor(p).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=i,u))}function Er(n,e,t){let r=pn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=wi();return t.forEach((c,p)=>{const _=i.get(c);p.isNoDocument()&&p.version.isEqual(It.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",p.version)}),u})}function CE(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Ph(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,le.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new ou(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Oh(n,e,t){return fm.apply(this,arguments)}function fm(){return fm=(0,ge.Z)(function*(n,e,t){const r=Ze(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!nl(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),fm.apply(this,arguments)}function pm(n,e,t){const r=Ze(n);let i=It.min(),u=pn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,b){const S=Ze(p),M=S.ai.get(b);return void 0!==M?le.resolve(S.ui.get(M)):S.fs.getTargetData(_,b)}(r,c,Ji(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?i:It.min(),t?u:pn())).next(p=>(Pc(r,Lw(e),p),{documents:p,_i:u})))}function ev(n,e){const t=Ze(n),r=Ze(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function tv(n,e){const t=Ze(n),r=t.ci.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,u_(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Pc(t,e,i),i))}function Pc(n,e,t){let r=It.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function nv(){return nv=(0,ge.Z)(function*(n,e,t,r){const i=Ze(n);let u=pn(),c=wi();for(const b of t){const S=e.wi(b.metadata.name);b.document&&(u=u.add(S));const M=e.mi(b);M.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(S,M)}const p=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield Ph(i,(b=r,Ji(lh(Kt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Er(b,p,c).next(S=>(p.apply(b),S)).next(S=>i.fs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.fs.addMatchingKeys(b,u,_.targetId)).next(()=>i.fi.Gs(b,S)).next(()=>S)))}),nv.apply(this,arguments)}function IE(n,e){return rv.apply(this,arguments)}function rv(){return rv=(0,ge.Z)(function*(n,e,t=pn()){const r=yield Ph(n,Ji(Kf(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const p=r.withResumeToken(_r.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(p.targetId,p),i.fs.updateTargetData(u,p).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),rv.apply(this,arguments)}class TE{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return le.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Kf(r.bundledQuery),readTime:kr(r.readTime)}),le.resolve();var r}}class US{constructor(){this.overlays=new ir(je.comparator),this.Ii=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=yh(),u=t.length+1,c=new je(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new ir((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=yh(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=yh(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=i)););return le.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new j_(t,r));let u=this.Ii.get(t);void 0===u&&(u=pn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class gm{constructor(){this.Ti=new Tn(br.Ei),this.Ai=new Tn(br.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new br(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new br(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new je(new Kt([])),r=new br(t,e),i=new br(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new je(new Kt([])),r=new br(t,e),i=new br(t,e+1);let u=pn();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new br(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class br{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return je.comparator(e.key,t.key)||Ft(e.Ci,t.Ci)}static Ri(e,t){return Ft(e.Ci,t.Ci)||je.comparator(e.key,t.key)}}class _a{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Tn(br.Ei)}checkEmpty(e){return le.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new Xg(u,t,r,i);this.Bs.push(c);for(const p of i)this.Ni=this.Ni.add(new br(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return le.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return le.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new br(t,0),i=new br(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const p=this.ki(c.Ci);u.push(p)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Ft);return t.forEach(i=>{const u=new br(i,0),c=new br(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],p=>{r=r.add(p.Ci)})}),le.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const c=new br(new je(u),0);let p=new Tn(Ft);return this.Ni.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(_.Ci)),!0)},c),le.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Mt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return le.forEach(t.mutations,i=>{const u=new br(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new br(t,0),i=this.Ni.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class cT{constructor(e){this.$i=e,this.docs=new ir(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Ln.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=wi();const u=new je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||eu(l_(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Bi(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dT(this)}getSize(e){return le.resolve(this.size)}}class dT extends cm{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class va{constructor(e){this.persistence=e,this.Li=new ru(t=>Zs(t),da),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ui=0,this.qi=new gm,this.targetCount=0,this.Ki=Sc.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),le.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Sc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Tn(t),le.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),le.waitFor(u).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.qi.containsKey(t))}}class Mo{constructor(e,t){this.Gi={},this.overlays={},this.es=new Kn(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new va(this),this.indexManager=new nT,this.ds=new cT(r=>this.referenceDelegate.Qi(r)),this.M=new cE(t),this._s=new TE(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new US,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new _a(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new xo(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return le.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class xo extends Ic{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Hi=new gm,this.Ji=null}static Yi(e){return new mm(e)}get Xi(){if(this.Ji)return this.Ji;throw st()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xi,r=>{const i=je.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,It.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return le.or([()=>le.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function iv(n,e){return`firestore_clients_${n}_${e}`}function DE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sv(n,e){return`firestore_targets_${n}_${e}`}class ym{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new ym(e,t,i.state,u):(Zn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new sp(e,r.state,i):(Zn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=zg();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Og(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Nh(e,u):(Zn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Oc{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Oc(t.clientId,t.onlineState):(Zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ov{constructor(){this.activeTargetIds=zg()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _m{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new ir(Ft),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=iv(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ov),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(iv(e.persistenceKey,i));if(u){const c=Nh.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sv(this.persistenceKey,e));if(r){const i=sp.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sv(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Kn.A;if(null!=u)try{const p=JSON.parse(u);Mt("number"==typeof p),c=p}catch(p){Zn("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Kn.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new ym(this.currentUser,e,t,r),u=DE(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=DE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=sv(this.persistenceKey,e),u=new sp(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Nh.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return ym.tr(new qr(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return sp.tr(i,t)}pr(e){return Oc.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],p=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=zg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class AE{constructor(){this.Ur=new ov,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ov,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SE{Kr(e){}shutdown(){}}class av{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class hT{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class ME extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);ke("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw nh("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+dc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${vm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new Mg;p.listenOnce(pw.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ag.NO_ERROR:const b=p.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Ag.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case Ag.HTTP_ERROR:const S=p.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function(B){const z=B.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(z)>=0?z:he.UNKNOWN}(M.status);c(new Re(F,M.message))}else c(new Re(he.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Re(he.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=TI(),c=DI(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new gw({})),this.lo(p.initMessageHeaders,t,r),(0,gt.uI)()||(0,gt.b$)()||(0,gt.d)()||(0,gt.w1)()||(0,gt.Mn)()||(0,gt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");ke("Connection","Creating WebChannel: "+_,p);const b=u.createWebChannel(_,p);let S=!1,M=!1;const F=new hT({Jr:z=>{M?ke("Connection","Not sending because WebChannel is closed:",z):(S||(ke("Connection","Opening WebChannel transport."),b.open(),S=!0),ke("Connection","WebChannel sending:",z),b.send(z))},Yr:()=>b.close()}),B=(z,ce,De)=>{z.listen(ce,it=>{try{De(it)}catch(ot){setTimeout(()=>{throw ot},0)}})};return B(b,Sg.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),B(b,Sg.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),F.ro())}),B(b,Sg.EventType.ERROR,z=>{M||(M=!0,nh("Connection","WebChannel transport errored:",z),F.ro(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),B(b,Sg.EventType.MESSAGE,z=>{var ce;if(!M){const De=z.data[0];Mt(!!De);const it=De,ot=it.error||(null===(ce=it[0])||void 0===ce?void 0:ce.error);if(ot){ke("Connection","WebChannel received error:",ot);const tt=ot.status;let qe=function(Rt){const en=wr[Rt];if(void 0!==en)return qg(en)}(tt),At=ot.message;void 0===qe&&(qe=he.INTERNAL,At="Unknown error status: "+tt+" with message "+ot.message),M=!0,F.ro(new Re(qe,At)),b.close()}else ke("Connection","WebChannel received:",De),F.oo(De)}}),B(c,cc.STAT_EVENT,z=>{z.stat===Xy.PROXY?ke("Connection","Detected buffering proxy"):z.stat===Xy.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.io()},0),F}}function uv(){return"undefined"!=typeof window?window:null}function kh(){return"undefined"!=typeof document?document:null}function al(n){return new fa(n,!0)}class op{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class lv{constructor(e,t,r,i,u,c,p,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new op(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ge.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Zn(t.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xE extends lv{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function kS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],u=function(_,b){return _.N?(Mt(void 0===b||"string"==typeof b),_r.fromBase64String(b||"")):(Mt(void 0===b||b instanceof Uint8Array),_r.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const b=void 0===_.code?he.UNKNOWN:qg(_.code);return new Re(b,_.message||"")}(c);t=new zw(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=pa(n,r.document.name),u=kr(r.document.updateTime),c=new Pi({mapValue:{fields:r.document.fields}}),p=Ln.newFoundDocument(i,u,c);t=new iu(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=pa(n,r.document),u=r.readTime?kr(r.readTime):It.min(),c=Ln.newNoDocument(i,u);t=new iu([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=pa(n,r.document);t=new iu([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new Gg(r.count||0);t=new S_(r.targetId,u)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return It.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?kr(u.readTime):It.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Zg(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=el(p)?{documents:N_(i,p)}:{query:HI(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=M_(i,u.resumeToken):u.snapshotVersion.compareTo(It.min())>0&&(c.readTime=yc(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function FS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Zg(this.M),t.removeTarget=e,this.Lo(t)}}class RE extends lv{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function eE(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,i){let u=kr(r.updateTime?r.updateTime:i);return u.isEqual(It.min())&&(u=kr(i)),new b_(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.tu(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Zg(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_c(this.M,r))};this.Lo(t)}}class PE extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class OE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Zn(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class NE{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;ul(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(b){const S=Ze(b);S.wu.add(4),yield Lh(S),S.yu.set("Unknown"),S.wu.delete(4),yield Fh(S)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new OE(r,i)}}function Fh(n){return cv.apply(this,arguments)}function cv(){return cv=(0,ge.Z)(function*(n){if(ul(n))for(const e of n.mu)yield e(!0)}),cv.apply(this,arguments)}function Lh(n){return dv.apply(this,arguments)}function dv(){return dv=(0,ge.Z)(function*(n){for(const e of n.mu)yield e(!1)}),dv.apply(this,arguments)}function wm(n,e){const t=Ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),pv(t)?fv(t):up(t).Mo()&&hv(t,e))}function ap(n,e){const t=Ze(n),r=up(t);t._u.delete(e),r.Mo()&&kE(t,e),0===t._u.size&&(r.Mo()?r.$o():ul(t)&&t.yu.set("Unknown"))}function hv(n,e){n.pu.Z(e.targetId),up(n).Ho(e)}function kE(n,e){n.pu.Z(e),up(n).Jo(e)}function fv(n){n.pu=new vh({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),up(n).start(),n.yu.au()}function pv(n){return ul(n)&&!up(n).ko()&&n._u.size>0}function ul(n){return 0===Ze(n).wu.size}function FE(n){n.pu=void 0}function fT(n){return gv.apply(this,arguments)}function gv(){return gv=(0,ge.Z)(function*(n){n._u.forEach((e,t)=>{hv(n,e)})}),gv.apply(this,arguments)}function pT(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,ge.Z)(function*(n,e){FE(n),pv(n)?(n.yu.lu(e),fv(n)):n.yu.set("Unknown")}),mv.apply(this,arguments)}function gT(n,e,t){return yv.apply(this,arguments)}function yv(){return yv=(0,ge.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof zw&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i._u.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i._u.delete(p),i.pu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Em(n,r)}else if(e instanceof iu?n.pu.ut(e):e instanceof S_?n.pu._t(e):n.pu.ht(e),!t.isEqual(It.min()))try{const r=yield X_(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=i._u.get(p);if(!_)return;i._u.set(p,_.withResumeToken(_r.EMPTY_BYTE_STRING,_.snapshotVersion)),kE(i,p);const b=new ou(_.target,p,1,_.sequenceNumber);hv(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Em(n,r)}var r}),yv.apply(this,arguments)}function Em(n,e,t){return bm.apply(this,arguments)}function bm(){return bm=(0,ge.Z)(function*(n,e,t){if(!nl(e))throw e;n.wu.add(1),yield Lh(n),n.yu.set("Offline"),t||(t=()=>X_(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Fh(n)}))}),bm.apply(this,arguments)}function _v(n,e){return e().catch(t=>Em(n,t,e))}function Nc(n){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ge.Z)(function*(n){const e=Ze(n),t=dt(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;LE(e);)try{const i=yield CE(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,VE(e,i)}catch(i){yield Em(e,i)}vv(e)&&wv(e)}),Cm.apply(this,arguments)}function LE(n){return ul(n)&&n.du.length<10}function VE(n,e){n.du.push(e);const t=dt(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function vv(n){return ul(n)&&!dt(n).ko()&&n.du.length>0}function wv(n){dt(n).start()}function UE(n){return Im.apply(this,arguments)}function Im(){return Im=(0,ge.Z)(function*(n){dt(n).nu()}),Im.apply(this,arguments)}function BE(n){return lu.apply(this,arguments)}function lu(){return lu=(0,ge.Z)(function*(n){const e=dt(n);for(const t of n.du)e.Zo(t.mutations)}),lu.apply(this,arguments)}function mT(n,e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,ge.Z)(function*(n,e,t){const r=n.du.shift(),i=B_.from(r,e,t);yield _v(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Nc(n)}),Ev.apply(this,arguments)}function Vh(n,e){return jE.apply(this,arguments)}function jE(){return jE=(0,ge.Z)(function*(n,e){var t;e&&dt(n).Xo&&(yield(t=(0,ge.Z)(function*(r,i){if(UI(u=i.code)&&u!==he.ABORTED){const c=r.du.shift();dt(r).Fo(),yield _v(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Nc(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),vv(n)&&wv(n)}),jE.apply(this,arguments)}function Tm(n,e){return $E.apply(this,arguments)}function $E(){return $E=(0,ge.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=ul(t);t.wu.add(3),yield Lh(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Fh(t)}),$E.apply(this,arguments)}function Dm(n,e){return Am.apply(this,arguments)}function Am(){return Am=(0,ge.Z)(function*(n,e){const t=Ze(n);e?(t.wu.delete(2),yield Fh(t)):e||(t.wu.add(2),yield Lh(t),t.yu.set("Unknown"))}),Am.apply(this,arguments)}function up(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ze(e);return i.iu(),new xE(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:fT.bind(null,n),eo:pT.bind(null,n),zo:gT.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Fo(),pv(n)?fv(n):n.yu.set("Unknown")):(yield n.Iu.stop(),FE(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function dt(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ze(e);return i.iu(),new RE(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:UE.bind(null,n),eo:Vh.bind(null,n),eu:BE.bind(null,n),tu:mT.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Tu.Fo(),yield Nc(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class bv{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new bv(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uh(n,e){if(Zn("AsyncQueue",`${e}: ${n}`),nl(n))return new Re(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Bh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Gf(),this.sortedSet=new ir(this.comparator)}static emptySet(e){return new Bh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Bh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lp{constructor(){this.Eu=new ir(je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):st():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class jh{constructor(e,t,r,i,u,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new jh(e,t,Bh.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Sm{constructor(){this.Ru=void 0,this.listeners=[]}}class Mm{constructor(){this.queries=new ru(e=>Fw(e),jf),this.onlineState="Unknown",this.bu=new Set}}function Vn(n,e){return HE.apply(this,arguments)}function HE(){return HE=(0,ge.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new Sm),i)try{u.Ru=yield t.onListen(r)}catch(c){const p=Uh(c,`Initialization of query '${m_(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&Rm(t)}),HE.apply(this,arguments)}function xm(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ge.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Cv.apply(this,arguments)}function yT(n,e){const t=Ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Vu(i)&&(r=!0);c.Ru=i}}r&&Rm(t)}function GE(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function Rm(n){n.bu.forEach(e=>{e.next()})}class Pm{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new jh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=jh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class qE{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class zE{constructor(e){this.M=e}wi(e){return pa(this.M,e)}mi(e){return e.metadata.exists?Xw(this.M,e.document,!1):Ln.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return kr(e)}}class _T{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=WE(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new zE(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||pn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function lT(n,e,t,r){return nv.apply(this,arguments)}(e.localStore,new zE(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield IE(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function WE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $h{constructor(e){this.key=e}}class ZE{constructor(e){this.key=e}}class KE{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=pn(),this.mutatedKeys=pn(),this.Gu=y_(e),this.Qu=new Bh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new lp,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),B=Ug(this.query,M)?M:null,z=!!F&&this.mutatedKeys.has(F.key),ce=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let De=!1;F&&B?F.data.isEqual(B.data)?z!==ce&&(r.track({type:3,doc:B}),De=!0):this.Hu(F,B)||(r.track({type:2,doc:B}),De=!0,(_&&this.Gu(B,_)>0||b&&this.Gu(B,b)<0)&&(p=!0)):!F&&B?(r.track({type:0,doc:B}),De=!0):F&&!B&&(r.track({type:1,doc:F}),De=!0,(_||b)&&(p=!0)),De&&(B?(c=c.add(B),u=ce?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:c,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,S)=>function(M,F){const B=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return B(M)-B(F)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new jh(this.query,e.Qu,i,u,e.mutatedKeys,0===p,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new lp,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=pn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new ZE(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new $h(r))}),t}ta(e){this.Uu=e._i,this.Ku=pn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return jh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class vT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Om{constructor(e){this.key=e,this.na=!1}}class YE{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new ru(p=>Fw(p),jf),this.ra=new Map,this.oa=new Set,this.ua=new ir(je.comparator),this.aa=new Map,this.ca=new gm,this.ha={},this.la=new Map,this.fa=Sc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function QE(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,ge.Z)(function*(n,e){const t=Bv(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield Ph(t.localStore,Ji(e));t.isPrimaryClient&&wm(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Iv(t,e,r,"current"===p)}return i}),Nm.apply(this,arguments)}function Iv(n,e,t,r){return kc.apply(this,arguments)}function kc(){return kc=(0,ge.Z)(function*(n,e,t,r){n._a=(S,M,F)=>{return(B=(0,ge.Z)(function*(z,ce,De,it){let ot=ce.view.Wu(De);ot.ii&&(ot=yield pm(z.localStore,ce.query,!1).then(({documents:At})=>ce.view.Wu(At,ot)));const tt=it&&it.targetChanges.get(ce.targetId),qe=ce.view.applyChanges(ot,z.isPrimaryClient,tt);return Vm(z,ce.targetId,qe.Xu),qe.snapshot}),function(z,ce,De,it){return B.apply(this,arguments)})(n,S,M,F);var B};const i=yield pm(n.localStore,e,!0),u=new KE(e,i._i),c=u.Wu(i.documents),p=_h.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,p);Vm(n,t,_.Xu);const b=new vT(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),kc.apply(this,arguments)}function cp(n,e){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,ge.Z)(function*(n,e){const t=Ze(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!jf(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Oh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ap(t.remoteStore,r.targetId),Gh(t,r.targetId)}).catch(xc))):(Gh(t,r.targetId),yield Oh(t.localStore,r.targetId,!0))}),Tv.apply(this,arguments)}function Dv(){return Dv=(0,ge.Z)(function*(n,e,t){const r=hp(n);try{const i=yield function(u,c){const p=Ze(u),_=ur.now(),b=c.reduce((M,F)=>M.add(F.key),pn());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>p.fi.Ks(M,b).next(F=>{S=F;const B=[];for(const z of c){const ce=OS(z,S.get(z.key));null!=ce&&B.push(new tl(z.key,ce,NI(ce.value.mapValue),vr.exists(!0)))}return p.Bs.addMutationBatch(M,_,B,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let _=u.ha[u.currentUser.toKey()];_||(_=new ir(Ft)),_=_.insert(c,p),u.ha[u.currentUser.toKey()]=_}(r,i.batchId,t),yield cu(r,i.changes),yield Nc(r.remoteStore)}catch(i){const u=Uh(i,"Failed to persist write");t.reject(u)}}),Dv.apply(this,arguments)}function Av(n,e){return km.apply(this,arguments)}function km(){return km=(0,ge.Z)(function*(n,e){const t=Ze(n);try{const r=yield uT(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Mt(c.na):i.removedDocuments.size>0&&(Mt(c.na),c.na=!1))}),yield cu(t,r,e)}catch(r){yield xc(r)}}),km.apply(this,arguments)}function Sv(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ze(u);p.onlineState=c;let _=!1;p.queries.forEach((b,S)=>{for(const M of S.listeners)M.Pu(c)&&(_=!0)}),_&&Rm(p)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ET(n,e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ge.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new ir(je.comparator);c=c.insert(u,Ln.newNoDocument(u,It.min()));const p=pn().add(u),_=new qf(It.min(),new Map,new Tn(Ft),c,p);yield Av(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),xv(r)}else yield Oh(r.localStore,e,!1).then(()=>Gh(r,e,t)).catch(xc)}),Fm.apply(this,arguments)}function bT(n,e){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,ge.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield aT(t.localStore,e);Hh(t,r,null),Lm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cu(t,i)}catch(i){yield xc(i)}}),Mv.apply(this,arguments)}function BS(n,e,t){return JE.apply(this,arguments)}function JE(){return JE=(0,ge.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(u,c){const p=Ze(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.Bs.lookupMutationBatch(_,c).next(S=>(Mt(null!==S),b=S.keys(),p.Bs.removeMutationBatch(_,S))).next(()=>p.Bs.performConsistencyCheck(_)).next(()=>p.fi.Ks(_,b))})}(r.localStore,e);Hh(r,e,t),Lm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cu(r,i)}catch(i){yield xc(i)}}),JE.apply(this,arguments)}function XE(){return XE=(0,ge.Z)(function*(n,e){const t=Ze(n);ul(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Uh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),XE.apply(this,arguments)}function Lm(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Hh(n,e,t){const r=Ze(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Gh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||eb(n,r)})}function eb(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(ap(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),xv(n))}function Vm(n,e,t){for(const r of t)r instanceof $h?(n.ca.addReference(r.key,e),dp(n,r)):r instanceof ZE?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||eb(n,r.key)):st()}function dp(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),xv(n))}function xv(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new je(Kt.fromString(e)),r=n.fa.next();n.aa.set(r,new Om(t)),n.ua=n.ua.insert(t,r),wm(n.remoteStore,new ou(Ji(lh(t.path)),r,2,Kn.A))}}function cu(n,e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ge.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,_)=>{c.push(r._a(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=hm.Ys(_.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.sa.zo(i),yield(p=(0,ge.Z)(function*(_,b){const S=Ze(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>le.forEach(b,F=>le.forEach(F.Hs,B=>S.persistence.referenceDelegate.addReference(M,F.targetId,B)).next(()=>le.forEach(F.Js,B=>S.persistence.referenceDelegate.removeReference(M,F.targetId,B)))))}catch(M){if(!nl(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const B=S.ui.get(F),ce=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.ui=S.ui.insert(F,ce)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,u))}),Rv.apply(this,arguments)}function CT(n,e){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ge.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield oT(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(p=>{p.reject(new Re(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cu(t,r.di)}var i}),Pv.apply(this,arguments)}function tb(n,e){const t=Ze(n),r=t.aa.get(e);if(r&&r.na)return pn().add(r.key);{let i=pn();const u=t.ra.get(e);if(!u)return i;for(const c of u){const p=t.ia.get(c);i=i.unionWith(p.view.ju)}return i}}function IT(n,e){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,ge.Z)(function*(n,e){const t=Ze(n),r=yield pm(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&Vm(t,e.targetId,i.Xu),i}),Ov.apply(this,arguments)}function qh(n,e){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,ge.Z)(function*(n,e){const t=Ze(n);return tv(t.localStore,e).then(r=>cu(t,r))}),Nv.apply(this,arguments)}function nb(n,e,t,r){return kv.apply(this,arguments)}function kv(){return kv=(0,ge.Z)(function*(n,e,t,r){const i=Ze(n),u=yield function(c,p){const _=Ze(c),b=Ze(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,p).next(M=>M?_.fi.Ks(S,M):le.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Nc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Hh(i,e,r||null),Lm(i,e),p=e,Ze(Ze(i.localStore).Bs)._n(p)):st(),yield cu(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),kv.apply(this,arguments)}function Fv(){return Fv=(0,ge.Z)(function*(n,e){const t=Ze(n);if(Bv(t),hp(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Lv(t,r.toArray());t.da=!0,yield Dm(t.remoteStore,!0);for(const u of i)wm(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Gh(t,c),Oh(t.localStore,c,!0))),ap(t.remoteStore,c)}),yield i,yield Lv(t,r),function(u){const c=Ze(u);c.aa.forEach((p,_)=>{ap(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new ir(je.comparator)}(t),t.da=!1,yield Dm(t.remoteStore,!1)}}),Fv.apply(this,arguments)}function Lv(n,e,t){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ge.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[];for(const c of e){let p;const _=r.ra.get(c);if(_&&0!==_.length){p=yield Ph(r.localStore,Ji(_[0]));for(const b of _){const S=r.ia.get(b),M=yield IT(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield ev(r.localStore,c);p=yield Ph(r.localStore,b),yield Iv(r,Um(b),c,!1)}i.push(p)}return r.sa.zo(u),i}),Vv.apply(this,arguments)}function Um(n){return Ow(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function TT(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function ib(n,e,t,r){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,ge.Z)(function*(n,e,t,r){const i=Ze(n);if(i.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield tv(i.localStore,Lw(u[0])),p=qf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield cu(i,c,p);break}case"rejected":yield Oh(i.localStore,e,!0),Gh(i,e,r);break;default:st()}}),Bm.apply(this,arguments)}function DT(n,e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ge.Z)(function*(n,e,t){const r=Bv(n);if(r.da){for(const i of e){if(r.ra.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield ev(r.localStore,i),c=yield Ph(r.localStore,u);yield Iv(r,Um(u),c.targetId,!1),wm(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield Oh(r.localStore,i,!1).then(()=>{ap(r.remoteStore,i),Gh(r,i)}).catch(xc))}}),Uv.apply(this,arguments)}function Bv(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Av.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ET.bind(null,e),e.sa.zo=yT.bind(null,e.eventManager),e.sa.wa=GE.bind(null,e.eventManager),e}function hp(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BS.bind(null,e),e}class jv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.M=al(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Q_(this.persistence,new Y_,e.initialUser,this.M)}ya(e){return new Mo(mm.Yi,this.M)}ga(e){return new AE}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sb extends jv{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield hp(r.Ta.syncEngine),yield Nc(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Q_(this.persistence,new Y_,e.initialUser,this.M)}pa(e){return new mE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=dm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new rp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uv(),kh(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new AE}}class ST extends sb{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof _m&&(r.sharedClientState.syncEngine={$r:nb.bind(null,i),Br:ib.bind(null,i),Lr:DT.bind(null,i),Fs:TT.bind(null,i),Fr:qh.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ge.Z)(function*(c){yield function rb(n,e){return Fv.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=uv();if(!_m.vt(t))throw new Re(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _m(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $v{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Sv(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=CT.bind(null,r.syncEngine),yield Dm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Mm}createDatastore(e){const t=al(e.databaseInfo.databaseId),r=new ME(e.databaseInfo);return new PE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>Sv(this.syncEngine,p,0),c=av.vt()?new av:new SE,new NE(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,_,b){const S=new YE(r,i,u,c,p,_);return b&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ze(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Lh(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ob(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class MT{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new zr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new qE(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ge.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class xT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(u,c){const p=Ze(u),_=Zg(p.M)+"/documents",b={documents:c.map(B=>zf(p.M,B))},S=yield p._o("BatchGetDocuments",_,b),M=new Map;S.forEach(B=>{const z=function NS(n,e){return"found"in e?function(t,r){Mt(!!r.found);const i=pa(t,r.found.name),u=kr(r.found.updateTime),c=new Pi({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const i=pa(t,r.missing),u=kr(r.readTime);return Ln.newNoDocument(i,u)}(n,e):st()}(p.M,B);M.set(z.key.toString(),z)});const F=[];return c.forEach(B=>{const z=M.get(B.toString());Mt(!!z),F.push(z)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=je.fromPath(i);e.mutations.push(new So(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(i,u){const c=Ze(i),p=Zg(c.M)+"/documents",_={writes:u.map(b=>_c(c.M,b))};yield c.co("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Re(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RT{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new op(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ge.Z)(function*(){const t=new xT(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Qu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!UI(t)}return!1}}class ab{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qr.UNAUTHENTICATED,this.clientId=r_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ge.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Uh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Hv(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(u){r.isEqual(u)||(yield oT(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Gv.apply(this,arguments)}function ub(n,e){return $m.apply(this,arguments)}function $m(){return $m=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qv(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Tm(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Tm(e.remoteStore,u)),n.onlineComponents=e}),$m.apply(this,arguments)}function qv(n){return zv.apply(this,arguments)}function zv(){return zv=(0,ge.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield Hv(n,new jv)),n.offlineComponents}),zv.apply(this,arguments)}function Hm(n){return fp.apply(this,arguments)}function fp(){return fp=(0,ge.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield ub(n,new $v)),n.onlineComponents}),fp.apply(this,arguments)}function Gm(n){return qv(n).then(e=>e.persistence)}function qm(n){return qv(n).then(e=>e.localStore)}function zm(n){return Hm(n).then(e=>e.remoteStore)}function Wv(n){return Hm(n).then(e=>e.syncEngine)}function zh(n){return pp.apply(this,arguments)}function pp(){return pp=(0,ge.Z)(function*(n){const e=yield Hm(n),t=e.eventManager;return t.onListen=QE.bind(null,e.syncEngine),t.onUnlisten=cp.bind(null,e.syncEngine),t}),pp.apply(this,arguments)}function Zv(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,u,c,p,_){const b=new jm({next:M=>{u.enqueueAndForget(()=>xm(i,S));const F=M.docs.has(c);!F&&M.fromCache?_.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?_.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),S=new Pm(lh(c.path),b,{includeMetadataChanges:!0,ku:!0});return Vn(i,S)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}function Kv(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,u,c,p,_){const b=new jm({next:M=>{u.enqueueAndForget(()=>xm(i,S)),M.fromCache&&"server"===p.source?_.reject(new Re(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),S=new Pm(c,b,{includeMetadataChanges:!0,ku:!0});return Vn(i,S)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}const Fc=new Map;function Lc(n,e,t){if(!t)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cb(n,e,t,r){if(!0===e&&!0===r)throw new Re(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LT(n){if(!je.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yv(n){if(je.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zm(n);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function db(n,e){if(e<=0)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hb({}),this._settingsFrozen=!1,e instanceof Yu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new t_;switch(t.type){case"gapi":const r=t.client;return Mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new AI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fc.get(e);t&&(ke("ComponentProvider","Removing Datastore"),Fc.delete(e),t.terminate())}(this),Promise.resolve()}}class En{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Fr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class Xi extends Fr{constructor(e,t,r){super(e,t,lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new je(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function pb(n,e,...t){if(n=(0,gt.m9)(n),Lc("collection","path",e),n instanceof Wh){const r=Kt.fromString(e,...t);return Yv(r),new Xi(n,null,r)}{if(!(n instanceof En||n instanceof Xi))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return Yv(r),new Xi(n.firestore,null,r)}}function gp(n,e,...t){if(n=(0,gt.m9)(n),1===arguments.length&&(e=r_.R()),Lc("doc","path",e),n instanceof Wh){const r=Kt.fromString(e,...t);return LT(r),new En(n,null,new je(r))}{if(!(n instanceof En||n instanceof Xi))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return LT(r),new En(n.firestore,n instanceof Xi?n.converter:null,new je(r))}}function mb(n,e){return n=(0,gt.m9)(n),e=(0,gt.m9)(e),(n instanceof En||n instanceof Xi)&&(e instanceof En||e instanceof Xi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function yb(n,e){return n=(0,gt.m9)(n),e=(0,gt.m9)(e),n instanceof Fr&&e instanceof Fr&&n.firestore===e.firestore&&jf(n._query,e._query)&&n.converter===e.converter}class Qv{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new op(this,"async_queue_retry"),this.Qa=()=>{const t=kh();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new zr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ge.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!nl(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Zn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=bv.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&st()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Jv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class HS{constructor(){this._progressObserver={},this._taskCompletionResolver=new zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Un extends Wh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Qv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||BT(this),this._firestoreClient.terminate()}}function Mn(n){return n._firestoreClient||BT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function BT(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Iw(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new ab(n._authCredentials,n._appCheckCredentials,n._queue,r)}function $T(n,e,t){const r=new zr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield Hv(n,t),yield ub(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===he.FAILED_PRECONDITION||u.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function Eb(n){if(n._initialized||n._terminated)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wa(_r.fromBase64String(e))}catch(t){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wa(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vc{constructor(e){this._methodName=e}}class Km{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const qT=/^__.*__$/;class yp{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hf(e,this.data,t,this.fieldTransforms)}}class e0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class _p{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new _p(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return jc(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(t0(this.ec)&&qT.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class bb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||al(e)}lc(e,t,r,i=!1){return new _p({ec:e,methodName:t,hc:r,path:yr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ll(n){const e=n._freezeSettings(),t=al(n._databaseId);return new bb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ym(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);Bc("Data must be an object, but it was:",c,r);const p=Ib(r,c);let _,b;if(u.merge)_=new Ja(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=s0(e,M,t);if(!c.contains(F))throw new Re(he.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);wp(S,F)||S.push(F)}_=new Ja(S),b=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,b=c.fieldTransforms;return new yp(new Pi(p),_,b)}class vp extends Vc{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vp}}function Cb(n,e,t){return new _p({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class n0 extends Vc{_toFieldTransform(e){return new $f(e.path,new dh)}isEqual(e){return e instanceof n0}}class zT extends Vc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Cb(this,e,!0),r=this.fc.map(u=>bi(u,t)),i=new hh(r);return new $f(e.path,i)}isEqual(e){return this===e}}class WT extends Vc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Cb(this,e,!0),r=this.fc.map(u=>bi(u,t)),i=new mc(r);return new $f(e.path,i)}isEqual(e){return this===e}}class ZT extends Vc{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new fh(e.M,v_(e.M,this.dc));return new $f(e.path,t)}isEqual(e){return this===e}}function Uc(n,e,t,r){const i=n.lc(1,e,t);Bc("Data must be an object, but it was:",i,r);const u=[],c=Pi.empty();hc(r,(_,b)=>{const S=Xm(e,_,t);b=(0,gt.m9)(b);const M=i.oc(S);if(b instanceof vp)u.push(S);else{const F=bi(b,M);null!=F&&(u.push(S),c.set(S,F))}});const p=new Ja(u);return new e0(c,p,i.fieldTransforms)}function r0(n,e,t,r,i,u){const c=n.lc(1,e,t),p=[s0(e,r,t)],_=[i];if(u.length%2!=0)throw new Re(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(s0(e,u[F])),_.push(u[F+1]);const b=[],S=Pi.empty();for(let F=p.length-1;F>=0;--F)if(!wp(b,p[F])){const B=p[F];let z=_[F];z=(0,gt.m9)(z);const ce=c.oc(B);if(z instanceof vp)b.push(B);else{const De=bi(z,ce);null!=De&&(b.push(B),S.set(B,De))}}const M=new Ja(b);return new e0(S,M,c.fieldTransforms)}function Qm(n,e,t,r=!1){return bi(t,n.lc(r?4:3,e))}function bi(n,e){if(Jm(n=(0,gt.m9)(n)))return Bc("Unsupported field value:",e,n),Ib(n,e);if(n instanceof Vc)return function(t,r){if(!t0(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=bi(c,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return v_(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ur.fromDate(t);return{timestampValue:yc(r.M,i)}}if(t instanceof ur){const i=new ur(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yc(r.M,i)}}if(t instanceof Km)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wa)return{bytesValue:M_(r.M,t._byteString)};if(t instanceof En){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${Zm(t)}`)}(n,e)}function Ib(n,e){const t={};return bw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hc(n,(r,i)=>{const u=bi(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Jm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ur||n instanceof Km||n instanceof wa||n instanceof En||n instanceof Vc)}function Bc(n,e,t){if(!Jm(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Zm(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function s0(n,e,t){if((e=(0,gt.m9)(e))instanceof du)return e._internalPath;if("string"==typeof e)return Xm(n,e);throw jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const KT=new RegExp("[~\\*/\\[\\]]");function Xm(n,e,t){if(e.search(KT)>=0)throw jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new du(...e.split("."))._internalPath}catch(r){throw jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jc(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Re(he.INVALID_ARGUMENT,p+n+_)}function wp(n,e){return n.some(t=>t.isEqual(e))}class Ep{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new YT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class YT extends Ep{data(){return super.data()}}function bp(n,e){return"string"==typeof e?Xm(n,e):e instanceof du?e._internalPath:e._delegate._internalPath}class cl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ro extends Ep{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zh extends Ro{data(e={}){return super.data(e)}}class dl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zh(this._firestore,this._userDataWriter,r.key,r,new cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Zh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new Zh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:QT(c.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function JT(n,e){return n instanceof Ro&&e instanceof Ro?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof dl&&e instanceof dl&&n._firestore===e._firestore&&yb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ey(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $c{}function hu(n,...e){for(const t of e)n=t._apply(n);return n}class o0 extends $c{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=ll(e.firestore),r=function(i,u,c,p,_,b,S){let M;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){xb(S,b);const B=[];for(const z of S)B.push(c0(p,i,z));M={arrayValue:{values:B}}}else M=c0(p,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||xb(S,b),M=Qm(c,"where",S,"in"===b||"not-in"===b);const F=Wr.create(_,b,M);return function(B,z){if(z.S()){const De=Vg(B);if(null!==De&&!De.isEqual(z.field))throw new Re(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${z.field.toString()}'`);const it=Nw(B);null!==it&&d0(0,z.field,it)}const ce=function(De,it){for(const ot of De.filters)if(it.indexOf(ot.op)>=0)return ot.op;return null}(B,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ce)throw new Re(he.INVALID_ARGUMENT,ce===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Fr(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new lr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class XT extends $c{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new uh(i,u);return function(p,_){if(null===Nw(p)){const b=Vg(p);null!==b&&d0(0,b,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new Fr(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new lr(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Tb extends $c{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Fr(e.firestore,e.converter,g_(e._query,this.yc,this.Ic))}}class ty extends $c{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=l0(e,this.type,this.Tc,this.Ec);return new Fr(e.firestore,e.converter,(i=t,new lr((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class u0 extends $c{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=l0(e,this.type,this.Tc,this.Ec);return new Fr(e.firestore,e.converter,(i=t,new lr((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function l0(n,e,t,r){if(t[0]=(0,gt.m9)(t[0]),t[0]instanceof Ep)return function(i,u,c,p,_){if(!p)throw new Re(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of ch(i))if(S.field.isKeyField())b.push(ih(u,p.key));else{const M=p.data.field(S.field);if(xg(M))throw new Re(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Re(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new nu(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ll(n.firestore);return function(u,c,p,_,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(he.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<b.length;B++){const z=b[B];if(M[B].field.isKeyField()){if("string"!=typeof z)throw new Re(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!kw(u)&&-1!==z.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const ce=u.path.child(Kt.fromString(z));if(!je.isDocumentKey(ce))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const De=new je(ce);F.push(ih(c,De))}else{const ce=Qm(p,_,z);F.push(ce)}}return new nu(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function c0(n,e,t){if("string"==typeof(t=(0,gt.m9)(t))){if(""===t)throw new Re(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&-1!==t.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!je.isDocumentKey(r))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ih(n,new je(r))}if(t instanceof En)return ih(n,t._key);throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zm(t)}.`)}function xb(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function d0(n,e,t){if(!t.isEqual(e))throw new Re(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const rD={maxAttempts:5};class oi{convertValue(e,t="none"){switch(fc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return hc(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Km(fn(e.latitude),fn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Rg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pg(e));default:return null}}convertTimestamp(e){const t=ua(e);return new ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);Mt(iE(r));const i=new Yu(r.get(1),r.get(3)),u=new je(r.popFirst(5));return i.isEqual(t)||Zn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fu(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iD extends oi{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}class Rb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ll(e)}set(e,t,r){this._verifyNotCommitted();const i=Hc(e,this._firestore),u=fu(i.converter,t,r),c=Ym(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,vr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Hc(e,this._firestore);let c;return c="string"==typeof(t=(0,gt.m9)(t))||t instanceof du?r0(this._dataReader,"WriteBatch.update",u._key,t,r,i):Uc(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hc(e,this._firestore);return this._mutations=this._mutations.concat(new mh(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hc(n,e){if((n=(0,gt.m9)(n)).firestore!==e)throw new Re(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Gc extends oi{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function ny(n,e,t){n=Yt(n,En);const r=Yt(n.firestore,Un),i=fu(n.converter,e,t);return qc(r,[Ym(ll(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,vr.none())])}function f0(n,e,t,...r){n=Yt(n,En);const i=Yt(n.firestore,Un),u=ll(i);let c;return c="string"==typeof(e=(0,gt.m9)(e))||e instanceof du?r0(u,"updateDoc",n._key,e,t,r):Uc(u,"updateDoc",n._key,e),qc(i,[c.toMutation(n._key,vr.exists(!0))])}function iy(n,...e){var t,r,i;n=(0,gt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Jv(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Jv(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,b,S;if(n instanceof En)b=Yt(n.firestore,Un),S=lh(n._key.path),_={next:M=>{e[c]&&e[c](p0(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Yt(n,Fr);b=Yt(M.firestore,Un),S=M._query;const F=new Gc(b);_={next:B=>{e[c]&&e[c](new dl(b,F,M,B))},error:e[c+1],complete:e[c+2]},ey(n._query)}return function(M,F,B,z){const ce=new jm(z),De=new Pm(F,ce,B);return M.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Vn(yield zh(M),De)})),()=>{ce.Aa(),M.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return xm(yield zh(M),De)}))}}(Mn(b),S,p,_)}function qc(n,e){return function(t,r){const i=new zr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function wT(n,e,t){return Dv.apply(this,arguments)}(yield Wv(t),r,i)})),i.promise}(Mn(n),e)}function p0(n,e,t){const r=t.docs.get(e._key),i=new Gc(n);return new Ro(n,i,e._key,r,new cl(t.hasPendingWrites,t.fromCache),e.converter)}class Nb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ll(e)}get(e){const t=Hc(e,this._firestore),r=new iD(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new Ep(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Ep(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Hc(e,this._firestore),u=fu(i.converter,t,r),c=Ym(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Hc(e,this._firestore);let c;return c="string"==typeof(t=(0,gt.m9)(t))||t instanceof du?r0(this._dataReader,"Transaction.update",u._key,t,r,i):Uc(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Hc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hc(e,this._firestore),r=new Gc(this._firestore);return super.get(e).then(i=>new Ro(this._firestore,r,t._key,i._document,new cl(!1,!1),t.converter))}}function oy(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function _0(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function Lb(){if(!function To(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){dc=Rr.SDK_VERSION,(0,Rr._registerComponent)(new Us.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Un(i,new AS(t.getProvider("auth-internal")),new SI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Rr.registerVersion)(mw,"3.4.9",n),(0,Rr.registerVersion)(mw,"3.4.9","esm2017")}();class Ip{constructor(e){this._delegate=e}static fromBase64String(e){return Lb(),new Ip(wa.fromBase64String(e))}static fromUint8Array(e){return _0(),new Ip(wa.fromUint8Array(e))}toBase64(){return Lb(),this._delegate.toBase64()}toUint8Array(){return _0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ay(n){return function cD(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Vb{enableIndexedDbPersistence(e,t){return function _b(n,e){Eb(n=Yt(n,Un));const t=Mn(n),r=n._freezeSettings(),i=new $v;return $T(t,i,new sb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function jT(n){Eb(n=Yt(n,Un));const e=Mn(n),t=n._freezeSettings(),r=new $v;return $T(e,r,new ST(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function vb(n){if(n._initialized&&!n._terminated)throw new Re(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Qs.vt())return Promise.resolve();const i=r+"main";yield Qs.delete(i)}),function(r){return t.apply(this,arguments)})(dm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class v0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&nh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fb(n,e,t,r={}){var i;const u=(n=Yt(n,Wh))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&nh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=qr.MOCK_USER;else{c=(0,gt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new qr(_)}n._authCredentials=new _w(new e_(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function wb(n){return function PT(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield Gm(n),t=yield zm(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.wu.delete(0),Fh(i)}(t)}))}(Mn(n=Yt(n,Un)))}(this._delegate)}disableNetwork(){return function Xv(n){return function lb(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield Gm(n),t=yield zm(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const u=Ze(i);u.wu.add(0),yield Lh(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Mn(n=Yt(n,Un)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function GS(n){return function(e){const t=new zr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function jS(n,e){return XE.apply(this,arguments)}(yield Wv(e),t)})),t.promise}(Mn(n=Yt(n,Un)))}(this._delegate)}onSnapshotsInSync(e){return function WS(n,e){return function $S(n,e){const t=new jm(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield zh(n),i=t,Ze(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield zh(n),i=t,void Ze(r).bu.delete(i);var r,i}))}}(Mn(n=Yt(n,Un)),Jv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pu(this,pb(this._delegate,e))}catch(t){throw es(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cs(this,gp(this._delegate,e))}catch(t){throw es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ts(this,function gb(n,e){if(n=Yt(n,Wh),Lc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fr(n,null,(t=e,new lr(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sy(n,e,t){n=Yt(n,Un);const r=Object.assign(Object.assign({},rD),t);return function(i){if(i.maxAttempts<1)throw new Re(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function kT(n,e,t){const r=new zr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const i=yield(u=n,Hm(u).then(c=>c.datastore));var u;new RT(n.asyncQueue,i,t,e,r).run()})),r.promise}(Mn(n),i=>e(new Nb(n,i)),r)}(this._delegate,t=>e(new Bb(this,t)))}batch(){return Mn(this._delegate),new jb(new Rb(this._delegate,e=>qc(this._delegate,e)))}loadBundle(e){return function HT(n,e){const t=Mn(n=Yt(n,Un)),r=new HS;return function Wm(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return ob(_,b);if(_ instanceof ArrayBuffer)return ob(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new MT(_,c);var _}(t,al(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function AT(n,e,t){const r=Ze(n);var i;(i=(0,ge.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(F,B){const z=Ze(F),ce=kr(B.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",De=>z._s.getBundleMetadata(De,B.id)).then(De=>!!De&&De.createTime.compareTo(ce)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(WE(_));const b=new _T(_,u.localStore,c.M);let S=yield c.ma();for(;S;){const F=yield b.Fu(S);F&&p._updateProgress(F),S=yield c.ma()}const M=yield b.complete();return yield cu(u,M.Lu,void 0),yield function(F,B){const z=Ze(F);return z.persistence.runTransaction("Save bundle","readwrite",ce=>z._s.saveBundleMetadata(ce,B))}(u.localStore,_),p._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return nh("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Wv(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GT(n,e){return function FT(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield qm(n),e)}))}(Mn(n=Yt(n,Un)),e).then(t=>t?new Fr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ts(this,t):null)}}class Tp extends oi{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ip(new wa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Cs.forKey(t,this.firestore,null)}}class Bb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Tp(e)}get(e){const t=Yh(e);return this._delegate.get(t).then(r=>new uy(this._firestore,new Ro(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Yh(e);return r?(oy("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Yh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Yh(e);return this._delegate.delete(t),this}}class jb{constructor(e){this._delegate=e}set(e,t,r){const i=Yh(e);return r?(oy("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Yh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Yh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ly(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kh.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Kh(e,new Tp(e),t),i.set(t,u)),u}}Kh.INSTANCES=new WeakMap;class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tp(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Cs(t,new En(t._delegate,r,new je(e)))}static forKey(e,t,r){return new Cs(t,new En(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pu(this.firestore,pb(this._delegate,e))}catch(t){throw es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,gt.m9)(e))instanceof En&&mb(this._delegate,e)}set(e,t){t=oy("DocumentReference.set",t);try{return t?ny(this._delegate,e,t):ny(this._delegate,e)}catch(r){throw es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?f0(this._delegate,e):f0(this._delegate,e,t,...r)}catch(i){throw es(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Ob(n){return qc(Yt(n.firestore,Un),[new mh(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=dD(e),r=hD(e,i=>new uy(this.firestore,new Ro(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return iy(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function h0(n){n=Yt(n,En);const e=Yt(n.firestore,Un),t=Mn(e),r=new Gc(e);return function OT(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,u,c){try{const p=yield function(_,b){const S=Ze(_);return S.persistence.runTransaction("read document","readonly",M=>S.fi.Ls(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Re(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Uh(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield qm(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ro(e,r,n._key,i,new cl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function sD(n){n=Yt(n,En);const e=Yt(n.firestore,Un);return Zv(Mn(e),n._key,{source:"server"}).then(t=>p0(e,n,t))}(this._delegate):function Cp(n){n=Yt(n,En);const e=Yt(n.firestore,Un);return Zv(Mn(e),n._key).then(t=>p0(e,n,t))}(this._delegate),t.then(r=>new uy(this.firestore,new Ro(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}function es(n,e,t){return n.message=n.message.replace(e,t),n}function dD(n){for(const e of n)if("object"==typeof e&&!ay(e))return e;return{}}function hD(n,e){var t,r;let i;return i=ay(n[0])?n[0]:ay(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class uy{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JT(this._delegate,e._delegate)}}class ly extends uy{data(e){const t=this._delegate.data(e);return function kf(n,e){n||st()}(void 0!==t),t}}class ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tp(e)}where(e,t,r){try{return new ts(this.firestore,hu(this._delegate,function a0(n,e,t){const r=e,i=bp("where",n);return new o0(i,r,t)}(e,t,r)))}catch(i){throw es(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ts(this.firestore,hu(this._delegate,function eD(n,e="asc"){const t=e,r=bp("orderBy",n);return new XT(r,t)}(e,t)))}catch(r){throw es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ts(this.firestore,hu(this._delegate,function tD(n){return db("limit",n),new Tb("limit",n,"F")}(e)))}catch(t){throw es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ts(this.firestore,hu(this._delegate,function Db(n){return db("limitToLast",n),new Tb("limitToLast",n,"L")}(e)))}catch(t){throw es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ts(this.firestore,hu(this._delegate,function Ab(...n){return new ty("startAt",n,!0)}(...e)))}catch(t){throw es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ts(this.firestore,hu(this._delegate,function Sb(...n){return new ty("startAfter",n,!1)}(...e)))}catch(t){throw es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ts(this.firestore,hu(this._delegate,function Mb(...n){return new u0("endBefore",n,!1)}(...e)))}catch(t){throw es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ts(this.firestore,hu(this._delegate,function nD(...n){return new u0("endAt",n,!0)}(...e)))}catch(t){throw es(t,"endAt()","Query.endAt()")}}isEqual(e){return yb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function oD(n){n=Yt(n,Fr);const e=Yt(n.firestore,Un),t=Mn(e),r=new Gc(e);return function NT(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,u,c){try{const p=yield pm(i,u,!0),_=new KE(u,p._i),b=_.Wu(p.documents),S=_.applyChanges(b,!1);c.resolve(S.snapshot)}catch(p){const _=Uh(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield qm(n),e,t);var r})),t.promise}(t,n._query).then(i=>new dl(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function aD(n){n=Yt(n,Fr);const e=Yt(n.firestore,Un),t=Mn(e),r=new Gc(e);return Kv(t,n._query,{source:"server"}).then(i=>new dl(e,r,n,i))}(this._delegate):function Pb(n){n=Yt(n,Fr);const e=Yt(n.firestore,Un),t=Mn(e),r=new Gc(e);return ey(n._query),Kv(t,n._query).then(i=>new dl(e,r,n,i))}(this._delegate),t.then(r=>new $b(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dD(e),r=hD(e,i=>new $b(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return iy(this._delegate,t,r)}withConverter(e){return new ts(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}class QS{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ly(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $b{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ly(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QS(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ly(this._firestore,r))})}isEqual(e){return JT(this._delegate,e._delegate)}}class pu extends ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Cs(this.firestore,e):null}doc(e){try{return new Cs(this.firestore,void 0===e?gp(this._delegate):gp(this._delegate,e))}catch(t){throw es(t,"doc()","CollectionReference.doc()")}}add(e){return function ry(n,e){const t=Yt(n.firestore,Un),r=gp(n),i=fu(n.converter,e);return qc(t,[Ym(ll(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Cs(this.firestore,t))}isEqual(e){return mb(this._delegate,e._delegate)}withConverter(e){return new pu(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}function Yh(n){return Yt(n,En)}class cy{constructor(...e){this._delegate=new du(...e)}static documentId(){return new cy(yr.keyField().canonicalString())}isEqual(e){return(e=(0,gt.m9)(e))instanceof du&&this._delegate._internalPath.isEqual(e._internalPath)}}class gu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uD(){return new n0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gu(e)}static delete(){const e=function kb(){return new vp("deleteField")}();return e._methodName="FieldValue.delete",new gu(e)}static arrayUnion(...e){const t=function g0(...n){return new zT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gu(t)}static arrayRemove(...e){const t=function m0(...n){return new WT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gu(t)}static increment(e){const t=function ZS(n){return new ZT("increment",n)}(e);return t._methodName="FieldValue.increment",new gu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Hb={Firestore:v0,GeoPoint:Km,Timestamp:ur,Blob:Ip,Transaction:Bb,WriteBatch:jb,DocumentReference:Cs,DocumentSnapshot:uy,Query:ts,QueryDocumentSnapshot:ly,QuerySnapshot:$b,CollectionReference:pu,FieldPath:cy,FieldValue:gu,setLogLevel:function Ub(n){!function yw(n){Qa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function JS(n){(function Gb(n,e){n.INTERNAL.registerComponent(new Us.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Hb)))})(n,(e,t)=>new v0(e,t,new Vb)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(yo.Z);var w0=O(6451),Dp=O(5363),dy=O(8421);function Kr(n,e){return(0,Gn.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,pr.x)(r,_=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,dy.Xf)(n(_,S)).subscribe(i=(0,pr.x)(r,M=>r.next(e?e(_,M,S,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var XS=O(6063);class fD extends po.x{constructor(e=1/0,t=1/0,r=XS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var pD=O(3099);function hy(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pD.B)({connector:()=>new fD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const E0=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qb=O(5698);function mD(n){return(0,Gn.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function zb(n=yD){return(0,Gn.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yD(){return new E0}function zc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vn((i,u)=>n(i,u,r)):mi.y,(0,qb.q)(1),t?mD(e):zb(()=>new E0))}var Wb=O(576);function Zb(n,e){return(0,Wb.m)(e)?Kr(()=>n,e):Kr(()=>n)}var Ap=O(9468);O(5867);const eC=new Map,rM={activated:!1,tokenObservers:[]},TD={initialized:!1,enabled:!1};function Yr(n){return eC.get(n)||rM}function Po(n,e){eC.set(n,e)}function Sp(){return TD}class SD{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new gt.BH,yield function tC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ai=new gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nC(n){if(!Yr(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function A0(n,e){return iC.apply(this,arguments)}function iC(){return iC=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(M){throw ai.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw ai.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(M){throw ai.create("fetch-parse-error",{originalErrorMessage:M.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(_[1]),S=Date.now();return{token:p.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),iC.apply(this,arguments)}function MD(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const gy="firebase-app-check-store";let S0=null;function OD(){return S0||(S0=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ai.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(gy,{keyPath:"compositeKey"})}}catch(t){e(ai.create("storage-open",{originalErrorMessage:t.message}))}}),S0)}function yy(){return yy=(0,ge.Z)(function*(n,e){const r=(yield OD()).transaction(gy,"readwrite"),u=r.objectStore(gy).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;p(ai.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),yy.apply(this,arguments)}const Wc=new Pr.Yd("@firebase/app-check");function wy(n,e){return(0,gt.hl)()?function ND(n,e){return function oC(n,e){return yy.apply(this,arguments)}(function vy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LD(){return Sp().enabled}function VD(){return uC.apply(this,arguments)}function uC(){return uC=(0,ge.Z)(function*(){const n=Sp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),uC.apply(this,arguments)}const UD={error:"UNKNOWN_ERROR"};function BD(n){return gt.US.encodeString(JSON.stringify(n),!1)}function by(n){return M0.apply(this,arguments)}function M0(){return M0=(0,ge.Z)(function*(n,e=!1){const t=n.app;nC(t);const r=Yr(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Rp(_)&&(i=_)}if(!e&&i&&Rp(i))return{token:i.token};let p,c=!1;if(LD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=A0(MD(t,yield VD()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const _=yield r.exchangeTokenPromise;return yield wy(t,_),Po(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Wc.warn(_.message):Wc.error(_),u=_}return i?(p={token:i.token},Po(t,Object.assign(Object.assign({},r),{token:i})),yield wy(t,i)):p=R0(u),c&&cC(t,p),p}),M0.apply(this,arguments)}function Iy(n,e){const t=Yr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Po(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function x0(n){const{app:e}=n,t=Yr(e);let r=t.tokenRefresher;r||(r=function jD(n){const{app:e}=n;return new SD((0,ge.Z)(function*(){let r;if(r=Yr(e).token?yield by(n,!0):yield by(n),r.error)throw r.error}),()=>!0,()=>{const t=Yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Po(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function cC(n,e){const t=Yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Rp(n){return n.expireTimeMillis-Date.now()>0}function R0(n){return{token:BD(UD),error:n}}class aM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Yr(this.app);for(const t of e)Iy(this.app,t.next);return Promise.resolve()}}const A="app-check-internal";!function x(){(0,Rr._registerComponent)(new Us.wA("app-check",n=>function dC(n,e){return new aM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(A).initialize()})),(0,Rr._registerComponent)(new Us.wA(A,n=>function P0(n){return{getToken:e=>by(n,e),addTokenListener:e=>function Cy(n,e,t,r){const{app:i}=n,u=Yr(i),c={next:t,error:r,type:e};if(Po(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Rp(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),x0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>x0(n))}(n,"INTERNAL",e),removeTokenListener:e=>Iy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Rr.registerVersion)("@firebase/app-check","0.5.8")}();class Q{constructor(){return(0,hn.vb)("app-check")}}"undefined"!=typeof window&&window,O(127);const Ty=new d.OlP("angularfire2.auth.use-emulator"),Dy=new d.OlP("angularfire2.auth.settings"),hM=new d.OlP("angularfire2.auth.tenant-id"),fM=new d.OlP("angularfire2.auth.langugage-code"),pM=new d.OlP("angularfire2.auth.use-device-language"),gM=new d.OlP("angularfire.auth.persistence"),mM=(n,e,t,r,i,u,c,p)=>(0,Nn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))_.settings[b]=S;return p&&_.setPersistence(p),_},[t,r,i,u,c,p]);let vC=(()=>{class n{constructor(t,r,i,u,c,p,_,b,S,M,F,B){const z=new po.x,ce=vt(void 0).pipe((0,Dp.Q)(c.outsideAngular),Kr(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8775)))),(0,kt.U)(()=>(0,Nn.on)(t,u,r)),(0,kt.U)(De=>mM(De,u,p,b,S,M,_,F)),hy({bufferSize:1,refCount:!1}));if(Go(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{ce.pipe(zc()).subscribe();const it=ce.pipe(Kr(qe=>qe.getRedirectResult().then(At=>At,()=>null)),hn.iC,hy({bufferSize:1,refCount:!1})),ot=ce.pipe(Kr(qe=>new qi.y(At=>({unsubscribe:u.runOutsideAngular(()=>qe.onAuthStateChanged(Rt=>At.next(Rt),Rt=>At.error(Rt),()=>At.complete()))})))),tt=ce.pipe(Kr(qe=>new qi.y(At=>({unsubscribe:u.runOutsideAngular(()=>qe.onIdTokenChanged(Rt=>At.next(Rt),Rt=>At.error(Rt),()=>At.complete()))}))));this.authState=it.pipe(Zb(ot),(0,Ap.R)(c.outsideAngular),(0,Dp.Q)(c.insideAngular)),this.user=it.pipe(Zb(tt),(0,Ap.R)(c.outsideAngular),(0,Dp.Q)(c.insideAngular)),this.idToken=this.user.pipe(Kr(qe=>qe?(0,jt.D)(qe.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(Kr(qe=>qe?(0,jt.D)(qe.getIdTokenResult()):vt(null))),this.credential=(0,w0.T)(it,z,this.authState.pipe(vn(qe=>!qe))).pipe((0,kt.U)(qe=>(null==qe?void 0:qe.user)?qe:null),(0,Ap.R)(c.outsideAngular),(0,Dp.Q)(c.insideAngular))}return(0,Nn.pX)(this,ce,u,{spy:{apply:(De,it,ot)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&ot.then(tt=>z.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nn.Dh),d.LFG(Nn.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(hn.HU),d.LFG(Ty,8),d.LFG(Dy,8),d.LFG(hM,8),d.LFG(fM,8),d.LFG(pM,8),d.LFG(gM,8),d.LFG(Q,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function yM(n,e){return function yO(n,e=Vs.z){return new qi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function JD(n,e){return yM(n,e).pipe((0,kt.U)(t=>({payload:t,type:"query"})))}function wC(n,e){return JD(n,e).pipe(fs(void 0),Fu(),(0,kt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function _M(n,e,t){return wC(n,t).pipe(go((r,i)=>function vO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function wO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Qo(n,e=mi.y){return n=null!=n?n:mo,(0,Gn.e)((t,r)=>{let i,u=!0;t.subscribe((0,pr.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,kt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function vM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class wM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=wC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,kt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fs(void 0),Fu(),vn(([r,i])=>i.length>0||!r),(0,kt.U)(([r,i])=>i),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(go((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vM(e);return _M(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return JD(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hn.iC)}get(e){return(0,jt.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new EM(this.ref.doc(e),this.afs)}}class EM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=bM(r,t);return new wM(i,u,this.afs)}snapshotChanges(){return function _O(n,e){return yM(n,e).pipe(fs(void 0),Fu(),(0,kt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,kt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,jt.D)(this.ref.get(e)).pipe(hn.iC)}}class EO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wC(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vn(t=>t.length>0),hn.iC):wC(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(go((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vM(e);return _M(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return JD(this.query,this.afs.schedulers.outsideAngular).pipe((0,kt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),hn.iC)}get(e){return(0,jt.D)(this.query.get(e)).pipe(hn.iC)}}const bO=new d.OlP("angularfire2.enableFirestorePersistence"),CO=new d.OlP("angularfire2.firestore.persistenceSettings"),IO=new d.OlP("angularfire2.firestore.settings"),TO=new d.OlP("angularfire2.firestore.use-emulator");function bM(n,e=(t=>t)){return{query:e(n),ref:n}}let DO=(()=>{class n{constructor(t,r,i,u,c,p,_,b,S,M,F,B,z,ce,De,it,ot){this.schedulers=_;const tt=(0,Nn.on)(t,p,r),qe=S;M&&mM(tt,p,F,z,ce,De,B,it),[this.firestore,this.persistenceEnabled$]=(0,Nn.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const At=p.runOutsideAngular(()=>tt.firestore());if(u&&At.settings(u),qe&&At.useEmulator(...qe),i&&!Go(c)){const Rt=()=>{try{return(0,jt.D)(At.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(en){return"undefined"!=typeof console&&console.warn(en),vt(!1)}};return[At,p.runOutsideAngular(Rt)]}return[At,vt(!1)]},[u,qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=bM(i,r),p=this.schedulers.ngZone.run(()=>u);return new wM(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new EO(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new EM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nn.Dh),d.LFG(Nn.xv,8),d.LFG(bO,8),d.LFG(IO,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(hn.HU),d.LFG(CO,8),d.LFG(TO,8),d.LFG(vC,8),d.LFG(Ty,8),d.LFG(Dy,8),d.LFG(hM,8),d.LFG(fM,8),d.LFG(pM,8),d.LFG(gM,8),d.LFG(Q,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),k0=(()=>{class n{constructor(t){this.firebase=t}Register(t){var r=this;return(0,ge.Z)(function*(){try{return yield r.firebase.createUserWithEmailAndPassword(t.email,t.password)}catch(i){return i}})()}Login(t,r){var i=this;return(0,ge.Z)(function*(){try{return yield i.firebase.signInWithEmailAndPassword(t,r)}catch(u){return null}})()}LogOut(){var t=this;return(0,ge.Z)(function*(){try{return yield t.firebase.signOut()}catch(r){return null}})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vC))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CM="firebasestorage.googleapis.com",IM="storageBucket";class Cr extends gt.ZR{constructor(e,t){super(eA(e),`Firebase Storage: ${t} (${eA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cr.prototype)}_codeEquals(e){return eA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function eA(n){return"storage/"+n}function tA(){return new Cr("unknown","An unknown error occurred, please check the error payload for server response.")}function TM(){return new Cr("canceled","User canceled the upload/download.")}function DM(){return new Cr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ay(n){return new Cr("invalid-argument",n)}function AM(){return new Cr("app-deleted","The Firebase app was deleted.")}function SM(n){return new Cr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function F0(n,e){return new Cr("invalid-format","String does not match format '"+n+"': "+e)}function L0(n){throw new Cr("internal-error","Internal error: "+n)}class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch(i){return new rs(e,"")}if(""===r.path)return r;throw function LO(n){return new Cr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(qe){qe.path_=decodeURIComponent(qe.path)}const M=t.replace(/[.]/g,"\\."),tt=[{regex:p,indices:{bucket:1,path:3},postModify:function u(qe){"/"===qe.path.charAt(qe.path.length-1)&&(qe.path_=qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===CM?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let qe=0;qe<tt.length;qe++){const At=tt[qe],Rt=At.regex.exec(e);if(Rt){let Lr=Rt[At.indices.path];Lr||(Lr=""),r=new rs(Rt[At.indices.bucket],Lr),At.postModify(r);break}}if(null==r)throw function FO(n){return new Cr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class jO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function EC(n){return"string"==typeof n||n instanceof String}function MM(n){return nA()&&n instanceof Blob}function nA(){return"undefined"!=typeof Blob}function rA(n,e,t,r){if(r<e)throw Ay(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ay(`Invalid value for '${n}'. Expected ${t} or less.`)}function Kc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function xM(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Jh||(Jh={})),Jh))();class WO{constructor(e,t,r,i,u,c,p,_,b,S,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=b,this.progressCallback_=S,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,B)=>{this.resolve_=F,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function GO(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==p){const _=tA();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(i.canceled?this.appDelete_?AM():TM():function kO(){return new Cr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new bC(!1,null,!0)):this.backoffId_=function $O(n,e,t){let r=1,i=null,u=null,c=!1,p=0;function _(){return 2===p}let b=!1;function S(...De){b||(b=!0,e.apply(null,De))}function M(De){i=setTimeout(()=>{i=null,n(B,_())},De)}function F(){u&&clearTimeout(u)}function B(De,...it){if(b)return void F();if(De)return F(),void S.call(null,De,...it);if(_()||c)return F(),void S.call(null,De,...it);let tt;r<64&&(r*=2),1===p?(p=2,tt=0):tt=1e3*(r+Math.random()),M(tt)}let z=!1;function ce(De){z||(z=!0,F(),!b&&(null!==i?(De||(p=2),clearTimeout(i),M(0)):De||(p=1)))}return M(0),u=setTimeout(()=>{c=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new bC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===Jh.NO_ERROR,_=u.getStatus();if(!p||this.isRetryStatusCode_(_)){const S=u.getErrorCode()===Jh.ABORT;return void r(!1,new bC(!1,null,S))}const b=-1!==this.successCodes_.indexOf(_);r(!0,new bC(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function HO(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||u}}class bC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function e1(...n){const e=function XO(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(nA())return new Blob(n);throw new Cr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Oo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class iA{constructor(e,t){this.data=e,this.contentType=t||null}}function sA(n,e){switch(n){case Oo.RAW:return new iA(RM(e));case Oo.BASE64:case Oo.BASE64URL:return new iA(PM(n,e));case Oo.DATA_URL:return new iA(function i1(n){const e=new OM(n);return e.base64?PM(Oo.BASE64,e.rest):function r1(n){let e;try{e=decodeURIComponent(n)}catch(t){throw F0(Oo.DATA_URL,"Malformed data URL.")}return RM(e)}(e.rest)}(e),function s1(n){return new OM(n).contentType}(e))}throw tA()}function RM(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function PM(n,e){switch(n){case Oo.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw F0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Oo.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw F0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function n1(n){return atob(n)}(e)}catch(i){throw F0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class OM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw F0(Oo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function o1(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class fl{constructor(e,t){let r=0,i="";MM(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(MM(this.data_)){const i=function t1(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new fl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new fl(r,!0)}}static getBlob(...e){if(nA()){const t=e.map(r=>r instanceof fl?r.data_:r);return new fl(e1.apply(null,t))}{const t=e.map(c=>EC(c)?sA(Oo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[u++]=c[p]}),new fl(i,!0)}}uploadData(){return this.data_}}function oA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function zO(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function NM(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function l1(n,e){return e}class Is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||l1}}let CC=null;function V0(){if(CC)return CC;const n=[];n.push(new Is("bucket")),n.push(new Is("generation")),n.push(new Is("metageneration")),n.push(new Is("name","fullPath",!0));const t=new Is("name");t.xform=function e(u,c){return function c1(n){return!EC(n)||n.length<2?n:NM(n)}(c)},n.push(t);const i=new Is("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Is("timeCreated")),n.push(new Is("updated")),n.push(new Is("md5Hash",null,!0)),n.push(new Is("cacheControl",null,!0)),n.push(new Is("contentDisposition",null,!0)),n.push(new Is("contentEncoding",null,!0)),n.push(new Is("contentLanguage",null,!0)),n.push(new Is("contentType",null,!0)),n.push(new Is("metadata","customMetadata",!0)),CC=n,CC}function kM(n,e,t){const r=oA(e);return null===r?null:function h1(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function d1(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new rs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function aA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const FM="prefixes";class pl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function gl(n){if(!n)throw tA()}function IC(n,e){return function t(r,i){const u=kM(n,i,e);return gl(null!==u),u}}function Sy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function OO(){return new Cr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function PO(){return new Cr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function RO(n){return new Cr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function NO(n){return new Cr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function U0(n){const e=Sy(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function xO(n){return new Cr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function VM(n,e,t){const i=Kc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new pl(i,"GET",IC(n,t),c);return p.errorHandler=U0(e),p}function _1(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const p=Kc(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,S=new pl(p,"GET",function m1(n,e){return function t(r,i){const u=function g1(n,e,t){const r=oA(t);return null===r?null:function p1(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[FM])for(const i of t[FM]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new rs(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new rs(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return gl(null!==u),u}}(n,e.bucket),b);return S.urlParams=u,S.errorHandler=Sy(e),S}function BM(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function b1(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class TC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function uA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){gl(!1)}return gl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const D1={STATE_CHANGED:"state_changed"},Ts={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lA(n){switch(n){case"running":case"pausing":case"canceling":return Ts.RUNNING;case"paused":return Ts.PAUSED;case"success":return Ts.SUCCESS;case"canceled":return Ts.CANCELED;default:return Ts.ERROR}}class A1{constructor(e,t,r){if(function qO(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function My(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class M1 extends class S1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw L0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw L0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw L0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw L0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw L0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function mu(){return new M1}class GM{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=V0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function C1(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=BM(e,r,i),p={name:c.fullPath},_=Kc(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=aA(c,t),z=new pl(_,"POST",function B(ce){let De;uA(ce);try{De=ce.getResponseHeader("X-Goog-Upload-URL")}catch(it){gl(!1)}return gl(EC(De)),De},n.maxUploadRetryTime);return z.urlParams=p,z.headers=S,z.body=M,z.errorHandler=Sy(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function I1(n,e,t,r){const _=new pl(t,"POST",function u(b){const S=uA(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){gl(!1)}M||gl(!1);const F=Number(M);return gl(!isNaN(F)),new TC(F,r.size(),"final"===S)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Sy(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,mu,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new TC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function T1(n,e,t,r,i,u,c,p){const _=new TC(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function UO(){return new Cr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=_.total-_.current;let S=b;i>0&&(S=Math.min(S,i));const M=_.current,z={"X-Goog-Upload-Command":S===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ce=r.slice(M,M+S);if(null===ce)throw DM();const tt=new pl(t,"POST",function De(qe,At){const Rt=uA(qe,["active","final"]),en=_.current+S,Lr=r.size();let Lo;return Lo="final"===Rt?IC(e,u)(qe,At):null,new TC(en,Lr,"final"===Rt,Lo)},e.maxUploadRetryTime);return tt.headers=z,tt.body=ce.uploadData(),tt.progressCallback=p||null,tt.errorHandler=Sy(n),tt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,mu,i,u);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=VM(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function jM(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let tt="";for(let qe=0;qe<2;qe++)tt+=Math.random().toString().slice(2);return tt}();c["Content-Type"]="multipart/related; boundary="+_;const b=BM(e,r,i),S=aA(b,t),B=fl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+_+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===B)throw DM();const z={name:b.fullPath},ce=Kc(u,n.host,n._protocol),it=n.maxUploadRetryTime,ot=new pl(ce,"POST",IC(n,t),it);return ot.urlParams=z,ot.headers=c,ot.body=B.uploadData(),ot.errorHandler=Sy(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=TM(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=lA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new A1(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(lA(this._state)){case Ts.SUCCESS:My(this._resolve.bind(null,this.snapshot))();break;case Ts.CANCELED:case Ts.ERROR:My(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lA(this._state)){case Ts.RUNNING:case Ts.PAUSED:e.next&&My(e.next.bind(e,this.snapshot))();break;case Ts.SUCCESS:e.complete&&My(e.complete.bind(e))();break;default:e.error&&My(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Pp{constructor(e,t){this._service=e,this._location=t instanceof rs?t:rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pp(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NM(this._location.path)}get storage(){return this._service}get parent(){const e=function a1(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new rs(this._location.bucket,e);return new Pp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw SM(e)}}function zM(n,e,t){return cA.apply(this,arguments)}function cA(){return cA=(0,ge.Z)(function*(n,e,t){const i=yield WM(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield zM(n,e,i.nextPageToken))}),cA.apply(this,arguments)}function WM(n,e){null!=e&&"number"==typeof e.maxResults&&rA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=_1(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,mu)}function j1(n){n._throwIfRoot("getDownloadURL");const e=function v1(n,e,t){const i=Kc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new pl(i,"GET",function y1(n,e){return function t(r,i){const u=kM(n,i,e);return gl(null!==u),function f1(n,e,t,r){const i=oA(e);if(null===i||!EC(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return Kc("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+xM({alt:"media",token:b})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=U0(e),p}(n.storage,n._location,V0());return n.storage.makeRequestWithTokens(e,mu).then(t=>{if(null===t)throw function BO(){return new Cr("no-download-url","The given file does not have any download URLs.")}();return t})}function ZM(n,e){const t=function u1(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new rs(n._location.bucket,t);return new Pp(n.storage,r)}function KM(n,e){if(n instanceof dA){const t=n;if(null==t._bucket)throw function VO(){return new Cr("no-default-bucket","No default bucket found. Did you set the '"+IM+"' property when initializing the app?")}();const r=new Pp(t,t._bucket);return null!=e?KM(r,e):r}return void 0!==e?ZM(n,e):n}function q1(n,e){if(e&&function H1(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof dA)return function G1(n,e){return new Pp(n,e)}(n,e);throw Ay("To use ref(service, url), the first argument must be a Storage instance.")}return KM(n,e)}function YM(n,e){const t=null==e?void 0:e[IM];return null==t?null:rs.makeFromBucketSpec(t,n)}class dA{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=CM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?rs.makeFromBucketSpec(i,this._host):YM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?rs.makeFromBucketSpec(this._url,e):YM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new jO(AM());{const u=function JO(n,e,t,r,i,u){const c=xM(n.urlParams),p=n.url+c,_=Object.assign({},n.headers);return function YO(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function ZO(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function KO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,u),function QO(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new WO(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const QM="@firebase/storage";function ex(n,e){return q1(n=(0,gt.m9)(n),e)}function nN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new dA(t,r,i,e,Rr.SDK_VERSION)}!function rN(){(0,Rr._registerComponent)(new Us.wA("storage",nN,"PUBLIC").setMultipleInstances(!0)),(0,Rr.registerVersion)(QM,"0.9.6",""),(0,Rr.registerVersion)(QM,"0.9.6","esm2017")}();class DC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class tx{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new DC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new DC(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new DC(c,this,this._ref)):{next:t.next?c=>t.next(new DC(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class nx{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Yc(e,this._service))}get items(){return this._delegate.items.map(e=>new Yc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Yc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function eN(n,e){return ZM(n,e)}(this._delegate,e);return new Yc(t,this.storage)}get root(){return new Yc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Yc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new tx(function W1(n,e,t){return function F1(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new GM(n,new fl(e),t)}(n=(0,gt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Oo.RAW,r){this._throwIfRoot("putString");const i=sA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new tx(new GM(this._delegate,new fl(i.data,!0),u),this)}listAll(){return function Q1(n){return function V1(n){const e={prefixes:[],items:[]};return zM(n,e).then(()=>e)}(n=(0,gt.m9)(n))}(this._delegate).then(e=>new nx(e,this.storage))}list(e){return function Y1(n,e){return WM(n=(0,gt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new nx(t,this.storage))}getMetadata(){return function Z1(n){return function U1(n){n._throwIfRoot("getMetadata");const e=VM(n.storage,n._location,V0());return n.storage.makeRequestWithTokens(e,mu)}(n=(0,gt.m9)(n))}(this._delegate)}updateMetadata(e){return function K1(n,e){return function B1(n,e){n._throwIfRoot("updateMetadata");const t=function w1(n,e,t,r){const u=Kc(e.fullServerUrl(),n.host,n._protocol),p=aA(t,r),b=n.maxOperationRetryTime,S=new pl(u,"PATCH",IC(n,r),b);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=p,S.errorHandler=U0(e),S}(n.storage,n._location,e,V0());return n.storage.makeRequestWithTokens(t,mu)}(n=(0,gt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function J1(n){return j1(n=(0,gt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function X1(n){return function $1(n){n._throwIfRoot("deleteObject");const e=function E1(n,e){const r=Kc(e.fullServerUrl(),n.host,n._protocol),p=new pl(r,"DELETE",function c(_,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=U0(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,mu)}(n=(0,gt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw SM(e)}}class rx{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ix(e))throw Ay("ref() expected a child path but got a URL, use refFromURL instead.");return new Yc(ex(this._delegate,e),this)}refFromURL(e){if(!ix(e))throw Ay("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rs.makeFromUrl(e,this._delegate.host)}catch(t){throw Ay("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yc(ex(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function tN(n,e,t,r={}){!function z1(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,gt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ix(n){return/^[A-Za-z]+:\/\//.test(n)}function aN(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new rx(t,r)}function sx(n){const e=function lN(n){return new qi.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function AO(n,e=Vs.z){return(0,Gn.e)((t,r)=>{let i=null,u=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function _(){const b=c+n,S=e.now();if(S<b)return i=this.schedule(void 0,b-S),void r.add(i);p()}t.subscribe((0,pr.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,kt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function AC(n){return{getDownloadURL:()=>vt(void 0).pipe(hn.fc,Kr(()=>n.getDownloadURL()),hn.iC),getMetadata:()=>vt(void 0).pipe(hn.fc,Kr(()=>n.getMetadata()),hn.iC),delete:()=>(0,jt.D)(n.delete()),child:e=>AC(n.child(e)),updateMetadata:e=>(0,jt.D)(n.updateMetadata(e)),put:(e,t)=>sx(n.put(e,t)),putString:(e,t,r)=>sx(n.putString(e,t,r)),list:e=>(0,jt.D)(n.list(e)),listAll:()=>(0,jt.D)(n.listAll())}}!function uN(n){const e={TaskState:Ts,TaskEvent:D1,StringFormat:Oo,Storage:rx,Reference:Yc};n.INTERNAL.registerComponent(new Us.wA("storage-compat",aN,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(yo.Z);const cN=new d.OlP("angularfire2.storageBucket"),dN=new d.OlP("angularfire2.storage.maxUploadRetryTime"),hN=new d.OlP("angularfire2.storage.maxOperationRetryTime"),fN=new d.OlP("angularfire2.storage.use-emulator");let pN=(()=>{class n{constructor(t,r,i,u,c,p,_,b,S,M){const F=(0,Nn.on)(t,c,r);this.storage=(0,Nn.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const B=c.runOutsideAngular(()=>F.storage(i||void 0)),z=S;return z&&B.useEmulator(...z),_&&B.setMaxUploadRetryTime(_),b&&B.setMaxOperationRetryTime(b),B},[_,b])}ref(t){return AC(this.storage.ref(t))}refFromURL(t){return AC(this.storage.refFromURL(t))}upload(t,r,i){return AC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nn.Dh),d.LFG(Nn.xv,8),d.LFG(cN,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(hn.HU),d.LFG(dN,8),d.LFG(hN,8),d.LFG(fN,8),d.LFG(Q,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),B0=(()=>{class n{constructor(t,r,i,u){this.aFStore=t,this.aFAuth=r,this.AFAuthService=i,this.storage=u,this.usuario=new Cn(null)}setPaciente(t){return this.aFStore.collection("users").add(t)}getPaciente(t){return this.aFStore.collection("users",r=>r.where("email","==",t)).valueChanges()}uploadImage(t,r){var i=this;return(0,ge.Z)(function*(){try{return yield(yield i.storage.ref("/users/"+t).putString(r,"data_url")).ref.getDownloadURL()}catch(u){return console.error(u),null}})()}getPacientes(){return this.aFStore.collection("users").valueChanges()}getTurnos(){return this.aFStore.collection("turnos").valueChanges()}setTurnos(t){return this.aFStore.collection("turnos").add(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(DO),d.LFG(vC),d.LFG(k0),d.LFG(pN))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const{isArray:gN}=Array,{getPrototypeOf:mN,prototype:yN,keys:_N}=Object;function ox(n){if(1===n.length){const e=n[0];if(gN(e))return{args:e,keys:null};if(function vN(n){return n&&"object"==typeof n&&mN(n)===yN}(e)){const t=_N(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:wN}=Array;function ax(n){return(0,kt.U)(e=>function EN(n,e){return wN(e)?n(...e):n(e)}(n,e))}function ux(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var bN=O(9672);function lx(n,e,t){n?(0,bN.f)(t,n,e):e()}function SC(n,e){const t=(0,Wb.m)(n)?n:()=>n,r=i=>i.error(t());return new qi.y(e?i=>e.schedule(r,0,i):r)}function cx(n){return new qi.y(e=>{(0,dy.Xf)(n()).subscribe(e)})}var xy=O(515),dx=O(727);function hx(){return(0,Gn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class TN extends qi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Gn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dx.w0.EMPTY)}return e}refCount(){return hx()(this)}}function Xh(n){return(0,Gn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,pr.x)(t,void 0,void 0,c=>{u=(0,dy.Xf)(n(c,Xh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var is=O(5577);function j0(n,e){return(0,Wb.m)(e)?(0,is.z)(n,e,1):(0,is.z)(n,1)}function hA(n){return n<=0?()=>xy.E:(0,Gn.e)((e,t)=>{let r=[];e.subscribe((0,pr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var No=O(8505);class Qc{constructor(e,t){this.id=e,this.url=t}}class fA extends Qc{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $0 extends Qc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fx extends Qc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class SN extends Qc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class MN extends Qc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xN extends Qc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RN extends Qc{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class PN extends Qc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ON extends Qc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class px{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gx{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class NN{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kN{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FN{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LN{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wt="primary";class VN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ry(n){return new VN(n)}const yx="ngNavigationCancelingError";function pA(n){const e=Error("NavigationCancelingError: "+n);return e[yx]=!0,e}function BN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ml(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!_x(n[i],e[i]))return!1;return!0}function _x(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function vx(n){return Array.prototype.concat.apply([],n)}function wx(n){return n.length>0?n[n.length-1]:null}function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yl(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,jt.D)(Promise.resolve(n)):vt(n)}const HN={exact:function Cx(n,e,t){if(!Np(n.segments,e.segments)||!MC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Cx(n.children[r],e.children[r],t))return!1;return!0},subset:Ix},Ex={exact:function GN(n,e){return ml(n,e)},subset:function qN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_x(n[t],e[t]))},ignored:()=>!0};function bx(n,e,t){return HN[t.paths](n.root,e.root,t.matrixParams)&&Ex[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ix(n,e,t){return Tx(n,e,e.segments,t)}function Tx(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Np(i,t)||e.hasChildren()||!MC(i,t,r))}if(n.segments.length===t.length){if(!Np(n.segments,t)||!MC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ix(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Np(n.segments,i)&&MC(n.segments,i,r)&&n.children[Wt])&&Tx(n.children[Wt],e,u,r)}}function MC(n,e,t){return e.every((r,i)=>Ex[t](n[i].parameters,r.parameters))}class Op{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ry(this.queryParams)),this._queryParamMap}toString(){return ZN.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Oi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xC(this)}}class H0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ry(this.parameters)),this._parameterMap}toString(){return xx(this)}}function Np(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Dx{}class Ax{parse(e){const t=new rk(e);return new Op(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${G0(e.root,!0)}`,r=function QN(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${RC(t)}=${RC(i)}`).join("&"):`${RC(t)}=${RC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function KN(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const ZN=new Ax;function xC(n){return n.segments.map(e=>xx(e)).join("/")}function G0(n,e){if(!n.hasChildren())return xC(n);if(e){const t=n.children[Wt]?G0(n.children[Wt],!1):"",r=[];return Oi(n.children,(i,u)=>{u!==Wt&&r.push(`${u}:${G0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function WN(n,e){let t=[];return Oi(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),Oi(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[G0(n.children[Wt],!1)]:[`${i}:${G0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${xC(n)}/${t[0]}`:`${xC(n)}/(${t.join("//")})`}}function Sx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function RC(n){return Sx(n).replace(/%3B/gi,";")}function gA(n){return Sx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PC(n){return decodeURIComponent(n)}function Mx(n){return PC(n.replace(/\+/g,"%20"))}function xx(n){return`${gA(n.path)}${function YN(n){return Object.keys(n).map(e=>`;${gA(e)}=${gA(n[e])}`).join("")}(n.parameters)}`}const JN=/^[^\/()?;=#]+/;function OC(n){const e=n.match(JN);return e?e[0]:""}const XN=/^[^=?&#]+/,tk=/^[^&#]+/;class rk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new Jt(e,t)),r}parseSegment(){const e=OC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new H0(PC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=OC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=OC(this.remaining);i&&(r=i,this.capture(r))}e[PC(t)]=PC(r)}parseQueryParam(e){const t=function ek(n){const e=n.match(XN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function nk(n){const e=n.match(tk);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Mx(t),u=Mx(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=OC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Wt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Wt]:new Jt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Rx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=mA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=mA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yA(e,this._root).map(t=>t.value)}}function mA(n,e){if(n===e.value)return e;for(const t of e.children){const r=mA(n,t);if(r)return r}return null}function yA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yA(n,t);if(r.length)return r.unshift(e),r}return[]}class Jc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Py(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Px extends Rx{constructor(e,t){super(e),this.snapshot=t,_A(this,e)}toString(){return this.snapshot.toString()}}function Ox(n,e){const t=function ik(n,e){const c=new NC([],{},{},"",{},Wt,e,null,n.root,-1,{});return new kx("",new Jc(c,[]))}(n,e),r=new Cn([new H0("",{})]),i=new Cn({}),u=new Cn({}),c=new Cn({}),p=new Cn(""),_=new Oy(r,i,c,p,u,Wt,e,t.root);return _.snapshot=t.root,new Px(new Jc(_,[]),t)}class Oy{constructor(e,t,r,i,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(e=>Ry(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(e=>Ry(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function sk(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class NC{constructor(e,t,r,i,u,c,p,_,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ry(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ry(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kx extends Rx{constructor(e,t){super(t),this.url=e,_A(this,t)}toString(){return Fx(this._root)}}function _A(n,e){e.value._routerState=n,e.children.forEach(t=>_A(n,t))}function Fx(n){const e=n.children.length>0?` { ${n.children.map(Fx).join(", ")} } `:"";return`${n.value}${e}`}function vA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ml(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ml(e.params,t.params)||n.params.next(t.params),function jN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ml(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ml(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function wA(n,e){const t=ml(n.params,e.params)&&function zN(n,e){return Np(n,e)&&n.every((t,r)=>ml(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||wA(n.parent,e.parent))}function q0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ak(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return q0(n,r,i);return q0(n,r)})}(n,e,t);return new Jc(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>q0(n,p)),c}}const r=function uk(n){return new Oy(new Cn(n.url),new Cn(n.params),new Cn(n.queryParams),new Cn(n.fragment),new Cn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>q0(n,u));return new Jc(r,i)}}function kC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function z0(n){return"object"==typeof n&&null!=n&&n.outlets}function EA(n,e,t,r,i){let u={};if(r&&Oi(r,(p,_)=>{u[_]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new Op(t,u,i);const c=Lx(n,e,t);return new Op(c,u,i)}function Lx(n,e,t){const r={};return Oi(n.children,(i,u)=>{r[u]=i===e?t:Lx(i,e,t)}),new Jt(n.segments,r)}class Vx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kC(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(z0);if(i&&i!==wx(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ux(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return FC(n,e,t);const r=function pk(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(z0(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!jx(_,b,c))return u;r+=2}else{if(!jx(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Jt(n.segments.slice(0,r.pathIndex),{});return u.children[Wt]=new Jt(n.segments.slice(r.pathIndex),n.children),FC(u,0,i)}return r.match&&0===i.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?CA(n,e,t):r.match?FC(n,0,i):CA(n,e,t)}function FC(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function fk(n){return z0(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return Oi(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Ux(n.children[c],e,u))}),Oi(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Jt(n.segments,i)}}function CA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(z0(u)){const _=gk(u.outlets);return new Jt(r,_)}if(0===i&&kC(t[0])){r.push(new H0(n.segments[e].path,Bx(t[0]))),i++;continue}const c=z0(u)?u.outlets[Wt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&kC(p)?(r.push(new H0(c,Bx(p))),i+=2):(r.push(new H0(c,{})),i++)}return new Jt(r,{})}function gk(n){const e={};return Oi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=CA(new Jt([],{}),0,t))}),e}function Bx(n){const e={};return Oi(n,(t,r)=>e[r]=`${t}`),e}function jx(n,e,t){return n==t.path&&ml(e,t.parameters)}class yk{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Py(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Oi(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Py(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Py(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Py(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new LN(u.value.snapshot))}),e.children.length&&this.forwardEvent(new kN(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(vA(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),vA(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function _k(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class IA{constructor(e,t){this.routes=e,this.module=t}}function ef(n){return"function"==typeof n}function kp(n){return n instanceof Op}const W0=Symbol("INITIAL_VALUE");function Z0(){return Kr(n=>function CN(...n){const e=(0,zi.yG)(n),t=(0,zi.jO)(n),{args:r,keys:i}=ox(n);if(0===r.length)return(0,jt.D)([],e);const u=new qi.y(function IN(n,e,t=mi.y){return r=>{lx(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)lx(e,()=>{const b=(0,jt.D)(n[_],e);let S=!1;b.subscribe((0,pr.x)(r,M=>{u[_]=M,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>ux(i,c):mi.y));return t?u.pipe(ax(t)):u}(n.map(e=>e.pipe((0,qb.q)(1),fs(W0)))).pipe(go((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==W0?i:(u===W0&&(r=!0),r||!1!==u&&c!==t.length-1&&!kp(u)?i:u),e)},W0),vn(e=>e!==W0),(0,kt.U)(e=>kp(e)?e:!0===e),(0,qb.q)(1)))}class Ik{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new K0,this.attachRef=null}}class K0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ik,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let LC=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new Tk(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(K0),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Tk{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oy?this.route:e===K0?this.childContexts:this.parent.get(e,t)}}let $x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[LC],encapsulation:2}),n})();function Hx(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Dk(r,Ak(e,r))}}function Dk(n,e){n.children&&Hx(n.children,e)}function Ak(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function TA(n){const e=n.children&&n.children.map(TA),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=$x),t}function Ea(n){return n.outlet||Wt}function Gx(n,e){const t=n.filter(r=>Ea(r)===e);return t.push(...n.filter(r=>Ea(r)!==e)),t}const qx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VC(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},qx):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||BN)(t,n,e);if(!u)return Object.assign({},qx);const c={};Oi(u.posParams,(_,b)=>{c[b]=_.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function UC(n,e,t,r,i="corrected"){if(t.length>0&&function xk(n,e,t){return t.some(r=>BC(n,e,r)&&Ea(r)!==Wt)}(n,t,r)){const c=new Jt(e,function Mk(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ea(u)!==Wt){const c=new Jt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ea(u)]=c}return i}(n,e,r,new Jt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Rk(n,e,t){return t.some(r=>BC(n,e,r))}(n,t,r)){const c=new Jt(n.segments,function Sk(n,e,t,r,i,u){const c={};for(const p of r)if(BC(n,t,p)&&!i[Ea(p)]){const _=new Jt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Ea(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Jt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function BC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function zx(n,e,t,r){return!!(Ea(n)===r||r!==Wt&&BC(e,t,n))&&("**"===n.path||VC(e,n,t).matched)}function Wx(n,e,t){return 0===e.length&&!n.children[t]}class jC{constructor(e){this.segmentGroup=e||null}}class Zx{constructor(e){this.urlTree=e}}function Y0(n){return SC(new jC(n))}function Kx(n){return SC(new Zx(n))}function Pk(n){return SC(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class kk{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=UC(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Wt).pipe((0,kt.U)(u=>this.createUrlTree(DA(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xh(u=>{if(u instanceof Zx)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof jC?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Wt).pipe((0,kt.U)(i=>this.createUrlTree(DA(i),e.queryParams,e.fragment))).pipe(Xh(i=>{throw i instanceof jC?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Jt([],{[Wt]:e}):e;return new Op(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,kt.U)(u=>new Jt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,jt.D)(i).pipe(j0(u=>{const c=r.children[u],p=Gx(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,kt.U)(_=>({segment:_,outlet:u})))}),go((u,c)=>(u[c.outlet]=c.segment,u),{}),function DN(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vn((i,u)=>n(i,u,r)):mi.y,hA(1),t?mD(e):zb(()=>new E0))}())}expandSegment(e,t,r,i,u,c){return(0,jt.D)(r).pipe(j0(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(Xh(b=>{if(b instanceof jC)return vt(null);throw b}))),zc(p=>!!p),Xh((p,_)=>{if(p instanceof E0||"EmptyError"===p.name)return Wx(t,i,u)?vt(new Jt([],{})):Y0(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return zx(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Y0(t):Y0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Kx(u):this.lineralizeSegments(r,u).pipe((0,is.z)(c=>{const p=new Jt(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=VC(t,i,u);if(!p)return Y0(t);const M=this.applyRedirectCommands(_,i.redirectTo,S);return i.redirectTo.startsWith("/")?Kx(M):this.lineralizeSegments(i,M).pipe((0,is.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?vt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,kt.U)(M=>(r._loadedConfig=M,new Jt(i,{})))):vt(new Jt(i,{}));const{matched:c,consumedSegments:p,remainingSegments:_}=VC(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,is.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:B,slicedSegments:z}=UC(t,p,_,F),ce=new Jt(B.segments,B.children);if(0===z.length&&ce.hasChildren())return this.expandChildren(M,F,ce).pipe((0,kt.U)(tt=>new Jt(p,tt)));if(0===F.length&&0===z.length)return vt(new Jt(p,{}));const De=Ea(r)===u;return this.expandSegment(M,ce,F,z,De?Wt:u,!0).pipe((0,kt.U)(ot=>new Jt(p.concat(ot.segments),ot.children)))})):Y0(t)}getChildConfig(e,t,r){return t.children?vt(new IA(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?vt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,is.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,kt.U)(u=>(t._loadedConfig=u,u))):function Ok(n){return SC(pA(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):vt(new IA([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return vt(!0);const u=i.map(c=>{const p=e.get(c);let _;if(function wk(n){return n&&ef(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!ef(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return yl(_)});return vt(u).pipe(Z0(),(0,No.b)(c=>{if(!kp(c))return;const p=pA(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,kt.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return vt(r);if(i.numberOfChildren>1||!i.children[Wt])return Pk(e.redirectTo);i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Op(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Oi(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Oi(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new Jt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function DA(n){const e={};for(const r of Object.keys(n.children)){const u=DA(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Fk(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}class Yx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $C{constructor(e,t){this.component=e,this.route=t}}function Vk(n,e,t){const r=n._root;return Q0(r,e?e._root:null,t,[r.value])}function HC(n,e,t){const r=function Bk(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Q0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Py(e);return n.children.forEach(c=>{(function jk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function $k(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Np(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Np(n.url,e.url)||!ml(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wA(n,e)||!ml(n.queryParams,e.queryParams);default:return!wA(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Yx(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Q0(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new $C(p.outlet.component,c))}else c&&J0(e,p,i),i.canActivateChecks.push(new Yx(r)),Q0(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Oi(u,(c,p)=>J0(c,t.getContext(p),i)),i}function J0(n,e,t){const r=Py(n),i=n.value;Oi(r,(u,c)=>{J0(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new $C(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Qk{}function Qx(n){return new qi.y(e=>e.error(n))}class Xk{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=UC(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Wt);if(null===t)return null;const r=new NC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Jc(r,t),u=new kx(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Nx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=Gx(e,u),_=this.processSegmentGroup(p,c,u);if(null===_)return null;r.push(..._)}const i=Jx(r);return function eF(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return Wx(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!zx(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const B=r.length>0?wx(r).parameters:{};u=new NC(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tR(e),Ea(e),e.component,e,Xx(t),eR(t)+r.length,nR(e))}else{const B=VC(t,e,r);if(!B.matched)return null;c=B.consumedSegments,p=B.remainingSegments,u=new NC(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tR(e),Ea(e),e.component,e,Xx(t),eR(t)+c.length,nR(e))}const _=function tF(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=UC(t,c,p,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const B=this.processChildren(_,b);return null===B?null:[new Jc(u,B)]}if(0===_.length&&0===S.length)return[new Jc(u,[])];const M=Ea(e)===i,F=this.processSegment(_,b,S,M?Wt:i);return null===F?null:[new Jc(u,F)]}}function nF(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jx(n){const e=[],t=new Set;for(const r of n){if(!nF(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Jx(r.children);e.push(new Jc(r.value,i))}return e.filter(r=>!t.has(r))}function Xx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eR(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function tR(n){return n.data||{}}function nR(n){return n.resolve||{}}function rR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function AA(n){return Kr(e=>{const t=n(e);return t?(0,jt.D)(t).pipe((0,kt.U)(()=>e)):vt(e)})}class cF extends class lF{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const SA=new d.OlP("ROUTES");class iR{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,kt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new IA(vx(c.injector.get(SA,void 0,d.XFs.Self|d.XFs.Optional)).map(TA),c)}),Xh(u=>{throw t._loader$=void 0,u}));return t._loader$=new TN(i,()=>new po.x).pipe(hx()),t._loader$}loadModuleFactory(e){return yl(e()).pipe((0,is.z)(t=>t instanceof d.YKP?vt(t):(0,jt.D)(this.compiler.compileModuleAsync(t))))}}class hF{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function fF(n){throw n}function pF(n,e,t){return e.parse("/")}function sR(n,e){return vt(null)}const gF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ni=(()=>{class n{constructor(t,r,i,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new po.x,this.errorHandler=fF,this.malformedUriErrorHandler=pF,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:sR,afterPreactivation:sR},this.urlHandlingStrategy=new hF,this.routeReuseStrategy=new cF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const M=c.get(d.R0b);this.isNgZoneEnabled=M instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function $N(){return new Op(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new iR(c,p,F=>this.triggerEvent(new px(F)),F=>this.triggerEvent(new gx(F))),this.routerState=Ox(this.currentUrlTree,this.rootComponentType),this.transitions=new Cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(vn(i=>0!==i.id),(0,kt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Kr(i=>{let u=!1,c=!1;return vt(i).pipe((0,No.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Kr(p=>{const _=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return oR(p.source)&&(this.browserUrlTree=p.extractedUrl),vt(p).pipe(Kr(M=>{const F=this.transitions.getValue();return r.next(new fA(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?xy.E:Promise.resolve(M)}),function Lk(n,e,t,r){return Kr(i=>function Nk(n,e,t,r,i){return new kk(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,kt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,No.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function rF(n,e,t,r,i){return(0,is.z)(u=>function Jk(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new Xk(n,e,t,r,i,u).recognize();return null===c?Qx(new Qk):vt(c)}catch(c){return Qx(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,kt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,No.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(B,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new MN(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:B,source:z,restoredState:ce,extras:De}=p,it=new fA(F,this.serializeUrl(B),z,ce);r.next(it);const ot=Ox(B,this.rootComponentType).snapshot;return vt(Object.assign(Object.assign({},p),{targetSnapshot:ot,urlAfterRedirects:B,extras:Object.assign(Object.assign({},De),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),xy.E}),AA(p=>{const{targetSnapshot:_,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,No.b)(p=>{const _=new xN(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,kt.U)(p=>Object.assign(Object.assign({},p),{guards:Vk(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Hk(n,e){return(0,is.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?vt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Gk(n,e,t,r){return(0,jt.D)(n).pipe((0,is.z)(i=>function Yk(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?vt(u.map(p=>{const _=HC(p,e,i);let b;if(function Ck(n){return n&&ef(n.canDeactivate)}(_))b=yl(_.canDeactivate(n,e,t,r));else{if(!ef(_))throw new Error("Invalid CanDeactivate guard");b=yl(_(n,e,t,r))}return b.pipe(zc())})).pipe(Z0()):vt(!0)}(i.component,i.route,t,e,r)),zc(i=>!0!==i,!0))}(c,r,i,n).pipe((0,is.z)(p=>p&&function vk(n){return"boolean"==typeof n}(p)?function qk(n,e,t,r){return(0,jt.D)(e).pipe(j0(i=>Wi(function Wk(n,e){return null!==n&&e&&e(new NN(n)),vt(!0)}(i.route.parent,r),function zk(n,e){return null!==n&&e&&e(new FN(n)),vt(!0)}(i.route,r),function Kk(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function Uk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>cx(()=>vt(c.guards.map(_=>{const b=HC(_,c.node,t);let S;if(function bk(n){return n&&ef(n.canActivateChild)}(b))S=yl(b.canActivateChild(r,n));else{if(!ef(b))throw new Error("Invalid CanActivateChild guard");S=yl(b(r,n))}return S.pipe(zc())})).pipe(Z0())));return vt(u).pipe(Z0())}(n,i.path,t),function Zk(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const i=r.map(u=>cx(()=>{const c=HC(u,e,t);let p;if(function Ek(n){return n&&ef(n.canActivate)}(c))p=yl(c.canActivate(e,n));else{if(!ef(c))throw new Error("Invalid CanActivate guard");p=yl(c(e,n))}return p.pipe(zc())}));return vt(i).pipe(Z0())}(n,i.route,t))),zc(i=>!0!==i,!0))}(r,u,n,e):vt(p)),(0,kt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,No.b)(p=>{if(kp(p.guardsResult)){const b=pA(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const _=new RN(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),vn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),AA(p=>{if(p.guards.canActivateChecks.length)return vt(p).pipe((0,No.b)(_=>{const b=new PN(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),Kr(_=>{let b=!1;return vt(_).pipe(function iF(n,e){return(0,is.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let u=0;return(0,jt.D)(i).pipe(j0(c=>function sF(n,e,t,r){return function oF(n,e,t,r){const i=rR(n);if(0===i.length)return vt({});const u={};return(0,jt.D)(i).pipe((0,is.z)(c=>function aF(n,e,t,r){const i=HC(n,e,r);return yl(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,No.b)(p=>{u[c]=p}))),hA(1),(0,is.z)(()=>rR(u).length===i.length?vt(u):xy.E))}(n._resolve,n,e,r).pipe((0,kt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Nx(n,t).resolve),null)))}(c.route,r,n,e)),(0,No.b)(()=>u++),hA(1),(0,is.z)(c=>u===i.length?vt(t):xy.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,No.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,No.b)(_=>{const b=new ON(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),AA(p=>{const{targetSnapshot:_,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,kt.U)(p=>{const _=function ok(n,e,t){const r=q0(n,e._root,t?t._root:void 0);return new Px(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,No.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,kt.U)(r=>(new yk(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,No.b)({next(){u=!0},complete(){u=!0}}),function AN(n){return(0,Gn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Xh(p=>{if(c=!0,function UN(n){return n&&n[yx]}(p)){const _=kp(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const b=new fx(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),_?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oR(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new SN(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return xy.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hx(t),this.config=t.map(TA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,b=i||this.routerState.root,S=_?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function lk(n,e,t,r,i){if(0===t.length)return EA(e.root,e.root,e.root,r,i);const u=function ck(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vx(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Oi(u.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Vx(t,e,r)}(t);if(u.toRoot())return EA(e.root,e.root,new Jt([],{}),r,i);const c=function dk(n,e,t){if(n.isAbsolute)return new bA(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new bA(u,u===e.root,0)}const r=kC(n.commands[0])?0:1;return function hk(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new bA(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?FC(c.segmentGroup,c.index,u.commands):Ux(c.segmentGroup,c.index,u.commands);return EA(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=kp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function yF(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},gF):!1===r?Object.assign({},mF):r,kp(t))return bx(this.currentUrlTree,t,i);const u=this.parseUrl(t);return bx(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,_;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((z,ce)=>{b=z,S=ce});const F=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):B=0,this.setTransition({id:F,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new fx(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function oR(n){return"imperative"!==n}let Fp=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new po.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ky(this.skipLocationChange),replaceUrl:ky(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ky(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ni),d.Y36(Oy),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),Ny=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new po.x,this.subscription=t.events.subscribe(u=>{u instanceof $0&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:ky(this.skipLocationChange),replaceUrl:ky(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ky(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ni),d.Y36(Oy),d.Y36(pe))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function ky(n){return""===n||!!n}class aR{}class uR{preload(e,t){return vt(null)}}let lR=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new iR(i,r,_=>t.triggerEvent(new px(_)),_=>t.triggerEvent(new gx(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(vn(t=>t instanceof $0),j0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,jt.D)(i).pipe((0,Mi.J)(),(0,kt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?vt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,is.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ni),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(aR))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),MA=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new mx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Lp=new d.OlP("ROUTER_CONFIGURATION"),cR=new d.OlP("ROUTER_FORROOT_GUARD"),EF=[we,{provide:Dx,useClass:Ax},{provide:Ni,useFactory:function DF(n,e,t,r,i,u,c={},p,_){const b=new Ni(null,n,e,t,r,i,vx(u));return p&&(b.urlHandlingStrategy=p),_&&(b.routeReuseStrategy=_),function AF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[Dx,K0,we,d.zs3,d.Sil,SA,Lp,[class dF{},new d.FiY],[class uF{},new d.FiY]]},K0,{provide:Oy,useFactory:function SF(n){return n.routerState.root},deps:[Ni]},lR,uR,class wF{preload(e,t){return t().pipe(Xh(()=>vt(null)))}},{provide:Lp,useValue:{enableTracing:!1}}];function bF(){return new d.PXZ("Router",Ni)}let dR=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[EF,hR(t),{provide:cR,useFactory:TF,deps:[[Ni,new d.FiY,new d.tp0]]},{provide:Lp,useValue:r||{}},{provide:pe,useFactory:IF,deps:[se,[new d.tBr(Ge),new d.FiY],Lp]},{provide:MA,useFactory:CF,deps:[Ni,Il,Lp]},{provide:aR,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:uR},{provide:d.PXZ,multi:!0,useFactory:bF},[xA,{provide:d.ip1,multi:!0,useFactory:MF,deps:[xA]},{provide:fR,useFactory:xF,deps:[xA]},{provide:d.tb,multi:!0,useExisting:fR}]]}}static forChild(t){return{ngModule:n,providers:[hR(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(cR,8),d.LFG(Ni,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function CF(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new MA(n,e,t)}function IF(n,e,t={}){return t.useHash?new Te(n,e):new Ke(n,e)}function TF(n){return"guarded"}function hR(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:SA,multi:!0,useValue:n}]}let xA=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new po.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(Ni),c=this.injector.get(Lp);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?vt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Lp),i=this.injector.get(lR),u=this.injector.get(MA),c=this.injector.get(Ni),p=this.injector.get(d.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function MF(n){return n.appInitializer.bind(n)}function xF(n){return n.bootstrapListener.bind(n)}const fR=new d.OlP("Router Initializer");let PF=(()=>{class n{constructor(t,r,i){this.firestore=t,this.auth=r,this.router=i,this.title="clinica"}ngOnInit(){var t,r;let i=window.localStorage.getItem("usuario");i&&(this.firestore.usuario.next(JSON.parse(i)),this.auth.Login(null===(t=this.firestore.usuario.value)||void 0===t?void 0:t.email,null===(r=this.firestore.usuario.value)||void 0===r?void 0:r.password))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(B0),d.Y36(k0),d.Y36(Ni))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[LC],styles:[""]}),n})(),pR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Vp=(()=>{class n extends pR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const _l=new d.OlP("NgValueAccessor"),kF={provide:_l,useExisting:(0,d.Gpc)(()=>X0),multi:!0},LF=new d.OlP("CompositionEventMode");let X0=(()=>{class n extends pR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FF(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(LF,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([kF]),d.qOj]}),n})();function tf(n){return null==n||0===n.length}function mR(n){return null!=n&&"number"==typeof n.length}const ss=new d.OlP("NgValidators"),nf=new d.OlP("NgAsyncValidators"),VF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Yn{static min(e){return function yR(n){return e=>{if(tf(e.value)||tf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function _R(n){return e=>{if(tf(e.value)||tf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function vR(n){return tf(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function wR(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ER(n){return tf(n.value)||VF.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function bR(n){return e=>tf(e.value)||!mR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function CR(n){return e=>mR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function IR(n){if(!n)return GC;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(tf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return xR(e)}static composeAsync(e){return RR(e)}}function GC(n){return null}function TR(n){return null!=n}function DR(n){const e=(0,d.QGY)(n)?(0,jt.D)(n):n;return(0,d.CqO)(e),e}function AR(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function SR(n,e){return e.map(t=>t(n))}function MR(n){return n.map(e=>function UF(n){return!n.validate}(e)?e:t=>e.validate(t))}function xR(n){if(!n)return null;const e=n.filter(TR);return 0==e.length?null:function(t){return AR(SR(t,e))}}function RA(n){return null!=n?xR(MR(n)):null}function RR(n){if(!n)return null;const e=n.filter(TR);return 0==e.length?null:function(t){return function OF(...n){const e=(0,zi.jO)(n),{args:t,keys:r}=ox(n),i=new qi.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,dy.Xf)(t[S]).subscribe((0,pr.x)(u,F=>{M||(M=!0,b--),p[S]=F},()=>_--,void 0,()=>{(!_||!M)&&(b||u.next(r?ux(r,p):p),u.complete())}))}});return e?i.pipe(ax(e)):i}(SR(t,e).map(DR)).pipe((0,kt.U)(AR))}}function PA(n){return null!=n?RR(MR(n)):null}function PR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OR(n){return n._rawValidators}function NR(n){return n._rawAsyncValidators}function OA(n){return n?Array.isArray(n)?n:[n]:[]}function qC(n,e){return Array.isArray(n)?n.includes(e):n===e}function kR(n,e){const t=OA(e);return OA(n).forEach(i=>{qC(t,i)||t.push(i)}),t}function FR(n,e){return OA(e).filter(t=>!qC(n,t))}class LR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=RA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rf extends LR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ds extends LR{get formDirective(){return null}get path(){return null}}class VR{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let NA=(()=>{class n extends VR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rf,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),zC=(()=>{class n extends VR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ds,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function ew(n,e){LA(n,e),e.valueAccessor.writeValue(n.value),function WF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BR(n,e)})}(n,e),function KF(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ZF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function zF(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function KC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),QC(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function YC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LA(n,e){const t=OR(n);null!==e.validator?n.setValidators(PR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=NR(n);null!==e.asyncValidator?n.setAsyncValidators(PR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();YC(e._rawValidators,i),YC(e._rawAsyncValidators,i)}function QC(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=OR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=NR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return YC(e._rawValidators,r),YC(e._rawAsyncValidators,r),t}function BR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jR(n,e){LA(n,e)}function HR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const tw="VALID",JC="INVALID",Fy="PENDING",nw="DISABLED";function $A(n){return(XC(n)?n.validators:n)||null}function GR(n){return Array.isArray(n)?RA(n):n||null}function HA(n,e){return(XC(e)?e.asyncValidators:n)||null}function qR(n){return Array.isArray(n)?PA(n):n||null}function XC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const GA=n=>n instanceof rw,eI=n=>n instanceof tI,zR=n=>n instanceof YR;function WR(n){return GA(n)?n.value:n.getRawValue()}function ZR(n,e){const t=eI(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function KR(n,e){eI(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new d.vHH(1002,"")})}class qA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=GR(this._rawValidators),this._composedAsyncValidatorFn=qR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===tw}get invalid(){return this.status===JC}get pending(){return this.status==Fy}get disabled(){return this.status===nw}get enabled(){return this.status!==nw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=GR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=qR(e)}addValidators(e){this.setValidators(kR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FR(e,this._rawAsyncValidators))}hasValidator(e){return qC(this._rawValidators,e)}hasAsyncValidator(e){return qC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tw,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tw||this.status===Fy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nw:tw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fy,this._hasOwnPendingAsyncValidator=!0;const t=DR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function XF(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=eI(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:zR(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?nw:this.errors?JC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fy)?Fy:this._anyControlsHaveStatus(JC)?JC:tw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){XC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class rw extends qA{constructor(e=null,t,r){super($A(t),HA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),XC(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class tI extends qA{constructor(e,t,r){super($A(t),HA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){KR(this,e),Object.keys(e).forEach(r=>{ZR(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=WR(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class YR extends qA{constructor(e,t,r){super($A(t),HA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){KR(this,e),e.forEach((r,i)=>{ZR(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>WR(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const eL={provide:Ds,useExisting:(0,d.Gpc)(()=>nI)},iw=(()=>Promise.resolve(null))();let nI=(()=>{class n extends Ds{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new tI({},RA(t),PA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){iw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ew(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){iw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){iw.then(()=>{const r=this._findContainer(t.path),i=new tI({});jR(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){iw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){iw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,HR(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ss,10),d.Y36(nf,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([eL]),d.qOj]}),n})(),rI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const rL={provide:_l,useExisting:(0,d.Gpc)(()=>zA),multi:!0};let zA=(()=>{class n extends Vp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([rL]),d.qOj]}),n})(),tP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const WA=new d.OlP("NgModelWithFormControlWarning"),uL={provide:Ds,useExisting:(0,d.Gpc)(()=>sw)};let sw=(()=>{class n extends Ds{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(QC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ew(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){KC(t.control||null,t,!1),BA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,HR(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(KC(r||null,t),GA(i)&&(ew(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);jR(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function YF(n,e){return QC(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LA(this.form,this),this._oldForm&&QC(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ss,10),d.Y36(nf,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([uL]),d.qOj,d.TTD]}),n})();const dL={provide:rf,useExisting:(0,d.Gpc)(()=>iI)};let iI=(()=>{class n extends rf{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function UA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===X0?t=u:function JF(n){return Object.getPrototypeOf(n.constructor)===Vp}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function VA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ZC(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Ds,13),d.Y36(ss,10),d.Y36(nf,10),d.Y36(_l,10),d.Y36(WA,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([dL]),d.qOj,d.TTD]}),n})(),yP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[tP]]}),n})(),AL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[yP]}),n})(),_P=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:WA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[yP]}),n})(),XA=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function SL(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new tI(i,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,i){return new rw(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new YR(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return GA(t)||eI(t)||zR(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:_P}),n})(),eS=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"loading-overlay"],["src","../../../assets/heart-loading2.gif","alt","Loading..."]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.qZA())},styles:[".loading-overlay[_ngcontent-%COMP%]{display:flex;background:rgba(255,255,255,.7);position:fixed;bottom:0;left:0;right:0;top:0;z-index:9998;align-items:center;justify-content:center}"]}),n})();const ML=["file"];function xL(n,e){1&n&&d._UZ(0,"app-loading")}function RL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",14)(1,"label",15),d._uU(2,"Admin"),d.qZA(),d.TgZ(3,"button",16)(4,"img",17),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).obtenerRol("admin")}),d.qZA()()()}}function PL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",5)(1,"div",6)(2,"label",7),d._uU(3,"Paciente"),d.qZA(),d.TgZ(4,"button",8)(5,"img",9),d.NdJ("click",function(){return d.CHM(t),d.oxw().obtenerRol("paciente")}),d.qZA()()(),d.TgZ(6,"div",6)(7,"label",10),d._uU(8,"Especialista"),d.qZA(),d.TgZ(9,"button",11)(10,"img",12),d.NdJ("click",function(){return d.CHM(t),d.oxw().obtenerRol("especialista")}),d.qZA()()(),d.YNc(11,RL,5,0,"div",13),d.qZA()}if(2&n){const t=d.oxw();d.xp6(11),d.Q6J("ngIf",1==t.admin)}}function OL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("nombre"))}}function NL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("apellido"))}}function kL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("edad"))}}function FL(n,e){if(1&n&&d._UZ(0,"input",35),2&n){const t=d.oxw(2);d.ekj("is-invalid",t.isNotValidField("obraSocial"))("is-valid",!t.isNotValidField("obraSocial")&&t.f.obraSocial.touched)}}function LL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("obraSocial"))}}function VL(n,e){if(1&n&&d._UZ(0,"input",36),2&n){const t=d.oxw(2);d.ekj("is-invalid",t.isNotValidField("especialidad"))("is-valid",!t.isNotValidField("especialidad")&&t.f.especialidad.touched)}}function UL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("",t.getErrorMessage("especialidad")," ")}}function BL(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("email"))}}function jL(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1,"Email already in use."),d.qZA())}function $L(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getErrorMessage("password"))}}function HL(n,e){if(1&n&&(d.TgZ(0,"div",37),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.error)}}function GL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"form",18)(1,"span",19),d._uU(2,"Register"),d.qZA(),d._UZ(3,"input",20),d.TgZ(4,"div",21),d._uU(5),d.qZA(),d._UZ(6,"input",22),d.YNc(7,OL,2,1,"div",23),d._UZ(8,"input",24),d.YNc(9,NL,2,1,"div",23),d._UZ(10,"input",25),d.YNc(11,kL,2,1,"div",23),d.YNc(12,FL,1,4,"input",26),d.YNc(13,LL,2,1,"div",23),d.YNc(14,VL,1,4,"input",27),d.YNc(15,UL,2,1,"div",23),d._UZ(16,"input",28),d.YNc(17,BL,2,1,"div",23),d.YNc(18,jL,2,0,"div",23),d._UZ(19,"input",29),d.YNc(20,$L,2,1,"div",23),d.TgZ(21,"input",30,31),d.NdJ("change",function(){return d.CHM(t),d.oxw().onChangeFile()}),d.qZA(),d.YNc(23,HL,2,1,"div",32),d.TgZ(24,"button",33),d.NdJ("click",function(){return d.CHM(t),d.oxw().submit()}),d._uU(25,"Register"),d.qZA(),d.TgZ(26,"a",34),d._uU(27,"Already have an account?"),d.qZA()()}if(2&n){const t=d.oxw();d.Q6J("formGroup",t.registerForm),d.xp6(3),d.ekj("is-invalid",t.isNotValidField("DNI"))("is-valid",!t.isNotValidField("DNI")&&t.f.DNI.touched),d.xp6(2),d.Oqu(t.getErrorMessage("DNI")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("nombre"))("is-valid",!t.isNotValidField("nombre")&&t.f.nombre.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("nombre")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("apellido"))("is-valid",!t.isNotValidField("apellido")&&t.f.apellido.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("apellido")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("edad"))("is-valid",!t.isNotValidField("edad")&&t.f.edad.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("edad")),d.xp6(1),d.Q6J("ngIf","paciente"==t.rol),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("obraSocial")),d.xp6(1),d.Q6J("ngIf","especialista"==t.rol),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("especialidad")),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("email"))("is-valid",!t.isNotValidField("email")&&t.f.email.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("email")),d.xp6(1),d.Q6J("ngIf",null==t.f.email.errors?null:t.f.email.errors.emailVerified),d.xp6(1),d.ekj("is-invalid",t.isNotValidField("password"))("is-valid",!t.isNotValidField("password")&&t.f.password.touched),d.xp6(1),d.Q6J("ngIf",t.isNotValidField("password")),d.xp6(3),d.Q6J("ngIf",""!=t.error),d.xp6(1),d.Q6J("disabled",t.registerForm.invalid)}}let qL=(()=>{class n{constructor(t,r,i,u){this.formBuilder=t,this.auth=r,this.firestore=i,this.router=u,this.rolSelected=!1,this.error="",this.listaUsuarios=[],this.admin=!1,this.cargando=!1,this.registerForm=this.formBuilder.group({DNI:["",[Yn.minLength(7),Yn.maxLength(8),Yn.required]],nombre:["",[Yn.minLength(3),Yn.required]],apellido:["",[Yn.minLength(3),Yn.required]],edad:["",[Yn.required]],rol:["",[Yn.minLength(3),Yn.required]],email:["",[Yn.email,Yn.required]],password:["",[Yn.minLength(7),Yn.required]]})}ngOnInit(){this.firestore.getPacientes().subscribe(t=>{t.forEach(r=>{this.listaUsuarios.push(r)})}),this.AdminValid()}get f(){return this.registerForm.controls}isNotValidField(t){return!!this.f[t]&&(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}submit(){console.log("Entre"),this.cargando=!0,this.registerForm.invalid?(this.error="Formulario invalido",console.log("error")):(this.paciente=this.registerForm.value,this.IsRepetedEmail(this.paciente.email,this.listaUsuarios)?(this.error="Email already in use",this.cargando=!1):this.auth.Register(this.paciente).then(t=>{var r;(null===(r=t.user)||void 0===r?void 0:r.email)?this.firestore.uploadImage(this.paciente.email,this.archivo).then(i=>{null!=i?(this.paciente.imageURL1=i,this.paciente.rol=this.rol,this.paciente.activo="true",this.firestore.setPaciente(this.paciente).then(()=>{this.cargando=!1,this.firestore.usuario.next(this.paciente),window.localStorage.setItem("usuario",JSON.stringify(this.firestore.usuario.value)),this.router.navigateByUrl("home")})):(this.error="Cant upload image.",this.cargando=!1)}):(this.error="Cant resolve register, try later.",this.cargando=!1)}))}getErrorMessage(t){let r="";return""!=t&&(this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="At least "+this.f[t].getError("minlength").requiredLength+" characters")),r}onChangeFile(){let t=this.file.nativeElement.files[0],r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{this.archivo=r.result}}obtenerRol(t){this.rolSelected=!0,this.rol=t,this.f.rol.setValue(this.rol),"especialista"==this.f.rol.value?(this.registerForm.addControl("especialidad",new rw("",Yn.required)),this.registerForm.removeControl("obraSocial")):"paciente"==this.f.rol.value&&(this.registerForm.addControl("obraSocial",new rw("",Yn.required)),this.registerForm.removeControl("especialidad"))}AdminValid(){let t=window.localStorage.getItem("usuario");null!=t&&"admin"==JSON.parse(t).rol&&(this.admin=!0)}IsRepetedEmail(t,r){let i=!1;return r.forEach(u=>{u.email==t&&(i=!0)}),i}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XA),d.Y36(k0),d.Y36(B0),d.Y36(Ni))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&d.Gf(ML,5),2&t){let i;d.iGM(i=d.CRH())&&(r.file=i.first)}},decls:5,vars:3,consts:[[1,"login"],[4,"ngIf"],[1,"form"],["class","row container-img",4,"ngIf"],["class","login-form",3,"formGroup",4,"ngIf"],[1,"row","container-img"],[1,"col-6","mb-4"],["for","paciente"],["id","paciente"],["src","../../../assets/logo-paciente.jpg","alt","",1,"btn-img",3,"click"],["for","especialista"],["id","especialista"],["src","../../../assets/logo-espcialista.png","alt","",1,"btn-img",3,"click"],["class","col-12",4,"ngIf"],[1,"col-12"],["for","admin"],["id","admin"],["src","../../../assets/logo-admin.png","alt","",1,"btn-img",3,"click"],[1,"login-form",3,"formGroup"],[1,"material-icon"],["type","text","placeholder","DNI","formControlName","DNI"],[1,"invalid-feedback"],["type","text","placeholder","Nombre","formControlName","nombre"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Apellido","formControlName","apellido"],["type","number","placeholder","Edad","formControlName","edad"],["type","text","placeholder","Obra Social","formControlName","obraSocial",3,"is-invalid","is-valid",4,"ngIf"],["type","text","placeholder","Especialidad","formControlName","especialidad",3,"is-invalid","is-valid",4,"ngIf"],["type","text","placeholder","Email","formControlName","email"],["type","password","placeholder","Contrase\xf1a","formControlName","password"],["type","file","accept","image/*","placeholder","Seleccione una imagen",3,"change"],["file",""],["Class","form","style","color: red;",4,"ngIf"],[3,"disabled","click"],["routerLink","/login",1,"register"],["type","text","placeholder","Obra Social","formControlName","obraSocial"],["type","text","placeholder","Especialidad","formControlName","especialidad"],["Class","form",2,"color","red"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,xL,1,0,"app-loading",1),d.TgZ(2,"div",2),d.YNc(3,PL,12,1,"div",3),d.YNc(4,GL,28,38,"form",4),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(2),d.Q6J("ngIf",!r.rolSelected),d.xp6(1),d.Q6J("ngIf",r.rolSelected))},directives:[On,eS,rI,zC,sw,X0,NA,iI,zA,Ny],styles:['@import"https://fonts.googleapis.com/css2?family=Comfortaa&display=swap";body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b6cb7 0%,#182848 100%)}.login[_ngcontent-%COMP%]{width:360px;padding-top:3%;margin:auto;font-family:Comfortaa,cursive}.container-img[_ngcontent-%COMP%]{margin-top:60%}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#FFFFFF;border-radius:10px;max-width:360px;text-align:center}.btn-img[_ngcontent-%COMP%]{width:100px;height:100px;background-size:cover;background-repeat:no-repeat;border-radius:10px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0;background:#f2f2f2;width:100%;border:0;border-radius:5px;margin:0 0 15px;padding:15px;box-sizing:border-box;font-size:14px;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#dbdbdb}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Comfortaa,cursive;text-transform:uppercase;outline:0;background:#4b6cb7;width:100%;border:0;border-radius:5px;padding:15px;color:#fff;font-size:14px;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#395591}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:75px;color:#4b6cb7}.register[_ngcontent-%COMP%]{top:200px}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.is-valid[_ngcontent-%COMP%]{border-color:#35dc75;box-shadow:0 0 0 .25rem #44e04440}.invalid-feedback[_ngcontent-%COMP%]{top:1;bottom:100}']}),n})();function zL(n,e){1&n&&(d.TgZ(0,"div",19)(1,"button",20),d._uU(2,"Log in"),d.qZA(),d.TgZ(3,"button",21),d._uU(4,"Register"),d.qZA()())}function WL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"span",22),d._uU(2),d.qZA(),d.TgZ(3,"button",23),d.NdJ("click",function(){return d.CHM(t),d.oxw().onClickLogOut()}),d._UZ(4,"i",24),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(2),d.AsE("",t.usuario.value.nombre," ",t.usuario.value.apellido," ")}}let ZL=(()=>{class n{constructor(t,r,i){this.firestore=t,this.auth=r,this.router=i,this.usuario=this.firestore.usuario}ngOnInit(){}onClickLogOut(){this.auth.LogOut(),this.firestore.usuario.next(null),window.localStorage.removeItem("usuario"),this.router.navigateByUrl("login")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(B0),d.Y36(k0),d.Y36(Ni))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:36,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","gap-2"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["src","../../../assets/clinica-logo2.jpg","alt","",1,"logo"],[1,"nav-item","rounded"],[1,"bi","bi-house-fill","me-2"],[1,"nav-link"],[1,"bi","bi-people-fill","me-2"],[1,"bi","bi-telephone-fill","me-2"],["routerLink","/home/usuarios",1,"nav-link"],["routerLink","/home/mis-turnos",1,"nav-link"],["class","buttons-login-container",4,"ngIf"],[4,"ngIf"],[1,"buttons-login-container"],["role","button","routerLink","/login",1,"button-24"],["role","button","routerLink","/register",1,"button-24"],[1,"logout-text"],[1,"button-login",3,"click"],[1,"fa","fa-power-off"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"div",1),d._UZ(2,"a",2),d.TgZ(3,"button",3),d._UZ(4,"span",4),d.qZA(),d.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),d._UZ(9,"img",9),d.qZA()(),d.TgZ(10,"li",10)(11,"a",8),d._UZ(12,"i",11),d._uU(13,"Home "),d.qZA()(),d.TgZ(14,"li",10)(15,"a",12),d._UZ(16,"i",13),d._uU(17,"About"),d.qZA()(),d.TgZ(18,"li",10)(19,"a",12),d._UZ(20,"i",14),d._uU(21,"Contact"),d.qZA()(),d.TgZ(22,"li",10)(23,"a",15),d._UZ(24,"i",14),d._uU(25,"Usuarios"),d.qZA()(),d.TgZ(26,"li",10)(27,"a",16),d._UZ(28,"i",14),d._uU(29,"Mis turnos"),d.qZA()(),d.TgZ(30,"li",10)(31,"a",12),d._UZ(32,"i",14),d._uU(33,"Perfil"),d.qZA()()()(),d.YNc(34,zL,5,0,"div",17),d.YNc(35,WL,5,2,"div",18),d.qZA()()),2&t&&(d.xp6(34),d.Q6J("ngIf",null==r.usuario.value),d.xp6(1),d.Q6J("ngIf",null!=r.usuario.value))},directives:[Ny,On,Fp],styles:[".navbar[_ngcontent-%COMP%]{z-index:1001;background-color:#212121}.logo[_ngcontent-%COMP%]{height:3rem;width:3rem;border-radius:10px}.buttons-login-container[_ngcontent-%COMP%]{margin-left:200px}.button-24[_ngcontent-%COMP%]{background:#426eff;border:1px solid #426eff;border-radius:6px;box-shadow:#0000001a 1px 2px 4px;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:nunito,roboto,proxima-nova,proxima nova,sans-serif;font-size:16px;font-weight:800;line-height:16px;min-height:40px;outline:0;padding:12px 14px;text-align:center;text-rendering:geometricprecision;text-transform:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:middle}.button-24[_ngcontent-%COMP%]:hover, .button-24[_ngcontent-%COMP%]:active{background-color:initial;background-position:0 0;color:#42ffff}.button-24[_ngcontent-%COMP%]:active{opacity:.5}.button-login[_ngcontent-%COMP%]{background-color:red;color:#fff;font-size:x-large;border-radius:30px;width:50px;height:50px}.button-login[_ngcontent-%COMP%]:hover{background-color:#fc020277}.logout-text[_ngcontent-%COMP%]{margin-right:10px;font-size:x-large;color:#fff}"]}),n})(),KL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dashboard"]],decls:18,vars:0,consts:[[1,"main-menu"],["href",""],[1,"fa","fa-home","fa-2x"],[1,"nav-text"],[1,"has-subnav"],["href","#"],[1,"fa","fa-laptop","fa-2x"],[1,"logout"],[1,"fa","fa-power-off","fa-2x"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"ul")(2,"li")(3,"a",1),d._UZ(4,"i",2),d.TgZ(5,"span",3),d._uU(6," Componente 1 "),d.qZA()()(),d.TgZ(7,"li",4)(8,"a",5),d._UZ(9,"i",6),d.TgZ(10,"span",3),d._uU(11," Componente 2 "),d.qZA()()()(),d.TgZ(12,"ul",7)(13,"li")(14,"a",5),d._UZ(15,"i",8),d.TgZ(16,"span",3),d._uU(17," Logout "),d.qZA()()()()())},styles:['@import"//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css";@import"https://fonts.googleapis.com/css?family=Titillium+Web:300";.fa-2x[_ngcontent-%COMP%]{font-size:2em}.fa[_ngcontent-%COMP%]{position:relative;display:table-cell;width:60px;height:36px;text-align:center;vertical-align:middle;font-size:20px}.main-menu[_ngcontent-%COMP%]:hover, nav.main-menu.expanded[_ngcontent-%COMP%]{width:250px;overflow:visible}.main-menu[_ngcontent-%COMP%]{background:#212121;position:absolute;top:7.5%;bottom:0;height:92.5%;left:0;width:60px;overflow:hidden;transition:width .05s linear;z-index:1000}.main-menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin:7px 0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;display:block;width:250px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:relative;display:table;border-collapse:collapse;border-spacing:0;color:#999;font-family:arial;font-size:14px;text-decoration:none;transition:all .1s linear}.main-menu[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{position:relative;display:table-cell;width:60px;height:36px;text-align:center;vertical-align:middle;font-size:18px}.main-menu[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{position:relative;display:table-cell;vertical-align:middle;width:190px;font-family:Titillium Web,sans-serif}.main-menu[_ngcontent-%COMP%] > ul.logout[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0}.no-touch[_ngcontent-%COMP%]   .scrollable.hover[_ngcontent-%COMP%]{overflow-y:hidden}.no-touch[_ngcontent-%COMP%]   .scrollable.hover[_ngcontent-%COMP%]:hover{overflow-y:auto;overflow:visible}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{text-decoration:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{outline:0;margin:10;padding:0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%], nav.main-menu[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%] > .active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .no-touch[_ngcontent-%COMP%]   .dashboard-page[_ngcontent-%COMP%]   nav.dashboard-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .dashboard-page[_ngcontent-%COMP%]   nav.dashboard-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;background-color:#5d6e7c}@font-face{font-family:Titillium Web;font-style:normal;font-weight:300;src:local("Titillium WebLight"),local("TitilliumWeb-Light"),url(http://themes.googleusercontent.com/static/fonts/titilliumweb/v2/anMUvcNT0H1YN4FII8wpr24bNCNEoFTpS2BTjF6FB5E.woff) format("woff")}']}),n})(),YL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-navbar")(1,"app-dashboard")(2,"router-outlet")},directives:[ZL,KL,LC],styles:[".container[_ngcontent-%COMP%]{position:relative;top:10 .container;left:5%}"]}),n})();function QL(n,e){1&n&&d._UZ(0,"app-loading")}function JL(n,e){if(1&n&&(d.TgZ(0,"div",19),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.error)}}let XL=(()=>{class n{constructor(t,r,i,u){this.formBuilder=t,this.auth=r,this.router=i,this.fireStore=u,this.cargando=!1,this.error="",this.fotos=[],this.loginForm=this.formBuilder.group({email:["",[Yn.required,Yn.email]],pass:["",[Yn.required,Yn.minLength(7)]]})}ngOnInit(){}get f(){return this.loginForm.controls}isNotValidField(t){return(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}submit(){this.auth.Login(this.f.email.value,this.f.pass.value).then(t=>{if(null!=t){let r=this.fireStore.getPaciente(this.f.email.value).subscribe(i=>{null!=i&&0!=i.length?(this.fireStore.usuario.next(i[0]),window.localStorage.setItem("usuario",JSON.stringify(i[0])),r.unsubscribe(),this.router.navigateByUrl("home")):this.error="error al iniciar sesion"})}else this.error="usuario o constrase\xf1a invalidos"})}getErrorMessage(t){let r="";return this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="at least 7 characters"),r}autocompletado(t,r){this.f.email.setValue(t),this.f.pass.setValue(r),this.submit()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XA),d.Y36(k0),d.Y36(Ni),d.Y36(B0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:31,vars:14,consts:[[1,"login"],[4,"ngIf"],[1,"form"],[1,"login-form",3,"formGroup"],[1,"material-icon"],["type","text","placeholder","email","formControlName","email"],[1,"invalid-feedback"],["type","password","placeholder","password","formControlName","pass"],["style","color: red;",4,"ngIf"],[3,"disabled","click"],["routerLink","/register",1,"register"],[1,"row"],[1,"col-4",3,"click"],["src","../../../assets/espcialista-2.png","alt","",1,"btn-img"],["src","../../../assets/espcialista-1.png","alt","",1,"btn-img"],["src","../../../assets/admin.png","alt","",1,"btn-img"],["src","../../../assets/paciente-1.png","alt","",1,"btn-img"],["src","../../../assets/paciente-2.png","alt","",1,"btn-img"],["src","../../../assets/paciente-3.png","alt","",1,"btn-img"],[2,"color","red"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,QL,1,0,"app-loading",1),d.TgZ(2,"div",2)(3,"form",3)(4,"span",4),d._uU(5,"Login"),d.qZA(),d._UZ(6,"input",5),d.TgZ(7,"div",6),d._uU(8),d.qZA(),d._UZ(9,"input",7),d.TgZ(10,"div",6),d._uU(11),d.qZA(),d.YNc(12,JL,2,1,"div",8),d.TgZ(13,"button",9),d.NdJ("click",function(){return r.submit()}),d._uU(14,"login"),d.qZA(),d.TgZ(15,"a",10),d._uU(16,"Dont have an account?"),d.qZA()()(),d.TgZ(17,"div",11)(18,"button",12),d.NdJ("click",function(){return r.autocompletado("CarlosBaute@gmail.com","1234567")}),d._UZ(19,"img",13),d.qZA(),d.TgZ(20,"button",12),d.NdJ("click",function(){return r.autocompletado("AilenGomez@gmail.com","1234567")}),d._UZ(21,"img",14),d.qZA(),d.TgZ(22,"button",12),d.NdJ("click",function(){return r.autocompletado("irismontaner@gmail.com","1234567")}),d._UZ(23,"img",15),d.qZA()(),d.TgZ(24,"div",11)(25,"button",12),d.NdJ("click",function(){return r.autocompletado("BrunoGoffredo@gmail.com","1234567")}),d._UZ(26,"img",16),d.qZA(),d.TgZ(27,"button",12),d.NdJ("click",function(){return r.autocompletado("CamilaPerez@gmail.com","1234567")}),d._UZ(28,"img",17),d.qZA(),d.TgZ(29,"button",12),d.NdJ("click",function(){return r.autocompletado("SolMartinez@gmail.com","1234567")}),d._UZ(30,"img",18),d.qZA()()()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(2),d.Q6J("formGroup",r.loginForm),d.xp6(3),d.ekj("is-invalid",r.isNotValidField("email"))("is-valid",!r.isNotValidField("email")&&r.f.email.touched),d.xp6(2),d.Oqu(r.getErrorMessage("email")),d.xp6(1),d.ekj("is-invalid",r.isNotValidField("pass"))("is-valid",!r.isNotValidField("pass")&&r.f.pass.touched),d.xp6(2),d.Oqu(r.getErrorMessage("pass")),d.xp6(1),d.Q6J("ngIf",""!=r.error),d.xp6(1),d.Q6J("disabled",r.loginForm.invalid))},directives:[On,eS,rI,zC,sw,X0,NA,iI,Ny],styles:['@import"https://fonts.googleapis.com/css2?family=Comfortaa&display=swap";body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b6cb7 0%,#182848 100%)}.login[_ngcontent-%COMP%]{width:360px;padding:8% 0 0;margin:auto;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#FFFFFF;border-radius:10px;max-width:360px;margin:0 auto 100px;padding:45px;text-align:center}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0;background:#f2f2f2;width:100%;border:0;border-radius:5px;margin:0 0 15px;padding:15px;box-sizing:border-box;font-size:14px;font-family:Comfortaa,cursive}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#dbdbdb}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Comfortaa,cursive;text-transform:uppercase;outline:0;background:#4b6cb7;width:100%;border:0;border-radius:5px;padding:15px;color:#fff;font-size:14px;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#395591}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:75px;color:#4b6cb7}.register[_ngcontent-%COMP%]{top:200px}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.is-valid[_ngcontent-%COMP%]{border-color:#35dc75;box-shadow:0 0 0 .25rem #44e04440}.invalid-feedback[_ngcontent-%COMP%]{top:1;bottom:100}.btn-img[_ngcontent-%COMP%]{width:100px;height:100px;background-size:cover;background-repeat:no-repeat;border-radius:10px}']}),n})(),eV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenido"]],decls:5,vars:0,consts:[[1,"img"],["src","../../../assets/bienvenido-imagen.jpg","alt",""],[1,"container"],["role","button","routerLink","/login",1,"button-63"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.qZA(),d.TgZ(2,"div",2)(3,"button",3),d._uU(4,"Comenzar"),d.qZA()())},directives:[Fp],styles:[".contenedor[_ngcontent-%COMP%]{width:100vw;height:100vh}.img[_ngcontent-%COMP%]{position:absolute;width:100vw;height:600px;margin-top:7%;z-index:-1000}.button-63[_ngcontent-%COMP%]{align-items:center;background-image:linear-gradient(144deg,#AF40FF,#5B42F3 50%,#00DDEB);border:0;border-radius:8px;box-shadow:#9741fc33 0 15px 30px -5px;box-sizing:border-box;color:#fff;font-family:Phantomsans,sans-serif;font-size:20px;justify-content:center;line-height:1em;max-width:100%;min-width:140px;padding:19px 24px;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap;cursor:pointer;font-size:xx-large;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif;margin-top:30%;margin-left:80%;z-index:1000}.button-63[_ngcontent-%COMP%]:active, .button-63[_ngcontent-%COMP%]:hover{outline:0}@media (min-width: 768px){.button-63[_ngcontent-%COMP%]{font-size:24px;min-width:196px}}"]}),n})(),tV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-toggle-button"]],inputs:{activo:"activo"},decls:4,vars:1,consts:[[1,"switch"],["type","checkbox",3,"checked"]],template:function(t,r){1&t&&(d.TgZ(0,"label",0),d._UZ(1,"input",1),d.TgZ(2,"div"),d._UZ(3,"span"),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("checked","true"==r.activo))},styles:['.switch[_ngcontent-%COMP%]{--line: #E8EBFB;--dot: #275EFE;--circle: #D3D4EC;--background: #fff;--duration: .3s;--text: #9EA0BE;--shadow: 0 1px 3px rgba(0, 9, 61, .08);cursor:pointer;position:relative}.switch[_ngcontent-%COMP%]:before{content:"";width:60px;height:32px;border-radius:16px;background:var(--background);position:absolute;left:0;top:0;box-shadow:var(--shadow)}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before, .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{--s: 1;content:"";position:absolute;height:4px;top:14px;width:24px;background:var(--line);transform:scaleX(var(--s));transition:transform var(--duration) ease}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{--s: 0;left:4px;transform-origin:0 50%;border-radius:2px 0 0 2px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{left:32px;transform-origin:100% 50%;border-radius:0 2px 2px 0}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:60px;line-height:28px;color:var(--text)}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{--x: 0;--b: var(--circle);--s: 4px;content:"";position:absolute;left:4px;top:4px;width:24px;height:24px;border-radius:50%;box-shadow:inset 0 0 0 var(--s) var(--b);transform:translate(var(--x));transition:box-shadow var(--duration) ease,transform var(--duration) ease}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:empty){padding-left:68px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{--s: 1}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{--s: 0}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{--x: 28px;--s: 12px;--b: var(--dot)}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative;background:#E8EBFB}body[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%] + .switch[_ngcontent-%COMP%]{margin-top:32px}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]{position:fixed;display:block;right:20px;bottom:20px}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;height:28px}']}),n})();function nV(n,e){1&n&&d._UZ(0,"app-loading")}function rV(n,e){if(1&n&&(d.TgZ(0,"li",7)(1,"div",8),d._UZ(2,"img",9),d.qZA(),d.TgZ(3,"div",8),d._uU(4),d.qZA(),d.TgZ(5,"div",10),d._uU(6),d.qZA(),d.TgZ(7,"div",11),d._UZ(8,"img"),d._uU(9),d.qZA(),d._UZ(10,"app-toggle-button",12),d.qZA()),2&n){const t=e.$implicit;d.xp6(2),d.s9C("src",t.imageURL1,d.LSH),d.xp6(2),d.Oqu(t.rol),d.xp6(2),d.AsE("",t.nombre," ",t.apellido,""),d.xp6(3),d.Oqu(t.email),d.xp6(1),d.Q6J("activo",t.activo)}}function iV(n,e){if(1&n&&(d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Usuarios registrados"),d.qZA(),d._UZ(3,"hr"),d.TgZ(4,"button",3),d._UZ(5,"i",4),d.qZA(),d.TgZ(6,"ul",5),d.YNc(7,rV,11,6,"li",6),d.qZA()()),2&n){const t=d.oxw();d.xp6(7),d.Q6J("ngForOf",t.users)}}let sV=(()=>{class n{constructor(t){this.firestore=t,this.cargando=!1,this.users=[]}ngOnInit(){this.getUsers().then(()=>this.cargando=!0)}getUsers(){var t=this;return(0,ge.Z)(function*(){yield t.firestore.getPacientes().subscribe(r=>{r.forEach(i=>{t.users.push(i)}),t.cargando=!1})})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(B0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-listado"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["class","container",4,"ngIf"],["mat-raised-button","","matTooltip","Agregar usuario","matTooltipPosition","above","matTooltipClass","example-tooltip-red","routerLink","/register",1,"button-add-Admin"],[1,"fa","fa-plus"],[1,"responsive-table"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"col","col-2"],[1,"img",3,"src"],[1,"col","col-2",2,"padding-left","10%"],[1,"col","col-3"],[1,"col","col-2",3,"activo"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,nV,1,0,"app-loading",1),d.YNc(2,iV,8,1,"div",2),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.cargando),d.xp6(1),d.Q6J("ngIf",0==r.cargando))},directives:[On,eS,Fp,er,tV],styles:["body[_ngcontent-%COMP%]{font-family:lato,sans-serif}.container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:10px;padding-right:10px;width:4000px}h2[_ngcontent-%COMP%]{font-size:26px;margin:20px 0;text-align:center}h2[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.5em}.img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10%}.button-add-Admin[_ngcontent-%COMP%]{color:#00f;border:none;background-color:transparent;font-size:xx-large;border-radius:10px;width:40px;height:40px;margin-left:3%}.responsive-table[_ngcontent-%COMP%]{max-height:850px;overflow-y:scroll}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:3px;padding:25px 15px;display:flex;justify-content:space-between;margin-top:10px;margin-bottom:25px;font-family:Verdana,Geneva,Tahoma,sans-serif;width:98%}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 9px #0000001a}.responsive-table[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{flex-basis:10%;justify-content:center}@media all and (max-width: 767px){.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:none}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{flex-basis:100%}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;padding:10px 0}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:before{color:#6c7a89;padding-right:10px;content:attr(data-label);flex-basis:50%;text-align:right}}"]}),n})(),oV=(()=>{class n{canActivate(t,r){let i=window.localStorage.getItem("usuario");return null!=i&&"admin"==JSON.parse(i).rol}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aV=(()=>{class n{canActivate(t,r){let i=window.localStorage.getItem("usuario");return null!=i&&"paciente"==JSON.parse(i).rol}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uV=(()=>{class n{constructor(t){this.formBuilder=t,this.close=new d.vpe,this.turnoForm=this.formBuilder.group({fecha:["",[Yn.required,Yn.minLength(7)]],especialista:["",[Yn.required,Yn.minLength(7)]],hora:["",[Yn.required]]})}ngOnInit(){}get f(){return this.turnoForm.controls}isNotValidField(t){return(this.f[t].touched||1==this.f[t].dirty)&&!this.f[t].valid}getErrorMessage(t){let r="";return this.f[t].hasError("required")?r="Empty.":this.f[t].getError("email")?r="Invalid format":this.f[t].getError("minlength")&&(r="at least 7 characters"),r}onClose(){this.close.emit()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XA))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-turno"]],outputs:{close:"close"},decls:28,vars:0,consts:[[1,"contenedor"],[1,"login-box"],[1,"close-container"],[1,"leftright",3,"click"],[1,"rightleft",3,"click"],[1,"user-box"],["type","text","name","","required",""],["type","date","name","","required","","placeholder",""],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d.NdJ("click",function(){return r.onClose()}),d.qZA(),d.TgZ(4,"div",4),d.NdJ("click",function(){return r.onClose()}),d.qZA()(),d.TgZ(5,"h2"),d._uU(6,"Login"),d.qZA(),d.TgZ(7,"form")(8,"div",5),d._UZ(9,"input",6),d.TgZ(10,"label"),d._uU(11,"Time"),d.qZA()(),d.TgZ(12,"div",5)(13,"label"),d._uU(14,"Date"),d.qZA(),d._UZ(15,"input",7),d.qZA(),d.TgZ(16,"div",8)(17,"button",9),d._uU(18," Especilidad "),d.qZA(),d.TgZ(19,"div",10)(20,"a",11),d._uU(21,"Action"),d.qZA(),d.TgZ(22,"a",11),d._uU(23,"Another action"),d.qZA(),d.TgZ(24,"a",11),d._uU(25,"Something else here"),d.qZA()()(),d.TgZ(26,"a"),d._uU(27," Submit "),d.qZA()()()())},directives:[rI,zC,nI],styles:[".contenedor[_ngcontent-%COMP%]{position:relative;display:flex;background:#e0dede;color:#fff;position:fixed;width:100%;height:100%;top:0;left:0;bottom:0;right:0;z-index:9997;align-items:center;justify-content:center;animation:fadein .5s}.button-close[_ngcontent-%COMP%]{background-color:red;opacity:.7;font-size:large;color:#fff;border-radius:15%;width:40px;height:40px}@keyframes fadein{0%{opacity:0}to{opacity:1}}.login-box[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:400px;padding:40px;transform:translate(-50%,-50%);background:rgba(0,0,0,.5);box-sizing:border-box;box-shadow:0 15px 25px #0009;border-radius:10px;opacity:1}.login-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 30px;padding:0;color:#fff;text-align:center}.login-box[_ngcontent-%COMP%]   .user-box[_ngcontent-%COMP%]{position:relative}.login-box[_ngcontent-%COMP%]   .user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 0;font-size:16px;color:#fff;margin-bottom:30px;border:none;border-bottom:1px solid #fff;outline:none;background:transparent}.login-box[_ngcontent-%COMP%]   .user-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:10px 0;font-size:16px;color:#fff;pointer-events:none;transition:.5s}.login-box[_ngcontent-%COMP%]   .user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .login-box[_ngcontent-%COMP%]   .user-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-20px;left:0;color:#000;font-size:12px}.login-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:10px 20px;color:#fff;font-size:16px;text-decoration:none;text-transform:uppercase;overflow:hidden;transition:.5s;margin-top:40px;letter-spacing:4px;border-color:#000;cursor:pointer}.login-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#9fa0a0;color:#fff;border-radius:5px;box-shadow:0 0 5px #03e9f4,0 0 25px #03e9f4,0 0 50px #03e9f4,0 0 100px #03e9f4}.close-container[_ngcontent-%COMP%]{position:relative;width:50px;height:50px;top:0;left:0;margin:auto auto auto 0;cursor:pointer}.leftright[_ngcontent-%COMP%]{height:4px;width:50px;position:absolute;margin-top:24px;background-color:#f4a259;border-radius:2px;transform:rotate(45deg);transition:all .3s ease-in}.rightleft[_ngcontent-%COMP%]{height:4px;width:50px;position:absolute;margin-top:24px;background-color:#f4a259;border-radius:2px;transform:rotate(-45deg);transition:all .3s ease-in}label[_ngcontent-%COMP%]{color:#fff;font-family:Helvetica,Arial,sans-serif;font-size:.6em;text-transform:uppercase;letter-spacing:2px;transition:all .3s ease-in;opacity:0}.close[_ngcontent-%COMP%]{margin:60px 0 0 5px;position:absolute}.close-container[_ngcontent-%COMP%]:hover   .leftright[_ngcontent-%COMP%]{transform:rotate(-45deg);background-color:#f25c66}.close-container[_ngcontent-%COMP%]:hover   .rightleft[_ngcontent-%COMP%]{transform:rotate(45deg);background-color:#f25c66}.close-container[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{opacity:1}"]}),n})();function lV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-add-turno",12),d.NdJ("close",function(){return d.CHM(t),d.oxw().Closeform()}),d.qZA()}}function cV(n,e){if(1&n&&(d.TgZ(0,"li",13)(1,"div",14),d._uU(2),d.qZA(),d.TgZ(3,"div",15),d._uU(4),d.qZA(),d.TgZ(5,"div",16),d._uU(6),d.qZA(),d.TgZ(7,"div",16),d._uU(8,"Review "),d._UZ(9,"i",17),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.fecha),d.xp6(2),d.Oqu(t.hora),d.xp6(2),d.Oqu(t.especialista)}}const dV=[{path:"",component:eV},{path:"home",component:YL,children:[{path:"usuarios",component:sV,canActivate:[oV]},{path:"mis-turnos",component:(()=>{class n{constructor(){this.agregandoTurno=!1,this.turnos=[],this.turnosWithoutFilter=[],this.filter=""}ngOnInit(){}OpenForm(){this.agregandoTurno=!0}Closeform(){this.agregandoTurno=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-mis-turnos"]],decls:20,vars:2,consts:[[1,"container"],[3,"close",4,"ngIf"],[1,"row"],[1,"col-3"],["mat-raised-button","","matTooltip","Agregar usuario","matTooltipPosition","above","matTooltipClass","example-tooltip-red",1,"button-add-turno",3,"click"],[1,"fa","fa-plus"],["mat-raised-button","","matTooltip","Agregar usuario","matTooltipPosition","above","matTooltipClass","example-tooltip-red","routerLink","/register",1,"button-delete-turno"],[1,"fa","fa-trash"],[1,"col-6"],["type","text","placeholder","Search by",1,"search"],[1,"responsive-table"],["class","table-row",4,"ngFor","ngForOf"],[3,"close"],[1,"table-row"],[1,"col","col-2"],[1,"col","col-2",2,"padding-left","10%"],[1,"col","col-3"],[1,"fa","fa-pencil"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,lV,1,0,"app-add-turno",1),d.TgZ(2,"div",0)(3,"h2"),d._uU(4,"Turnos"),d.qZA(),d._UZ(5,"hr"),d.TgZ(6,"div",2)(7,"div",3)(8,"button",4),d.NdJ("click",function(){return r.OpenForm()}),d.TgZ(9,"i",5),d._uU(10," Agregar turno"),d.qZA()()(),d.TgZ(11,"div",3)(12,"button",6)(13,"i",7),d._uU(14," Borrar turno"),d.qZA()()(),d.TgZ(15,"div",8),d._UZ(16,"input",9),d.qZA()(),d.TgZ(17,"div",2)(18,"ul",10),d.YNc(19,cV,10,3,"li",11),d.qZA()()()()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.agregandoTurno),d.xp6(18),d.Q6J("ngForOf",r.turnos))},directives:[On,uV,Fp,er],styles:["body[_ngcontent-%COMP%]{font-family:lato,sans-serif}.container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:10px;padding-right:10px;width:4000px}h2[_ngcontent-%COMP%]{font-size:26px;margin:20px 0;text-align:center}h2[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.5em}.img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10%}.button-add-turno[_ngcontent-%COMP%]{color:green;border:none;background-color:transparent;font-size:x-large;border-radius:10px;margin-left:3%}.button-delete-turno[_ngcontent-%COMP%]{color:red;border:none;box-shadow:solid gray;font-size:x-large;border-radius:10px;margin-left:3%}.responsive-table[_ngcontent-%COMP%]{max-height:850px;overflow-y:scroll}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:3px;padding:25px 15px;display:flex;justify-content:space-between;margin-top:10px;margin-bottom:25px;font-family:Verdana,Geneva,Tahoma,sans-serif;width:98%}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 9px #0000001a}.responsive-table[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{flex-basis:10%;justify-content:center}.responsive-table[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:80%}@media all and (max-width: 767px){.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:none}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{flex-basis:100%}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;padding:10px 0}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:before{color:#6c7a89;padding-right:10px;content:attr(data-label);flex-basis:50%;text-align:right}}"]}),n})(),canActivate:[aV]}]},{path:"login",component:XL},{path:"register",component:qL},{path:"**",redirectTo:"home"}];let hV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[dR.forRoot(dV)],dR]}),n})();const vP_firebase={projectId:"tp-final-3e4ef",appId:"1:617002588097:web:fd0739fe851e0e012f8140",storageBucket:"tp-final-3e4ef.appspot.com",locationId:"southamerica-east1",apiKey:"AIzaSyBEBxf5TwgW6jUgqlCmUTT4K0Pg0XE4ZHA",authDomain:"tp-final-3e4ef.firebaseapp.com",messagingSenderId:"617002588097"};class wP{}const Xc="*";function EP(n,e=null){return{type:2,steps:n,options:e}}function bP(n){return{type:6,styles:n,offset:null}}function CP(n){Promise.resolve(null).then(n)}class ow{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){CP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class IP{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?CP(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Xt=!1;function TP(n){return new d.vHH(3e3,Xt)}function WV(){return"undefined"!=typeof window&&void 0!==window.document}function nS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function sf(n){switch(n.length){case 0:return new ow;case 1:return n[0];default:return new IP(n)}}function DP(n,e,t,r,i={},u={}){const c=[],p=[];let _=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==_,B=F&&b||{};Object.keys(S).forEach(z=>{let ce=z,De=S[z];if("offset"!==z)switch(ce=e.normalizePropertyName(ce,c),De){case"!":De=i[z];break;case Xc:De=u[z];break;default:De=e.normalizeStyleValue(z,ce,De,c)}B[ce]=De}),F||p.push(B),b=B,_=M}),c.length)throw function FV(n){return new d.vHH(3502,Xt)}();return p}function rS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&iS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&iS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&iS(t,"destroy",n)))}}function iS(n,e,t){const r=t.totalTime,u=sS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function sS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function ko(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function AP(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let oS=(n,e)=>!1,SP=(n,e,t)=>[],MP=null;function aS(n){const e=n.parentNode||n.host;return e===MP?null:e}(nS()||"undefined"!=typeof Element)&&(WV()?(MP=(()=>document.documentElement)(),oS=(n,e)=>{for(;e;){if(e===n)return!0;e=aS(e)}return!1}):oS=(n,e)=>n.contains(e),SP=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Bp=null,xP=!1;function RP(n){Bp||(Bp=function KV(){return"undefined"!=typeof document?document.body:null}()||{},xP=!!Bp.style&&"WebkitAppearance"in Bp.style);let e=!0;return Bp.style&&!function ZV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Bp.style,!e&&xP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Bp.style)),e}const PP=oS,OP=SP;let NP=(()=>{class n{validateStyleProperty(t){return RP(t)}matchesElement(t,r){return!1}containsElement(t,r){return PP(t,r)}getParentElement(t){return aS(t)}query(t,r,i){return OP(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],_){return new ow(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),uS=(()=>{class n{}return n.NOOP=new NP,n})();const lS="ng-enter",oI="ng-leave",aI="ng-trigger",uI=".ng-trigger",FP="ng-animating",cS=".ng-animating";function jp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:dS(parseFloat(e[1]),e[2])}function dS(n,e){return"s"===e?1e3*n:n}function lI(n,e,t){return n.hasOwnProperty("duration")?n:function JV(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(TP()),{duration:0,delay:0,easing:""};i=dS(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=dS(parseFloat(_),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push(function pV(){return new d.vHH(3100,Xt)}()),p=!0),u<0&&(e.push(function gV(){return new d.vHH(3101,Xt)}()),p=!0),p&&e.splice(_,0,TP())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Ly(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function af(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Ly(n,t);return t}function VP(n,e,t){return t?e+":"+t+";":""}function UP(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=VP(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=VP(0,tU(t),n.style[t]));n.setAttribute("style",e)}function vl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=fS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),nS()&&UP(n))}function $p(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=fS(t);n.style[r]=""}),nS()&&UP(n))}function aw(n){return Array.isArray(n)?1==n.length?n[0]:EP(n):n}const hS=new RegExp("{{\\s*(.+?)\\s*}}","g");function BP(n){let e=[];if("string"==typeof n){let t;for(;t=hS.exec(n);)e.push(t[1]);hS.lastIndex=0}return e}function cI(n,e,t){const r=n.toString(),i=r.replace(hS,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function yV(n){return new d.vHH(3003,Xt)}()),p=""),p.toString()});return i==r?n:i}function dI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const eU=/-+([a-z0-9])/g;function fS(n){return n.replace(eU,(...e)=>e[1].toUpperCase())}function tU(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function _V(n){return new d.vHH(3004,Xt)}()}}function jP(n,e){return window.getComputedStyle(n)[e]}function aU(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function uU(n,e,t){if(":"==n[0]){const _=function lU(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function PV(n){return new d.vHH(3016,Xt)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function RV(n){return new d.vHH(3015,Xt)}()),e;const i=r[1],u=r[2],c=r[3];e.push($P(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push($P(c,i))}(r,t,e)):t.push(n),t}const gI=new Set(["true","1"]),mI=new Set(["false","0"]);function $P(n,e){const t=gI.has(n)||mI.has(n),r=gI.has(e)||mI.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?gI.has(n):mI.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?gI.has(e):mI.has(e)),c&&p}}const cU=new RegExp("s*:selfs*,?","g");function pS(n,e,t,r){return new dU(n).build(e,t,r)}class dU{constructor(e){this._driver=e}build(e,t,r){const i=new pU(t);this._resetContextStyleTimingState(i);const u=Fo(this,aw(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function wV(){return new d.vHH(3006,Xt)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,b=_.name;b.toString().split(/\s*,\s*/).forEach(S=>{_.name=S,u.push(this.visitState(_,t))}),_.name=b}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function EV(){return new d.vHH(3007,Xt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(yI(p)){const _=p;Object.keys(_).forEach(b=>{BP(_[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(dI(u.values()),t.errors.push(function bV(n,e){return new d.vHH(3008,Xt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Fo(this,aw(e.animation),t);return{type:1,matchers:aU(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Hp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Fo(this,r,t)),options:Hp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Fo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:Hp(e.options)}}visitAnimate(e,t){const r=function mU(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return gS(lI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=gS(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=lI(t,e);return gS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:bP({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=bP(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Xc?r.push(c):t.errors.push(function CV(n){return new d.vHH(3002,Xt)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(yI(c)){const p=c,_=p.easing;if(_&&(u=_,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const _=t.collectedStyles[t.currentQuerySelector],b=_[p];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function IV(n,e,t,r,i){return new d.vHH(3010,Xt)}()),S=!1),u=b.startTime),S&&(_[p]={startTime:u,endTime:i}),t.options&&function XV(n,e,t){const r=e.params||{},i=BP(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function mV(n){return new d.vHH(3001,Xt)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function TV(){return new d.vHH(3011,Xt)}()),r;let u=0;const c=[];let p=!1,_=!1,b=0;const S=e.steps.map(it=>{const ot=this._makeStyleAst(it,t);let tt=null!=ot.offset?ot.offset:function gU(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(yI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(yI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ot.styles),qe=0;return null!=tt&&(u++,qe=ot.offset=tt),_=_||qe<0||qe>1,p=p||qe<b,b=qe,c.push(qe),ot});_&&t.errors.push(function DV(){return new d.vHH(3012,Xt)}()),p&&t.errors.push(function AV(){return new d.vHH(3200,Xt)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function SV(){return new d.vHH(3202,Xt)}()):0==u&&(F=1/(M-1));const B=M-1,z=t.currentTime,ce=t.currentAnimateTimings,De=ce.duration;return S.forEach((it,ot)=>{const tt=F>0?ot==B?1:F*ot:c[ot],qe=tt*De;t.currentTime=z+ce.delay+qe,ce.duration=qe,this._validateStyleAst(it,t),it.offset=tt,r.styles.push(it)}),r}visitReference(e,t){return{type:8,animation:Fo(this,aw(e.animation),t),options:Hp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Hp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Hp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function hU(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(cU,"")),n=n.replace(/@\*/g,uI).replace(/@\w+/g,t=>uI+"-"+t.substr(1)).replace(/:animating/g,cS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,ko(t.collectedStyles,t.currentQuerySelector,{});const p=Fo(this,aw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Hp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function MV(){return new d.vHH(3013,Xt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:lI(e.timings,t.errors,!0);return{type:12,animation:Fo(this,aw(e.animation),t),timings:r,options:null}}}class pU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function yI(n){return!Array.isArray(n)&&"object"==typeof n}function Hp(n){return n?(n=Ly(n)).params&&(n.params=function fU(n){return n?Ly(n):null}(n.params)):n={},n}function gS(n,e,t){return{duration:n,delay:e,easing:t}}function mS(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class _I{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vU=new RegExp(":enter","g"),EU=new RegExp(":leave","g");function yS(n,e,t,r,i,u={},c={},p,_,b=[]){return(new bU).buildKeyframes(n,e,t,r,i,u,c,p,_,b)}class bU{buildKeyframes(e,t,r,i,u,c,p,_,b,S=[]){b=b||new _I;const M=new _S(e,t,b,i,u,S,[]);M.options=_,M.currentTimeline.setStyles([c],null,M.errors,_),Fo(this,r,M);const F=M.timelines.filter(B=>B.containsAnimation());if(Object.keys(p).length){let B;for(let z=F.length-1;z>=0;z--){const ce=F[z];if(ce.element===t){B=ce;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([p],null,M.errors,_)}return F.length?F.map(B=>B.buildKeyframes()):[mS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?jp(r.duration):null,p=null!=r.delay?jp(r.delay):null;return 0!==c&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Fo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=vI);const c=jp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Fo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?jp(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Fo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return lI(t.params?cI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?jp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vI);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(_=M.currentTimeline),Fo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const S=t.currentTimeline;_&&S.delayNextStep(_);const M=S.currentTime;Fo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const vI={};class _S{constructor(e,t,r,i,u,c,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new wI(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=jp(r.duration)),null!=r.delay&&(i.delay=jp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=cI(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new _S(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=vI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new CU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(vU,"."+this._enterClassName)).replace(EU,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function xV(n){return new d.vHH(3014,Xt)}()),p}}class wI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new wI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Xc,this._currentKeyframe[t]=Xc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function IU(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Xc})):af(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const _=cI(c[p],u,r);this._pendingStyles[p]=_,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Xc),this._updateStyle(p,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const b=af(p,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==Xc&&t.add(S)}),r||(b.offset=_/this.duration),i.push(b)});const u=e.size?dI(e.values()):[],c=t.size?dI(t.values()):[];if(r){const p=i[0],_=Ly(p);p.offset=0,_.offset=1,i=[p,_]}return mS(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class CU extends wI{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,_=af(e[0],!1);_.offset=0,u.push(_);const b=af(e[0],!1);b.offset=qP(p),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=af(e[M],!1);F.offset=qP((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return mS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function qP(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class vS{}class TU extends vS{normalizePropertyName(e,t){return fS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(DU[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function vV(n,e){return new d.vHH(3005,Xt)}())}return c+u}}const DU=(()=>function AU(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function zP(n,e,t,r,i,u,c,p,_,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:_,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const wS={};class WP{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function SU(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,_,b,S){const M=[],F=this.ast.options&&this.ast.options.params||wS,z=this.buildStyles(r,p&&p.params||wS,M),ce=_&&_.params||wS,De=this.buildStyles(i,ce,M),it=new Set,ot=new Map,tt=new Map,qe="void"===i,At={params:Object.assign(Object.assign({},F),ce)},Rt=S?[]:yS(e,t,this.ast.animation,u,c,z,De,At,b,M);let en=0;if(Rt.forEach(Lo=>{en=Math.max(Lo.duration+Lo.delay,en)}),M.length)return zP(t,this._triggerName,r,i,qe,z,De,[],[],ot,tt,en,M);Rt.forEach(Lo=>{const ed=Lo.element,lO=ko(ot,ed,{});Lo.preStyleProps.forEach(Gp=>lO[Gp]=!0);const lw=ko(tt,ed,{});Lo.postStyleProps.forEach(Gp=>lw[Gp]=!0),ed!==t&&it.add(ed)});const Lr=dI(it.values());return zP(t,this._triggerName,r,i,qe,z,De,Rt,Lr,ot,tt,en)}}class MU{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Ly(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let _=c[p];_.length>1&&(_=cI(_,i,t));const b=this.normalizer.normalizePropertyName(p,t);_=this.normalizer.normalizeStyleValue(p,b,_,t),r[b]=_})}}),r}}class RU{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new MU(i.style,i.options&&i.options.params||{},r)}),ZP(this.states,"true","1"),ZP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new WP(e,i,this.states))}),this.fallbackTransition=function PU(n,e,t){return new WP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function ZP(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const OU=new _I;class NU{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=pS(this._driver,t,r,[]);if(r.length)throw function LV(n){return new d.vHH(3503,Xt)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=DP(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=yS(this._driver,t,u,lS,oI,{},{},r,OU,i),c.forEach(S=>{const M=ko(p,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function VV(){return new d.vHH(3300,Xt)}()),c=[]),i.length)throw function UV(n){return new d.vHH(3504,Xt)}();p.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,Xc)})});const b=sf(c.map(S=>{const M=p.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function BV(n){return new d.vHH(3301,Xt)}();return t}listen(e,t,r,i){const u=sS(t,"","","");return rS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const KP="ng-animate-queued",ES="ng-animate-disabled",UU=[],YP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},BU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ba="__ng_removed";class bS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function GU(n){return null!=n?n:null}(r?e.value:e),r){const u=Ly(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const uw="void",CS=new bS(uw);class jU{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ca(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function jV(n,e){return new d.vHH(3302,Xt)}();if(null==r||0==r.length)throw function $V(n){return new d.vHH(3303,Xt)}();if(!function qU(n){return"start"==n||"done"==n}(r))throw function HV(n,e){return new d.vHH(3400,Xt)}();const u=ko(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=ko(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Ca(e,aI),Ca(e,aI+"-"+t),p[t]=CS),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function GV(n){return new d.vHH(3401,Xt)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new IS(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Ca(e,aI),Ca(e,aI+"-"+t),this._engine.statesByElement.set(e,p={}));let _=p[t];const b=new bS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),p[t]=b,_||(_=CS),b.value!==uw&&_.value===b.value){if(!function ZU(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const ce=[],De=u.matchStyles(_.value,_.params,ce),it=u.matchStyles(b.value,b.params,ce);ce.length?this._engine.reportError(ce):this._engine.afterFlush(()=>{$p(e,De),vl(e,it)})}return}const F=ko(this._engine.playersByElement,e,[]);F.forEach(ce=>{ce.namespaceId==this.id&&ce.triggerName==t&&ce.queued&&ce.destroy()});let B=u.matchTransition(_.value,b.value,e,b.params),z=!1;if(!B){if(!i)return;B=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:_,toState:b,player:c,isFallbackTransition:z}),z||(Ca(e,KP),c.onStart(()=>{Vy(e,KP)})),c.onDone(()=>{let ce=this.players.indexOf(c);ce>=0&&this.players.splice(ce,1);const De=this._engine.playersByElement.get(e);if(De){let it=De.indexOf(c);it>=0&&De.splice(it,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,uI,!0);r.forEach(i=>{if(i[ba])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(_=>{if(c.set(_,u[_].value),this._triggers[_]){const b=this.trigger(e,_,uw,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&sf(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers[c].fallbackTransition,b=r[c]||CS,S=new bS(uw),M=new IS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[ba];(!u||u===YP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ca(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const _=sS(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,rS(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class $U{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new jU(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const _=i.get(p);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(EI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!EI(t))return;const u=t[ba];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ca(e,ES)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Vy(e,ES))}removeNode(e,t,r,i){if(EI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[ba]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return EI(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,uI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,cS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return sf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[ba];if(r&&r.setForRemoval){if(e[ba]=YP,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(ES))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ca(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?sf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function qV(n){return new d.vHH(3402,Xt)}()}_flushAnimations(e,t){const r=new _I,i=[],u=new Map,c=[],p=new Map,_=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(lt=>{S.add(lt);const Tt=this.driver.query(lt,".ng-animate-queued",!0);for(let Ot=0;Ot<Tt.length;Ot++)S.add(Tt[Ot])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),B=XP(F,this.collectedEnterElements),z=new Map;let ce=0;B.forEach((lt,Tt)=>{const Ot=lS+ce++;z.set(Tt,Ot),lt.forEach(un=>Ca(un,Ot))});const De=[],it=new Set,ot=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const Tt=this.collectedLeaveElements[lt],Ot=Tt[ba];Ot&&Ot.setForRemoval&&(De.push(Tt),it.add(Tt),Ot.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(un=>it.add(un)):ot.add(Tt))}const tt=new Map,qe=XP(F,Array.from(it));qe.forEach((lt,Tt)=>{const Ot=oI+ce++;tt.set(Tt,Ot),lt.forEach(un=>Ca(un,Ot))}),e.push(()=>{B.forEach((lt,Tt)=>{const Ot=z.get(Tt);lt.forEach(un=>Vy(un,Ot))}),qe.forEach((lt,Tt)=>{const Ot=tt.get(Tt);lt.forEach(un=>Vy(un,Ot))}),De.forEach(lt=>{this.processLeaveNode(lt)})});const At=[],Rt=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(t).forEach(Ot=>{const un=Ot.player,Ci=Ot.element;if(At.push(un),this.collectedEnterElements.length){const As=Ci[ba];if(As&&As.setForMove){if(As.previousTriggersValues&&As.previousTriggersValues.has(Ot.triggerName)){const qp=As.previousTriggersValues.get(Ot.triggerName),lf=this.statesByElement.get(Ot.element);lf&&lf[Ot.triggerName]&&(lf[Ot.triggerName].value=qp)}return void un.destroy()}}const wl=!M||!this.driver.containsElement(M,Ci),Vo=tt.get(Ci),uf=z.get(Ci),cr=this._buildInstruction(Ot,r,uf,Vo,wl);if(cr.errors&&cr.errors.length)return void Rt.push(cr);if(wl)return un.onStart(()=>$p(Ci,cr.fromStyles)),un.onDestroy(()=>vl(Ci,cr.toStyles)),void i.push(un);if(Ot.isFallbackTransition)return un.onStart(()=>$p(Ci,cr.fromStyles)),un.onDestroy(()=>vl(Ci,cr.toStyles)),void i.push(un);const hO=[];cr.timelines.forEach(As=>{As.stretchStartingKeyframe=!0,this.disabledNodes.has(As.element)||hO.push(As)}),cr.timelines=hO,r.append(Ci,cr.timelines),c.push({instruction:cr,player:un,element:Ci}),cr.queriedElements.forEach(As=>ko(p,As,[]).push(un)),cr.preStyleProps.forEach((As,qp)=>{const lf=Object.keys(As);if(lf.length){let zp=_.get(qp);zp||_.set(qp,zp=new Set),lf.forEach(DS=>zp.add(DS))}}),cr.postStyleProps.forEach((As,qp)=>{const lf=Object.keys(As);let zp=b.get(qp);zp||b.set(qp,zp=new Set),lf.forEach(DS=>zp.add(DS))})});if(Rt.length){const lt=[];Rt.forEach(Tt=>{lt.push(function zV(n,e){return new d.vHH(3505,Xt)}())}),At.forEach(Tt=>Tt.destroy()),this.reportError(lt)}const en=new Map,Lr=new Map;c.forEach(lt=>{const Tt=lt.element;r.has(Tt)&&(Lr.set(Tt,Tt),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,en))}),i.forEach(lt=>{const Tt=lt.element;this._getPreviousPlayers(Tt,!1,lt.namespaceId,lt.triggerName,null).forEach(un=>{ko(en,Tt,[]).push(un),un.destroy()})});const Lo=De.filter(lt=>tO(lt,_,b)),ed=new Map;JP(ed,this.driver,ot,b,Xc).forEach(lt=>{tO(lt,_,b)&&Lo.push(lt)});const lw=new Map;B.forEach((lt,Tt)=>{JP(lw,this.driver,new Set(lt),_,"!")}),Lo.forEach(lt=>{const Tt=ed.get(lt),Ot=lw.get(lt);ed.set(lt,Object.assign(Object.assign({},Tt),Ot))});const Gp=[],cO=[],dO={};c.forEach(lt=>{const{element:Tt,player:Ot,instruction:un}=lt;if(r.has(Tt)){if(S.has(Tt))return Ot.onDestroy(()=>vl(Tt,un.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(un.totalTime),void i.push(Ot);let Ci=dO;if(Lr.size>1){let Vo=Tt;const uf=[];for(;Vo=Vo.parentNode;){const cr=Lr.get(Vo);if(cr){Ci=cr;break}uf.push(Vo)}uf.forEach(cr=>Lr.set(cr,Ci))}const wl=this._buildAnimation(Ot.namespaceId,un,en,u,lw,ed);if(Ot.setRealPlayer(wl),Ci===dO)Gp.push(Ot);else{const Vo=this.playersByElement.get(Ci);Vo&&Vo.length&&(Ot.parentPlayer=sf(Vo)),i.push(Ot)}}else $p(Tt,un.fromStyles),Ot.onDestroy(()=>vl(Tt,un.toStyles)),cO.push(Ot),S.has(Tt)&&i.push(Ot)}),cO.forEach(lt=>{const Tt=u.get(lt.element);if(Tt&&Tt.length){const Ot=sf(Tt);lt.setRealPlayer(Ot)}}),i.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<De.length;lt++){const Tt=De[lt],Ot=Tt[ba];if(Vy(Tt,oI),Ot&&Ot.hasAnimation)continue;let un=[];if(p.size){let wl=p.get(Tt);wl&&wl.length&&un.push(...wl);let Vo=this.driver.query(Tt,cS,!0);for(let uf=0;uf<Vo.length;uf++){let cr=p.get(Vo[uf]);cr&&cr.length&&un.push(...cr)}}const Ci=un.filter(wl=>!wl.destroyed);Ci.length?zU(this,Tt,Ci):this.processLeaveNode(Tt)}return De.length=0,Gp.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const Tt=this.players.indexOf(lt);this.players.splice(Tt,1)}),lt.play()}),Gp}elementContainsData(e,t){let r=!1;const i=t[ba];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==uw;p.forEach(b=>{b.queued||!_&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,S=b!==u,M=ko(r,b,[]);this._getPreviousPlayers(b,S,c,p,t.toState).forEach(B=>{const z=B.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),B.destroy(),M.push(B)})}$p(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,_=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(z=>{const ce=z.element;S.add(ce);const De=ce[ba];if(De&&De.removedBeforeQueried)return new ow(z.duration,z.delay);const it=ce!==_,ot=function WU(n){const e=[];return eO(n,e),e}((r.get(ce)||UU).map(en=>en.getRealPlayer())).filter(en=>!!en.element&&en.element===ce),tt=u.get(ce),qe=c.get(ce),At=DP(0,this._normalizer,0,z.keyframes,tt,qe),Rt=this._buildPlayer(z,At,ot);if(z.subTimeline&&i&&M.add(ce),it){const en=new IS(e,p,ce);en.setRealPlayer(Rt),b.push(en)}return Rt});b.forEach(z=>{ko(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function HU(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),S.forEach(z=>Ca(z,FP));const B=sf(F);return B.onDestroy(()=>{S.forEach(z=>Vy(z,FP)),vl(_,t.toStyles)}),M.forEach(z=>{ko(i,z,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ow(e.duration,e.delay)}}class IS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ow,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>rS(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ko(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function EI(n){return n&&1===n.nodeType}function QP(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function JP(n,e,t,r,i){const u=[];t.forEach(_=>u.push(QP(_)));const c=[];r.forEach((_,b)=>{const S={};_.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[ba]=BU,c.push(b))}),n.set(b,S)});let p=0;return t.forEach(_=>QP(_,u[p++])),c}function XP(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let _=u.get(p);if(_)return _;const b=p.parentNode;return _=t.has(b)?b:i.has(b)?1:c(b),u.set(p,_),_}return e.forEach(p=>{const _=c(p);1!==_&&t.get(_).push(p)}),t}function Ca(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Vy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function zU(n,e,t){sf(t).onDone(()=>n.processLeaveNode(e))}function eO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof IP?eO(r.players,e):e.push(r)}}function tO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class bI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new $U(e,t,r),this._timelineEngine=new NU(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const _=[],S=pS(this._driver,u,_,[]);if(_.length)throw function kV(n,e){return new d.vHH(3404,Xt)}();p=function xU(n,e,t){return new RU(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=AP(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=AP(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let YU=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&vl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vl(this._element,this._initialStyles),this._endStyles&&(vl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&($p(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($p(this._element,this._endStyles),this._endStyles=null),vl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function TS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];QU(i)&&(e=e||{},e[i]=n[i])}return e}function QU(n){return"display"===n||"position"===n}class nO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:jP(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class JU{validateStyleProperty(e){return RP(e)}matchesElement(e,t){return!1}containsElement(e,t){return PP(e,t)}getParentElement(e){return aS(e)}query(e,t,r){return OP(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const b={},S=c.filter(F=>F instanceof nO);(function nU(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let B=F.currentSnapshot;Object.keys(B).forEach(z=>b[z]=B[z])}),t=function rU(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(_){p[_]=jP(n,_)})}}return e}(e,t=t.map(F=>af(F,!1)),b);const M=function KU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=TS(e[0]),e.length>1&&(r=TS(e[e.length-1]))):e&&(t=TS(e)),t||r?new YU(n,t,r):null}(e,t);return new nO(e,t,_,M)}}let XU=(()=>{class n extends wP{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?EP(t):t;return rO(this._renderer,null,r,"register",[i]),new e2(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class e2 extends class fV{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new t2(this._id,e,t||{},this._renderer)}}class t2{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return rO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function rO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const iO="@.disabled";let n2=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new sO("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=S=>{Array.isArray(S)?S.forEach(_):this.engine.registerTrigger(c,p,t,S.name,S)};return r.data.animation.forEach(_),new r2(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(bI),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class sO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==iO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class r2 extends sO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==iO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function i2(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function s2(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let o2=(()=>{class n extends bI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(uS),d.LFG(vS))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const oO=new d.OlP("AnimationModuleType"),aO=[{provide:wP,useClass:XU},{provide:vS,useFactory:function a2(){return new TU}},{provide:bI,useClass:o2},{provide:d.FYo,useFactory:function u2(n,e,t){return new n2(n,e,t)},deps:[ao,bI,d.R0b]}],uO=[{provide:uS,useFactory:()=>new JU},{provide:oO,useValue:"BrowserAnimations"},...aO],l2=[{provide:uS,useClass:NP},{provide:oO,useValue:"NoopAnimations"},...aO];let c2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?l2:uO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:uO,imports:[Zo]}),n})(),d2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[PF]}),n.\u0275inj=d.cJS({providers:[],imports:[[Zo,hV,AL,Nn.hO,_P,Nn.hO.initializeApp(vP_firebase),c2]]}),n})();(0,d.G48)(),Mu().bootstrapModule(d2).catch(n=>console.error(n))},5867:(Xe,Ee,O)=>{O.d(Ee,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=O(9681);(0,d.registerVersion)("firebase","9.8.2","app")},127:(Xe,Ee,O)=>{O.d(Ee,{Z:()=>d.Z});var d=O(3942);d.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Xe,Ee,O)=>{O.r(Ee);var d=O(5861),X=O(3942),N=O(2090),ae=O(9681),ne=O(655),me=O(1877),ue=O(4859);const Oe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new me.Yd("@firebase/auth");function Ke(y,...f){Ge.logLevel<=me.in.ERROR&&Ge.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function Te(y,...f){throw Ue(y,...f)}function we(y,...f){return Ue(y,...f)}function be(y,f,m){const w=Object.assign(Object.assign({},Ve()),{[f]:m});return new N.LL("auth","Firebase",w).create(f,{appName:y.name})}function Be(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Te(y,"argument-error"),be(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...f){if("string"!=typeof y){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(m,...w)}return pe.create(y,...f)}function $(y,f,...m){if(!y)throw Ue(f,...m)}function _e(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ke(f),new Error(f)}function K(y,f){y||_e(f)}const re=new Map;function ee(y){K(y instanceof Function,"Expected a class definition");let f=re.get(y);return f?(K(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,re.set(y,f),f)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ht(){return"http:"===qt()||"https:"===qt()}function qt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class rn{constructor(f,m){this.shortDelay=f,this.longDelay=m,K(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(y,f){K(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class ln{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vr=new rn(3e4,6e4);function Zt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Lt(y,f,m,w){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(y,f,m,w,D={}){return ui(y,D,(0,d.Z)(function*(){let P={},Z={};w&&("GET"===f?Z=w:P={body:JSON.stringify(w)});const de=(0,N.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),ln.fetch()(Ss(y,y.config.apiHost,m,de),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ui(y,f,m){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(y,f,m){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},tn),f);try{const D=new li(y),P=yield Promise.race([m(),D.promise]);D.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw Ii(y,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const de=P.ok?Z.errorMessage:Z.error.message,[Le,Qe]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ii(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw Ii(y,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw Ii(y,"user-disabled",Z);const ut=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw be(y,ut,Qe);Te(y,ut)}}catch(D){if(D instanceof N.ZR)throw D;Te(y,"network-request-failed")}})).apply(this,arguments)}function Ur(y,f,m,w){return ki.apply(this,arguments)}function ki(){return(ki=(0,d.Z)(function*(y,f,m,w,D={}){const P=yield Lt(y,f,m,w,D);return"mfaPendingCredential"in P&&Te(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Ss(y,f,m,w){const D=`${f}${m}?${w}`;return y.config.emulator?xn(y.config,D):`${y.config.apiScheme}://${D}`}class li{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(we(this.auth,"network-request-failed")),Vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ii(y,f,m){const w={appName:y.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const D=we(y,f,w);return D.customData._tokenResponse=m,D}function ci(){return(ci=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Dn(y,f){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xs(y,f){return di.apply(this,arguments)}function di(){return(di=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function sr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Uo(){return(Uo=(0,d.Z)(function*(y,f=!1){const m=(0,N.m9)(y),w=yield m.getIdToken(f),D=at(w);$(D&&D.exp&&D.auth_time&&D.iat,m.auth,"internal-error");const P="object"==typeof D.firebase?D.firebase:void 0,Z=null==P?void 0:P.sign_in_provider;return{claims:D,token:w,authTime:sr(zt(D.auth_time)),issuedAtTime:sr(zt(D.iat)),expirationTime:sr(zt(D.exp)),signInProvider:Z||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(y){return 1e3*Number(y)}function at(y){const[f,m,w]=y.split(".");if(void 0===f||void 0===m||void 0===w)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,N.tV)(m);return D?JSON.parse(D):(Ke("Failed to decode base64 JWT payload"),null)}catch(D){return Ke("Caught error parsing JWT payload as JSON",D),null}}function Tr(y,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof N.ZR&&Bt(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Bt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class eo{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class Dr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ar(y){return V.apply(this,arguments)}function V(){return(V=(0,d.Z)(function*(y){var f;const m=y.auth,w=yield y.getIdToken(),D=yield Tr(y,Xs(m,{idToken:w}));$(null==D?void 0:D.users.length,m,"internal-error");const P=D.users[0];y._notifyReloadListener(P);const Z=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?G(P.providerUserInfo):[],de=Ie(y.providerData,Z),ut=!!y.isAnonymous&&!(y.email&&P.passwordHash||(null==de?void 0:de.length)),ft={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:de,metadata:new Dr(P.createdAt,P.lastLoginAt),isAnonymous:ut};Object.assign(y,ft)})).apply(this,arguments)}function W(){return(W=(0,d.Z)(function*(y){const f=(0,N.m9)(y);yield Ar(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ie(y,f){return[...y.filter(w=>!f.some(D=>D.providerId===w.providerId)),...f]}function G(y){return y.map(f=>{var{providerId:m}=f,w=(0,ne._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function xe(){return(xe=(0,d.Z)(function*(y,f){const m=yield ui(y,{},(0,d.Z)(function*(){const w=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:P}=y.config,Z=Ss(y,D,"/v1/token",`key=${P}`),de=yield y._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",ln.fetch()(Z,{method:"POST",headers:de,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){$(f.idToken,"internal-error"),$(void 0!==f.idToken,"internal-error"),$(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Et(y){const f=at(y);return $(f,"internal-error"),$(void 0!==f.exp,"internal-error"),$(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,d.Z)(function*(){return $(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,d.Z)(function*(){const{accessToken:D,refreshToken:P,expiresIn:Z}=yield function J(y,f){return xe.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(D,P,Number(Z))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:D,expirationTime:P}=m,Z=new Je;return w&&($("string"==typeof w,"internal-error",{appName:f}),Z.refreshToken=w),D&&($("string"==typeof D,"internal-error",{appName:f}),Z.accessToken=D),P&&($("number"==typeof P,"internal-error",{appName:f}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return _e("not implemented")}}function pt(y,f){$("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Dt{constructor(f){var{uid:m,auth:w,stsTokenManager:D}=f,P=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Dr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const w=yield Tr(m,m.stsTokenManager.getToken(m.auth,f));return $(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Ti(y){return Uo.apply(this,arguments)}(this,f)}reload(){return function q(y){return W.apply(this,arguments)}(this)}_assign(f){this!==f&&($(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Dt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,d.Z)(function*(){let D=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),D=!0),m&&(yield Ar(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield Tr(f,function yt(y,f){return ci.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,D,P,Z,de,Le,Qe,ut;const ft=null!==(w=m.displayName)&&void 0!==w?w:void 0,Wn=null!==(D=m.email)&&void 0!==D?D:void 0,Or=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Ka=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,Xd=null!==(de=m.tenantId)&&void 0!==de?de:void 0,eh=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,Co=null!==(Qe=m.createdAt)&&void 0!==Qe?Qe:void 0,uc=null!==(ut=m.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:Ya,emailVerified:Rf,isAnonymous:lc,providerData:Io,stsTokenManager:Pf}=m;$(Ya&&Pf,f,"internal-error");const Cg=Je.fromJSON(this.name,Pf);$("string"==typeof Ya,f,"internal-error"),pt(ft,f.name),pt(Wn,f.name),$("boolean"==typeof Rf,f,"internal-error"),$("boolean"==typeof lc,f,"internal-error"),pt(Or,f.name),pt(Ka,f.name),pt(Xd,f.name),pt(eh,f.name),pt(Co,f.name),pt(uc,f.name);const th=new Dt({uid:Ya,auth:f,email:Wn,emailVerified:Rf,displayName:ft,isAnonymous:lc,photoURL:Ka,phoneNumber:Or,tenantId:Xd,stsTokenManager:Cg,createdAt:Co,lastLoginAt:uc});return Io&&Array.isArray(Io)&&(th.providerData=Io.map(Ig=>Object.assign({},Ig))),eh&&(th._redirectEventId=eh),th}static _fromIdTokenResponse(f,m,w=!1){return(0,d.Z)(function*(){const D=new Je;D.updateFromServerResponse(m);const P=new Dt({uid:m.localId,auth:f,stsTokenManager:D,isAnonymous:w});return yield Ar(P),P})()}}const Ct=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var D=this;return(0,d.Z)(function*(){D.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const D=w.storage[m];return void 0===D?null:D})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return y.type="NONE",y})();function Qn(y,f,m){return`firebase:${y}:${f}:${m}`}class Br{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:D,name:P}=this.auth;this.fullUserKey=Qn(this.userKey,D.apiKey,P),this.fullPersistenceKey=Qn("persistence",D.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Dt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new Br(ee(Ct),f,w);const D=(yield Promise.all(m.map(function(){var Qe=(0,d.Z)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let P=D[0]||ee(Ct);const Z=Qn(w,f.config.apiKey,f.name);let de=null;for(const Qe of m)try{const ut=yield Qe._get(Z);if(ut){const ft=Dt._fromJSON(f,ut);Qe!==P&&(de=ft),P=Qe;break}}catch(ut){}const Le=D.filter(Qe=>Qe._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],de&&(yield P._set(Z,de.toJSON())),yield Promise.all(m.map(function(){var Qe=(0,d.Z)(function*(ut){if(ut!==P)try{yield ut._remove(Z)}catch(ft){}});return function(ut){return Qe.apply(this,arguments)}}())),new Br(P,f,w)):new Br(P,f,w)})()}}function yu(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Jn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ia(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(as(f))return"Blackberry";if(Xn(f))return"Webos";if(_u(f))return"Safari";if((f.includes("chrome/")||Ta(f))&&!f.includes("edge/"))return"Chrome";if(jr(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ia(y=(0,N.z$)()){return/firefox\//i.test(y)}function _u(y=(0,N.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ta(y=(0,N.z$)()){return/crios\//i.test(y)}function Jn(y=(0,N.z$)()){return/iemobile/i.test(y)}function jr(y=(0,N.z$)()){return/android/i.test(y)}function as(y=(0,N.z$)()){return/blackberry/i.test(y)}function Xn(y=(0,N.z$)()){return/webos/i.test(y)}function Qr(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ms(y=(0,N.z$)()){return Qr(y)||jr(y)||Xn(y)||as(y)||/windows phone/i.test(y)||Jn(y)}function Bo(y,f=[]){let m;switch(y){case"Browser":m=yu((0,N.z$)());break;case"Worker":m=`${yu((0,N.z$)())}-${y}`;break;default:m=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${w}`}class Jr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=P=>new Promise((Z,de)=>{try{Z(f(P))}catch(Le){de(Le)}});w.onAbort=m,this.queue.push(w);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===f)return;const w=[];try{for(const D of m.queue)yield D(f),D.onAbort&&w.push(D.onAbort)}catch(D){w.reverse();for(const P of w)try{P()}catch(Z){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:D.message})}})()}}class ze{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new on(this),this.idTokenSubscription=new on(this),this.beforeStateQueue=new Jr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var D,P;if(!w._deleted&&(w.persistenceManager=yield Br.create(w,f),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Z){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var w;const D=yield m.assertedPersistence.getCurrentUser();let P=D,Z=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const de=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=null==P?void 0:P._redirectEventId,Qe=yield m.tryRedirectSignIn(f);(!de||de===Le)&&(null==Qe?void 0:Qe.user)&&(P=Qe.user,Z=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(P)}catch(de){P=D,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(de))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return $(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(D){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){try{yield Ar(f)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function We(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const w=f?(0,N.m9)(f):null;return w&&$(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return f&&$(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,d.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(m);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&ee(f)||m._popupRedirectResolver;$(w,m,"argument-error"),m.redirectPersistenceManager=yield Br.create(m,[ee(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var w,D;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(D=m.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,D){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return $(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,w,D):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Bo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const D=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return D&&(w["X-Firebase-Client"]=D),w})()}}function ct(y){return(0,N.m9)(y)}class on{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(m=>this.observer=m)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Li(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Di{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return _e("not implemented")}_getIdTokenResponse(f){return _e("not implemented")}_linkToIdToken(f,m){return _e("not implemented")}_getReauthenticationResolver(f){return _e("not implemented")}}function Pn(y,f){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:resetPassword",Zt(y,f))})).apply(this,arguments)}function Aa(y,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function vu(y,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",Zt(y,f))})).apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signInWithPassword",Zt(y,f))})).apply(this,arguments)}function Ps(y,f){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendOobCode",Zt(y,f))})).apply(this,arguments)}function cn(y,f){return wu.apply(this,arguments)}function wu(){return(wu=(0,d.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function Sa(y,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function Vi(y,f){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,d.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function nd(y,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,d.Z)(function*(y,f){return Ps(y,f)})).apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signInWithEmailLink",Zt(y,f))})).apply(this,arguments)}function rd(){return(rd=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signInWithEmailLink",Zt(y,f))})).apply(this,arguments)}class Sr extends Di{constructor(f,m,w,D=null){super("password",w),this._email=f,this._password=m,this._tenantId=D}static _fromEmailAndPassword(f,m){return new Sr(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Sr(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function er(y,f){return no.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Bi(y,f){return El.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return Aa(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Wp(y,f){return rd.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Os(y,f){return id.apply(this,arguments)}function id(){return(id=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signInWithIdp",Zt(y,f))})).apply(this,arguments)}class us extends Di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new us(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D}=m,P=(0,ne._T)(m,["providerId","signInMethod"]);if(!w||!D)return null;const Z=new us(w,D);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(f){return Os(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Os(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Os(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,N.xO)(m)}return f}}function Kp(y,f){return sd.apply(this,arguments)}function sd(){return(sd=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendVerificationCode",Zt(y,f))})).apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,f))})).apply(this,arguments)}function od(){return(od=(0,d.Z)(function*(y,f){const m=yield Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,f));if(m.temporaryProof)throw Ii(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Qp={USER_NOT_FOUND:"user-not-found"};function ad(){return(ad=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Qp)})).apply(this,arguments)}class jo extends Di{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new jo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new jo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function bl(y,f){return Ns.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Yp(y,f){return od.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Jp(y,f){return ad.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:D}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:D,temporaryProof:P}=f;return w||m||D||P?new jo({verificationId:m,verificationCode:w,phoneNumber:D,temporaryProof:P}):null}}class bu{constructor(f){var m,w,D,P,Z,de;const Le=(0,N.zd)((0,N.pd)(f)),Qe=null!==(m=Le.apiKey)&&void 0!==m?m:null,ut=null!==(w=Le.oobCode)&&void 0!==w?w:null,ft=function cf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Le.mode)&&void 0!==D?D:null);$(Qe&&ut&&ft,"argument-error"),this.apiKey=Qe,this.operation=ft,this.code=ut,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(de=Le.tenantId)&&void 0!==de?de:null}static parseLink(f){const m=function Ma(y){const f=(0,N.zd)((0,N.pd)(y)).link,m=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,w=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(w?(0,N.zd)((0,N.pd)(w)).link:null)||w||m||f||y}(f);try{return new bu(m)}catch(w){return null}}}let ld=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,w){return Sr._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const D=bu.parseLink(w);return $(D,"argument-error"),Sr._fromEmailAndCode(m,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Mr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ro extends Mr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ji extends ro{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return $("providerId"in m&&"signInMethod"in m,"argument-error"),us._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return $(f.idToken||f.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ji.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ji.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:P,nonce:Z,providerId:de}=f;if(!w&&!D&&!m&&!P||!de)return null;try{return new ji(de)._credential({idToken:m,accessToken:w,nonce:Z,pendingToken:P})}catch(Le){return null}}}let $o=(()=>{class y extends ro{constructor(){super("facebook.com")}static credential(m){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),cd=(()=>{class y extends ro{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:D}=m;if(!w&&!D)return null;try{return y.credential(w,D)}catch(P){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),df=(()=>{class y extends ro{constructor(){super("github.com")}static credential(m){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class io extends Di{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Os(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Os(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Os(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D,pendingToken:P}=m;return w&&D&&P&&w===D?new io(w,P):null}static _create(f,m){return new io(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $r extends Mr{constructor(f){$(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return $r.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return $r.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=io.fromJSON(f);return $(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return io._create(w,m)}catch(D){return null}}}let hd=(()=>{class y extends ro{constructor(){super("twitter.com")}static credential(m,w){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=m;if(!w||!D)return null;try{return y.credential(w,D)}catch(P){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Hr(y,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signUp",Zt(y,f))})).apply(this,arguments)}class fi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,D=!1){return(0,d.Z)(function*(){const P=yield Dt._fromIdTokenResponse(f,w,D),Z=Cl(w);return new fi({user:P,providerId:Z,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const D=Cl(w);return new fi({user:f,providerId:D,_tokenResponse:w,operationType:m})})()}}function Cl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Il(){return(Il=(0,d.Z)(function*(y){var f;const m=ct(y);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new fi({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Hr(m,{returnSecureToken:!0}),D=yield fi._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class qo extends N.ZR{constructor(f,m,w,D){var P;super(m.code,m.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,qo.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,D){return new qo(f,m,w,D)}}function Tl(y,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?qo._fromErrorAndOperation(y,P,f,w):P})}function $i(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function dn(){return(dn=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y);yield nn(!0,m,f);const{providerUserInfo:w}=yield Dn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),D=$i(w||[]);return m.providerData=m.providerData.filter(P=>D.has(P.providerId)),D.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function xa(y,f){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(y,f,m=!1){const w=yield Tr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return fi._forOperation(y,"link",w)})).apply(this,arguments)}function nn(y,f,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(y,f,m){yield Ar(f);const D=!1===y?"provider-already-linked":"no-such-provider";$($i(f.providerData).has(m)===y,f.auth,D)})).apply(this,arguments)}function Cu(y,f){return ks.apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(y,f,m=!1){const{auth:w}=y,D="reauthenticate";try{const P=yield Tr(y,Tl(w,D,f,y),m);$(P.idToken,w,"internal-error");const Z=at(P.idToken);$(Z,w,"internal-error");const{sub:de}=Z;return $(y.uid===de,w,"user-mismatch"),fi._forOperation(y,D,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Te(w,"user-mismatch"),P}})).apply(this,arguments)}function hr(y,f){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,d.Z)(function*(y,f,m=!1){const w="signIn",D=yield Tl(y,w,f),P=yield fi._fromIdTokenResponse(y,w,D);return m||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function bn(y,f){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(y,f){return hr(ct(y),f)})).apply(this,arguments)}function fr(y,f){return oo.apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y);return yield nn(!1,m,f.providerId),xa(m,f)})).apply(this,arguments)}function ls(y,f){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(y,f){return Cu((0,N.m9)(y),f)})).apply(this,arguments)}function Ai(y,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(y,f){return Ur(y,"POST","/v1/accounts:signInWithCustomToken",Zt(y,f))})).apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(y,f){const m=ct(y),w=yield Ai(m,{token:f,returnSecureToken:!0}),D=yield fi._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class Fs{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Al._fromServerResponse(f,m):Te(f,"internal-error")}}class Al extends Fs{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Al(m)}}function Oa(y,f,m){var w;$((null===(w=m.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),$(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&($(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&($(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Iu(){return(Iu=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D={requestType:"PASSWORD_RESET",email:f};m&&Oa(w,D,m),yield Sa(w,D)})).apply(this,arguments)}function Ml(){return(Ml=(0,d.Z)(function*(y,f,m){yield Pn((0,N.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(y,f){yield vu((0,N.m9)(y),{oobCode:f})})).apply(this,arguments)}function Vt(y,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y),w=yield Pn(m,{oobCode:f}),D=w.requestType;switch($(D,m,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(w.mfaInfo,m,"internal-error");default:$(w.email,m,"internal-error")}let P=null;return w.mfaInfo&&(P=Fs._fromServerResponse(ct(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:D}})).apply(this,arguments)}function Du(){return(Du=(0,d.Z)(function*(y,f){const{data:m}=yield Vt((0,N.m9)(y),f);return m.email})).apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(y,f,m){const w=ct(y),D=yield Hr(w,{returnSecureToken:!0,email:f,password:m}),P=yield fi._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Pl(){return(Pl=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D={requestType:"EMAIL_SIGNIN",email:f};$(m.handleCodeInApp,w,"argument-error"),m&&Oa(w,D,m),yield Vi(w,D)})).apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D=ld.credentialWithLink(f,m||Ne());return $(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),bn(w,D)})).apply(this,arguments)}function xr(y,f){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:createAuthUri",Zt(y,f))})).apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(y,f){const w={identifier:f,continueUri:ht()?Ne():"http://localhost"},{signinMethods:D}=yield xr((0,N.m9)(y),w);return D||[]})).apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(y,f){const m=(0,N.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Oa(m.auth,D,f);const{email:P}=yield cn(m.auth,D);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&Oa(w.auth,P,m);const{email:Z}=yield nd(w.auth,P);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Nl(y,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ru(){return(Ru=(0,d.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,N.m9)(y),P={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Z=yield Tr(w,Nl(w.auth,P));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const de=w.providerData.find(({providerId:Le})=>"password"===Le);de&&(de.displayName=w.displayName,de.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Pu(y,f,m){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(y,f,m){const{auth:w}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const Z=yield Tr(y,Aa(w,P));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Ko{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class _d extends Ko{constructor(f,m,w,D){super(f,m,w),this.username=D}}class Ou extends Ko{constructor(f,m){super(f,"facebook.com",m)}}class ti extends _d{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class ff extends Ko{constructor(f,m){super(f,"google.com",m)}}class kl extends _d{constructor(f,m,w){super(f,"twitter.com",m,w)}}function or(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function yd(y){var f,m;if(!y)return null;const{providerId:w}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Z=null===(m=null===(f=at(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new Ko(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new Ou(P,D);case"github.com":return new ti(P,D);case"google.com":return new ff(P,D);case"twitter.com":return new kl(P,D,y.screenName||null);case"custom":case"anonymous":return new Ko(P,null);default:return new Ko(P,w,D)}}(m)}class ds{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ds("enroll",f)}static _fromMfaPendingCredential(f){return new ds("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ds._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ds._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ho{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=ct(f),D=m.customData._serverResponse,P=(D.mfaInfo||[]).map(de=>Fs._fromServerResponse(w,de));$(D.mfaPendingCredential,w,"internal-error");const Z=ds._fromMfaPendingCredential(D.mfaPendingCredential);return new ho(Z,P,function(){var de=(0,d.Z)(function*(Le){const Qe=yield Le._process(w,Z);delete D.mfaInfo,delete D.mfaPendingCredential;const ut=Object.assign(Object.assign({},D),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(m.operationType){case"signIn":const ft=yield fi._fromIdTokenResponse(w,m.operationType,ut);return yield w._updateCurrentUser(ft.user),ft;case"reauthenticate":return $(m.user,w,"internal-error"),fi._forOperation(m.user,m.operationType,ut);default:Te(w,"internal-error")}});return function(Le){return de.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function wd(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",Zt(y,f))}class Yo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Fs._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Yo(f)}getSession(){var f=this;return(0,d.Z)(function*(){return ds._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,d.Z)(function*(){const D=f,P=yield w.getSession(),Z=yield Tr(w.user,D._process(w.user.auth,P,m));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){const w="string"==typeof f?f:f.uid,D=yield m.user.getIdToken(),P=yield Tr(m.user,function fo(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(y,f))}(m.user.auth,{idToken:D,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Z})=>Z!==w),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const Nu=new WeakMap,hs="__sak";class ku{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(hs,"1"),this.storage.removeItem(hs),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vs=(()=>{class y extends ku{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rg(){const y=(0,N.z$)();return _u(y)||Qr(y)}()&&function dr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ms(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),P=this.localCache[w];D!==P&&m(w,P,D)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((de,Le,Qe)=>{this.notifyListeners(de,Qe)});const D=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(D);if(m.newValue!==de)null!==m.newValue?this.storage.setItem(D,m.newValue):this.storage.removeItem(D);else if(this.localCache[D]===m.newValue&&!w)return}const P=()=>{const de=this.storage.getItem(D);!w&&this.localCache[D]===de||this.notifyListeners(D,de)},Z=this.storage.getItem(D);!function Da(){return(0,N.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,w){this.localCache[m]=w;const D=this.listeners[m];if(D)for(const P of Array.from(D))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var D=()=>super._set,P=this;return(0,d.Z)(function*(){yield D().call(P,m,w),P.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,D=this;return(0,d.Z)(function*(){const P=yield w().call(D,m);return D.localCache[m]=JSON.stringify(P),P})()}_remove(m){var w=()=>super._remove,D=this;return(0,d.Z)(function*(){yield w().call(D,m),delete D.localCache[m]})()}}return y.type="LOCAL",y})(),jt=(()=>{class y extends ku{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return y.type="SESSION",y})();let vt=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(P=>P.isListeningto(m));if(w)return w;const D=new y(m);return this.receivers.push(D),D}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const D=m,{eventId:P,eventType:Z,data:de}=D.data,Le=w.handlersMap[Z];if(!(null==Le?void 0:Le.size))return;D.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const Qe=Array.from(Le).map(function(){var ft=(0,d.Z)(function*(Wn){return Wn(D.origin,de)});return function(Wn){return ft.apply(this,arguments)}}()),ut=yield function zi(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Qe);D.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:ut})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function hn(y="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return y+m}class Mi{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var D=this;return(0,d.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,de;return new Promise((Le,Qe)=>{const ut=hn("",20);P.port1.start();const ft=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);de={messageChannel:P,onMessage(Wn){const Or=Wn;if(Or.data.eventId===ut)switch(Or.data.status){case"ack":clearTimeout(ft),Z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Or.data.response);break;default:clearTimeout(ft),clearTimeout(Z),Qe(new Error("invalid_response"))}}},D.handlers.add(de),P.port1.addEventListener("message",de.onMessage),D.target.postMessage({eventType:f,eventId:ut,data:m},[P.port2])}).finally(()=>{de&&D.removeMessageHandler(de)})})()}}function Hn(){return window}function Gn(){return void 0!==Hn().WorkerGlobalScope&&"function"==typeof Hn().importScripts}function pr(){return(pr=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ed="firebaseLocalStorageDb",mi="firebaseLocalStorage",Qo="fbase_key";class mo{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function vn(y,f){return y.transaction([mi],f?"readwrite":"readonly").objectStore(mi)}function Fl(){const y=indexedDB.open(Ed,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(mi,{keyPath:Qo})}catch(D){m(D)}}),y.addEventListener("success",(0,d.Z)(function*(){const w=y.result;w.objectStoreNames.contains(mi)?f(w):(w.close(),yield function Nn(){const y=indexedDB.deleteDatabase(Ed);return new mo(y).toPromise()}(),f(yield Fl()))}))})}function yo(y,f,m){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(y,f,m){const w=vn(y,!0).put({[Qo]:f,value:m});return new mo(w).toPromise()})).apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(y,f){const m=vn(y,!1).get(f),w=yield new mo(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function gt(y,f){const m=vn(y,!0).delete(f);return new mo(m).toPromise()}const Bs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Fl()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let D=0;for(;;)try{const P=yield w._openDb();return yield m(P)}catch(P){if(D++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Gn()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=vt._getInstance(function kt(){return Gn()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(D,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(D,P){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(D,P){return["keyChanged"]});return function(D,P){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,D;if(m.activeServiceWorker=yield function fs(){return pr.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Mi(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=P[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Fu(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Fl();return yield yo(m,hs,"1"),yield gt(m,hs),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var D=this;return(0,d.Z)(function*(){return D._withPendingWrite((0,d.Z)(function*(){return yield D._withRetries(P=>yo(P,m,w)),D.localCache[m]=w,D.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const D=yield w._withRetries(P=>function Us(y,f){return Pr.apply(this,arguments)}(P,m));return w.localCache[m]=D,D})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(D=>gt(D,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(Z=>{const de=vn(Z,!1).getAll();return new mo(de).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const D=[],P=new Set;for(const{fbase_key:Z,value:de}of w)P.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(de)&&(m.notifyListeners(Z,de),D.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!P.has(Z)&&(m.notifyListeners(Z,null),D.push(Z));return D})()}notifyListeners(m,w){this.localCache[m]=w;const D=this.listeners[m];if(D)for(const P of Array.from(D))P(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function bt(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",Zt(y,f))}function js(){return(js=(0,d.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jo(y){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=D=>{const P=we("internal-error");P.customData=D,m(P)},w.type="text/javascript",w.charset="UTF-8",function Fa(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function ps(y){return`__${y}${Math.floor(1e6*Math.random())}`}const kn=1e12;class ea{constructor(f){this.auth=f,this.counter=kn,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new In(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||kn;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||kn))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(f||kn))||void 0===w||w.execute(),""})()}}class In{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;$(D,"argument-error",{appName:m}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gs(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const bd=ps("rcb"),An=new rn(3e4,6e4);class sg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Hn().grecaptcha}load(f,m=""){return $(function og(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Hn().grecaptcha):new Promise((w,D)=>{const P=Hn().setTimeout(()=>{D(we(f,"network-request-failed"))},An.get());Hn()[bd]=()=>{Hn().clearTimeout(P),delete Hn()[bd];const de=Hn().grecaptcha;if(!de)return void D(we(f,"internal-error"));const Le=de.render;de.render=(Qe,ut)=>{const ft=Le(Qe,ut);return this.counter++,ft},this.hostLanguage=m,w(de)},Jo(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:bd,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),D(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Hn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cd{load(f){return(0,d.Z)(function*(){return new ea(f)})()}clearedOneInstance(){}}const Lu="recaptcha",Ll={theme:"light",type:"image"};class mf{constructor(f,m=Object.assign({},Ll),w){this.parameters=m,this.type=Lu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(w),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;$(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cd:new sg,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(P=>{const Z=de=>{!de||(f.tokenChangeListeners.delete(Z),P(de))};f.tokenChangeListeners.add(Z),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=Hn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){$(ht()&&!Gn(),f.auth,"internal-error"),yield function qn(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Zi(y){return js.apply(this,arguments)}(f.auth);$(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vu{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=jo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function ta(){return(ta=(0,d.Z)(function*(y,f,m){const w=ct(y),D=yield Gr(w,f,(0,N.m9)(m));return new Vu(D,P=>bn(w,P))})).apply(this,arguments)}function Uu(){return(Uu=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);yield nn(!1,w,"phone");const D=yield Gr(w.auth,f,(0,N.m9)(m));return new Vu(D,P=>fr(w,P))})).apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y),D=yield Gr(w.auth,f,(0,N.m9)(m));return new Vu(D,P=>ls(w,P))})).apply(this,arguments)}function Gr(y,f,m){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(y,f,m){var w;const D=yield m.verify();try{let P;if($("string"==typeof D,y,"argument-error"),$(m.type===Lu,y,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const Z=P.session;if("phoneNumber"in P)return $("enroll"===Z.type,y,"internal-error"),(yield wd(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{$("signin"===Z.type,y,"internal-error");const de=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return $(de,y,"missing-multi-factor-info"),(yield bt(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Kp(y,{phoneNumber:P.phoneNumber,recaptchaToken:D});return Z}}finally{m._reset()}})).apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(y,f){yield xa((0,N.m9)(y),f)})).apply(this,arguments)}let ni=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=ct(m)}verifyPhoneNumber(m,w){return Gr(this.auth,m,(0,N.m9)(w))}static credential(m,w){return jo._fromVerification(m,w)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:D}=m;return w&&D?jo._fromTokenResponse(w,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ki(y,f){return f?ee(f):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class _o extends Di{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Os(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Os(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Os(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Vl(y){return hr(y.auth,new _o(y),y.bypassAuthState)}function Td(y){const{auth:f,user:m}=y;return $(m,f,"internal-error"),Cu(m,new _o(y),y.bypassAuthState)}function Dd(y){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(y){const{auth:f,user:m}=y;return $(m,f,"internal-error"),xa(m,new _o(y),y.bypassAuthState)})).apply(this,arguments)}class Va{constructor(f,m,w,D,P=!1){this.auth=f,this.resolver=w,this.user=D,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(w,D){f.pendingPromise={resolve:w,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(w,D){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:P,tenantId:Z,error:de,type:Le}=f;if(de)return void m.reject(de);const Qe={auth:m.auth,requestUri:w,sessionId:D,tenantId:Z||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)(Qe))}catch(ut){m.reject(ut)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Vl;case"linkViaPopup":case"linkViaRedirect":return Dd;case"reauthViaPopup":case"reauthViaRedirect":return Td;default:Te(this.auth,"internal-error")}}resolve(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hs=new rn(2e3,1e4);function ys(){return(ys=(0,d.Z)(function*(y,f,m){const w=ct(y);Be(y,f,Mr);const D=Ki(w,m);return new Ul(w,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function Ua(){return(Ua=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);Be(w.auth,f,Mr);const D=Ki(w.auth,m);return new Ul(w.auth,"reauthViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}function _s(){return(_s=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);Be(w.auth,f,Mr);const D=Ki(w.auth,m);return new Ul(w.auth,"linkViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}let Ul=(()=>{class y extends Va{constructor(m,w,D,P,Z){super(m,w,P,Z),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return $(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){K(1===m.filter.length,"Popup operations only handle one event");const w=hn();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(D=>{m.reject(D)}),m.resolver._isIframeWebStorageSupported(m.auth,D=>{D||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Hs.get())};m()}}return y.currentPopupAction=null,y})();const xi=new Map;class Bl extends Va{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=xi.get(m.auth._key());if(!w){try{const P=(yield function Ba(y,f){return vo.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(P)}catch(D){w=()=>Promise.reject(D)}xi.set(m.auth._key(),w)}return m.bypassAuthState||xi.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const D=yield w.auth._redirectUserForId(f.eventId);if(D)return w.user=D,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function vo(){return(vo=(0,d.Z)(function*(y,f){const m=L(f),w=R(y);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(m));return yield w._remove(m),D})).apply(this,arguments)}function ja(y,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,d.Z)(function*(y,f){return R(y)._set(L(f),"true")})).apply(this,arguments)}function T(y,f){xi.set(y._key(),f)}function R(y){return ee(y._redirectPersistence)}function L(y){return Qn("pendingRedirect",y.config.apiKey,y.name)}function Pe(){return(Pe=(0,d.Z)(function*(y,f,m){const w=ct(y);Be(y,f,Mr);const D=Ki(w,m);return yield ja(D,w),D._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function wt(){return(wt=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);Be(w.auth,f,Mr);const D=Ki(w.auth,m);yield ja(D,w.auth);const P=yield sn(w);return D._openRedirect(w.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(y,f,m){const w=(0,N.m9)(y);Be(w.auth,f,Mr);const D=Ki(w.auth,m);yield nn(!1,w,f.providerId),yield ja(D,w.auth);const P=yield sn(w);return D._openRedirect(w.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(y,f){return yield ct(y)._initializationPromise,zs(y,f,!1)})).apply(this,arguments)}function zs(y,f){return an.apply(this,arguments)}function an(){return(an=(0,d.Z)(function*(y,f,m=!1){const w=ct(y),D=Ki(w,f),Z=yield new Bl(w,D,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,f)),Z})).apply(this,arguments)}function sn(y){return _i.apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(y){const f=hn(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ag{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function xd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jl(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!jl(f)){const D=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(we(this.auth,D))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yf(f))}saveEventToCache(f){this.cachedEventUids.add(yf(f)),this.lastProcessedEventTime=Date.now()}}function yf(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function jl({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function _f(y){return $l.apply(this,arguments)}function $l(){return($l=(0,d.Z)(function*(y,f={}){return Lt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const vf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bu=/^https?/;function Rd(){return(Rd=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield _f(y);for(const m of f)try{if(dw(m))return}catch(w){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function dw(y){const f=Ne(),{protocol:m,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===w?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===w}if(!Bu.test(m))return!1;if(vf.test(y))return w===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const Hl=new rn(3e4,6e4);function Pd(){const y=Hn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Gl=null;function jy(y){return Gl=Gl||function ug(y){return new Promise((f,m)=>{var w,D,P;function Z(){Pd(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Pd(),m(we(y,"network-request-failed"))},timeout:Hl.get()})}if(null===(D=null===(w=Hn().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=Hn().gapi)||void 0===P?void 0:P.load)){const de=ps("iframefcb");return Hn()[de]=()=>{gapi.load?Z():m(we(y,"network-request-failed"))},Jo(`https://apis.google.com/js/api.js?onload=${de}`).catch(Le=>m(Le))}Z()}}).catch(f=>{throw Gl=null,f})}(y),Gl}const ql=new rn(5e3,15e3),Ha={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $y(y){const f=y.config;$(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?xn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},D=Nd.get(y.config.apiHost);D&&(w.eid=D);const P=y._getFrameworks();return P.length&&(w.fw=P.join(",")),`${m}?${(0,N.xO)(w).slice(1)}`}function vs(){return vs=(0,d.Z)(function*(y){const f=yield jy(y),m=Hn().gapi;return $(m,y,"internal-error"),f.open({where:document.body,url:$y(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ha,dontclear:!0},w=>new Promise(function(){var D=(0,d.Z)(function*(P,Z){yield w.restyle({setHideOnLeave:!1});const de=we(y,"network-request-failed"),Le=Hn().setTimeout(()=>{Z(de)},ql.get());function Qe(){Hn().clearTimeout(Le),P(w)}w.ping(Qe).then(Qe,()=>{Z(de)})});return function(P,Z){return D.apply(this,arguments)}}()))}),vs.apply(this,arguments)}const wf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function vi(y,f,m,w,D,P){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:w,v:ae.SDK_VERSION,eventId:D};if(f instanceof Mr){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Qe]of Object.entries(P||{}))Z[Le]=Qe}if(f instanceof ro){const Le=f.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(Z.scopes=Le.join(","))}y.tenantId&&(Z.tid=y.tenantId);const de=Z;for(const Le of Object.keys(de))void 0===de[Le]&&delete de[Le];return`${function sa({config:y}){return y.emulator?xn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(de).slice(1)}`}const kd="webStorageSupport";class ju extends class Hy{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ju(f)}_finalizeEnroll(f,m,w){return function tg(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(y,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ka(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",Zt(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pg=(()=>{class y{constructor(){}static assertion(m){return ju._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Kl="@firebase/auth";class Ld{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var D;f((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wo(){return window}function Ri(){return(Ri=(0,d.Z)(function*(y,f,m){var w;const{BuildInfo:D}=wo();K(f.sessionId,"AuthEvent did not contain a session ID");const P=yield Ud(f.sessionId),Z={};return Qr()?Z.ibi=D.packageName:jr()?Z.apn=D.packageName:Te(y,"operation-not-supported-in-this-environment"),D.displayName&&(Z.appDisplayName=D.displayName),Z.sessionId=P,vi(y,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function Ql(){return(Ql=(0,d.Z)(function*(y){const{BuildInfo:f}=wo(),m={};Qr()?m.iosBundleId=f.packageName:jr()?m.androidPackageName=f.packageName:Te(y,"operation-not-supported-in-this-environment"),yield _f(y,m)})).apply(this,arguments)}function Cf(){return(Cf=(0,d.Z)(function*(y,f,m){const{cordova:w}=wo();let D=()=>{};try{yield new Promise((P,Z)=>{let de=null;function Le(){var ft;P();const Wn=null===(ft=w.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof Wn&&Wn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Qe(){de||(de=window.setTimeout(()=>{Z(we(y,"redirect-cancelled-by-user"))},2e3))}function ut(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}f.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),jr()&&document.addEventListener("visibilitychange",ut,!1),D=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",ut,!1),de&&window.clearTimeout(de)}})}finally{D()}})).apply(this,arguments)}function Ud(y){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(y){const f=Jl(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Jl(y){if(K(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let w=0;w<y.length;w++)m[w]=y.charCodeAt(w);return m}!function gg(y){(0,ae._registerComponent)(new ue.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),{apiKey:P,authDomain:Z}=w.options;return((de,Le)=>{$(P&&!P.includes(":"),"invalid-api-key",{appName:de.name}),$(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:de.name});const Qe={apiKey:P,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bo(y)},ut=new ze(de,Le,Qe);return function oe(y,f){const m=(null==f?void 0:f.persistence)||[],w=(Array.isArray(m)?m:[m]).map(ee);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(ut,m),ut})(w,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",f=>{const m=ct(f.getProvider("auth").getImmediate());return new Ld(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Kl,"0.20.2",function Yl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Kl,"0.20.2","esm2017")}("Browser");class yg extends ag{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function oa(y){return jd.apply(this,arguments)}function jd(){return(jd=(0,d.Z)(function*(y){const f=yield Yi()._get(Eo(y));return f&&(yield Yi()._remove(Eo(y))),f})).apply(this,arguments)}function qa(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function Yi(){return ee(Vs)}function Eo(y){return Qn("authEvent",y.config.apiKey,y.name)}function ec(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...m]=y.split("?");return(0,N.zd)(m.join("?"))}function Gd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function nc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Zy(y=(0,N.z$)()){return!("file:"!==nc()&&"ionic:"!==nc()&&"capacitor:"!==nc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function zd(){try{const y=self.localStorage,f=hn();if(y)return y.setItem(f,"1"),y.removeItem(f),!function qd(y=(0,N.z$)()){return function bo(){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Fn(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch(y){return rc()&&(0,N.hl)()}return!1}function rc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sn(){return(function Wy(){return"http:"===nc()||"https:"===nc()}()||(0,N.ru)()||Zy())&&!function fw(){return(0,N.b$)()||(0,N.UG)()}()&&zd()&&!rc()}function zu(){return Zy()&&"undefined"!=typeof document}function Wd(){return(Wd=(0,d.Z)(function*(){return!!zu()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const ii={LOCAL:"local",NONE:"none",SESSION:"session"},Wu=$,ic="persistence";function sc(y){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,d.Z)(function*(y){yield y._initializationPromise;const f=Kd(),m=Qn(ic,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function Kd(){var y;try{return(null===(y=function Ky(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Yy=$;class aa{constructor(){this.browserResolver=ee(class hg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jt,this._completeRedirectFn=zs,this._overrideRedirectResult=T}_openPopup(f,m,w,D){var P=this;return(0,d.Z)(function*(){var Z;K(null===(Z=P.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const de=vi(f,m,w,Ne(),D);return function Zl(y,f,m,w=500,D=600){const P=Math.max((window.screen.availHeight-D)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let de="";const Le=Object.assign(Object.assign({},wf),{width:w.toString(),height:D.toString(),top:P,left:Z}),Qe=(0,N.z$)().toLowerCase();m&&(de=Ta(Qe)?"_blank":m),Ia(Qe)&&(f=f||"http://localhost",Le.scrollbars="yes");const ut=Object.entries(Le).reduce((Wn,[Or,Ka])=>`${Wn}${Or}=${Ka},`,"");if(function to(y=(0,N.z$)()){var f;return Qr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Qe)&&"_self"!==de)return function cg(y,f){const m=document.createElement("a");m.href=y,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",de),new bf(null);const ft=window.open(f||"",de,ut);$(ft,y,"popup-blocked");try{ft.focus()}catch(Wn){}return new bf(ft)}(f,de,hn())})()}_openRedirect(f,m,w,D){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(f),function Wi(y){Hn().location.href=y}(vi(f,m,w,Ne(),D)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:D,promise:P}=this.eventManagers[m];return D?Promise.resolve(D):(K(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const w=yield function hw(y){return vs.apply(this,arguments)}(f),D=new ag(f);return w.register("authEvent",P=>($(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:D.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:D},m.iframes[f._key()]=w,D})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(kd,{type:kd},D=>{var P;const Z=null===(P=null==D?void 0:D[0])||void 0===P?void 0:P[kd];void 0!==Z&&m(!!Z),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function $a(y){return Rd.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ms()||_u()||Qr()}}),this.cordovaResolver=ee(class Hd{constructor(){this._redirectPersistence=jt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zs,this._overrideRedirectResult=T}_initialize(f){var m=this;return(0,d.Z)(function*(){const w=f._key();let D=m.eventManagers.get(w);return D||(D=new yg(f),m.eventManagers.set(w,D),m.attachCallbackListeners(f,D)),D})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,D){var P=this;return(0,d.Z)(function*(){!function If(y){var f,m,w,D,P,Z,de,Le,Qe,ut;const ft=wo();$("function"==typeof(null===(f=null==ft?void 0:ft.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(m=null==ft?void 0:ft.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(P=null===(D=null===(w=null==ft?void 0:ft.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Le=null===(de=null===(Z=null==ft?void 0:ft.cordova)||void 0===Z?void 0:Z.plugins)||void 0===de?void 0:de.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(ut=null===(Qe=null==ft?void 0:ft.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===ut?void 0:ut.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield P._initialize(f);yield Z.initialized(),Z.resetRedirect(),function I(){xi.clear()}(),yield P._originValidation(f);const de=function Xl(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:qa(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(f,w,D);yield function Bd(y,f){return Yi()._set(Eo(y),f)}(f,de);const Le=yield function Vd(y,f,m){return Ri.apply(this,arguments)}(f,de,m),Qe=yield function mg(y){const{cordova:f}=wo();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let D=null;w?f.plugins.browsertab.openUrl(y):D=f.InAppBrowser.open(y,function td(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(D)})})}(Le);return function Hu(y,f,m){return Cf.apply(this,arguments)}(f,Z,Qe)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function $u(y){return Ql.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:D,BuildInfo:P}=wo(),Z=setTimeout((0,d.Z)(function*(){yield oa(f),m.onEvent(Gd())}),500),de=function(){var ut=(0,d.Z)(function*(ft){clearTimeout(Z);const Wn=yield oa(f);let Or=null;Wn&&(null==ft?void 0:ft.url)&&(Or=function Gy(y,f){var m,w;const D=function Gu(y){const f=ec(y),m=f.link?decodeURIComponent(f.link):void 0,w=ec(m).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ec(D).link||D||w||m||y}(f);if(D.includes("/__/auth/callback")){const P=ec(D),Z=P.firebaseError?function $d(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(P.firebaseError)):null,de=null===(w=null===(m=null==Z?void 0:Z.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Le=de?we(de):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(Wn,ft.url)),m.onEvent(Or||Gd())});return function(Wn){return ut.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,de);const Le=D,Qe=`${P.packageName.toLowerCase()}://`;wo().handleOpenURL=function(){var ut=(0,d.Z)(function*(ft){if(ft.toLowerCase().startsWith(Qe)&&de({url:ft}),"function"==typeof Le)try{Le(ft)}catch(Wn){console.error(Wn)}});return function(ft){return ut.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=jt,this._completeRedirectFn=zs,this._overrideRedirectResult=T}_initialize(f){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,D){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,m,w,D)})()}_openRedirect(f,m,w,D){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,m,w,D)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return zu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Df(){return Wd.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function za(y){return y.unwrap()}function Yd(y){return Mf(y)}function Mf(y){const{_tokenResponse:f}=y instanceof N.ZR?y.customData:y;if(!f)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ni.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=cd;break;case"facebook.com":w=$o;break;case"github.com":w=df;break;case"twitter.com":w=hd;break;default:const{oauthIdToken:D,oauthAccessToken:P,oauthTokenSecret:Z,pendingToken:de,nonce:Le}=f;return P||Z||D||de?de?m.startsWith("saml.")?io._create(m,de):us._fromParams({providerId:m,signInMethod:m,pendingToken:de,idToken:D,accessToken:P}):new ji(m).credential({idToken:D,accessToken:P,rawNonce:Le}):null}return y instanceof N.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function mr(y,f){return f.catch(m=>{throw m instanceof N.ZR&&function Zu(y,f){var m;const w=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new rr(y,function tr(y,f){var m;const w=(0,N.m9)(y),D=f;return $(f.customData.operationType,w,"argument-error"),$(null===(m=D.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),ho._fromError(w,D)}(y,f));else if(w){const D=Mf(f),P=f;D&&(P.credential=D,P.tenantId=w.tenantId||void 0,P.email=w.email||void 0,P.phoneNumber=w.phoneNumber||void 0)}}(y,m),m}).then(m=>{const D=m.user;return{operationType:m.operationType,credential:Yd(m),additionalUserInfo:or(m),user:Es.getOrCreate(D)}})}function Wa(y,f){return xf.apply(this,arguments)}function xf(){return(xf=(0,d.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>mr(y,m.confirm(w))}})).apply(this,arguments)}class rr{constructor(f,m){this.resolver=m,this.auth=function oc(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return mr(za(this.auth),this.resolver.resolveSignIn(f))}}class Es{constructor(f){this._delegate=f,this.multiFactor=function ng(y){const f=(0,N.m9)(y);return Nu.has(f)||Nu.set(f,Yo._fromUser(f)),Nu.get(f)}(f)}static getOrCreate(f){return Es.USER_MAP.has(f)||Es.USER_MAP.set(f,new Es(f)),Es.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,d.Z)(function*(){return mr(m.auth,fr(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,d.Z)(function*(){return Wa(w.auth,function La(y,f,m){return Uu.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,d.Z)(function*(){return mr(m.auth,function Md(y,f,m){return _s.apply(this,arguments)}(m._delegate,f,aa))})()}linkWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield sc(ct(m.auth)),function $t(y,f,m){return function St(y,f,m){return nr.apply(this,arguments)}(y,f,m)}(m._delegate,f,aa)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,d.Z)(function*(){return mr(m.auth,ls(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Wa(this.auth,function Id(y,f,m){return gr.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return mr(this.auth,function Sd(y,f,m){return Ua.apply(this,arguments)}(this._delegate,f,aa))}reauthenticateWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield sc(ct(m.auth)),function et(y,f,m){return function nt(y,f,m){return wt.apply(this,arguments)}(y,f,m)}(m._delegate,f,aa)})()}sendEmailVerification(f){return function Si(y,f){return Ol.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,d.Z)(function*(){return yield function hf(y,f){return dn.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function gd(y,f){return Pu((0,N.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function md(y,f){return Pu((0,N.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ra(y,f){return ms.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function xu(y,f){return Ru.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Su(y,f,m){return Mu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Es.USER_MAP=new WeakMap;const ac=$;let vg=(()=>{class y{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=m.options;ac(D,"invalid-api-key",{appName:m.name}),ac(D,"invalid-api-key",{appName:m.name});const P="undefined"!=typeof window?aa:void 0;this._delegate=w.initialize({options:{persistence:Qy(D,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Es.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Xr(y,f,m){const w=ct(y);$(w._canInitEmulator,w,"emulator-config-failed"),$(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const D=!!(null==m?void 0:m.disableWarnings),P=Fi(f),{host:Z,port:de}=function jn(y){const f=Fi(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const P=D[1];return{host:P,port:Li(w.substr(P.length+1))}}{const[P,Z]=w.split(":");return{host:P,port:Li(Z)}}}(f);w.config.emulator={url:`${P}//${Z}${null===de?"":`:${de}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:de,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function yn(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,w)}applyActionCode(m){return function Wo(y,f){return Ae.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Vt(this._delegate,m)}confirmPasswordReset(m,w){return function Tu(y,f,m){return Ml.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var D=this;return(0,d.Z)(function*(){return mr(D._delegate,function uo(y,f,m){return pi.apply(this,arguments)}(D._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Au(y,f){return Ls.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function pd(y,f){const m=bu.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){ac(Sn(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function zn(y,f){return qs.apply(this,arguments)}(m._delegate,aa);return w?mr(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function qu(y,f){ct(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,D){const{next:P,error:Z,complete:de}=wg(m,w,D);return this._delegate.onAuthStateChanged(P,Z,de)}onIdTokenChanged(m,w,D){const{next:P,error:Z,complete:de}=wg(m,w,D);return this._delegate.onIdTokenChanged(P,Z,de)}sendSignInLinkToEmail(m,w){return function Rl(y,f,m){return Pl.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Sl(y,f,m){return Iu.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,d.Z)(function*(){let D;switch(function Af(y,f){Wu(Object.values(ii).includes(f),y,"invalid-persistence-type"),(0,N.b$)()?Wu(f!==ii.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?Wu(f===ii.NONE,y,"unsupported-persistence-type"):rc()?Wu(f===ii.NONE||f===ii.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):Wu(f===ii.NONE||zd(),y,"unsupported-persistence-type")}(w._delegate,m),m){case ii.SESSION:D=jt;break;case ii.LOCAL:D=(yield ee(Bs)._isAvailable())?Bs:Vs;break;case ii.NONE:D=Ct;break;default:return Te("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return mr(this._delegate,function fd(y){return Il.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return mr(this._delegate,bn(this._delegate,m))}signInWithCustomToken(m){return mr(this._delegate,function zo(y,f){return _t.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return mr(this._delegate,function xl(y,f,m){return bn((0,N.m9)(y),ld.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return mr(this._delegate,function Xp(y,f,m){return cs.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Wa(this._delegate,function Ht(y,f,m){return ta.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,d.Z)(function*(){return ac(Sn(),w._delegate,"operation-not-supported-in-this-environment"),mr(w._delegate,function Ad(y,f,m){return ys.apply(this,arguments)}(w._delegate,m,aa))})()}signInWithRedirect(m){var w=this;return(0,d.Z)(function*(){return ac(Sn(),w._delegate,"operation-not-supported-in-this-environment"),yield sc(w._delegate),function Y(y,f,m){return function ie(y,f,m){return Pe.apply(this,arguments)}(y,f,m)}(w._delegate,m,aa)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function _n(y,f){return Du.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ii,y})();function wg(y,f,m){let w=y;"function"!=typeof y&&({next:w,error:f,complete:m}=y);const D=w;return{next:Z=>D(Z&&Es.getOrCreate(Z)),error:f,complete:m}}function Qy(y,f){const m=function Sf(y,f){const m=Kd();if(!m)return[];const w=Qn(ic,y,f);switch(m.getItem(w)){case ii.NONE:return[Ct];case ii.LOCAL:return[Bs,jt];case ii.SESSION:return[jt];default:return[]}}(y,f);if("undefined"!=typeof self&&!m.includes(Bs)&&m.push(Bs),"undefined"!=typeof window)for(const w of[Vs,jt])m.includes(w)||m.push(w);return m.includes(Ct)||m.push(Ct),m}class Qd{constructor(){this.providerId="phone",this._delegate=new ni(za(X.Z.auth()))}static credential(f,m){return ni.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Qd.PHONE_SIGN_IN_METHOD=ni.PHONE_SIGN_IN_METHOD,Qd.PROVIDER_ID=ni.PROVIDER_ID;const Eg=$;class bg{constructor(f,m,w=X.Z.app()){var D;Eg(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new mf(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Za(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new vg(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ld,FacebookAuthProvider:$o,GithubAuthProvider:df,GoogleAuthProvider:cd,OAuthProvider:ji,SAMLAuthProvider:$r,PhoneAuthProvider:Qd,PhoneMultiFactorGenerator:pg,RecaptchaVerifier:bg,TwitterAuthProvider:hd,Auth:vg,AuthCredential:Di,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(X.Z)},8306:(Xe,Ee,O)=>{O.d(Ee,{y:()=>H});var d=O(2961),X=O(727),N=O(8822),ae=O(4671);var ue=O(2416),se=O(576),fe=O(2806);let H=(()=>{class Se{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const pe=new Se;return pe.source=this,pe.operator=Ve,pe}subscribe(Ve,pe,Ce){const Ge=function He(Se){return Se&&Se instanceof d.Lv||function te(Se){return Se&&(0,se.m)(Se.next)&&(0,se.m)(Se.error)&&(0,se.m)(Se.complete)}(Se)&&(0,X.Nn)(Se)}(Ve)?Ve:new d.Hp(Ve,pe,Ce);return(0,fe.x)(()=>{const{operator:Ke,source:Te}=this;Ge.add(Ke?Ke.call(Ge,Te):Te?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(pe){Ve.error(pe)}}forEach(Ve,pe){return new(pe=j(pe))((Ce,Ge)=>{const Ke=new d.Hp({next:Te=>{try{Ve(Te)}catch(we){Ge(we),Ke.unsubscribe()}},error:Ge,complete:Ce});this.subscribe(Ke)})}_subscribe(Ve){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ve)}[N.L](){return this}pipe(...Ve){return function me(Se){return 0===Se.length?ae.y:1===Se.length?Se[0]:function(Ve){return Se.reduce((pe,Ce)=>Ce(pe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=j(Ve))((pe,Ce)=>{let Ge;this.subscribe(Ke=>Ge=Ke,Ke=>Ce(Ke),()=>pe(Ge))})}}return Se.create=Oe=>new Se(Oe),Se})();function j(Se){var Oe;return null!==(Oe=null!=Se?Se:ue.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(Xe,Ee,O)=>{O.d(Ee,{x:()=>ue});var d=O(8306),X=O(727);const ae=(0,O(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(8737),me=O(2806);let ue=(()=>{class fe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const te=new se(this,this);return te.operator=j,te}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(j)}})}error(j){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:te}=this;for(;te.length;)te.shift().error(j)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:te,isStopped:He,observers:Se}=this;return te||He?X.Lc:(this.currentObservers=null,Se.push(j),new X.w0(()=>{this.currentObservers=null,(0,ne.P)(Se,j)}))}_checkFinalizedStatuses(j){const{hasError:te,thrownError:He,isStopped:Se}=this;te?j.error(He):Se&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return fe.create=(H,j)=>new se(H,j),fe})();class se extends ue{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===te||te.call(j,H)}error(H){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===te||te.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,te;return null!==(te=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==te?te:X.Lc}}},2961:(Xe,Ee,O)=>{O.d(Ee,{Hp:()=>Ve,Lv:()=>te});var d=O(576),X=O(727),N=O(2416),ae=O(7849);function ne(){}const me=fe("C",void 0,void 0);function fe(Te,we,be){return{kind:Te,value:we,error:be}}var H=O(3410),j=O(2806);class te extends X.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,X.Nn)(we)&&we.add(this)):this.destination=Ke}static create(we,be,Be){return new Ve(we,be,Be)}next(we){this.isStopped?Ge(function se(Te){return fe("N",Te,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Ge(function ue(Te){return fe("E",void 0,Te)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Ge(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Se(Te,we){return He.call(Te,we)}class Oe{constructor(we){this.partialObserver=we}next(we){const{partialObserver:be}=this;if(be.next)try{be.next(we)}catch(Be){pe(Be)}}error(we){const{partialObserver:be}=this;if(be.error)try{be.error(we)}catch(Be){pe(Be)}else pe(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(be){pe(be)}}}class Ve extends te{constructor(we,be,Be){let Ue;if(super(),(0,d.m)(we)||!we)Ue={next:null!=we?we:void 0,error:null!=be?be:void 0,complete:null!=Be?Be:void 0};else{let $;this&&N.v.useDeprecatedNextContext?($=Object.create(we),$.unsubscribe=()=>this.unsubscribe(),Ue={next:we.next&&Se(we.next,$),error:we.error&&Se(we.error,$),complete:we.complete&&Se(we.complete,$)}):Ue=we}this.destination=new Oe(Ue)}}function pe(Te){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Te):(0,ae.h)(Te)}function Ge(Te,we){const{onStoppedNotification:be}=N.v;be&&H.z.setTimeout(()=>be(Te,we))}const Ke={closed:!0,next:ne,error:function Ce(Te){throw Te},complete:ne}},727:(Xe,Ee,O)=>{O.d(Ee,{Lc:()=>me,w0:()=>ne,Nn:()=>ue});var d=O(576);const N=(0,O(3888).d)(fe=>function(j){fe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((te,He)=>`${He+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=O(8737);class ne{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Se of j)Se.remove(this);else j.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(Se){H=Se instanceof N?Se.errors:[Se]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Se of He)try{se(Se)}catch(Oe){H=null!=H?H:[],Oe instanceof N?H=[...H,...Oe.errors]:H.push(Oe)}}if(H)throw new N(H)}}add(H){var j;if(H&&H!==this)if(this.closed)se(H);else{if(H instanceof ne){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,H)}remove(H){const{_finalizers:j}=this;j&&(0,ae.P)(j,H),H instanceof ne&&H._removeParent(this)}}ne.EMPTY=(()=>{const fe=new ne;return fe.closed=!0,fe})();const me=ne.EMPTY;function ue(fe){return fe instanceof ne||fe&&"closed"in fe&&(0,d.m)(fe.remove)&&(0,d.m)(fe.add)&&(0,d.m)(fe.unsubscribe)}function se(fe){(0,d.m)(fe)?fe():fe.unsubscribe()}},2416:(Xe,Ee,O)=>{O.d(Ee,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Xe,Ee,O)=>{O.d(Ee,{E:()=>X});const X=new(O(8306).y)(ne=>ne.complete())},8996:(Xe,Ee,O)=>{O.d(Ee,{D:()=>we});var d=O(8421),X=O(5363),N=O(9468),me=O(8306),se=O(2202),fe=O(576),H=O(9672);function te(be,Be){if(!be)throw new Error("Iterable cannot be null");return new me.y(Ue=>{(0,H.f)(Ue,Be,()=>{const $=be[Symbol.asyncIterator]();(0,H.f)(Ue,Be,()=>{$.next().then(_e=>{_e.done?Ue.complete():Ue.next(_e.value)})},0,!0)})})}var He=O(3670),Se=O(8239),Oe=O(1144),Ve=O(6495),pe=O(2206),Ce=O(4532),Ge=O(3260);function we(be,Be){return Be?function Te(be,Be){if(null!=be){if((0,He.c)(be))return function ae(be,Be){return(0,d.Xf)(be).pipe((0,N.R)(Be),(0,X.Q)(Be))}(be,Be);if((0,Oe.z)(be))return function ue(be,Be){return new me.y(Ue=>{let $=0;return Be.schedule(function(){$===be.length?Ue.complete():(Ue.next(be[$++]),Ue.closed||this.schedule())})})}(be,Be);if((0,Se.t)(be))return function ne(be,Be){return(0,d.Xf)(be).pipe((0,N.R)(Be),(0,X.Q)(Be))}(be,Be);if((0,pe.D)(be))return te(be,Be);if((0,Ve.T)(be))return function j(be,Be){return new me.y(Ue=>{let $;return(0,H.f)(Ue,Be,()=>{$=be[se.h](),(0,H.f)(Ue,Be,()=>{let _e,K;try{({value:_e,done:K}=$.next())}catch(re){return void Ue.error(re)}K?Ue.complete():Ue.next(_e)},0,!0)}),()=>(0,fe.m)(null==$?void 0:$.return)&&$.return()})}(be,Be);if((0,Ge.L)(be))return function Ke(be,Be){return te((0,Ge.Q)(be),Be)}(be,Be)}throw(0,Ce.z)(be)}(be,Be):(0,d.Xf)(be)}},8421:(Xe,Ee,O)=>{O.d(Ee,{Xf:()=>He});var d=O(655),X=O(1144),N=O(8239),ae=O(8306),ne=O(3670),me=O(2206),ue=O(4532),se=O(6495),fe=O(3260),H=O(576),j=O(7849),te=O(8822);function He(Te){if(Te instanceof ae.y)return Te;if(null!=Te){if((0,ne.c)(Te))return function Se(Te){return new ae.y(we=>{const be=Te[te.L]();if((0,H.m)(be.subscribe))return be.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,X.z)(Te))return function Oe(Te){return new ae.y(we=>{for(let be=0;be<Te.length&&!we.closed;be++)we.next(Te[be]);we.complete()})}(Te);if((0,N.t)(Te))return function Ve(Te){return new ae.y(we=>{Te.then(be=>{we.closed||(we.next(be),we.complete())},be=>we.error(be)).then(null,j.h)})}(Te);if((0,me.D)(Te))return Ce(Te);if((0,se.T)(Te))return function pe(Te){return new ae.y(we=>{for(const be of Te)if(we.next(be),we.closed)return;we.complete()})}(Te);if((0,fe.L)(Te))return function Ge(Te){return Ce((0,fe.Q)(Te))}(Te)}throw(0,ue.z)(Te)}function Ce(Te){return new ae.y(we=>{(function Ke(Te,we){var be,Be,Ue,$;return(0,d.mG)(this,void 0,void 0,function*(){try{for(be=(0,d.KL)(Te);!(Be=yield be.next()).done;)if(we.next(Be.value),we.closed)return}catch(_e){Ue={error:_e}}finally{try{Be&&!Be.done&&($=be.return)&&(yield $.call(be))}finally{if(Ue)throw Ue.error}}we.complete()})})(Te,we).catch(be=>we.error(be))})}},6451:(Xe,Ee,O)=>{O.d(Ee,{T:()=>me});var d=O(8189),X=O(8421),N=O(515),ae=O(7669),ne=O(8996);function me(...ue){const se=(0,ae.yG)(ue),fe=(0,ae._6)(ue,1/0),H=ue;return H.length?1===H.length?(0,X.Xf)(H[0]):(0,d.J)(fe)((0,ne.D)(H,se)):N.E}},5403:(Xe,Ee,O)=>{O.d(Ee,{x:()=>X});var d=O(2961);function X(ae,ne,me,ue,se){return new N(ae,ne,me,ue,se)}class N extends d.Lv{constructor(ne,me,ue,se,fe,H){super(ne),this.onFinalize=fe,this.shouldUnsubscribe=H,this._next=me?function(j){try{me(j)}catch(te){ne.error(te)}}:super._next,this._error=se?function(j){try{se(j)}catch(te){ne.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Xe,Ee,O)=>{O.d(Ee,{U:()=>N});var d=O(4482),X=O(5403);function N(ae,ne){return(0,d.e)((me,ue)=>{let se=0;me.subscribe((0,X.x)(ue,fe=>{ue.next(ae.call(ne,fe,se++))}))})}},8189:(Xe,Ee,O)=>{O.d(Ee,{J:()=>N});var d=O(5577),X=O(4671);function N(ae=1/0){return(0,d.z)(X.y,ae)}},5577:(Xe,Ee,O)=>{O.d(Ee,{z:()=>se});var d=O(4004),X=O(8421),N=O(4482),ae=O(9672),ne=O(5403),ue=O(576);function se(fe,H,j=1/0){return(0,ue.m)(H)?se((te,He)=>(0,d.U)((Se,Oe)=>H(te,Se,He,Oe))((0,X.Xf)(fe(te,He))),j):("number"==typeof H&&(j=H),(0,N.e)((te,He)=>function me(fe,H,j,te,He,Se,Oe,Ve){const pe=[];let Ce=0,Ge=0,Ke=!1;const Te=()=>{Ke&&!pe.length&&!Ce&&H.complete()},we=Be=>Ce<te?be(Be):pe.push(Be),be=Be=>{Se&&H.next(Be),Ce++;let Ue=!1;(0,X.Xf)(j(Be,Ge++)).subscribe((0,ne.x)(H,$=>{null==He||He($),Se?we($):H.next($)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(Ce--;pe.length&&Ce<te;){const $=pe.shift();Oe?(0,ae.f)(H,Oe,()=>be($)):be($)}Te()}catch($){H.error($)}}))};return fe.subscribe((0,ne.x)(H,we,()=>{Ke=!0,Te()})),()=>{null==Ve||Ve()}}(te,He,fe,j)))}},5363:(Xe,Ee,O)=>{O.d(Ee,{Q:()=>ae});var d=O(9672),X=O(4482),N=O(5403);function ae(ne,me=0){return(0,X.e)((ue,se)=>{ue.subscribe((0,N.x)(se,fe=>(0,d.f)(se,ne,()=>se.next(fe),me),()=>(0,d.f)(se,ne,()=>se.complete(),me),fe=>(0,d.f)(se,ne,()=>se.error(fe),me)))})}},3099:(Xe,Ee,O)=>{O.d(Ee,{B:()=>me});var d=O(8996),X=O(5698),N=O(7579),ae=O(2961),ne=O(4482);function me(se={}){const{connector:fe=(()=>new N.x),resetOnError:H=!0,resetOnComplete:j=!0,resetOnRefCountZero:te=!0}=se;return He=>{let Se=null,Oe=null,Ve=null,pe=0,Ce=!1,Ge=!1;const Ke=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Te=()=>{Ke(),Se=Ve=null,Ce=Ge=!1},we=()=>{const be=Se;Te(),null==be||be.unsubscribe()};return(0,ne.e)((be,Be)=>{pe++,!Ge&&!Ce&&Ke();const Ue=Ve=null!=Ve?Ve:fe();Be.add(()=>{pe--,0===pe&&!Ge&&!Ce&&(Oe=ue(we,te))}),Ue.subscribe(Be),Se||(Se=new ae.Hp({next:$=>Ue.next($),error:$=>{Ge=!0,Ke(),Oe=ue(Te,H,$),Ue.error($)},complete:()=>{Ce=!0,Ke(),Oe=ue(Te,j),Ue.complete()}}),(0,d.D)(be).subscribe(Se))})(He)}}function ue(se,fe,...H){return!0===fe?(se(),null):!1===fe?null:fe(...H).pipe((0,X.q)(1)).subscribe(()=>se())}},9468:(Xe,Ee,O)=>{O.d(Ee,{R:()=>X});var d=O(4482);function X(N,ae=0){return(0,d.e)((ne,me)=>{me.add(N.schedule(()=>ne.subscribe(me),ae))})}},5698:(Xe,Ee,O)=>{O.d(Ee,{q:()=>ae});var d=O(515),X=O(4482),N=O(5403);function ae(ne){return ne<=0?()=>d.E:(0,X.e)((me,ue)=>{let se=0;me.subscribe((0,N.x)(ue,fe=>{++se<=ne&&(ue.next(fe),ne<=se&&ue.complete())}))})}},8505:(Xe,Ee,O)=>{O.d(Ee,{b:()=>ne});var d=O(576),X=O(4482),N=O(5403),ae=O(4671);function ne(me,ue,se){const fe=(0,d.m)(me)||ue||se?{next:me,error:ue,complete:se}:me;return fe?(0,X.e)((H,j)=>{var te;null===(te=fe.subscribe)||void 0===te||te.call(fe);let He=!0;H.subscribe((0,N.x)(j,Se=>{var Oe;null===(Oe=fe.next)||void 0===Oe||Oe.call(fe,Se),j.next(Se)},()=>{var Se;He=!1,null===(Se=fe.complete)||void 0===Se||Se.call(fe),j.complete()},Se=>{var Oe;He=!1,null===(Oe=fe.error)||void 0===Oe||Oe.call(fe,Se),j.error(Se)},()=>{var Se,Oe;He&&(null===(Se=fe.unsubscribe)||void 0===Se||Se.call(fe)),null===(Oe=fe.finalize)||void 0===Oe||Oe.call(fe)}))}):ae.y}},4408:(Xe,Ee,O)=>{O.d(Ee,{o:()=>ne});var d=O(727);class X extends d.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const N={setInterval(me,ue,...se){const{delegate:fe}=N;return(null==fe?void 0:fe.setInterval)?fe.setInterval(me,ue,...se):setInterval(me,ue,...se)},clearInterval(me){const{delegate:ue}=N;return((null==ue?void 0:ue.clearInterval)||clearInterval)(me)},delegate:void 0};var ae=O(8737);class ne extends X{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const fe=this.id,H=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(H,fe,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(H,this.id,se),this}requestAsyncId(ue,se,fe=0){return N.setInterval(ue.flush.bind(ue,this),fe)}recycleAsyncId(ue,se,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return se;N.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ue,se);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let H,fe=!1;try{this.work(ue)}catch(j){fe=!0,H=j||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:fe}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(fe,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xe,Ee,O)=>{O.d(Ee,{v:()=>N});var d=O(6063);class X{constructor(ne,me=X.now){this.schedulerActionCtor=ne,this.now=me}schedule(ne,me=0,ue){return new this.schedulerActionCtor(this,ne).schedule(ue,me)}}X.now=d.l.now;class N extends X{constructor(ne,me=X.now){super(ne,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:me}=this;if(this._active)return void me.push(ne);let ue;this._active=!0;do{if(ue=ne.execute(ne.state,ne.delay))break}while(ne=me.shift());if(this._active=!1,ue){for(;ne=me.shift();)ne.unsubscribe();throw ue}}}},4986:(Xe,Ee,O)=>{O.d(Ee,{z:()=>N});var d=O(4408);const N=new(O(7565).v)(d.o)},6063:(Xe,Ee,O)=>{O.d(Ee,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Xe,Ee,O)=>{O.d(Ee,{z:()=>d});const d={setTimeout(X,N,...ae){const{delegate:ne}=d;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(X,N,...ae):setTimeout(X,N,...ae)},clearTimeout(X){const{delegate:N}=d;return((null==N?void 0:N.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(Xe,Ee,O)=>{O.d(Ee,{h:()=>X});const X=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xe,Ee,O)=>{O.d(Ee,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Xe,Ee,O)=>{O.d(Ee,{_6:()=>me,jO:()=>ae,yG:()=>ne});var d=O(576);function N(ue){return ue[ue.length-1]}function ae(ue){return(0,d.m)(N(ue))?ue.pop():void 0}function ne(ue){return function X(ue){return ue&&(0,d.m)(ue.schedule)}(N(ue))?ue.pop():void 0}function me(ue,se){return"number"==typeof N(ue)?ue.pop():se}},8737:(Xe,Ee,O)=>{function d(X,N){if(X){const ae=X.indexOf(N);0<=ae&&X.splice(ae,1)}}O.d(Ee,{P:()=>d})},3888:(Xe,Ee,O)=>{function d(X){const ae=X(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}O.d(Ee,{d:()=>d})},2806:(Xe,Ee,O)=>{O.d(Ee,{O:()=>ae,x:()=>N});var d=O(2416);let X=null;function N(ne){if(d.v.useDeprecatedSynchronousErrorHandling){const me=!X;if(me&&(X={errorThrown:!1,error:null}),ne(),me){const{errorThrown:ue,error:se}=X;if(X=null,ue)throw se}}else ne()}function ae(ne){d.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ne)}},9672:(Xe,Ee,O)=>{function d(X,N,ae,ne=0,me=!1){const ue=N.schedule(function(){ae(),me?X.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(X.add(ue),!me)return ue}O.d(Ee,{f:()=>d})},4671:(Xe,Ee,O)=>{function d(X){return X}O.d(Ee,{y:()=>d})},1144:(Xe,Ee,O)=>{O.d(Ee,{z:()=>d});const d=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Xe,Ee,O)=>{O.d(Ee,{D:()=>X});var d=O(576);function X(N){return Symbol.asyncIterator&&(0,d.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(Xe,Ee,O)=>{function d(X){return"function"==typeof X}O.d(Ee,{m:()=>d})},3670:(Xe,Ee,O)=>{O.d(Ee,{c:()=>N});var d=O(8822),X=O(576);function N(ae){return(0,X.m)(ae[d.L])}},6495:(Xe,Ee,O)=>{O.d(Ee,{T:()=>N});var d=O(2202),X=O(576);function N(ae){return(0,X.m)(null==ae?void 0:ae[d.h])}},8239:(Xe,Ee,O)=>{O.d(Ee,{t:()=>X});var d=O(576);function X(N){return(0,d.m)(null==N?void 0:N.then)}},3260:(Xe,Ee,O)=>{O.d(Ee,{L:()=>ae,Q:()=>N});var d=O(655),X=O(576);function N(ne){return(0,d.FC)(this,arguments,function*(){const ue=ne.getReader();try{for(;;){const{value:se,done:fe}=yield(0,d.qq)(ue.read());if(fe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(se)}}finally{ue.releaseLock()}})}function ae(ne){return(0,X.m)(null==ne?void 0:ne.getReader)}},4482:(Xe,Ee,O)=>{O.d(Ee,{A:()=>X,e:()=>N});var d=O(576);function X(ae){return(0,d.m)(null==ae?void 0:ae.lift)}function N(ae){return ne=>{if(X(ne))return ne.lift(function(me){try{return ae(me,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Xe,Ee,O)=>{O.d(Ee,{h:()=>N});var d=O(2416),X=O(3410);function N(ae){X.z.setTimeout(()=>{const{onUnhandledError:ne}=d.v;if(!ne)throw ae;ne(ae)})}},4532:(Xe,Ee,O)=>{function d(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>d})},655:(Xe,Ee,O)=>{function ae(K,re){var ee={};for(var ye in K)Object.prototype.hasOwnProperty.call(K,ye)&&re.indexOf(ye)<0&&(ee[ye]=K[ye]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(ye=Object.getOwnPropertySymbols(K);oe<ye.length;oe++)re.indexOf(ye[oe])<0&&Object.prototype.propertyIsEnumerable.call(K,ye[oe])&&(ee[ye[oe]]=K[ye[oe]])}return ee}function se(K,re,ee,ye){return new(ee||(ee=Promise))(function(Ne,ht){function qt(rn){try{We(ye.next(rn))}catch(xn){ht(xn)}}function Ut(rn){try{We(ye.throw(rn))}catch(xn){ht(xn)}}function We(rn){rn.done?Ne(rn.value):function oe(Ne){return Ne instanceof ee?Ne:new ee(function(ht){ht(Ne)})}(rn.value).then(qt,Ut)}We((ye=ye.apply(K,re||[])).next())})}function pe(K){return this instanceof pe?(this.v=K,this):new pe(K)}function Ce(K,re,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ye=ee.apply(K,re||[]),Ne=[];return oe={},ht("next"),ht("throw"),ht("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function ht(ln){ye[ln]&&(oe[ln]=function(tn){return new Promise(function(Vr,Zt){Ne.push([ln,tn,Vr,Zt])>1||qt(ln,tn)})})}function qt(ln,tn){try{!function Ut(ln){ln.value instanceof pe?Promise.resolve(ln.value.v).then(We,rn):xn(Ne[0][2],ln)}(ye[ln](tn))}catch(Vr){xn(Ne[0][3],Vr)}}function We(ln){qt("next",ln)}function rn(ln){qt("throw",ln)}function xn(ln,tn){ln(tn),Ne.shift(),Ne.length&&qt(Ne[0][0],Ne[0][1])}}function Ke(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,re=K[Symbol.asyncIterator];return re?re.call(K):(K=function te(K){var re="function"==typeof Symbol&&Symbol.iterator,ee=re&&K[re],ye=0;if(ee)return ee.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ye>=K.length&&(K=void 0),{value:K&&K[ye++],done:!K}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ee={},ye("next"),ye("throw"),ye("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ye(Ne){ee[Ne]=K[Ne]&&function(ht){return new Promise(function(qt,Ut){!function oe(Ne,ht,qt,Ut){Promise.resolve(Ut).then(function(We){Ne({value:We,done:qt})},ht)}(qt,Ut,(ht=K[Ne](ht)).done,ht.value)})}}}O.d(Ee,{FC:()=>Ce,KL:()=>Ke,_T:()=>ae,mG:()=>se,qq:()=>pe})},5e3:(Xe,Ee,O)=>{O.d(Ee,{$8M:()=>Jo,$Z:()=>au,AFp:()=>Hb,AaK:()=>se,AsE:()=>op,CHM:()=>ao,CRH:()=>Mb,CZH:()=>gu,CqO:()=>tp,EJc:()=>gD,EpF:()=>mE,F4k:()=>yE,FYo:()=>Yv,FiY:()=>sn,G48:()=>A0,Gf:()=>Sb,GfV:()=>Wh,Gpc:()=>j,JOm:()=>P,LFG:()=>nt,LSH:()=>Gd,Lbi:()=>dy,NdJ:()=>cm,OlP:()=>An,Oqu:()=>kh,PXZ:()=>Yr,Q6J:()=>sl,QGY:()=>W_,Qsj:()=>Zm,R0b:()=>ns,RDi:()=>Tl,Rgc:()=>Bc,SBq:()=>Lc,Sil:()=>yD,Suo:()=>u0,TTD:()=>ji,TgZ:()=>am,VLi:()=>nM,X6Q:()=>py,XFs:()=>yt,Xpm:()=>pt,Y36:()=>xh,YKP:()=>UT,YNc:()=>Xg,Yjl:()=>Ta,Yz7:()=>tn,ZZ4:()=>R0,_Bn:()=>lb,_UZ:()=>um,_Vd:()=>Wm,_c5:()=>GD,_uU:()=>uv,aQg:()=>P0,c2e:()=>fD,cJS:()=>Zt,cg1:()=>Tm,dDg:()=>bD,deG:()=>gf,dqk:()=>Bt,eFA:()=>Sp,ekj:()=>br,g9A:()=>Dp,h0i:()=>mp,hGG:()=>qD,hij:()=>al,iGM:()=>Ab,ifc:()=>zt,ip1:()=>cy,kL8:()=>Dm,lG2:()=>_u,n5z:()=>js,oAB:()=>Br,oxw:()=>K_,q4F:()=>fb,qLn:()=>Zu,qOj:()=>k_,qZA:()=>uu,s9C:()=>np,sBO:()=>MD,sIi:()=>Wf,s_b:()=>wp,soG:()=>hy,tBr:()=>an,tb:()=>Kr,tp0:()=>Ws,uIk:()=>L_,vHH:()=>Oe,vpe:()=>bi,wAp:()=>dt,xp6:()=>Kt,z2F:()=>D0,zSh:()=>D_,zs3:()=>fa});var d=O(7579),X=O(727),N=O(8306),ae=O(6451),ne=O(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=me({__forward_ref__:me});function j(s){return s.__forward_ref__=j,s.toString=function(){return se(this())},s}function te(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===j}class Oe extends Error{constructor(o,a){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function we(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ce(s)} found${a}`)}function Ut(s,o){null==s&&function We(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Lt(s){return os(s,ki)||os(s,li)}function os(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ur(s){return s&&(s.hasOwnProperty(Ss)||s.hasOwnProperty(Ii))?s[Ss]:null}const ki=me({\u0275prov:me}),Ss=me({\u0275inj:me}),li=me({ngInjectableDef:me}),Ii=me({ngInjectorDef:me});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let ci;function Rn(s){const o=ci;return ci=s,o}function Xs(s,o,a){const l=Lt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&yt.Optional?null:void 0!==o?o:void we(se(s),"Injector")}function sr(s){return{toString:s}.toString()}var Bn=(()=>((Bn=Bn||{})[Bn.OnPush=0]="OnPush",Bn[Bn.Default=1]="Default",Bn))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const at="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,Tr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bt=at||"undefined"!=typeof global&&global||Et||Tr,Ar={},V=[],q=me({\u0275cmp:me}),W=me({\u0275dir:me}),Ie=me({\u0275pipe:me}),G=me({\u0275mod:me}),J=me({\u0275fac:me}),xe=me({__NG_ELEMENT_ID__:me});let Je=0;function pt(s){return sr(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||V,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||V,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,g=s.features,v=s.pipes;return l.id+=Je++,l.inputs=Ia(s.inputs,a),l.outputs=Ia(s.outputs),g&&g.forEach(E=>E(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(mn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(Ct):null,l})}function mn(s){return Jn(s)||function jr(s){return s[W]||null}(s)}function Ct(s){return function as(s){return s[Ie]||null}(s)}const Qn={};function Br(s){return sr(()=>{const o={type:s.type,bootstrap:s.bootstrap||V,declarations:s.declarations||V,imports:s.imports||V,exports:s.exports||V,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Qn[s.id]=s.type),o})}function Ia(s,o){if(null==s)return Ar;const a={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=l,o&&(o[h]=g)}return a}const _u=pt;function Ta(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Jn(s){return s[q]||null}function Xn(s,o){const a=s[G]||null;if(!a&&!0===o)throw new Error(`Type ${se(s)} does not have '\u0275mod' property.`);return a}function ei(s){return Array.isArray(s)&&"object"==typeof s[1]}function Vi(s){return Array.isArray(s)&&!0===s[1]}function Eu(s){return 0!=(8&s.flags)}function nd(s){return 2==(2&s.flags)}function Ui(s){return 1==(1&s.flags)}function Bi(s){return null!==s.template}function El(s){return 0!=(512&s[2])}function Mr(s,o){return s.hasOwnProperty(J)?s[J]:null}class ro{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ji(){return $o}function $o(s){return s.type.prototype.ngOnChanges&&(s.setInput=df),cd}function cd(){const s=io(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===Ar)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function df(s,o,a,l){const h=io(s)||function Ho(s,o){return s[dd]=o}(s,{previous:Ar,current:null}),g=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[a],C=v[E];g[E]=new ro(C&&C.currentValue,o,v===Ar),s[l]=o}ji.ngInherit=!0;const dd="__ngSimpleChanges__";function io(s){return s[dd]||null}let qo;function Tl(s){qo=s}function dn(s){return!!s.listen}const xa={createRenderer:(s,o)=>function $i(){return void 0!==qo?qo:"undefined"!=typeof document?document:void 0}()};function nn(s){for(;Array.isArray(s);)s=s[0];return s}function ks(s,o){return nn(o[s])}function hr(s,o){return nn(o[s.index])}function bn(s,o){return s.data[o]}function fr(s,o){const a=o[s];return ei(a)?a:a[0]}function oo(s){return 4==(4&s[2])}function ls(s){return 128==(128&s[2])}function Ai(s,o){return null==o?null:s[o]}function Gi(s){s[18]=0}function zo(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const _t={lFrame:Ko(null),bindingsEnabled:!0};function Tu(){return _t.bindingsEnabled}function Ae(){return _t.lFrame.lView}function Vt(){return _t.lFrame.tView}function ao(s){return _t.lFrame.contextLView=s,s[8]}function _n(){let s=Du();for(;null!==s&&64===s.type;)s=s.parent;return s}function Du(){return _t.lFrame.currentTNode}function pi(s,o){const a=_t.lFrame;a.currentTNode=s,a.isParent=o}function xl(){return _t.lFrame.isParent}function Ls(){return _t.lFrame.bindingIndex++}function Si(s){const o=_t.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Mu(s,o){const a=_t.lFrame;a.bindingIndex=a.bindingRootIndex=s,Zo(o)}function Zo(s){_t.lFrame.currentDirectiveIndex=s}function Ru(){return _t.lFrame.currentQueryIndex}function gd(s){_t.lFrame.currentQueryIndex=s}function md(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Pu(s,o,a){if(a&yt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||a&yt.Host||(h=md(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const l=_t.lFrame=yd();return l.currentTNode=o,l.lView=s,!0}function lo(s){const o=yd(),a=s[1];_t.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function yd(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?Ko(s):o}function Ko(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function _d(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ou=_d;function ti(){const s=_d();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function or(){return _t.lFrame.selectedIndex}function co(s){_t.lFrame.selectedIndex=s}function $n(){const s=_t.lFrame;return bn(s.tView,s.selectedIndex)}function Na(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function ds(s,o,a){wd(s,o,3,a)}function ho(s,o,a,l){(3&s[2])===a&&wd(s,o,a,l)}function tr(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function wd(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let E=0;for(let C=void 0!==l?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=l&&E>=l)break}else o[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(tg(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function tg(s,o,a,l){const h=a[l]<0,g=a[l+1],E=s[h?-a[l]:a[l]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Yo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Vs(s,o,a){const l=dn(s);let h=0;for(;h<a.length;){const g=a[h];if("number"==typeof g){if(0!==g)break;h++;const v=a[h++],E=a[h++],C=a[h++];l?s.setAttribute(o,E,C,v):o.setAttributeNS(v,E,C)}else{const v=g,E=a[++h];jt(v)?l&&s.setProperty(o,v,E):l?s.setAttribute(o,v,E):o.setAttribute(v,E),h++}}return h}function qi(s){return 3===s||4===s||6===s}function jt(s){return 64===s.charCodeAt(0)}function zi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||vt(s,a,h,null,-1===a||2===a?o[++l]:null)}}return s}function vt(s,o,a,l,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==h&&(s[g+1]=h));if(l===s[g+1])return void(s[g+2]=h)}g++,null!==l&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==h&&s.splice(g++,0,h)}function hn(s){return-1!==s}function Mi(s){return 32767&s}function Wi(s,o){let a=function Hn(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Gn=!0;function fs(s){const o=Gn;return Gn=s,o}let Ed=0;function mi(s,o){const a=mo(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Qo(l.data,s),Qo(o,null),Qo(l.blueprint,null));const h=vn(s,o),g=s.injectorIndex;if(hn(h)){const v=Mi(h),E=Wi(h,o),C=E[1].data;for(let A=0;A<8;A++)o[g+A]=E[v+A]|C[v+A]}return o[g+8]=h,g}function Qo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function mo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function vn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){const g=h[1],v=g.type;if(l=2===v?g.declTNode:1===v?h[6]:null,null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Nn(s,o,a){!function go(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(xe)&&(l=a[xe]),null==l&&(l=a[xe]=Ed++);const h=255&l;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function yo(s,o,a){if(a&yt.Optional)return s;we(o,"NodeInjector")}function Rr(s,o,a,l){if(a&yt.Optional&&void 0===l&&(l=null),0==(a&(yt.Self|yt.Host))){const h=s[9],g=Rn(void 0);try{return h?h.get(o,l,a&yt.Optional):Xs(o,l,a&yt.Optional)}finally{Rn(g)}}return yo(l,o,a)}function Us(s,o,a,l=yt.Default,h){if(null!==s){const g=function Bs(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(xe)?s[xe]:void 0;return"number"==typeof o?o>=0?255&o:gt:o}(a);if("function"==typeof g){if(!Pu(o,s,l))return l&yt.Host?yo(h,a,l):Rr(o,a,l,h);try{const v=g(l);if(null!=v||l&yt.Optional)return v;we(a)}finally{Ou()}}else if("number"==typeof g){let v=null,E=mo(s,o),C=-1,A=l&yt.Host?o[16][6]:null;for((-1===E||l&yt.SkipSelf)&&(C=-1===E?vn(s,o):o[E+8],-1!==C&&ka(l,!1)?(v=o[1],E=Mi(C),o=Wi(C,o)):E=-1);-1!==E;){const x=o[1];if(bt(g,E,x.data)){const k=ig(E,o,a,v,l,A);if(k!==Pr)return k}C=o[E+8],-1!==C&&ka(l,o[1].data[E+8]===A)&&bt(g,E,o)?(v=x,E=Mi(C),o=Wi(C,o)):E=-1}}}return Rr(o,a,l,h)}const Pr={};function gt(){return new Zi(_n(),Ae())}function ig(s,o,a,l,h,g){const v=o[1],E=v.data[s+8],x=yi(E,v,a,null==l?nd(E)&&Gn:l!=v&&0!=(3&E.type),h&yt.Host&&g===E);return null!==x?Ye(o,v,x,E):Pr}function yi(s,o,a,l,h){const g=s.providerIndexes,v=o.data,E=1048575&g,C=s.directiveStart,x=g>>20,U=h?E+x:s.directiveEnd;for(let Q=l?E:E+x;Q<U;Q++){const ve=v[Q];if(Q<C&&a===ve||Q>=C&&ve.type===a)return Q}if(h){const Q=v[C];if(Q&&Bi(Q)&&Q.type===a)return C}return null}function Ye(s,o,a,l){let h=s[a];const g=o.data;if(function Nu(s){return s instanceof Yo}(h)){const v=h;v.resolving&&function Ge(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ce(g[a]));const E=fs(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Rn(v.injectImpl):null;Pu(s,l,yt.Default);try{h=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function By(s,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(l){const v=$o(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==C&&Rn(C),fs(E),v.resolving=!1,Ou()}}return h}function bt(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function ka(s,o){return!(s&yt.Self||s&yt.Host&&o)}class Zi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Us(this._tNode,this._lView,o,l,a)}}function js(s){return sr(()=>{const o=s.prototype.constructor,a=o[J]||Fa(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const g=h[J]||Fa(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Fa(s){return He(s)?()=>{const o=Fa(te(s));return o&&o()}:Mr(s)}function Jo(s){return function Fl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const g=a[h];if(qi(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(_n(),s)}const Xo="__parameters__";function In(s,o,a){return sr(()=>{const l=function ea(s){return function(...a){if(s){const l=s(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...g){if(this instanceof h)return l.apply(this,g),this;const v=new h(...g);return E.annotation=v,E;function E(C,A,x){const k=C.hasOwnProperty(Xo)?C[Xo]:Object.defineProperty(C,Xo,{value:[]})[Xo];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class An{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=tn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gf=new An("AnalyzeForEntryComponents");function gr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),gr(l,o)):o!==s&&o.push(l)}return o}function Gr(s,o){s.forEach(a=>Array.isArray(a)?Gr(a,o):o(a))}function na(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ra(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ar(s,o,a){let l=Hs(s,o);return l>=0?s[1|l]=a:(l=~l,function _o(s,o,a,l){let h=s.length;if(h==o)s.push(a,l);else if(1===h)s.push(l,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Va(s,o){const a=Hs(s,o);if(a>=0)return s[1|a]}function Hs(s,o){return function ys(s,o,a){let l=0,h=s.length>>a;for(;h!==l;){const g=l+(h-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?h=g:l=g+1}return~(h<<a)}(s,o,1)}const vo={},ja="__NG_DI_FLAG__",Gs="ngTempTokenPath",T=/\n/gm,L="__source",Y=me({provide:String,useValue:me});let ie;function Pe(s){const o=ie;return ie=s,o}function et(s,o=yt.Default){if(void 0===ie)throw new Oe(203,"");return null===ie?Xs(s,void 0,o):ie.get(s,o&yt.Optional?null:void 0,o)}function nt(s,o=yt.Default){return(function Dn(){return ci}()||et)(te(s),o)}const $t=nt;function St(s){const o=[];for(let a=0;a<s.length;a++){const l=te(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let h,g=yt.Default;for(let v=0;v<l.length;v++){const E=l[v],C=zn(E);"number"==typeof C?-1===C?h=E.token:g|=C:h=E}o.push(nt(h,g))}else o.push(nt(l))}return o}function nr(s,o){return s[ja]=o,s.prototype[ja]=o,s}function zn(s){return s[ja]}const an=nr(In("Inject",s=>({token:s})),-1),sn=nr(In("Optional"),8),Ws=nr(In("SkipSelf"),4);class Wl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function vi(s){return s instanceof Wl?s.changingThisBreaksApplicationSecurity:s}const gg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Nt=(()=>((Nt=Nt||{})[Nt.NONE=0]="NONE",Nt[Nt.HTML=1]="HTML",Nt[Nt.STYLE=2]="STYLE",Nt[Nt.SCRIPT=3]="SCRIPT",Nt[Nt.URL=4]="URL",Nt[Nt.RESOURCE_URL=5]="RESOURCE_URL",Nt))();function Gd(s){const o=function bo(){const s=Ae();return s&&s[12]}();return o?o.sanitize(Nt.URL,s)||"":function sa(s,o){const a=function kd(s){return s instanceof Wl&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?vi(s):function Ga(s){return(s=String(s)).match(gg)||s.match(wo)?s:"unsafe:"+s}(pe(s))}const rc="__ngContext__";function Sn(s,o){s[rc]=o}function Df(s){const o=function zu(s){return s[rc]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function za(s){return s.ngOriginalError}function Yd(s,...o){s.error(...o)}class Zu{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function oc(s){return s&&s.ngErrorLogger||Yd}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&za(o);for(;a&&za(a);)a=za(a);return a||null}}const Qd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bt))();function y(s){return s instanceof Function?s():s}var P=(()=>((P=P||{})[P.Important=1]="Important",P[P.DashCase=2]="DashCase",P))();function de(s,o){return undefined(s,o)}function ut(s){const o=s[3];return Vi(o)?o[3]:o}function Or(s){return Xd(s[13])}function Ka(s){return Xd(s[4])}function Xd(s){for(;null!==s&&!Vi(s);)s=s[4];return s}function Co(s,o,a,l,h){if(null!=l){let g,v=!1;Vi(l)?g=l:ei(l)&&(v=!0,l=l[0]);const E=nn(l);0===s&&null!==a?null==h?Xy(o,a,E):cc(o,a,E,h||null,!0):1===s&&null!==a?cc(o,a,E,h||null,!0):2===s?function st(s,o,a){const l=Mg(s,o);l&&function Sg(s,o,a,l){dn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function Re(s,o,a,l,h){const g=a[7];g!==nn(a)&&Co(o,s,l,g,h);for(let E=10;E<a.length;E++){const C=a[E];kf(C[1],C,s,o,l,g)}}(o,s,g,a,h)}}function lc(s,o,a){if(dn(s))return s.createElement(o,a);{const l=null!==a?function Il(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function Qi(s,o){const a=s[9],l=a.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,zo(h,-1)),a.splice(l,1)}function Dg(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const h=l[17];null!==h&&h!==s&&Qi(h,l),o>0&&(s[a-1][4]=l[4]);const g=ra(s,10+o);!function Io(s,o){kf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Jy(s,o){if(!(256&o[2])){const a=o[11];dn(a)&&a.destroyNode&&kf(s,o,a,3,null,null),function th(s){let o=s[13];if(!o)return Ku(s[1],s);for(;o;){let a=null;if(ei(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)ei(o)&&Ku(o[1],o),o=o[3];null===o&&(o=s),ei(o)&&Ku(o[1],o),a=o&&o[4]}o=a}}(o)}}function Ku(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function DI(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof Yo)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=h[g[v]],C=g[v+1];try{C.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function TI(s,o){const a=s.cleanup,l=o[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],E="function"==typeof v?v(o):nn(o[v]),C=l[h=a[g+2]],A=a[g+3];"boolean"==typeof A?E.removeEventListener(a[g],C,A):A>=0?l[h=A]():l[h=-A].unsubscribe(),g+=2}else{const v=l[h=a[g+1]];a[g].call(v)}if(null!==l){for(let g=h+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&dn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Vi(o[3])){a!==o[3]&&Qi(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function Ag(s,o,a){return function pw(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=s.data[l.directiveStart].encapsulation;if(h===zt.None||h===zt.Emulated)return null}return hr(l,a)}(s,o.parent,a)}function cc(s,o,a,l,h){dn(s)?s.insertBefore(o,a,l,h):o.insertBefore(a,l,h)}function Xy(s,o,a){dn(s)?s.appendChild(o,a):o.appendChild(a)}function gw(s,o,a,l,h){null!==l?cc(s,o,a,l,h):Xy(s,o,a)}function Mg(s,o){return dn(s)?s.parentNode(o):o.parentNode}let Qa=function dc(s,o,a){return 40&s.type?hr(s,a):null};function ke(s,o,a,l){const h=Ag(s,l,o),g=o[11],E=function qr(s,o,a){return Qa(s,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)gw(g,h,a[C],E,!1);else gw(g,h,a,E,!1)}function Zn(s,o){if(null!==o){const a=o.type;if(3&a)return hr(o,s);if(4&a)return Nf(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Zn(s,l);{const h=s[o.index];return Vi(h)?Nf(-1,h):nn(h)}}if(32&a)return de(o,s)()||nn(s[o.index]);{const l=nh(s,o);return null!==l?Array.isArray(l)?l[0]:Zn(ut(s[16]),l):Zn(s,o.next)}}return null}function nh(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Nf(s,o){const a=10+s+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Zn(l,h)}return o[7]}function Mt(s,o,a,l,h,g,v){for(;null!=a;){const E=l[a.index],C=a.type;if(v&&0===o&&(E&&Sn(nn(E),l),a.flags|=4),64!=(64&a.flags))if(8&C)Mt(s,o,a.child,l,h,g,!1),Co(o,s,h,E,g);else if(32&C){const A=de(a,l);let x;for(;x=A();)Co(o,s,h,x,g);Co(o,s,h,E,g)}else 16&C?he(s,o,l,a,h,g):Co(o,s,h,E,g);a=v?a.projectionNext:a.next}}function kf(s,o,a,l,h,g){Mt(a,l,s.firstChild,o,h,g,!1)}function he(s,o,a,l,h,g){const v=a[16],C=v[6].projection[l.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Co(o,s,h,C[A],g);else Mt(s,o,C,v[3],h,g,!0)}function e_(s,o,a){dn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function t_(s,o,a){dn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function _w(s,o,a){let l=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===l||s.charCodeAt(h+g)<=32)return h}a=h+1}}const vw="ng-template";function AI(s,o,a){let l=0;for(;l<s.length;){let h=s[l++];if(a&&"class"===h){if(h=s[l],-1!==_w(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<s.length&&"string"==typeof(h=s[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function n_(s){return 4===s.type&&s.value!==vw}function SI(s,o,a){return o===(4!==s.type||a?s.value:vw)}function SS(s,o,a){let l=4;const h=s.attrs||[],g=function rh(s){for(let o=0;o<s.length;o++)if(qi(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!v)if(4&l){if(l=2|1&l,""!==C&&!SI(s,C,a)||""===C&&1===o.length){if(Kn(l))return!1;v=!0}}else{const A=8&l?C:o[++E];if(8&l&&null!==s.attrs){if(!AI(s.attrs,A,a)){if(Kn(l))return!1;v=!0}continue}const k=MI(8&l?"class":C,h,n_(s),a);if(-1===k){if(Kn(l))return!1;v=!0;continue}if(""!==A){let U;U=k>g?"":h[k+1].toLowerCase();const Q=8&l?U:null;if(Q&&-1!==_w(Q,A,0)||2&l&&A!==U){if(Kn(l))return!1;v=!0}}}}else{if(!v&&!Kn(l)&&!Kn(C))return!1;if(v&&Kn(C))continue;v=!1,l=C|1&l}}return Kn(l)||v}function Kn(s){return 0==(1&s)}function MI(s,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function ww(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function r_(s,o,a=!1){for(let l=0;l<o.length;l++)if(SS(s,o[l],a))return!0;return!1}function It(s,o){return s?":not("+o.trim()+")":o}function Ew(s){let o=s[0],a=1,l=2,h="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const E=s[++a];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?h+="."+v:4&l&&(h+=" "+v);else""!==h&&!Kn(v)&&(o+=It(g,h),h=""),l=v,g=g||!Kn(l);a++}return""!==h&&(o+=It(g,h)),o}const xt={};function Kt(s){Cw(Vt(),Ae(),or()+s,!1)}function Cw(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ds(o,g,a)}else{const g=s.preOrderHooks;null!==g&&ho(o,g,0,a)}co(a)}function Ja(s,o){return s<<17|o<<2}function To(s){return s>>17&32767}function ua(s){return 2|s}function fn(s){return(131068&s)>>2}function Xa(s,o){return-131069&s|o<<2}function Rg(s){return 1|s}function c_(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];gd(h),v.contentQueries(2,o[g],g)}}}function ah(s,o,a,l,h,g,v,E,C,A){const x=o.blueprint.slice();return x[0]=h,x[2]=140|l,Gi(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=E||s&&s[11],x[12]=C||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function Zs(s,o,a,l,h){let g=s.data[o];if(null===g)g=function d_(s,o,a,l,h){const g=Du(),v=xl(),C=s.data[o]=function uh(s,o,a,l,h,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,a,l,h),function Ol(){return _t.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=h;const v=function uo(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return pi(g,!0),g}function da(s,o,a,l){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function el(s,o,a){lo(o);try{const l=s.viewQuery;null!==l&&Hg(1,l,a);const h=s.template;null!==h&&h_(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&c_(s,o),s.staticViewQueries&&Hg(2,s.viewQuery,a);const g=s.components;null!==g&&function kI(s,o){for(let a=0;a<o.length;a++)jw(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,ti()}}function tu(s,o,a,l){const h=o[2];if(256!=(256&h)){lo(o);try{Gi(o),function Au(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&h_(s,o,a,2,l);const v=3==(3&h);if(v){const A=s.preOrderCheckHooks;null!==A&&ds(o,A,null)}else{const A=s.preOrderHooks;null!==A&&ho(o,A,0,null),tr(o,0)}if(function Bw(s){for(let o=Or(s);null!==o;o=Ka(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],g=h[3];0==(1024&h[2])&&zo(g,1),h[2]|=1024}}}(o),function mc(s){for(let o=Or(s);null!==o;o=Ka(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];ls(l)&&tu(h,l,h.template,l[8])}}(o),null!==s.contentQueries&&c_(s,o),v){const A=s.contentCheckHooks;null!==A&&ds(o,A)}else{const A=s.contentHooks;null!==A&&ho(o,A,1),tr(o,1)}!function Tn(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)co(~h);else{const g=h,v=a[++l],E=a[++l];Mu(v,g),E(2,o[g])}}}finally{co(-1)}}(s,o);const E=s.components;null!==E&&function oh(s,o){for(let a=0;a<o.length;a++)fh(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&Hg(2,C,l),v){const A=s.viewCheckHooks;null!==A&&ds(o,A)}else{const A=s.viewHooks;null!==A&&ho(o,A,2),tr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,zo(o[3],-1))}finally{ti()}}}function Dw(s,o,a,l){const h=o[10],v=oo(o);try{!v&&h.begin&&h.begin(),v&&el(s,o,l),tu(s,o,a,l)}finally{!v&&h.end&&h.end()}}function h_(s,o,a,l,h){const g=or(),v=2&l;try{co(-1),v&&o.length>20&&Cw(s,o,20,!1),a(l,h)}finally{co(g)}}function f_(s,o,a){!Tu()||(function Fw(s,o,a,l){const h=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||mi(a,o),Sn(l,o);const v=a.initialInputs;for(let E=h;E<g;E++){const C=s.data[E],A=Bi(C);A&&Bg(o,a,C);const x=Ye(o,s,E,a);Sn(x,o),null!==v&&Uw(0,E-h,x,C,0,v),A&&(fr(a.index,o)[8]=x)}}(s,o,a,hr(a,o)),128==(128&a.flags)&&function m_(s,o,a){const l=a.directiveStart,h=a.directiveEnd,v=a.index,E=function Nl(){return _t.lFrame.currentDirectiveIndex}();try{co(v);for(let C=l;C<h;C++){const A=s.data[C],x=o[C];Zo(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Ug(A,x)}}finally{co(-1),Zo(E)}}(s,o,a))}function p_(s,o,a=hr){const l=o.localNames;if(null!==l){let h=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],E=-1===v?a(o,s):s[v];s[h++]=E}}}function Aw(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Bf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Bf(s,o,a,l,h,g,v,E,C,A){const x=20+l,k=x+h,U=function FI(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:xt);return a}(x,k),Q="function"==typeof A?A():A;return U[1]={type:s,blueprint:U,template:a,queries:null,viewQuery:E,declTNode:o,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function nu(s,o,a,l){const h=tl(o);null===a?h.push(l):(h.push(a),s.firstCreatePass&&C_(s).push(l,h.length-1))}function xw(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const h=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function lr(s,o,a,l,h,g,v,E){const C=hr(o,a);let x,A=o.inputs;!E&&null!=A&&(x=A[l])?(mh(s,a,x,l,h),nd(o)&&function Ow(s,o){const a=fr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function Pw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=v?v(h,o.value||"",l):h,dn(g)?g.setProperty(C,l,h):jt(l)||(C.setProperty?C.setProperty(l,h):C[l]=h))}function Ji(s,o,a,l){let h=!1;if(Tu()){const g=function Lw(s,o,a){const l=s.directiveRegistry;let h=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];r_(a,v.selectors,!1)&&(h||(h=[]),Nn(mi(a,o),s,v.type),Bi(v)?(y_(s,a),h.unshift(v)):h.push(v))}return h}(s,o,a),v=null===l?null:{"":-1};if(null!==g){h=!0,__(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const k=g[x];k.providersResolver&&k.providersResolver(k)}let E=!1,C=!1,A=da(s,o,g.length,null);for(let x=0;x<g.length;x++){const k=g[x];a.mergedAttrs=zi(a.mergedAttrs,k.hostAttrs),v_(s,a,o,A,k),Vw(A,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!E&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!C&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),A++}!function Rw(s,o){const l=o.directiveEnd,h=s.data,g=o.attrs,v=[];let E=null,C=null;for(let A=o.directiveStart;A<l;A++){const x=h[A],k=x.inputs,U=null===g||n_(o)?null:dh(k,g);v.push(U),E=xw(k,A,E),C=xw(x.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=C}(s,a)}v&&function LI(s,o,a){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new Oe(-301,!1);l.push(o[h],g)}}}(a,l,v)}return a.mergedAttrs=zi(a.mergedAttrs,a.attrs),h}function g_(s,o,a,l,h,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function jf(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(l,h,v)}}function Ug(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function y_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Vw(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Bi(o)&&(a[""]=s)}}function __(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function v_(s,o,a,l,h){s.data[l]=h;const g=h.factory||(h.factory=Mr(h.type)),v=new Yo(g,Bi(h),null);s.blueprint[l]=v,a[l]=v,g_(s,o,0,l,da(s,a,h.hostVars,xt),h)}function Bg(s,o,a){const l=hr(o,s),h=Aw(a),g=s[10],v=$g(s,ah(s,h,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function ha(s,o,a,l,h,g){const v=hr(s,o);!function w_(s,o,a,l,h,g,v){if(null==g)dn(s)?s.removeAttribute(o,h,a):o.removeAttribute(h);else{const E=null==v?pe(g):v(g,l||"",h);dn(s)?s.setAttribute(o,h,E,a):a?o.setAttributeNS(a,h,E):o.setAttribute(h,E)}}(o[11],v,g,s.value,a,l,h)}function Uw(s,o,a,l,h,g){const v=g[o];if(null!==v){const E=l.setInput;for(let C=0;C<v.length;){const A=v[C++],x=v[C++],k=v[C++];null!==E?l.setInput(a,k,A,x):a[x]=k}}}function dh(s,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function E_(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function fh(s,o){const a=fr(o,s);if(ls(a)){const l=a[1];80&a[2]?tu(l,a,l.template,a[8]):a[5]>0&&jg(a)}}function jg(s){for(let l=Or(s);null!==l;l=Ka(l))for(let h=10;h<l.length;h++){const g=l[h];if(1024&g[2]){const v=g[1];tu(v,g,v.template,g[8])}else g[5]>0&&jg(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=fr(a[l],s);ls(h)&&h[5]>0&&jg(h)}}function jw(s,o){const a=fr(o,s),l=a[1];(function $f(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),el(l,a,a[8])}function $g(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function b_(s){for(;s;){s[2]|=64;const o=ut(s);if(El(s)&&!o)return s;s=o}return null}function $w(s){!function ph(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=Df(a),h=l[1];Dw(h,l,h.template,a)}}(s[8])}function Hg(s,o,a){gd(0),o(s,a)}const Hf=(()=>Promise.resolve(null))();function tl(s){return s[7]||(s[7]=[])}function C_(s){return s.cleanup||(s.cleanup=[])}function T_(s,o){const a=s[9],l=a?a.get(Zu,null):null;l&&l.handleError(o)}function mh(s,o,a,l,h){for(let g=0;g<a.length;){const v=a[g++],E=a[g++],C=o[v],A=s.data[v];null!==A.setInput?A.setInput(C,h,l,E):C[E]=h}}function So(s,o,a){const l=ks(o,s);!function Ya(s,o,a){dn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Gg(s,o,a){let l=a?s.styles:null,h=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?h=fe(h,E):2==g&&(l=fe(l,E+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=h:s.classesWithoutHost=h}const qg=new An("INJECTOR",-1);class ru{get(o,a=vo){if(a===vo){const l=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw l.name="NullInjectorError",l}return a}}const D_=new An("Set Injector scope."),wi={},BI={};let Gf;function yh(){return void 0===Gf&&(Gf=new ru),Gf}function Gw(s,o=null,a=null,l){const h=qw(s,o,a,l);return h._resolveInjectorDefTypes(),h}function qw(s,o=null,a=null,l){return new pn(s,a,o||yh(),l)}class pn{constructor(o,a,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&Gr(a,E=>this.processProvider(E,o,a)),Gr([o],E=>this.processInjectorType(E,[],g)),this.records.set(qg,iu(void 0,this));const v=this.records.get(D_);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=vo,l=yt.Default){this.assertNotDestroyed();const h=Pe(this),g=Rn(void 0);try{if(!(l&yt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function $I(s){return"function"==typeof s||"object"==typeof s&&s instanceof An}(o)&&Lt(o);E=C&&this.injectableDefInScope(C)?iu(A_(o),wi):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&yt.Self?yh():this.parent).get(o,a=l&yt.Optional&&a===vo?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Gs]=v[Gs]||[]).unshift(se(o)),h)throw v;return function qs(s,o,a,l){const h=s[Gs];throw o[L]&&h.unshift(o[L]),s.message=function zs(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=se(o);if(Array.isArray(o))h=o.map(se).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):se(E)))}h=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,h,a,l),s.ngTokenPath=h,s[Gs]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Rn(g),Pe(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,h)=>o.push(se(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=te(o)))return!1;let h=Ur(o);const g=null==h&&o.ngModule||void 0,v=void 0===g?o:g,E=-1!==l.indexOf(v);if(void 0!==g&&(h=Ur(g)),null==h)return!1;if(null!=h.imports&&!E){let x;l.push(v);try{Gr(h.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:U,providers:Q}=x[k];Gr(Q,ve=>this.processProvider(ve,U,Q||V))}}this.injectorDefTypes.add(v);const C=Mr(v)||(()=>new v);this.records.set(v,iu(C,wi));const A=h.providers;if(null!=A&&!E){const x=o;Gr(A,k=>this.processProvider(k,x,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let h=vh(o=te(o))?o:te(o&&o.provide);const g=function qf(s,o,a){return S_(s)?iu(void 0,s.useValue):iu(_h(s),wi)}(o);if(vh(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=iu(void 0,wi,!0),v.factory=()=>St(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,g)}hydrate(o,a){return a.value===wi&&(a.value=BI,a.value=a.factory()),"object"==typeof a.value&&a.value&&function jI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=te(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function A_(s){const o=Lt(s),a=null!==o?o.factory:Mr(s);if(null!==a)return a;if(s instanceof An)throw new Oe(204,!1);if(s instanceof Function)return function zg(s){const o=s.length;if(o>0)throw function ms(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Oe(204,!1);const a=function ui(s){const o=s&&(s[ki]||s[li]);if(o){const a=function Ir(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function _h(s,o,a){let l;if(vh(s)){const h=te(s);return Mr(h)||A_(h)}if(S_(s))l=()=>te(s.useValue);else if(function Ww(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...St(s.deps||[]));else if(function zw(s){return!(!s||!s.useExisting)}(s))l=()=>nt(te(s.useExisting));else{const h=te(s&&(s.useClass||s.provide));if(!function Kw(s){return!!s.deps}(s))return Mr(h)||A_(h);l=()=>new h(...St(s.deps))}return l}function iu(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function S_(s){return null!==s&&"object"==typeof s&&Y in s}function vh(s){return"function"==typeof s}let fa=(()=>{class s{static create(a,l){var h;if(Array.isArray(a))return Gw({name:""},l,a,"");{const g=null!==(h=a.name)&&void 0!==h?h:"";return Gw({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=vo,s.NULL=new ru,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>nt(qg)}),s.__NG_ELEMENT_ID__=-1,s})();function wh(s,o){Na(Df(s)[1],_n())}function k_(s){let o=function rE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let h;if(Bi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");h=o.\u0275dir}if(h){if(a){l.push(h);const v=s;v.inputs=si(s.inputs),v.declaredInputs=si(s.declaredInputs),v.outputs=si(s.outputs);const E=h.hostBindings;E&&ga(s,E);const C=h.viewQuery,A=h.contentQueries;if(C&&qI(s,C),A&&sE(s,A),ue(s.inputs,h.inputs),ue(s.declaredInputs,h.declaredInputs),ue(s.outputs,h.outputs),Bi(h)&&h.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===k_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function iE(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=zi(h.hostAttrs,a=zi(a,h.hostAttrs))}}(l)}function si(s){return s===Ar?{}:s===V?[]:s}function qI(s,o){const a=s.viewQuery;s.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function sE(s,o){const a=s.contentQueries;s.contentQueries=a?(l,h,g)=>{o(l,h,g),a(l,h,g)}:o}function ga(s,o){const a=s.hostBindings;s.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let Yg=null;function Eh(){if(!Yg){const s=Bt.Symbol;if(s&&s.iterator)Yg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Yg=l)}}}return Yg}function Wf(s){return!!F_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Eh()in s)}function F_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ei(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function L_(s,o,a,l){const h=Ae();return Ei(h,Ls(),o)&&(Vt(),ha($n(),h,s,o,a,l)),L_}function Ec(s,o,a,l){return Ei(s,Ls(),a)?o+pe(a)+l:xt}function Ch(s,o,a,l,h,g){const E=function wc(s,o,a,l){const h=Ei(s,o,a);return Ei(s,o+1,l)||h}(s,function gi(){return _t.lFrame.bindingIndex}(),a,h);return Si(2),E?o+pe(a)+l+pe(h)+g:xt}function Xg(s,o,a,l,h,g,v,E){const C=Ae(),A=Vt(),x=s+20,k=A.firstCreatePass?function Zr(s,o,a,l,h,g,v,E,C){const A=o.consts,x=Zs(o,s,4,v||null,Ai(A,E));Ji(o,a,x,Ai(A,C)),Na(o,x);const k=x.tViews=Bf(2,x,l,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),k.queries=o.queries.embeddedTView(x)),x}(x,A,C,o,a,l,h,g,v):A.data[x];pi(k,!1);const U=C[11].createComment("");ke(A,C,U,k),Sn(U,C),$g(C,C[x]=E_(U,C,U,k)),Ui(k)&&f_(A,C,k),null!=v&&p_(C,k,E)}function xh(s,o=yt.Default){const a=Ae();return null===a?nt(s,o):Us(_n(),a,te(s),o)}function au(){throw new Error("invalid")}function sl(s,o,a){const l=Ae();return Ei(l,Ls(),o)&&lr(Vt(),$n(),l,s,o,l[11],a,!1),sl}function om(s,o,a,l,h){const v=h?"class":"style";mh(s,a,o.inputs[v],v,l)}function am(s,o,a,l){const h=Ae(),g=Vt(),v=20+s,E=h[11],C=h[v]=lc(E,o,function eg(){return _t.lFrame.currentNamespace}()),A=g.firstCreatePass?function Sc(s,o,a,l,h,g,v){const E=o.consts,A=Zs(o,s,2,h,Ai(E,g));return Ji(o,a,A,Ai(E,v)),null!==A.attrs&&Gg(A,A.attrs,!1),null!==A.mergedAttrs&&Gg(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,h,0,o,a,l):g.data[v];pi(A,!0);const x=A.mergedAttrs;null!==x&&Vs(E,C,x);const k=A.classes;null!==k&&t_(E,C,k);const U=A.styles;return null!==U&&e_(E,C,U),64!=(64&A.flags)&&ke(g,h,C,A),0===function Oa(){return _t.lFrame.elementDepthCount}()&&Sn(C,h),function Sl(){_t.lFrame.elementDepthCount++}(),Ui(A)&&(f_(g,h,A),function Wr(s,o,a){if(Eu(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,h)),null!==l&&p_(h,A),am}function uu(){let s=_n();xl()?function Rl(){_t.lFrame.isParent=!1}():(s=s.parent,pi(s,!1));const o=s;!function Iu(){_t.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(Na(a,s),Eu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function rg(s){return 0!=(16&s.flags)}(o)&&om(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ge(s){return 0!=(32&s.flags)}(o)&&om(a,o,Ae(),o.stylesWithoutHost,!1),uu}function um(s,o,a,l){return am(s,o,a,l),uu(),um}function mE(){return Ae()}function W_(s){return!!s&&"function"==typeof s.then}function yE(s){return!!s&&"function"==typeof s.subscribe}const tp=yE;function cm(s,o,a,l){const h=Ae(),g=Vt(),v=_n();return function Z_(s,o,a,l,h,g,v,E){const C=Ui(l),x=s.firstCreatePass&&C_(s),k=o[8],U=tl(o);let Q=!0;if(3&l.type||E){const $e=hr(l,o),rt=E?E($e):$e,Me=U.length,mt=E?Gt=>E(nn(Gt[l.index])):l.index;if(dn(a)){let Gt=null;if(!E&&C&&(Gt=function iT(s,o,a,l){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===a&&h[g+1]===l){const E=o[7],C=h[g+2];return E.length>C?E[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=g,Gt.__ngLastListenerFn__=g,Q=!1;else{g=Rc(l,o,k,g,!1);const gn=a.listen(rt,h,g);U.push(g,gn),x&&x.push(h,mt,Me,Me+1)}}else g=Rc(l,o,k,g,!0),rt.addEventListener(h,g,v),U.push(g),x&&x.push(h,mt,Me,v)}else g=Rc(l,o,k,g,!1);const ve=l.outputs;let Fe;if(Q&&null!==ve&&(Fe=ve[h])){const $e=Fe.length;if($e)for(let rt=0;rt<$e;rt+=2){const Js=o[Fe[rt]][Fe[rt+1]].subscribe(g),Zc=U.length;U.push(g,Js),x&&x.push(h,l.index,Zc,-(Zc+1))}}}(g,h,h[11],v,s,o,!!a,l),cm}function ol(s,o,a,l){try{return!1!==a(l)}catch(h){return T_(s,h),!1}}function Rc(s,o,a,l,h){return function g(v){if(v===Function)return l;const E=2&s.flags?fr(s.index,o):o;0==(32&o[2])&&b_(E);let C=ol(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)C=ol(o,0,A,v)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function K_(s=1){return function ff(s){return(_t.lFrame.contextLView=function kl(s,o){for(;s>0;)o=o[15],s--;return o}(s,_t.lFrame.contextLView))[8]}(s)}function np(s,o,a){return rp(s,"",o,"",a),np}function rp(s,o,a,l,h){const g=Ae(),v=Ec(g,o,a,l);return v!==xt&&lr(Vt(),$n(),g,s,v,g[11],h,!1),rp}function X_(s,o,a,l,h){const g=s[a+1],v=null===o;let E=l?To(g):fn(g),C=!1;for(;0!==E&&(!1===C||v);){const x=s[E+1];uT(s[E],o)&&(C=!0,s[E+1]=l?Rg(x):ua(x)),E=l?To(x):fn(x)}C&&(s[a+1]=l?ua(g):Rg(g))}function uT(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Hs(s,o)>=0}function br(s,o){return function Mo(s,o,a,l){const h=Ae(),g=Vt(),v=Si(2);g.firstUpdatePass&&function iv(s,o,a,l){const h=s.data;if(null===h[a+1]){const g=h[or()],v=function mm(s,o){return o>=s.expandoStartIndex}(s,a);(function ME(s,o){return 0!=(s.flags&(o?16:32))})(g,l)&&null===o&&!v&&(o=!1),o=function DE(s,o,a,l){const h=function xu(s){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=Oc(a=Nh(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(a=Nh(h,s,o,a,l),null===g){let C=function sv(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==fn(l))return s[To(l)]}(s,o,l);void 0!==C&&Array.isArray(C)&&(C=Nh(null,s,o,C[1],l),C=Oc(C,o.attrs,l),function ym(s,o,a,l){s[To(a?o.classBindings:o.styleBindings)]=l}(s,o,l,C))}else g=function sp(s,o,a){let l;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)l=Oc(l,s[g].hostAttrs,a);return Oc(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,l),function J_(s,o,a,l,h,g){let v=g?o.classBindings:o.styleBindings,E=To(v),C=fn(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||Hs(k,x)>0)&&(A=!0)}else x=a;if(h)if(0!==C){const U=To(s[E+1]);s[l+1]=Ja(U,E),0!==U&&(s[U+1]=Xa(s[U+1],l)),s[E+1]=function xI(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=Ja(E,0),0!==E&&(s[E+1]=Xa(s[E+1],l)),E=l;else s[l+1]=Ja(C,0),0===E?E=l:s[C+1]=Xa(s[C+1],l),C=l;A&&(s[l+1]=ua(s[l+1])),X_(s,x,l,!0),X_(s,x,l,!1),function aT(s,o,a,l,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Hs(g,o)>=0&&(a[l+1]=Rg(a[l+1]))}(o,x,s,l,g),v=Ja(E,C),g?o.classBindings=v:o.styleBindings=v}(h,g,o,a,v,l)}}(g,s,v,l),o!==xt&&Ei(h,v,o)&&function SE(s,o,a,l,h,g,v,E){if(!(3&o.type))return;const C=s.data,A=C[E+1];vm(function xg(s){return 1==(1&s)}(A)?av(C,o,a,h,fn(A),v):void 0)||(vm(g)||function _r(s){return 2==(2&s)}(A)&&(g=av(C,null,a,h,E,v)),function zr(s,o,a,l,h){const g=dn(s);if(o)h?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:P.DashCase;if(null==h)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),v|=P.Important),g?s.setStyle(a,l,h,v):a.style.setProperty(l,h,E?"important":"")}}}(l,v,ks(or(),a),h,g))}(g,g.data[or()],h,h[11],s,h[v+1]=function hT(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=se(vi(s)))),s}(o,a),l,v)}(s,o,null,!0),br}function Nh(s,o,a,l,h){let g=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(g=o[E],l=Oc(l,g.hostAttrs,h),g!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function Oc(s,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ar(s,v,!!a||o[++g]))}return void 0===s?null:s}function av(s,o,a,l,h,g){const v=null===o;let E;for(;h>0;){const C=s[h],A=Array.isArray(C),x=A?C[1]:C,k=null===x;let U=a[h+1];U===xt&&(U=k?V:void 0);let Q=k?Va(U,l):x===l?U:void 0;if(A&&!vm(Q)&&(Q=Va(C,l)),vm(Q)&&(E=Q,v))return E;const ve=s[h+1];h=v?To(ve):fn(ve)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(E=Va(C,l))}return E}function vm(s){return void 0!==s}function uv(s,o=""){const a=Ae(),l=Vt(),h=s+20,g=l.firstCreatePass?Zs(l,h,1,o,null):l.data[h],v=a[h]=function uc(s,o){return dn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);ke(l,a,v,g),pi(g,!1)}function kh(s){return al("",s,""),kh}function al(s,o,a){const l=Ae(),h=Ec(l,s,o,a);return h!==xt&&So(l,or(),h),al}function op(s,o,a,l,h){const g=Ae(),v=Ch(g,s,o,a,l,h);return v!==xt&&So(g,or(),v),op}const lu=void 0;var Ev=["en",[["a","p"],["AM","PM"],lu],[["AM","PM"],lu,lu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lu,"{1} 'at' {0}",lu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mT(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Vh={};function Tm(s){const o=function bv(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Am(o);if(a)return a;const l=o.split("-")[0];if(a=Am(l),a)return a;if("en"===l)return Ev;throw new Error(`Missing locale data for the locale "${s}".`)}function Dm(s){return Tm(s)[dt.PluralCase]}function Am(s){return s in Vh||(Vh[s]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[s]),Vh[s]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const lp="en-US";let xm=lp;function fp(s,o,a,l,h){if(s=te(s),Array.isArray(s))for(let g=0;g<s.length;g++)fp(s[g],o,a,l,h);else{const g=Vt(),v=Ae();let E=vh(s)?s:te(s.provide),C=_h(s);const A=_n(),x=1048575&A.providerIndexes,k=A.directiveStart,U=A.providerIndexes>>20;if(vh(s)||!s.multi){const Q=new Yo(C,h,xh),ve=zm(E,o,h?x:x+U,k);-1===ve?(Nn(mi(A,v),g,E),Gm(g,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[ve]=Q,v[ve]=Q)}else{const Q=zm(E,o,x+U,k),ve=zm(E,o,x,x+U),Fe=Q>=0&&a[Q],$e=ve>=0&&a[ve];if(h&&!$e||!h&&!Fe){Nn(mi(A,v),g,E);const rt=function PT(s,o,a,l,h){const g=new Yo(s,a,xh);return g.multi=[],g.index=o,g.componentProviders=0,qm(g,h,l&&!a),g}(h?zh:Wv,a.length,h,l,C);!h&&$e&&(a[ve].providerFactory=rt),Gm(g,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(rt),v.push(rt)}else Gm(g,s,Q>-1?Q:ve,qm(a[h?ve:Q],C,!h&&l));!h&&l&&$e&&a[ve].componentProviders++}}}function Gm(s,o,a,l){const h=vh(o),g=function Zw(s){return!!s.useClass}(o);if(h||g){const C=(g?te(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,C]):A[x+1].push(l,C)}else A.push(a,C)}}}function qm(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function zm(s,o,a,l){for(let h=a;h<l;h++)if(o[h]===s)return h;return-1}function Wv(s,o,a,l){return pp(this.multi,[])}function zh(s,o,a,l){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Ye(a,a[1],this.providerFactory.index,l);g=E.slice(0,v),pp(h,g);for(let C=v;C<E.length;C++)g.push(E[C])}else g=[],pp(h,g);return g}function pp(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function lb(s,o=[]){return a=>{a.providersResolver=(l,h)=>function Hm(s,o,a){const l=Vt();if(l.firstCreatePass){const h=Bi(s);fp(a,l.data,l.blueprint,h,!0),fp(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class Zv{}class kT{resolveComponentFactory(o){throw function NT(s){const o=Error(`No component factory found for ${se(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Wm=(()=>{class s{}return s.NULL=new kT,s})();function FT(){return Fc(_n(),Ae())}function Fc(s,o){return new Lc(hr(s,o))}let Lc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=FT,s})();function cb(s){return s instanceof Lc?s.nativeElement:s}class Yv{}let Zm=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function db(){const s=Ae(),a=fr(_n().index,s);return function Yt(s){return s[11]}(ei(a)?a:s)}(),s})(),hb=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class Wh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const fb=new Wh("13.3.11"),En={};function Fr(s,o,a,l,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(nn(g)),Vi(g))for(let E=10;E<g.length;E++){const C=g[E],A=C[1].firstChild;null!==A&&Fr(C[1],C,A,l)}const v=a.type;if(8&v)Fr(s,o,a.child,l);else if(32&v){const E=de(a,o);let C;for(;C=E();)l.push(C)}else if(16&v){const E=nh(o,a);if(Array.isArray(E))l.push(...E);else{const C=ut(o[16]);Fr(C[1],C,E,l,!0)}}a=h?a.projectionNext:a.next}return l}class Xi{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Fr(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Dg(o,l),ra(a,l))}this._attachedToViewContainer=!1}Jy(this._lView[1],this._lView)}onDestroy(o){nu(this._lView[1],this._lView,null,o)}markForCheck(){b_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function gh(s,o,a){const l=o[10];l.begin&&l.begin();try{tu(s,o,s.template,a)}catch(h){throw T_(o,h),h}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cg(s,o){kf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class pb extends Xi{constructor(o){super(o),this._view=o}detectChanges(){$w(this._view)}checkNoChanges(){}get context(){return null}}class gb extends Wm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Jn(o);return new Qv(a,this.ngModule)}}function gp(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Qv extends Zv{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function hc(s){return s.map(Ew).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return gp(this.componentDef.inputs)}get outputs(){return gp(this.componentDef.outputs)}create(o,a,l,h){const g=(h=h||this.ngModule)?function yb(s,o){return{get:(a,l,h)=>{const g=s.get(a,En,h);return g!==En||l===En?g:o.get(a,l,h)}}}(o,h.injector):o,v=g.get(Yv,xa),E=g.get(hb,null),C=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function Mw(s,o,a){if(dn(s))return s.selectRootElement(o,a===zt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(C,l,this.componentDef.encapsulation):lc(v.createRenderer(null,this.componentDef),A,function mb(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),k=this.componentDef.onPush?576:528,U=function vc(s,o){return{components:[],scheduler:s||Qd,clean:Hf,playerHandler:o||null,flags:0}}(),Q=Bf(0,null,null,1,0,null,null,null,null,null),ve=ah(null,Q,U,k,null,null,v,C,E,g);let Fe,$e;lo(ve);try{const rt=function tE(s,o,a,l,h,g){const v=a[1];a[20]=s;const C=Zs(v,20,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Gg(C,A,!0),null!==s&&(Vs(h,s,A),null!==C.classes&&t_(h,s,C.classes),null!==C.styles&&e_(h,s,C.styles)));const x=l.createRenderer(s,o),k=ah(a,Aw(o),null,o.onPush?64:16,a[20],C,l,x,g||null,null);return v.firstCreatePass&&(Nn(mi(C,a),v,o.type),y_(v,C),__(C,a.length,1)),$g(a,k),a[20]=k}(x,this.componentDef,ve,v,C);if(x)if(l)Vs(C,x,["ng-version",fb.full]);else{const{attrs:Me,classes:mt}=function bw(s){const o=[],a=[];let l=1,h=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++l]):8===h&&a.push(g);else{if(!Kn(h))break;h=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Me&&Vs(C,x,Me),mt&&mt.length>0&&t_(C,x,mt.join(" "))}if($e=bn(Q,20),void 0!==a){const Me=$e.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Gt=a[mt];Me.push(null!=Gt?Array.from(Gt):null)}}Fe=function nE(s,o,a,l,h){const g=a[1],v=function ch(s,o,a){const l=_n();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),v_(s,l,o,da(s,o,1,null),a));const h=Ye(o,s,l.directiveStart,l);Sn(h,o);const g=hr(l,o);return g&&Sn(g,o),h}(g,a,o);if(l.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=_n();o.contentQueries(1,v,C.directiveStart)}const E=_n();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(co(E.index),g_(a[1],E,0,E.directiveStart,E.directiveEnd,o),Ug(o,v)),v}(rt,this.componentDef,ve,U,[wh]),el(Q,ve,null)}finally{ti()}return new VT(this.componentType,Fe,Fc($e,ve),ve,$e)}}class VT extends class OT{}{constructor(o,a,l,h,g){super(),this.location=l,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new pb(h),this.componentType=o}get injector(){return new Zi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class mp{}class UT{}const Mn=new Map;class wb extends mp{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new gb(this);const l=Xn(o);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=qw(o,a,[{provide:mp,useValue:this},{provide:Wm,useValue:this.componentFactoryResolver}],se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=fa.THROW_IF_NOT_FOUND,l=yt.Default){return o===fa||o===mp||o===qg?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xv extends UT{constructor(o){super(),this.moduleType=o,null!==Xn(o)&&function jT(s){const o=new Set;!function a(l){const h=Xn(l,!0),g=h.id;null!==g&&(function _b(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${se(o)} vs ${se(o.name)}`)}(g,Mn.get(g),l),Mn.set(g,l));const v=y(h.imports);for(const E of v)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new wb(this.moduleType,o)}}function Qm(s){return o=>{setTimeout(s,void 0,o)}}const bi=class r0 extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var h,g,v;let E=o,C=a||(()=>null),A=l;if(o&&"object"==typeof o){const k=o;E=null===(h=k.next)||void 0===h?void 0:h.bind(k),C=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(C=Qm(C),E&&(E=Qm(E)),A&&(A=Qm(A)));const x=super.subscribe({next:E,error:C,complete:A});return o instanceof X.w0&&o.add(x),x}};function Ib(){return this._results[Eh()]()}class Jm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Eh(),l=Jm.prototype;l[a]||(l[a]=Ib)}get changes(){return this._changes||(this._changes=new bi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=gr(o);(this._changesDetected=!function Id(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],g=o[l];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Bc=(()=>{class s{}return s.__NG_ELEMENT_ID__=Xm,s})();const s0=Bc,KT=class extends s0{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=ah(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),el(a,l,o),new Xi(l)}};function Xm(){return jc(_n(),Ae())}function jc(s,o){return 4&s.type?new KT(o,s,Fc(s,o)):null}let wp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ep,s})();function Ep(){return Zh(_n(),Ae())}const YT=wp,bp=class extends YT{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Fc(this._hostTNode,this._hostLView)}get injector(){return new Zi(this._hostTNode,this._hostLView)}get parentInjector(){const o=vn(this._hostTNode,this._hostLView);if(hn(o)){const a=Wi(o,this._hostLView),l=Mi(o);return new Zi(a[1].data[l+8],a)}return new Zi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=cl(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const h=o.createEmbeddedView(a||{});return this.insert(h,l),h}createComponent(o,a,l,h,g){const v=o&&!function La(s){return"function"==typeof s}(o);let E;if(v)E=a;else{const k=a||{};E=k.index,l=k.injector,h=k.projectableNodes,g=k.ngModuleRef}const C=v?o:new Qv(Jn(o)),A=l||this.parentInjector;if(!g&&null==C.ngModule){const U=(v?A:this.parentInjector).get(mp,null);U&&(g=U)}const x=C.create(A,h,void 0,g);return this.insert(x.hostView,E),x}insert(o,a){const l=o._lView,h=l[1];if(function Pa(s){return Vi(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const k=l[3],U=new bp(k,k[6],k[3]);U.detach(U.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Ig(s,o,a,l){const h=10+l,g=a.length;l>0&&(a[h-1][4]=o),l<g-10?(o[4]=a[h],na(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Tg(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,l,v,g);const E=Nf(g,v),C=l[11],A=Mg(C,v[7]);return null!==A&&function Pf(s,o,a,l,h,g){l[0]=h,l[6]=o,kf(s,l,a,1,h,g)}(h,v[6],C,l,A,E),o.attachToViewContainerRef(),na(Ro(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=cl(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Dg(this._lContainer,a);l&&(ra(Ro(this._lContainer),a),Jy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Dg(this._lContainer,a);return l&&null!=ra(Ro(this._lContainer),a)?new Xi(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function cl(s){return s[8]}function Ro(s){return s[8]||(s[8]=[])}function Zh(s,o){let a;const l=o[s.index];if(Vi(l))a=l;else{let h;if(8&s.type)h=nn(l);else{const g=o[11];h=g.createComment("");const v=hr(s,o);cc(g,Mg(g,v),h,function mw(s,o){return dn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=E_(l,o,h,s),$g(o,a)}return new bp(a,s,o)}class ey{constructor(o){this.queryList=o,this.matches=null}clone(){return new ey(this.queryList)}setDirty(){this.queryList.setDirty()}}class $c{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new $c(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==d0(o,a).matches&&this.queries[a].setDirty()}}class hu{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class o0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,h);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new o0(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class a0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new a0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const g=l[h];this.matchTNodeWithReadOption(o,a,XT(a,g)),this.matchTNodeWithReadOption(o,a,yi(a,o,g,!1,!1))}else l===Bc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,yi(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Lc||h===wp||h===Bc&&4&a.type)this.addMatch(a.index,-2);else{const g=yi(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function XT(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Tb(s,o,a,l){return-1===a?function eD(s,o){return 11&s.type?Fc(s,o):4&s.type?jc(s,o):null}(o,s):-2===a?function tD(s,o,a){return a===Lc?Fc(o,s):a===Bc?jc(o,s):a===wp?Zh(o,s):void 0}(s,o,l):Ye(s,s[1],a,o)}function Db(s,o,a,l){const h=o[19].queries[l];if(null===h.matches){const g=s.data,v=a.matches,E=[];for(let C=0;C<v.length;C+=2){const A=v[C];E.push(A<0?null:Tb(o,g[A],v[C+1],a.metadata.read))}h.matches=E}return h.matches}function ty(s,o,a,l){const h=s.queries.getByIndex(a),g=h.matches;if(null!==g){const v=Db(s,o,h,a);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)l.push(v[E/2]);else{const A=g[E+1],x=o[-C];for(let k=10;k<x.length;k++){const U=x[k];U[17]===U[3]&&ty(U[1],U,A,l)}if(null!==x[9]){const k=x[9];for(let U=0;U<k.length;U++){const Q=k[U];ty(Q[1],Q,A,l)}}}}}return l}function Ab(s){const o=Ae(),a=Vt(),l=Ru();gd(l+1);const h=d0(a,l);if(s.dirty&&oo(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?ty(a,o,l,[]):Db(a,o,h,l);s.reset(g,cb),s.notifyOnChanges()}return!0}return!1}function Sb(s,o,a){const l=Vt();l.firstCreatePass&&(c0(l,new hu(s,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),l0(l,Ae(),o)}function u0(s,o,a,l){const h=Vt();if(h.firstCreatePass){const g=_n();c0(h,new hu(o,a,l),g.index),function xb(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}l0(h,Ae(),a)}function Mb(){return function nD(s,o){return s[19].queries[o].queryList}(Ae(),Ru())}function l0(s,o,a){const l=new Jm(4==(4&a));nu(s,o,l,l.destroy),null===o[19]&&(o[19]=new $c),o[19].queries.push(new ey(l))}function c0(s,o,a){null===s.queries&&(s.queries=new o0),s.queries.track(new a0(o,a))}function d0(s,o){return s.queries.getByIndex(o)}function pu(...s){}const cy=new An("Application Initializer");let gu=(()=>{class s{constructor(a){this.appInits=a,this.resolve=pu,this.reject=pu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(W_(g))a.push(g);else if(tp(g)){const v=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(nt(cy,8))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Hb=new An("AppId",{providedIn:"root",factory:function Gb(){return`${w0()}${w0()}${w0()}`}});function w0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Dp=new An("Platform Initializer"),dy=new An("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kr=new An("appBootstrapListener");let fD=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const hy=new An("LocaleId",{providedIn:"root",factory:()=>$t(hy,yt.Optional|yt.SkipSelf)||function pD(){return"undefined"!=typeof $localize&&$localize.locale||lp}()}),gD=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let yD=(()=>{class s{compileModuleSync(a){return new Xv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=y(Xn(a).declarations).reduce((v,E)=>{const C=Jn(E);return C&&v.push(new Qv(C)),v},[]);return new zb(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Zb=(()=>Promise.resolve(0))();function Ap(s){"undefined"==typeof Zone?Zb.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ns{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bi(!1),this.onMicrotaskEmpty=new bi(!1),this.onStable=new bi(!1),this.onError=new bi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Kb(){let s=Bt.requestAnimationFrame,o=Bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function b0(s){const o=()=>{!function vD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Qb(s),s.isCheckStableRunning=!0,Yb(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Qb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,g,v,E)=>{try{return wD(s),a.invokeTask(h,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Jb(s)}},onInvoke:(a,l,h,g,v,E,C)=>{try{return wD(s),a.invoke(h,g,v,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Jb(s)}},onHasTask:(a,l,h,g)=>{a.hasTask(h,g),l===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Qb(s),Yb(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,h,g)=>(a.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ns.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ns.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,_D,pu,pu);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const _D={};function Yb(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Qb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function wD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Jb(s){s._nesting--,Yb(s)}class ED{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bi,this.onMicrotaskEmpty=new bi,this.onStable=new bi,this.onError=new bi}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}let bD=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ns.assertNotInAngularZone(),Ap(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ap(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(nt(ns))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),eM=(()=>{class s{constructor(){this._applications=new Map,Xb.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Xb.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class tM{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function nM(s){Xb=s}let Xb=new tM,Qh=null;const CD=new An("AllowMultipleToken"),ID=new An("PlatformOnDestroy");class Yr{constructor(o,a){this.name=o,this.token=a}}function Sp(s,o,a=[]){const l=`Platform: ${o}`,h=new An(l);return(g=[])=>{let v=I0();if(!v||v.injector.get(CD,!1)){const E=[...a,...g,{provide:h,useValue:!0}];s?s(E):function Po(s){if(Qh&&!Qh.get(CD,!1))throw new Oe(400,"");Qh=s;const o=s.get(T0),a=s.get(Dp,null);a&&a.forEach(l=>l())}(function DD(s=[],o){return fa.create({name:o,providers:[{provide:D_,useValue:"platform"},{provide:ID,useValue:()=>Qh=null},...s]})}(E,l))}return function C0(s){const o=I0();if(!o)throw new Oe(401,"");return o}()}}function I0(){var s;return null!==(s=null==Qh?void 0:Qh.get(T0))&&void 0!==s?s:null}let T0=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function AD(s,o){let a;return a="noop"===s?new ED:("zone.js"===s?void 0:s)||new ns({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:ns,useValue:E}];return E.run(()=>{const A=fa.create({providers:C,parent:this.injector,name:a.moduleType.name}),x=a.create(A),k=x.injector.get(Zu,null);if(!k)throw new Oe(402,"");return E.runOutsideAngular(()=>{const U=E.onError.subscribe({next:Q=>{k.handleError(Q)}});x.onDestroy(()=>{ai(this._modules,x),U.unsubscribe()})}),function SD(s,o,a){try{const l=a();return W_(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,E,()=>{const U=x.injector.get(gu);return U.runInitializers(),U.donePromise.then(()=>(function Cv(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(xm=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(hy,lp)||lp),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const h=tC({},l);return function eC(s,o,a){const l=new Xv(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const l=a.injector.get(D0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(ID,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(nt(fa))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function tC(s,o){return Array.isArray(o)?o.reduce(tC,s):Object.assign(Object.assign({},s),o)}let D0=(()=>{class s{constructor(a,l,h,g){this._zone=a,this._injector=l,this._exceptionHandler=h,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),E=new N.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{ns.assertNotInAngularZone(),Ap(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ns.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ae.T)(v,E.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let h;h=a instanceof Zv?a:this._injector.get(Wm).resolveComponentFactory(a),this.componentTypes.push(h.componentType);const g=function TD(s){return s.isBoundToModule}(h)?void 0:this._injector.get(mp),E=h.create(fa.NULL,[],l||h.selector,g),C=E.location.nativeElement,A=E.injector.get(bD,null),x=A&&E.injector.get(eM);return A&&x&&x.registerApplication(C,A),E.onDestroy(()=>{this.detachView(E.hostView),ai(this.components,E),x&&x.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;ai(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Kr,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(nt(ns),nt(fa),nt(Zu),nt(gu))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ai(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let rC=!0,fy=!1;function py(){return fy=!0,rC}function A0(){if(fy)throw new Error("Cannot enable prod mode after platform setup.");rC=!1}let MD=(()=>{class s{}return s.__NG_ELEMENT_ID__=xD,s})();function xD(s){return function RD(s,o,a){if(nd(s)&&!a){const l=fr(s.index,o);return new Xi(l,l)}return 47&s.type?new Xi(o[16],o):null}(_n(),Ae(),16==(16&s))}class lC{constructor(){}supports(o){return Wf(o)}create(o){return new BD(o)}}const UD=(s,o)=>o;class BD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||UD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<Iy(l,h,g)?a:l,E=Iy(v,h,g),C=v.currentIndex;if(v===l)h--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)h++;else{g||(g=[]);const A=E-h,x=C-h;if(A!=x){for(let U=0;U<A;U++){const Q=U<g.length?g[U]:g[U]=0,ve=Q+U;x<=ve&&ve<A&&(g[U]=Q+1)}g[v.previousIndex]=x-A}}E!==C&&o(v,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Wf(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,E),l=!0),a=a._next}else h=0,function ZI(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Eh()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new by(a,l),g,h),o}_verifyReinsertion(o,a,l,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Cy),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cy),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class by{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Cy{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new M0,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Iy(s,o,a){const l=s.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class x0{constructor(){}supports(o){return o instanceof Map||F_(o)}create(){return new jD}}class jD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||F_(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const l=new cC(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class cC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Rp(){return new R0([new lC])}let R0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Rp()),deps:[[s,new Ws,new sn]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:Rp}),s})();function dC(){return new P0([new x0])}let P0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||dC()),deps:[[s,new Ws,new sn]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:dC}),s})();const GD=Sp(null,"core",[]);let qD=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(nt(D0))},s.\u0275mod=Br({type:s}),s.\u0275inj=Zt({}),s})()},3942:(Xe,Ee,O)=>{O.d(Ee,{Z:()=>Oe});var d=O(2090),X=O(4859),N=O(9681),ae=O(1877);class ne{constructor(pe,Ce){this._delegate=pe,this.firebase=Ce,(0,N._addComponent)(pe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(pe,Ce=N._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(pe);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Ge=Ke.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:Ce})}_removeServiceInstance(pe,Ce=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ce)}_addComponent(pe){(0,N._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,N._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function fe(){const Ve=function se(Ve){const pe={},Ce={__esModule:!0,initializeApp:function Te(Ue,$={}){const _e=N.initializeApp(Ue,$);if((0,d.r3)(pe,_e.name))return pe[_e.name];const K=new Ve(_e,Ce);return pe[_e.name]=K,K},app:Ke,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(Ue){const $=Ue.name,_e=$.replace("-compat","");if(N._registerComponent(Ue)&&"PUBLIC"===Ue.type){const K=(re=Ke())=>{if("function"!=typeof re[_e])throw ue.create("invalid-app-argument",{appName:$});return re[_e]()};void 0!==Ue.serviceProps&&(0,d.ZB)(K,Ue.serviceProps),Ce[_e]=K,Ve.prototype[_e]=function(...re){return this._getService.bind(this,$).apply(this,Ue.multipleInstances?re:[])}}return"PUBLIC"===Ue.type?Ce[_e]:null},removeApp:function Ge(Ue){delete pe[Ue]},useAsService:function Be(Ue,$){return"serverAuth"===$?null:$},modularAPIs:N}};function Ke(Ue){if(!(0,d.r3)(pe,Ue=Ue||N._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ue});return pe[Ue]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function we(){return Object.keys(pe).map(Ue=>pe[Ue])}}),Ke.App=Ve,Ce}(ne);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(Ce){(0,d.ZB)(Ve,Ce)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ve}(),j=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=H;!function Se(Ve){(0,N.registerVersion)("@firebase/app-compat","0.1.26",Ve)}()},9681:(Xe,Ee,O)=>{O.r(Ee),O.d(Ee,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>ln,_addOrOverwriteComponent:()=>tn,_apps:()=>rn,_clearComponents:()=>os,_components:()=>xn,_getProvider:()=>Zt,_registerComponent:()=>Vr,_removeServiceInstance:()=>Lt,deleteApp:()=>yt,getApp:()=>li,getApps:()=>Ii,initializeApp:()=>Ss,onLog:()=>Rn,registerVersion:()=>Dn,setLogLevel:()=>Xs});var d=O(5861),X=O(4859),N=O(1877),ae=O(2090),ne=O(8766);class me{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function ue(G){const J=G.getComponent();return"VERSION"===(null==J?void 0:J.type)}(xe)){const Je=xe.getImmediate();return`${Je.library}/${Je.version}`}return null}).filter(xe=>xe).join(" ")}}const se="@firebase/app",H=new N.Yd("@firebase/app"),Ut="[DEFAULT]",We={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,xn=new Map;function ln(G,J){try{G.container.addComponent(J)}catch(xe){H.debug(`Component ${J.name} failed to register with FirebaseApp ${G.name}`,xe)}}function tn(G,J){G.container.addOrOverwriteComponent(J)}function Vr(G){const J=G.name;if(xn.has(J))return H.debug(`There were multiple attempts to register component ${J}.`),!1;xn.set(J,G);for(const xe of rn.values())ln(xe,G);return!0}function Zt(G,J){const xe=G.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),G.container.getProvider(J)}function Lt(G,J,xe=Ut){Zt(G,J).clearInstance(xe)}function os(){xn.clear()}const Ir=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ur{constructor(J,xe,Je){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=Je,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}const ki="9.8.2";function Ss(G,J={}){"object"!=typeof J&&(J={name:J});const xe=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},J),Je=xe.name;if("string"!=typeof Je||!Je)throw Ir.create("bad-app-name",{appName:String(Je)});const pt=rn.get(Je);if(pt){if((0,ae.vZ)(G,pt.options)&&(0,ae.vZ)(xe,pt.config))return pt;throw Ir.create("duplicate-app",{appName:Je})}const Dt=new X.H0(Je);for(const Ct of xn.values())Dt.addComponent(Ct);const mn=new Ur(G,xe,Dt);return rn.set(Je,mn),mn}function li(G=Ut){const J=rn.get(G);if(!J)throw Ir.create("no-app",{appName:G});return J}function Ii(){return Array.from(rn.values())}function yt(G){return ci.apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(G){const J=G.name;rn.has(J)&&(rn.delete(J),yield Promise.all(G.container.getProviders().map(xe=>xe.delete())),G.isDeleted=!0)})).apply(this,arguments)}function Dn(G,J,xe){var Je;let pt=null!==(Je=We[G])&&void 0!==Je?Je:G;xe&&(pt+=`-${xe}`);const Dt=pt.match(/\s|\//),mn=J.match(/\s|\//);if(Dt||mn){const Ct=[`Unable to register library "${pt}" with version "${J}":`];return Dt&&Ct.push(`library name "${pt}" contains illegal characters (whitespace or "/")`),Dt&&mn&&Ct.push("and"),mn&&Ct.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void H.warn(Ct.join(" "))}Vr(new X.wA(`${pt}-version`,()=>({library:pt,version:J}),"VERSION"))}function Rn(G,J){if(null!==G&&"function"!=typeof G)throw Ir.create("invalid-log-argument");(0,N.Am)(G,J)}function Xs(G){(0,N.Ub)(G)}const Bn="firebase-heartbeat-store";let Ti=null;function Uo(){return Ti||(Ti=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:(G,J)=>{0===J&&G.createObjectStore(Bn)}}).catch(G=>{throw Ir.create("storage-open",{originalErrorMessage:G.message})})),Ti}function at(){return(at=(0,d.Z)(function*(G){try{return(yield Uo()).transaction(Bn).objectStore(Bn).get(hi(G))}catch(J){throw Ir.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function Et(G,J){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(G,J){try{const Je=(yield Uo()).transaction(Bn,"readwrite");return yield Je.objectStore(Bn).put(J,hi(G)),Je.done}catch(xe){throw Ir.create("storage-set",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function hi(G){return`${G.name}!${G.options.appId}`}class Dr{constructor(J){this.container=J,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new q(xe),this._heartbeatsCachePromise=this._storage.read().then(Je=>(this._heartbeatsCache=Je,Je))}triggerHeartbeat(){var J=this;return(0,d.Z)(function*(){const Je=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pt=Ar();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==pt&&!J._heartbeatsCache.heartbeats.some(Dt=>Dt.date===pt))return J._heartbeatsCache.heartbeats.push({date:pt,agent:Je}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Dt=>{const mn=new Date(Dt.date).valueOf();return Date.now()-mn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,d.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const xe=Ar(),{heartbeatsToSend:Je,unsentEntries:pt}=function V(G,J=1024){const xe=[];let Je=G.slice();for(const pt of G){const Dt=xe.find(mn=>mn.agent===pt.agent);if(Dt){if(Dt.dates.push(pt.date),W(xe)>J){Dt.dates.pop();break}}else if(xe.push({agent:pt.agent,dates:[pt.date]}),W(xe)>J){xe.pop();break}Je=Je.slice(1)}return{heartbeatsToSend:xe,unsentEntries:Je}}(J._heartbeatsCache.heartbeats),Dt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Je}));return J._heartbeatsCache.lastSentHeartbeatDate=xe,pt.length>0?(J._heartbeatsCache.heartbeats=pt,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Dt})()}}function Ar(){return(new Date).toISOString().substring(0,10)}class q{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,d.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function zt(G){return at.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var xe=this;return(0,d.Z)(function*(){var Je;if(yield xe._canUseIndexedDBPromise){const Dt=yield xe.read();return Et(xe.app,{lastSentHeartbeatDate:null!==(Je=J.lastSentHeartbeatDate)&&void 0!==Je?Je:Dt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var xe=this;return(0,d.Z)(function*(){var Je;if(yield xe._canUseIndexedDBPromise){const Dt=yield xe.read();return Et(xe.app,{lastSentHeartbeatDate:null!==(Je=J.lastSentHeartbeatDate)&&void 0!==Je?Je:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...J.heartbeats]})}})()}}function W(G){return(0,ae.L)(JSON.stringify({version:2,heartbeats:G})).length}!function Ie(G){Vr(new X.wA("platform-logger",J=>new me(J),"PRIVATE")),Vr(new X.wA("heartbeat",J=>new Dr(J),"PRIVATE")),Dn(se,"0.7.25",G),Dn(se,"0.7.25","esm2017"),Dn("fire-js","")}("")},4859:(Xe,Ee,O)=>{O.d(Ee,{H0:()=>se,wA:()=>N});var d=O(5861),X=O(2090);class N{constructor(H,j,te){this.name=H,this.instanceFactory=j,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class ne{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const te=new X.BH;if(this.instancesDeferred.set(j,te),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&te.resolve(He)}catch(He){}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const te=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),He=null!==(j=null==H?void 0:H.optional)&&void 0!==j&&j;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Se){if(He)return null;throw Se}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ue(fe){return"EAGER"===fe.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,te]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Se=this.getOrInitializeService({instanceIdentifier:He});te.resolve(Se)}catch(Se){}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,d.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...j.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,te=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:te,options:j});for(const[Se,Oe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Se)&&Oe.resolve(He);return He}onInit(H,j){var te;const He=this.normalizeInstanceIdentifier(j),Se=null!==(te=this.onInitCallbacks.get(He))&&void 0!==te?te:new Set;Se.add(H),this.onInitCallbacks.set(He,Se);const Oe=this.instances.get(He);return Oe&&H(Oe,He),()=>{Se.delete(H)}}invokeOnInitCallbacks(H,j){const te=this.onInitCallbacks.get(j);if(te)for(const He of te)try{He(H,j)}catch(Se){}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let te=this.instances.get(H);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=H,fe===ae?void 0:fe),options:j}),this.instances.set(H,te),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(te,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,te)}catch(He){}var fe;return te||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new ne(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(Xe,Ee,O)=>{O.d(Ee,{Am:()=>fe,Ub:()=>se,Yd:()=>ue,in:()=>X});const d=[];var X=(()=>{return(H=X||(X={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",X;var H})();const N={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,ne={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},me=(H,j,...te)=>{if(j<H.logLevel)return;const He=(new Date).toISOString(),Se=ne[j];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Se](`[${He}]  ${H.name}:`,...te)};class ue{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=me,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in X))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...j),this._logHandler(this,X.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...j),this._logHandler(this,X.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,X.INFO,...j),this._logHandler(this,X.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,X.WARN,...j),this._logHandler(this,X.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...j),this._logHandler(this,X.ERROR,...j)}}function se(H){d.forEach(j=>{j.setLogLevel(H)})}function fe(H,j){for(const te of d){let He=null;j&&j.level&&(He=N[j.level]),te.userLogHandler=null===H?null:(Se,Oe,...Ve)=>{const pe=Ve.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(Ge){return null}}).filter(Ce=>Ce).join(" ");Oe>=(null!=He?He:Se.logLevel)&&H({level:X[Oe].toLowerCase(),message:pe,args:Ve,type:Se.name})}}}},8766:(Xe,Ee,O)=>{O.d(Ee,{Lj:()=>Te,X3:()=>Ke});var d=O(5861);let N,ae;const ue=new WeakMap,se=new WeakMap,fe=new WeakMap,H=new WeakMap,j=new WeakMap;let Se={get($,_e,K){if($ instanceof IDBTransaction){if("done"===_e)return se.get($);if("objectStoreNames"===_e)return $.objectStoreNames||fe.get($);if("store"===_e)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ce($[_e])},set:($,_e,K)=>($[_e]=K,!0),has:($,_e)=>$ instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in $};function pe($){return"function"==typeof $?function Ve($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(..._e){return $.apply(Ge(this),_e),Ce(ue.get(this))}:function(..._e){return Ce($.apply(Ge(this),_e))}:function(_e,...K){const re=$.call(Ge(this),_e,...K);return fe.set(re,_e.sort?_e.sort():[_e]),Ce(re)}}($):($ instanceof IDBTransaction&&function He($){if(se.has($))return;const _e=new Promise((K,re)=>{const ee=()=>{$.removeEventListener("complete",ye),$.removeEventListener("error",oe),$.removeEventListener("abort",oe)},ye=()=>{K(),ee()},oe=()=>{re($.error||new DOMException("AbortError","AbortError")),ee()};$.addEventListener("complete",ye),$.addEventListener("error",oe),$.addEventListener("abort",oe)});se.set($,_e)}($),(($,_e)=>_e.some(K=>$ instanceof K))($,function ne(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Se):$)}function Ce($){if($ instanceof IDBRequest)return function te($){const _e=new Promise((K,re)=>{const ee=()=>{$.removeEventListener("success",ye),$.removeEventListener("error",oe)},ye=()=>{K(Ce($.result)),ee()},oe=()=>{re($.error),ee()};$.addEventListener("success",ye),$.addEventListener("error",oe)});return _e.then(K=>{K instanceof IDBCursor&&ue.set(K,$)}).catch(()=>{}),j.set(_e,$),_e}($);if(H.has($))return H.get($);const _e=pe($);return _e!==$&&(H.set($,_e),j.set(_e,$)),_e}const Ge=$=>j.get($);function Ke($,_e,{blocked:K,upgrade:re,blocking:ee,terminated:ye}={}){const oe=indexedDB.open($,_e),Ne=Ce(oe);return re&&oe.addEventListener("upgradeneeded",ht=>{re(Ce(oe.result),ht.oldVersion,ht.newVersion,Ce(oe.transaction))}),K&&oe.addEventListener("blocked",()=>K()),Ne.then(ht=>{ye&&ht.addEventListener("close",()=>ye()),ee&&ht.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Ne}function Te($,{blocked:_e}={}){const K=indexedDB.deleteDatabase($);return _e&&K.addEventListener("blocked",()=>_e()),Ce(K).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Be=new Map;function Ue($,_e){if(!($ instanceof IDBDatabase)||_e in $||"string"!=typeof _e)return;if(Be.get(_e))return Be.get(_e);const K=_e.replace(/FromIndex$/,""),re=_e!==K,ee=be.includes(K);if(!(K in(re?IDBIndex:IDBObjectStore).prototype)||!ee&&!we.includes(K))return;const ye=function(){var oe=(0,d.Z)(function*(Ne,...ht){const qt=this.transaction(Ne,ee?"readwrite":"readonly");let Ut=qt.store;return re&&(Ut=Ut.index(ht.shift())),(yield Promise.all([Ut[K](...ht),ee&&qt.done]))[0]});return function(ht){return oe.apply(this,arguments)}}();return Be.set(_e,ye),ye}!function Oe($){Se=$(Se)}($=>mO(gO({},$),{get:(_e,K,re)=>Ue(_e,K)||$.get(_e,K,re),has:(_e,K)=>!!Ue(_e,K)||$.has(_e,K)}))},5861:(Xe,Ee,O)=>{function d(N,ae,ne,me,ue,se,fe){try{var H=N[se](fe),j=H.value}catch(te){return void ne(te)}H.done?ae(j):Promise.resolve(j).then(me,ue)}function X(N){return function(){var ae=this,ne=arguments;return new Promise(function(me,ue){var se=N.apply(ae,ne);function fe(j){d(se,me,ue,fe,H,"next",j)}function H(j){d(se,me,ue,fe,H,"throw",j)}fe(void 0)})}}O.d(Ee,{Z:()=>X})}},Xe=>{Xe(Xe.s=584)}]);